"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4328],{57616:function(e,n,t){t.d(n,{Z:function(){return R}});var r=t(27812),o=t(67294),i=t(96486),a=t(5616),s=t(11057),c=t(18972),l=t(21023),u=t(15861),d=t(18360),p=t(66242),m=t(78445),f=t(44267),h=t(74721),g=t(10367),x=t(86831),y=t(26495),j=t(23148),b=t(74975),v=t(59499),Z=t(72882),_=t(7906),w=t(53184),C=t(68509),P=t(53252),O=t(295),I=t(61369),$=t(85893);function k(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function N(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?k(Object(t),!0).forEach(function(n){(0,v.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var S={week:"Last 7 days",twoWeeks:"Last 14 days",month:"Last 30 days",year:"Year"},A=function(e){var n=e.data;return(0,$.jsx)(a.Z,{sx:{display:"flex",marginLeft:4},children:n.map(function(e,n){return(0,$.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",marginLeft:1},children:[(0,$.jsx)(I.Z,{sx:{color:e.color,borderRadius:"2px"}}),(0,$.jsx)(u.Z,{sx:{marginLeft:1},children:e.label})]},n)})})},L=function(e){var n=e.data,t=e.timeRange,r=e.selectedGroupName,o=n.today||[],i=n[t]||[],s=o.find(function(e){return e.groupName===r}),c=i.find(function(e){return e.groupName===r});if(!s||!c)return null;var d=s.chartData.map(function(e,n){var t=c.chartData[n]||{},r=e.data[0],o=t.data[0],i=0;return r>o&&r>0?i=Math.round((r-o)/r*100):o>0&&(i=-Math.round((o-r)/o*100)),N(N({},e),{},{percent:i,color:r>o?"#00C853":"#F24236"})});return(0,$.jsx)(Z.Z,{component:a.Z,children:(0,$.jsxs)(_.Z,{size:"small",className:"value",children:[(0,$.jsx)(w.Z,{children:(0,$.jsxs)(C.Z,{children:[(0,$.jsx)(P.Z,{children:"Source"}),(0,$.jsx)(P.Z,{align:"right",children:"Today"}),(0,$.jsxs)(P.Z,{align:"right",children:["For the last ",S[t]]})]})}),(0,$.jsx)(O.Z,{children:d.map(function(e,n){return(0,$.jsxs)(C.Z,{children:[(0,$.jsx)(P.Z,{component:"th",scope:"row",children:e.label}),(0,$.jsx)(P.Z,{align:"right",children:s.chartData[n].data}),(0,$.jsx)(P.Z,{align:"right",children:(0,$.jsx)(l.Z,{title:"In ".concat(S[t]," ago it was ").concat(c.chartData[n].data),children:(0,$.jsx)(u.Z,{sx:{color:e.color},children:e.percent>0?"+".concat(e.percent,"%"):"".concat(e.percent,"%")})})})]},n)})})]})})};j.kL.register.apply(j.kL,(0,r.Z)(j.zX));var T=function(e){e.asAt;var n=e.name,t=e.timeRange,r=e.selectedGroupName,o=e.data,i=y.$Q,a=null,s=null,c={labels:[],datasets:[]},l={};switch(n){case"chartJobMetrics":if(i=y.$Q,l={maintainAspectRatio:!1,plugins:{aspectRatio:1,responsive:!0,legend:{display:!1}},scales:{y:{grid:{display:!0},stacked:!1,ticks:{stepSize:2}},x:{stacked:!1,grid:{color:"transparent"}}}},o&&o[t]){var u=o[t].find(function(e){return e.groupName===r});u&&(a=A({data:u.chartData}),u.chartData.forEach(function(e){if("object"===(0,x.Z)(e.data)&&e.data.length){var n;if(Object.keys(e.data[0]).includes("name")&&Object.keys(e.data[0]).includes("value")){var t=[],r=[],o=[];e.data.forEach(function(n){t.push(n.name),r.push(n.value),o.push(e.color)}),c.labels=t.map(function(e,n){return"".concat(n+1," - ").concat(e)}),c.datasets.push({label:e.label,data:r,backgroundColor:o})}else if(Object.keys((i=e).data[0]).includes("date")&&Object.keys(i.data[0]).includes("values")){var i,a,s=[],l=[];e.data.forEach(function(e){s.push((0,b.Z)(new Date(e.date),e.formatDate||"dd/MM")),l.push(e.values.length)}),c.labels=s,c.datasets.push({label:e.label,data:l,backgroundColor:e.color,barPercentage:.75,categoryPercentage:.5})}else if(Object.keys((a=e).data[0]).includes("date")&&Object.keys(a.data[0]).includes("sum")){var u=[],d=[];e.data.forEach(function(e){u.push((0,b.Z)(new Date(e.date),e.formatDate||"dd/MM"));var n=e.sum.reduce(function(e,n){return e+n},0);d.push(n)}),c.labels=u,c.datasets.push({label:e.label,data:d,backgroundColor:e.color,barPercentage:.75,categoryPercentage:.5})}}else c.datasets.push({label:e.label,data:e.data,backgroundColor:e.color,barPercentage:.75,categoryPercentage:.5})}))}break;case"numberOfNotifications":if(i=y.$I,o&&o[t]){var d=o[t].find(function(e){return e.groupName===r});if(d){s=L({data:o,timeRange:t,selectedGroupName:r});var p,m=[],f=[],h=[];d.chartData.forEach(function(e){m.push(e.label),f.push(e.data),h.push(e.color)}),(p=c.labels).push.apply(p,m),c.datasets.push({data:f,backgroundColor:h,cutout:120})}l={plugins:{aspectRatio:1,responsive:!0,legend:{display:!1}}}}}return{chart:function(){return(0,$.jsx)(i,{data:c,options:l})},shortLegend:function(){return a},longLegend:function(){return s}}},E=function(e){var n=e.asAt,t=void 0===n?new Date:n,d=e.title,p=e.description,m=void 0===p?e.title:p,f=e.showLegend,g=e.size,x=e.name,y=e.data,j=void 0===y?{}:y,b=e.theme,v=e.sx,Z=(0,o.useState)("week"),_=Z[0],w=Z[1],C=(0,o.useState)({groupName:j[_][0].groupName,groupLabel:j[_][0].groupLabel,groupDescription:j[_][0].groupDescription}),P=C[0],O=C[1];(0,o.useEffect)(function(){"customersBySpend"===P.groupName||"revenuesPerYear"===P.groupName?w("year"):w("week")},[P]);var I,k,N,A,L,E=function(e){O(e)},R=T({asAt:t,name:void 0===x?"":x,timeRange:_,selectedGroupName:P.groupName,data:j,theme:b,showLegend:void 0!==f&&f}),H=R.chart,G=R.shortLegend,Y=R.longLegend;return(0,$.jsx)(U,{size:void 0===g?1:g,sx:v,children:(0,$.jsxs)(z,{children:[(0,$.jsx)(M,{title:(I=Object.keys(j).reduce(function(e,n){return e.push.apply(e,(0,r.Z)(j[n].map(function(e){return{groupName:e.groupName,groupLabel:e.groupLabel,groupDescription:e.groupDescription}}))),e},[]),k=(0,i.uniqBy)(I,function(e){return e.groupName}),N=P.groupLabel||d,A=P.groupDescription||m,k.length>1?(0,$.jsxs)(a.Z,{sx:{display:"flex",alingItems:"center"},children:[(0,$.jsx)(D,{size:"small",value:P.groupName,onChange:function(e){E(k.find(function(n){return n.groupName===e.target.value}))},children:k.map(function(e){return(0,$.jsx)(c.Z,{value:e.groupName,children:e.groupLabel})})}),(0,$.jsx)(l.Z,{title:A,children:(0,$.jsx)(h.Z,{fontSize:"200",sx:{marginLeft:.5,color:"#cfd9e0"}})}),G&&G()]}):(0,$.jsxs)(a.Z,{sx:{display:"flex",alingItems:"center"},children:[(0,$.jsx)(u.Z,{children:N}),(0,$.jsx)(l.Z,{title:A,children:(0,$.jsx)(h.Z,{fontSize:"200",sx:{marginLeft:.5,color:"#cfd9e0"}})}),G&&G()]})),action:(L=Object.keys(S),"customersBySpend"===P.groupName?L.splice(0,L.length-1):"revenuesPerYear"===P.groupName?L.splice(0,L.length-1):L.splice(-1,1),(0,$.jsx)(a.Z,{display:"flex",children:L.map(function(e,n){return(0,$.jsx)(s.Z,{color:"secondary",sx:{textTransform:"none"},onClick:function(e){return w(e.target.value)},value:e,disabled:_===e,children:S[e]},n)})}))}),Y()?(0,$.jsxs)(F,{children:[(0,$.jsx)(a.Z,{children:H()}),(0,$.jsx)(a.Z,{ml:3,children:Y()})]}):(0,$.jsx)(q,{children:H()})]})},d)},D=(0,g.ZP)(d.Z).withConfig({displayName:"chart__StyledSelect",componentId:"sc-taln9x-0"})([".MuiSelect-select{padding:0;}& *{font-size:1.063rem !important;border:0;border-width:0 !important;}"]),U=(0,g.ZP)(p.Z).withConfig({displayName:"chart__StyledCard",componentId:"sc-taln9x-1"})(["min-width:300px;width:100%;height:calc(400px * ",");& .MuiCardHeader-root{padding:16px 16px 0 16px;}&.MuiPaper-root{overflow-x:scroll;}"],function(e){return e.size[1]}),z=g.ZP.div.withConfig({displayName:"chart__StyledCardArea",componentId:"sc-taln9x-2"})(["position:relative;"]),M=(0,g.ZP)(m.Z).withConfig({displayName:"chart__StyledCardHeader",componentId:"sc-taln9x-3"})(["& .MuiTypography-root{font-family:",";font-size:1.063rem !important;color:",";}"],function(e){return e.theme.THEME_TYPOGRAPHY.newFont},function(e){return e.theme.THEME_TYPOGRAPHY.newFontColor}),q=(0,g.ZP)(f.Z).withConfig({displayName:"chart__StyledCardContent",componentId:"sc-taln9x-4"})(["min-width:700px;font-family:",";max-height:360px;.value{font-size:1.5rem !important;}display:flex;flex-direction:column;"],function(e){return e.theme.THEME_TYPOGRAPHY.newFont}),F=(0,g.ZP)(f.Z).withConfig({displayName:"chart__StyledCardContentWithLegend",componentId:"sc-taln9x-5"})(["min-width:700px;font-family:",";max-height:360px;.value{font-size:1.5rem !important;}display:flex;flex-direction:row;align-items:center;justify-content:center;"],function(e){return e.theme.THEME_TYPOGRAPHY.newFont}),R=(0,g.Zz)(E)},35441:function(e,n,t){t.d(n,{Z:function(){return D}});var r=t(27812),o=t(67294),i=t(96486),a=t(5616),s=t(18972),c=t(21023),l=t(15861),u=t(18360),d=t(66242),p=t(78445),m=t(44267),f=t(74721),h=t(10367),g=t(59499),x=t(33458),y=t(98456),j=t(14564),b=t(86886),v=t(825),Z=t(87043),_=t(55863),w=t(85893);function C(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function P(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?C(Object(t),!0).forEach(function(n){(0,g.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var O={supplier:"/static/icons/airport_shuttle_black_24dp.svg",job:"/static/icons/location_on_black_24dp.svg"},I=(0,x.WS)((0,x.OI)(function(e){var n=e.markers,t=void 0===n?[]:n,r=(0,o.useState)(null),i=r[0],a=r[1],s=(0,o.useState)(null),c=s[0],l=s[1],u=function(e,n){a(e.domEvent.currentTarget),l(n)},d=function(){a(null),l(null)},p=Boolean(i);return(0,w.jsxs)(x.b6,{defaultZoom:1,defaultCenter:{lat:-34.397,lng:150.644},children:[(0,w.jsx)(k,{id:p?"simple-popover":void 0,anchorEl:i,handleClose:d,marker:c}),t.length&&t.map(function(e){return(0,w.jsx)(x.Jx,{position:{lat:e.lat,lng:e.lng},title:e.title,icon:O[e.icon],clickable:!0,onClick:function(n){return u(n,e)}})})]})})),$=function(e){var n=e.timeRange,t=e.selectedGroupName,r=e.data,o=e.mapSX,i={googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat(Z.ie.map,"&v=3.exp&libraries=geometry,drawing,places"),loadingElement:(0,w.jsx)(a.Z,{className:"loadingComponent",sx:{height:"100%"},children:(0,w.jsx)(y.Z,{})}),containerElement:(0,w.jsx)(a.Z,{className:"containerComponent",sx:o}),mapElement:(0,w.jsx)(a.Z,{className:"mapElement",sx:{height:"100%"}})},s=[],c=r[n].find(function(e){return e.groupName===t});return c&&c.chartData.forEach(function(e){var n=e.data,r=e.markerIcon;n.forEach(function(e){s.push(P(P({},e),{},{groupName:t,title:e.name,lat:e.position.lat,lng:e.position.lng,icon:r}))})}),{map:function(){return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("link",{href:"https://fonts.googleapis.com/icon?family=Material+Icons",rel:"stylesheet"}),(0,w.jsx)(I,P(P({},i),{},{markers:s}))]})}}},k=function(e){var n,t,r,o,i,s,c,u,d,p=e.id,m=e.anchorEl,f=e.handleClose,h=e.marker,g=void 0===h?{}:h,x=(0,_.q)(),y=null===(n=x.admin)||void 0===n?void 0:null===(t=n.jobSetting)||void 0===t?void 0:t.jobNumberPrefix,Z=null===(r=x.admin)||void 0===r?void 0:null===(o=r.jobSetting)||void 0===o?void 0:o.jobNumberSuffix;return(0,w.jsx)(j.ZP,{id:p,open:open&&g,anchorEl:m,onClose:f,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,w.jsxs)(a.Z,{children:[(null==g?void 0:g.groupName)==="jobsLocation"&&(0,w.jsxs)(b.ZP,{children:[(0,w.jsx)(v.D,{id:g.id,number:g.number,numberPrefix:y,numberSuffix:Z,openCanvas:!0,type:g.type}),(0,w.jsx)(l.Z,{children:null===(i=g.location)||void 0===i?void 0:i.name}),(0,w.jsx)(l.Z,{children:null===(s=g.service)||void 0===s?void 0:s.name}),(0,w.jsx)(l.Z,{children:null===(c=g.supplier)||void 0===c?void 0:c.name})]}),(null==g?void 0:g.groupName)==="suppliersLocation"&&(0,w.jsxs)(b.ZP,{children:[(0,w.jsx)(l.Z,{children:null===(u=g.account)||void 0===u?void 0:u.name}),(0,w.jsx)(l.Z,{children:null===(d=g.user)||void 0===d?void 0:d.fullName})]})]})})},N={suppliersLocation:{month:"Last 30 days"},jobsLocation:{today:"Today",tomorrow:"Tomorrow",nextWeek:"Next 7 days",nextTwoWeeks:"Next 14 days",nextMonth:"Next 30 days",week:"Last 7 days",month:"Last 30 days",threeMonth:"Last 90 days"}},S=function(e){var n=e.title,t=e.size,u=void 0===t?1:t,d=e.data,p=void 0===d?{}:d,m=e.sx,h=e.onChangeChartGroup,g=void 0===h?function(){}:h,x=(0,o.useState)("month"),y=x[0],j=x[1],b=(0,o.useState)({groupName:p[y][0].groupName,groupLabel:p[y][0].groupLabel,groupDescription:p[y][0].groupDescription}),v=b[0],Z=b[1];(0,o.useEffect)(function(){g(v.groupName,y)},[v,y]);var _,C,P,O,I,k=function(e){Z(e)},S=$({timeRange:y,selectedGroupName:v.groupName,data:p,mapSX:{minWidth:"300px",width:"100%",height:"calc(400px * ".concat(u[1],")")}}).map;return(0,w.jsxs)(L,{size:u,sx:m,children:[(0,w.jsx)(T,{title:(_=Object.keys(p).reduce(function(e,n){return e.push.apply(e,(0,r.Z)(p[n].map(function(e){return{groupName:e.groupName,groupLabel:e.groupLabel,groupDescription:e.groupDescription}}))),e},[]),C=(0,i.uniqBy)(_,function(e){return e.groupName}),P=v.groupLabel||n,O=v.groupDescription,C.length>1?(0,w.jsxs)(a.Z,{sx:{display:"flex",alingItems:"center"},children:[(0,w.jsx)(A,{size:"small",value:v.groupName,onChange:function(e){k(C.find(function(n){return n.groupName===e.target.value}))},children:C.map(function(e){return(0,w.jsx)(s.Z,{value:e.groupName,children:e.groupLabel})})}),O&&(0,w.jsx)(c.Z,{title:O,children:(0,w.jsx)(f.Z,{fontSize:"200",sx:{marginLeft:.5,color:"#cfd9e0"}})})]}):(0,w.jsxs)(a.Z,{sx:{display:"flex",alingItems:"center"},children:[(0,w.jsx)(l.Z,{children:P}),(0,w.jsx)(c.Z,{title:O,children:(0,w.jsx)(f.Z,{fontSize:"200",sx:{marginLeft:.5,color:"#cfd9e0"}})})]})),action:(I=Object.keys(N[v.groupName]),(0,w.jsx)(a.Z,{sx:{display:"flex",alingItems:"center"},children:(0,w.jsx)(A,{size:"small",value:y,children:I.map(function(e,n){return(0,w.jsx)(s.Z,{value:e,onClick:function(){return j(e)},children:N[v.groupName][e]},e)})})}))}),(0,w.jsx)(E,{children:S()})]},n)},A=(0,h.ZP)(u.Z).withConfig({displayName:"mapChart__StyledSelect",componentId:"sc-1pufp49-0"})([".MuiSelect-select{padding:0;}& *{font-size:1.063rem !important;border:0;border-width:0 !important;}"]),L=(0,h.ZP)(d.Z).withConfig({displayName:"mapChart__StyledCard",componentId:"sc-1pufp49-1"})(["min-width:300px;width:100%;height:calc(400px * ",");& .MuiCardHeader-root{padding:16px 16px 0 16px;}"],function(e){return e.size[1]}),T=(0,h.ZP)(p.Z).withConfig({displayName:"mapChart__StyledCardHeader",componentId:"sc-1pufp49-2"})(["& .MuiTypography-root{font-family:",";font-size:1.063rem !important;color:",";}"],function(e){return e.theme.THEME_TYPOGRAPHY.newFont},function(e){return e.theme.THEME_TYPOGRAPHY.newFontColor}),E=(0,h.ZP)(m.Z).withConfig({displayName:"mapChart__StyledCardContent",componentId:"sc-1pufp49-3"})(["font-family:",";max-height:360px;.value{font-size:1.5rem !important;}display:flex;flex-direction:column;"],function(e){return e.theme.THEME_TYPOGRAPHY.newFont}),D=(0,h.Zz)(S)},63871:function(e,n,t){var r=t(59499),o=t(4730),i=t(86886),a=t(9974),s=t(66242),c=t(96540),l=t(10367),u=t(85893),d=["disabled","onAddCard"];function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var f=function(e){var n=e.disabled,t=e.onAddCard,r=(0,o.Z)(e,d);return(0,u.jsx)(i.ZP,m(m({item:!0},r),{},{children:(0,u.jsx)(h,{size:[1,1],children:(0,u.jsx)(a.Z,{disabled:void 0!==n&&n,onClick:t,sx:{display:"flex",height:"100%"},children:(0,u.jsx)(c.Z,{fontSize:"large"})})})}),"add-tile-card")},h=(0,l.ZP)(s.Z).withConfig({displayName:"nullableTile__StyledCard",componentId:"sc-19aom8w-0"})(["min-width:300px;height:calc(187px * ",");background:#edf0f2 !important;& .MuiCardHeader-root{padding:16px 16px 0 16px;}& .MuiCardContent-root{padding:10px 16px 16px 16px;}"],function(e){return e.size[1]});n.Z=f},57778:function(e,n,t){var r=t(4730),o=t(59499),i=t(16835),a=t(67294),s=t(11163),c=t.n(s),l=t(11082),u=t(21023),d=t(15861),p=t(5616),m=t(94054),f=t(69661),h=t(50135),g=t(11057),x=t(86886),y=t(26447),j=t(93946),b=t(18972),v=t(62023),Z=t(25464),_=t(66242),w=t(78445),C=t(44267),P=t(18360),O=t(26130),I=t(23508),$=t(60181),k=t(94895),N=t(74721),S=t(10367),A=t(85893),L=["title","subtitle","name","size","values","valueType","description","to","colourConfig","greaterIsBetter","editable","deletable","onConfigChange","onVersusChange","onEdit","onDelete"];function T(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function E(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?T(Object(t),!0).forEach(function(n){(0,o.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var D={success:"#18A999",danger:"#F1C40F",warning:"#F24236"},U={week:"7 days",month:"30 days",threeMonth:"3 months",year:"1 year"},z=function(e,n){var t="#1565C0",r=0;return Object.keys(n).forEach(function(o){var a=(0,i.Z)(n[o],2),s=a[0],c=a[1];if(Number(e)>=s&&(Number(e)<=c||null===c)){switch(o){case"success":r=1;break;case"danger":r=0;break;case"warning":r=-1}t=D[o]}}),{color:t,direction:r}},M=function(e){var n=e.values,t=e.selectedOption,r=e.greaterIsBetter;if("today"===t)return 0;var o=n.today,i=n[t],a=0,s=0;o===i?(s=0,a=0):o>i&&0!==i?(s=1,a=Math.round((o/i-1)*100)):o<i&&0!==i&&(s=-1,a=Math.round((o/i-1)*100));var c=o>i&&r?"#00C853":"#F24236";return{Component:function(){return(0,A.jsx)(u.Z,{title:"In ".concat(U[t]," ago it was ").concat(i),children:(0,A.jsx)(d.Z,{sx:{color:c},children:s>0?"+".concat(a,"%"):"".concat(a,"%")})})},direction:s}},q=function(e){var n=e.colourConfig,t=e.onSubmit,r=(0,a.useState)(n),o=r[0],i=r[1],s={type:"number",variant:"standard",size:"small",sx:{mx:2,width:"40px"}},c={display:"flex",flexDirection:"row",paddingLeft:"20px",m:1,alignItems:"center"};return(0,A.jsxs)(p.Z,{display:"flex",flexDirection:"column",sx:{width:250},children:[(0,A.jsxs)(m.Z,{sx:c,children:[(0,A.jsx)(f.Z,{"aria-label":"success-set",size:"small",sx:{bgcolor:D.success},children:(0,A.jsx)($.Z,{})}),(0,A.jsxs)(p.Z,{width:"100%",display:"flex",justifyContent:"space-around",children:[(0,A.jsx)(h.Z,E(E({},s),{},{inputProps:{style:{textAlign:"center"}},value:o.success[0],onChange:function(e){return i(E(E({},o),{},{success:[Number(e.target.value),o.success[1]]}))}}))," - ",(0,A.jsx)(h.Z,E(E({},s),{},{inputProps:{style:{textAlign:"center"}},value:o.success[1],onChange:function(e){return i(E(E({},o),{},{success:[o.success[0],Number(e.target.value)]}))}}))]})]}),(0,A.jsxs)(m.Z,{sx:c,children:[(0,A.jsx)(f.Z,{"aria-label":"danger-set",size:"small",sx:{bgcolor:D.danger},children:(0,A.jsx)(k.Z,{})}),(0,A.jsxs)(p.Z,{width:"100%",display:"flex",justifyContent:"space-around",children:[(0,A.jsx)(h.Z,E(E({},s),{},{inputProps:{style:{textAlign:"center"}},value:o.danger[0],onChange:function(e){return i(E(E({},o),{},{danger:[Number(e.target.value),o.danger[1]]}))}}))," - ",(0,A.jsx)(h.Z,E(E({},s),{},{inputProps:{style:{textAlign:"center"}},value:o.danger[1],onChange:function(e){return i(E(E({},o),{},{danger:[o.danger[0],Number(e.target.value)]}))}}))]})]}),(0,A.jsxs)(m.Z,{sx:c,children:[(0,A.jsx)(f.Z,{"aria-label":"warning-set",size:"small",sx:{bgcolor:D.warning,mr:2},children:(0,A.jsx)(I.Z,{})}),(0,A.jsxs)(p.Z,{width:"100%",display:"flex",justifyContent:"space-around",children:["more then",(0,A.jsx)(h.Z,E(E({},s),{},{inputProps:{style:{textAlign:"center"}},value:o.warning[0],onChange:function(e){return i(E(E({},o),{},{warning:[Number(e.target.value),null]}))}}))]})]}),(0,A.jsx)(p.Z,{display:"flex",justifyContent:"flex-end",sx:{mr:2},children:(0,A.jsx)(g.Z,{color:"secondary",variant:"contained",size:"small",onClick:function(){return t(o)},children:"Save"})})]})},F=function(e){var n=(0,a.useState)("week"),t=n[0],o=n[1],i=(0,a.useState)(null),s=i[0],m=i[1],h=e.title,_=e.subtitle,w=e.name,C=e.size,P=e.values,S=P.today,T=void 0===S?0:S,D=P.week,F=P.month,B=P.threeMonth,W=P.year,X=e.valueType,J=e.description,Q=e.to,V=e.colourConfig,K=e.greaterIsBetter,ee=e.editable,en=e.deletable,et=e.onConfigChange,er=void 0===et?function(){}:et,eo=e.onVersusChange,ei=void 0===eo?function(){}:eo,ea=e.onEdit,es=e.onDelete,ec=(0,r.Z)(e,L),el=(0,a.useState)(V),eu=el[0],ed=el[1],ep=function(e){m(e.currentTarget)},em=function(){m(null)},ef=function(e){em(),ed(e),er(w,e)},eh=function(e){o(e),ei(w,e)},eg=function(){c().push("".concat(Q,"&title=").concat(h).concat(_?"&subtitle=".concat(_):""))};(0,a.useEffect)(function(){ed(V)},[V]);var ex=M({values:{today:T,week:void 0===D?0:D,month:void 0===F?0:F,threeMonth:void 0===B?0:B,year:void 0===W?0:W},selectedOption:t,greaterIsBetter:void 0===K||K}).Component,ey=z(T,eu),ej=ey.color,eb=ey.direction,ev=(0,A.jsx)(k.Z,{});eb>0?ev=(0,A.jsx)($.Z,{}):eb<0&&(ev=(0,A.jsx)(I.Z,{}));var eZ=T;return"price"===X&&(eZ=(0,l.Z)(eZ)),(0,A.jsxs)(x.ZP,E(E({item:!0},ec),{},{children:[(0,A.jsxs)(R,{size:void 0===C?1:C,children:[(0,A.jsx)(H,{title:(0,A.jsxs)(p.Z,{sx:{display:"flex"},children:[(0,A.jsxs)(y.Z,{children:[(0,A.jsx)(d.Z,{children:h}),(0,A.jsx)(d.Z,{variant:"subtitle2",children:_})]}),J&&(0,A.jsx)(u.Z,{title:J,children:(0,A.jsx)(N.Z,{fontSize:"200",sx:{marginLeft:.5,color:"#cfd9e0"}})})]}),action:(0,A.jsxs)(p.Z,{display:"flex",children:[(0,A.jsx)(j.Z,{size:"medium","aria-label":"details",onClick:eg,children:(0,A.jsx)(O.Z,{fontSize:"inherit"})}),(0,A.jsx)(j.Z,{size:"medium","aria-label":"config",onClick:ep,children:(0,A.jsx)(f.Z,{"aria-label":"status",size:"small",sx:{bgcolor:ej},children:ev})})]})}),(0,A.jsxs)(G,{children:[(0,A.jsx)(d.Z,{className:"value",sx:{mr:2},children:eZ}),(0,A.jsxs)(p.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,A.jsx)(ex,{}),(0,A.jsx)(Y,{size:"small",value:t,onChange:function(e){return eh(e.target.value)},children:Object.keys(U).map(function(e){return(0,A.jsxs)(b.Z,{value:e,children:["versus ",U[e]," ago"]})})})]})]}),(0,A.jsxs)(v.Z,{sx:{display:"flex",justifyContent:"flex-end",padding:0},children:[void 0!==ee&&ee&&(0,A.jsx)(g.Z,{size:"small",color:"secondary",sx:{textTransform:"none"},variant:"text",onClick:function(){return ea(w)},children:"Edit"}),void 0!==en&&en&&(0,A.jsx)(g.Z,{variant:"text",color:"secondary",sx:{textTransform:"none"},size:"small",onClick:function(){return es(w)},children:"Delete"})]})]}),(0,A.jsx)(Z.Z,{open:Boolean(s),anchorEl:s,onClose:em,children:(0,A.jsx)(q,{colourConfig:eu,onSubmit:ef})})]}),h)},R=(0,S.ZP)(_.Z).withConfig({displayName:"tile__StyledCard",componentId:"sc-sjlrvd-0"})(["min-width:300px;height:calc(187px * ",");& .MuiCardHeader-root{padding:16px 16px 0 16px;}& .MuiCardContent-root{padding:8px 16px;}"],function(e){return e.size[1]}),H=(0,S.ZP)(w.Z).withConfig({displayName:"tile__StyledCardHeader",componentId:"sc-sjlrvd-1"})(["& .MuiTypography-root{font-family:",";font-size:1.063rem !important;color:",";}& .MuiTypography-root.MuiTypography-subtitle2{font-size:14px !important;}"],function(e){return e.theme.THEME_TYPOGRAPHY.newFont},function(e){return e.theme.THEME_TYPOGRAPHY.newFontColor}),G=(0,S.ZP)(C.Z).withConfig({displayName:"tile__StyledCardContent",componentId:"sc-sjlrvd-2"})(["font-family:",";border-bottom:1px solid ",";.value{font-size:1.5rem !important;}display:flex;flex-direction:column;"],function(e){return e.theme.THEME_TYPOGRAPHY.newFont},function(e){return e.theme.COLOUR.black+"1a"}),Y=(0,S.ZP)(P.Z).withConfig({displayName:"tile__StyledSelect",componentId:"sc-sjlrvd-3"})(["margin-left:30px;& *{border:0;border-width:0 !important;}"]);n.Z=F},97534:function(e,n,t){var r=t(27812),o=t(59499),i=t(67294),a=t(61730),s=t(86886),c=t(94054),l=t(5616),u=t(21023),d=t(50480),p=t(72852),m=t(64666),f=t(37645),h=t(93946),g=t(6514),x=t(31425),y=t(11057),j=t(50594),b=t(57778),v=t(57616),Z=t(35441),_=t(85893);function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function C(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach(function(n){(0,o.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var P=function(e){var n=e.item,t=e.selectedTiles,r=e.disablePin,o=e.onPinChange,i=e.onTileSelect,m=(0,a.Z)("(max-width: 800px)"),f=n.type,h=n.title,g=n.description,x=n.name,y=n.values,j=n.size,w=null;if("tile"===f&&(w=(0,_.jsx)(b.Z,C({},n))),"chart"===f&&(w=(0,_.jsx)(v.Z,{title:h,description:g,showLegend:!0,name:x,data:y,size:j})),"mapChart"===f&&(w=(0,_.jsx)(Z.Z,{title:h,description:g,showLegend:!0,name:x,data:y,size:j})),!w)return null;var P=t.some(function(e){return e.name===x}),O=t.some(function(e){return e.name===x&&e.pinned});return(0,_.jsx)(s.ZP,{item:!0,xs:"tile"!==f||m?12:6,children:(0,_.jsxs)(c.Z,{sx:{display:"flex",flexDirection:"column"},children:[w,(0,_.jsxs)(l.Z,{m:1,display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"tile"===f?"space-between":"flex-start",children:[(0,_.jsx)(u.Z,{sx:{fontFamily:"Nunito-Regular"},title:"Toggle to display or hide this tile in your dashboard",children:(0,_.jsx)(d.Z,{label:"Display",sx:{fontFamily:"Nunito-Regular"},control:(0,_.jsx)(p.Z,{sx:{mr:2},color:"secondary",checked:P,onChange:function(){P?i("remove",x):i("add",x)}})})}),"tile"===f&&(0,_.jsx)(u.Z,{sx:{fontFamily:"Nunito-Regular"},title:!O&&r?"You have already pinned 4 tiles. To pin this tile - please,unpin one of already selected tiles":"Pin this tile to top section",children:(0,_.jsx)("span",{children:(0,_.jsx)(d.Z,{label:"Pin to top",sx:{fontFamily:"Nunito-Regular"},control:(0,_.jsx)(p.Z,{color:"secondary",checked:O,disabled:!O&&r,onChange:function(e){return o(n,e.currentTarget.checked)}})})})})]})]})})},O=function(e){var n=e.open,t=e.fullTilesList,o=e.selectedTiles,c=e.onSaveTilesList,l=e.onClose,u=(0,a.Z)("(max-width: 800px)"),d=(0,i.useState)(o),p=d[0],b=d[1],v=p.filter(function(e){return e.pinned}).length>=4;(0,i.useEffect)(function(){b(o)},[o]);var Z=function(){c(p),l()},w=function(e,n){var t=e.name,o=p.filter(function(e){return e.name!==t}),i=C(C({},e),{},{pinned:n});b([].concat((0,r.Z)(o),[i]))},O=function(e,n){var o=t.find(function(e){return e.name===n});if(o){if("add"===e){var i={type:o.type,pinned:!1,colourConfig:o.colourConfig,name:o.name,greaterIsBetter:o.greaterIsBetter};b([].concat((0,r.Z)(p),[i]))}else"remove"===e&&b(p.filter(function(e){return e.name!==n}))}};return(0,_.jsxs)(m.Z,{open:n,onClose:l,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",fullWidth:!0,maxWidth:"lg",fullScreen:u,children:[(0,_.jsx)(f.Z,{variant:"h5",fontFamily:"Nunito-Regular",id:"modal-modal-title",children:"Select and add card to your dashboard"}),(0,_.jsx)(h.Z,{"aria-label":"close",onClick:l,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:(0,_.jsx)(j.Z,{})}),(0,_.jsx)(g.Z,C(C({},u&&{sx:{p:1}}),{},{children:(0,_.jsx)(s.ZP,{container:!0,spacing:u?1:3,sx:{width:"auto"},children:t.sort(function(e,n){return e.type-n.type}).map(function(e){return(0,_.jsx)(P,{item:e,disablePin:v,selectedTiles:p,onPinChange:w,onTileSelect:O})})})})),(0,_.jsxs)(x.Z,{children:[(0,_.jsx)(y.Z,{sx:{mr:2,textTransform:"none"},variant:"text",color:"secondary",onClick:l,children:"Cancel"}),(0,_.jsx)(y.Z,{sx:{textTransform:"none"},variant:"contained",color:"secondary",onClick:Z,children:"Save"})]})]})};n.Z=O},69496:function(e,n,t){t.d(n,{$E:function(){return E},AX:function(){return w},I4:function(){return _},JA:function(){return P},MT:function(){return N},Px:function(){return I},WF:function(){return O},ZA:function(){return z},a8:function(){return $},fA:function(){return T},fo:function(){return C},ge:function(){return U},iM:function(){return L},nE:function(){return S},nh:function(){return A},r1:function(){return k},tW:function(){return M},uz:function(){return D}});var r,o,i,a,s,c,l,u,d,p,m,f,h,g,x,y,j,b,v=t(71383),Z=t(75063),_=(0,Z.Ps)(r||(r=(0,v.Z)(["\n  mutation InsertAccountUser($objects: [Account_User_insert_input!]!) {\n    insert_Account_User(objects: $objects) {\n      returning {\n        id\n      }\n    }\n  }\n"]))),w=(0,Z.Ps)(o||(o=(0,v.Z)(["\n  mutation UpdateUser(\n    $id: Int!\n    $accountUserId: Int!\n    $accountUserChanges: Account_User_set_input\n    $changes: User_set_input\n    $updateAccountUser: Boolean!\n  ) {\n    update_Account_User_by_pk(pk_columns: { id: $accountUserId }, _set: $accountUserChanges)\n      @include(if: $updateAccountUser) {\n      id\n    }\n    update_User_by_pk(pk_columns: { id: $id }, _set: $changes) {\n      id\n    }\n  }\n"]))),C=(0,Z.Ps)(i||(i=(0,v.Z)(["\n  query GetUsers(\n    $accountId: Int\n    $accountType: String\n    $date: timestamptz\n    $limit: Int\n    $offset: Int\n    $q: String\n    $orderBy: User_order_by!\n    $status: String\n  ) {\n    users: User(\n      limit: $limit\n      offset: $offset\n      where: {\n        Account_Users: { Account: { id: { _eq: $accountId }, type: { _eq: $accountType } } }\n        createdAt: { _eq: $date }\n        _or: [\n          { email: { _ilike: $q } }\n          { nameFirst: { _ilike: $q } }\n          { nameLast: { _ilike: $q } }\n        ]\n        status: { _eq: $status }\n      }\n      order_by: [$orderBy]\n    ) {\n      id\n      name: nameFirst\n      nameFirst\n      nameLast\n      phone\n      status\n      email\n      createdAt\n      meta\n      invoiceThreshold\n      quoteThreshold\n      media: Media {\n        id\n        medium: Medium {\n          id\n          category\n          filename\n          meta\n          type\n        }\n      }\n      accounts: Account_Users {\n        id\n        role\n        position\n        isContact\n        status\n        account: Account {\n          id\n          name\n          type\n        }\n        userLocations: User_Account_Locations {\n          accountLocationId\n        }\n      }\n    }\n    meta: User_aggregate(\n      where: {\n        Account_Users: { Account: { id: { _eq: $accountId }, type: { _eq: $accountType } } }\n        createdAt: { _eq: $date }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n        status: { _eq: $status }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"]))),P=(0,Z.Ps)(a||(a=(0,v.Z)(["\n  query GetUser($id: Int!) {\n    user: User_by_pk(id: $id) {\n      id\n      fullName\n      name: nameFirst\n      nameFirst\n      nameLast\n      phone\n      status\n      email\n      createdAt\n      meta\n      invoiceThreshold\n      quoteThreshold\n      media: Media {\n        id\n        medium: Medium {\n          id\n          category\n          filename\n          meta\n          type\n        }\n      }\n      accounts: Account_Users {\n        id\n        role\n        position\n        isContact\n        status\n        account: Account {\n          id\n          name\n          type\n        }\n      }\n    }\n  }\n"]))),O=(0,Z.Ps)(s||(s=(0,v.Z)(["\n  query CheckDuplicateEmail($email: String!) {\n    users: User_public(where: { email: { _eq: $email } }) {\n      id\n      nameFirst\n      nameLast\n      email\n      phone\n    }\n  }\n"]))),I=(0,Z.Ps)(c||(c=(0,v.Z)(["\n  fragment UserFields on User {\n    id\n    email\n    nameFirst\n    nameLast\n    fullName\n    phone\n    status\n  }\n"]))),$=(0,Z.Ps)(l||(l=(0,v.Z)(["\n  mutation SendGoogleAuthCode($code: String!, $id: Int!, $type: String!) {\n    createGoogleToken(code: $code, id: $id, type: $type) {\n      success\n      tokens\n      error\n    }\n  }\n"]))),k=(0,Z.Ps)(u||(u=(0,v.Z)(["\n  mutation GenerateMSURL($type: String!, $id: Int!) {\n    genenrateMSURL(id: $id, type: $type) {\n      url\n    }\n  }\n"]))),N=(0,Z.Ps)(d||(d=(0,v.Z)(["\n  mutation signoutMS($id: Int!, $type: String!, $email: String!) {\n    signoutMS(id: $id, type: $type, email: $email) {\n      error\n      msId\n      success\n    }\n  }\n"]))),S=(0,Z.Ps)(p||(p=(0,v.Z)(["\n  query getAccountMeta($id: Int!) {\n    account: Account_by_pk(id: $id) {\n      meta\n    }\n  }\n"]))),A=(0,Z.Ps)(m||(m=(0,v.Z)(["\n  query user($id: Int!) {\n    user: User_by_pk(id: $id) {\n      meta\n      invoiceThreshold\n      quoteThreshold\n    }\n  }\n"]))),L=(0,Z.Ps)(f||(f=(0,v.Z)(["\n  query GetAccountUserMeta($userId: Int!, $accountId: Int!) {\n    accountUser: Account_User(where: { userId: { _eq: $userId }, accountId: { _eq: $accountId } }) {\n      meta\n    }\n  }\n"]))),T=(0,Z.Ps)(h||(h=(0,v.Z)(["\n  mutation UpdateAccountUserByUserIdAccoutId(\n    $userId: Int!\n    $accountId: Int!\n    $changes: Account_User_set_input!\n  ) {\n    update_Account_User(\n      where: { userId: { _eq: $userId }, accountId: { _eq: $accountId } }\n      _set: $changes\n    ) {\n      returning {\n        id\n      }\n    }\n  }\n"]))),E=(0,Z.Ps)(g||(g=(0,v.Z)(["\n  mutation updateAccount($accountId: Int!, $set: Account_set_input!) {\n    update_Account_by_pk(pk_columns: { id: $accountId }, _set: $set) {\n      id\n    }\n  }\n"]))),D=(0,Z.Ps)(x||(x=(0,v.Z)(["\n  mutation updateUserMeta($userId: Int!, $meta: jsonb!) {\n    update_User_by_pk(pk_columns: { id: $userId }, _set: { meta: $meta }) {\n      id\n      meta\n    }\n  }\n"]))),U=(0,Z.Ps)(y||(y=(0,v.Z)(['\n  query userDevices($accountId: Int!) {\n    users: User(\n      where: {\n        Account_Users: { accountId: { _eq: $accountId }, status: { _eq: "active" } }\n        UserDevices: { status: { _eq: "active" } }\n        status: { _eq: "active" }\n      }\n    ) {\n      id\n      fullName\n      devices: UserDevices(\n        order_by: { updatedAt: desc_nulls_last }\n        where: { status: { _eq: "active" } }\n        limit: 1\n      ) {\n        id\n        playerId\n      }\n    }\n  }\n']))),z=(0,Z.Ps)(j||(j=(0,v.Z)(['\n  query GetAccountLocations($accountId: Int, $limit: Int, $offset: Int) {\n    location: Location(\n      offset: $offset\n      limit: $limit\n      where: {\n        Account_Locations: {\n          accountId: { _eq: $accountId }\n          Account: { type: { _eq: "customer" } }\n        }\n      }\n    ) {\n      id\n      name\n      accountLocations: Account_Locations {\n        id\n      }\n      addresses: Addresses(where: { entity: { _eq: "Location" }, registered: { _eq: true } }) {\n        id\n        status\n        address: Address {\n          id\n          name\n          addressLine1\n          postCode\n        }\n      }\n    }\n    meta: Location_aggregate(\n      where: {\n        Account_Locations: {\n          accountId: { _eq: $accountId }\n          Account: { type: { _eq: "customer" } }\n        }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n']))),M=(0,Z.Ps)(b||(b=(0,v.Z)(["\n  mutation InsertUserAccountLocations(\n    $accountUserId: Int!\n    $objects: [User_Account_Location_insert_input!]!\n  ) {\n    delete_User_Account_Location(where: { accountUserId: { _eq: $accountUserId } }) {\n      affected_rows\n    }\n    insert_User_Account_Location(objects: $objects) {\n      affected_rows\n      returning {\n        id\n      }\n    }\n  }\n"])))}}]);