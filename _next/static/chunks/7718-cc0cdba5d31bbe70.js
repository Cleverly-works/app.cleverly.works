"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7718],{14651:function(e,n,t){var r=t(64836);n.Z=void 0;var o=r(t(64938)),i=t(85893);n.Z=(0,o.default)((0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),"Brightness1")},63500:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(83946),o=t(77349),i=t(13882);function a(e,n){(0,i.Z)(2,arguments);var t=(0,r.Z)(n);return(0,o.Z)(e,7*t)}},44253:function(e,n,t){t.d(n,{t:function(){return Q}});var r=t(27812),o=t(16835),i=t(59499),a=t(61730),s=t(84808),c=t(98456),l=t(26447),u=t(15861),d=t(86886),h=t(67720),m=t(87918),p=t(50135),x=t(11057),v=t(90948),f=t(90629),j=t(39179),g=t(26936),b=t(42283),Z=t(6911),y=t(6812),w=t(50319),O=t(76301),I=t(67294),C=t(8633),P=t(67432),S=t(31962),_=t(34427),T=t(29026),q=t(78913),L=t(79665),E=t(60084),k=t(33754),A=t(30381),D=t.n(A),F=t(6103),U=t(3084),W=t(21269),N=t(85893);function R(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function H(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?R(Object(t),!0).forEach(function(n){(0,i.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):R(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Q=function(e){var n=e.isEdit,t=e.scheduleId,i=e.entity,v=e.entityId,f=e.close,A=(0,a.Z)("(max-width: 600px)"),R=(0,U.D)(),Q=(0,I.useState)(void 0!==n&&n)[0],V=(0,I.useState)(t),$=V[0],G=V[1],z=(0,I.useState)([]),B=z[0],X=z[1],J=(0,I.useState)(""),K=J[0],ee=J[1],en=(0,I.useState)(""),et=en[0],er=en[1],eo=(0,I.useState)(""),ei=eo[0],ea=eo[1],es=(0,I.useState)(""),ec=es[0],el=es[1],eu=(0,I.useState)(null),ed=eu[0],eh=eu[1],em=(0,b.cI)({defaultValues:{status:"active",coverageAreas:[]},resolver:(0,L.S)(E.r)}),ep=em.handleSubmit,ex=em.control,ev=em.errors,ef=em.register,ej=em.watch,eg=em.setValue,eb=em.reset,eZ=(0,b.Dq)({control:ex,name:"days"}),ey=ej("service"),ew=ej("coverageAreas"),eO=(0,y.a)(T.WC,{skip:!$,variables:{serviceScheduleId:$,includeParent:!!Q},onCompleted:function(e){var n=e.serviceSchedule;eb(H({},(0,q.Ty)(n))),Q||"Customer"!==i?Q&&"Customer"===i&&X(n.parent.postcodeAreas.map(function(e){return e.postcode.area})):X(n.postcodeAreas.map(function(e){return e.postcode.area}))}}).loading,eI=(0,y.a)(O.kx,{variables:{q:""!==K?"%".concat(K,"%"):null,limit:50,offset:0}}),eC=eI.loading,eP=eI.data,eS=(eP=void 0===eP?{items:[]}:eP).items,e_=(0,y.a)(O.pY,{skip:!(null!=ey&&ey.value),variables:H(H({},(0,q.AL)({defaultScheduleId:t,scheduleId:$,entity:i,entityId:v,editMode:Q})),{},{serviceId:null==ey?void 0:ey.value,q:""!==et?"%".concat(et,"%"):null,limit:50,offset:0})}),eT=e_.loading,eq=e_.data,eL=(eq=void 0===eq?{items:[]}:eq).items,eE=(0,y.a)(O.T_,{variables:{where:{name:{_eq:""!==ei?"%".concat(ei,"%"):null},subtype:{_eq:"reactive"}},limit:50,offset:0}}),ek=eE.loading,eA=eE.data,eD=(eA=void 0===eA?{items:[]}:eA).items,eF=(0,y.a)(O._d,{variables:{where:H(H({},(0,q.dB)({areas:B})),{},{name:{_ilike:""!==ec?"%".concat(ec,"%"):null},status:{_eq:"active"},Account_Locations:{accountId:{_eq:v}}}),limit:50,offset:0},onCompleted:function(e){var n=e.items;!Q&&"Customer"===i&&null!=n&&n.length&&eg("location",(0,r.Z)(n))}}),eU=eF.loading,eW=eF.data,eN=(eW=void 0===eW?{items:[]}:eW).items,eR=(0,w.D)(T.Sx,{refetchQueries:["GetServiceSchedules","GetServiceSchedulesForEntity"],onError:function(e){R.show({content:"Error: ".concat(e.message),severity:"error"})},onCompleted:function(){R.show({content:"Service schedule was created",severity:"success"}),f()}}),eH=(0,o.Z)(eR,1)[0],eQ=(0,w.D)(T.kt,{refetchQueries:["GetServiceSchedules","GetServiceSchedulesForEntity"],onError:function(e){R.show({content:"Error: ".concat(e.message),severity:"error"})},onCompleted:function(){R.show({content:"Service schedule was updated",severity:"success"}),f()}}),eM=(0,o.Z)(eQ,1)[0],eY=function(e){if(Q){var n=(0,q._L)({form:e,entity:i,entityId:v});eM({variables:{data:H(H({},n),{},{id:$})}})}else{var t=(0,q._L)({form:e,entity:i,entityId:v});eH({variables:{data:t}})}},eV=(0,I.useMemo)(function(){return Q?"Edit ".concat(Y[i]," schedule"):"Add ".concat(Y[i]," schedule")},[Q,i]);return(0,N.jsxs)("form",{onSubmit:ep(eY),children:[eO&&(0,N.jsx)(s.Z,{sx:{zIndex:1e5},open:!0,children:(0,N.jsx)(c.Z,{color:"secondary"})}),(0,N.jsx)(M,{is600pxOrLess:A,children:(0,N.jsxs)(l.Z,{height:"100%",width:"100%",children:[(0,N.jsx)(l.Z,{children:(0,N.jsx)(u.Z,{variant:"h5",fontWeight:700,children:eV})}),(0,N.jsx)(l.Z,{height:"100%",pt:2,pr:2,sx:{overflowY:"scroll"},children:(0,N.jsxs)(d.ZP,{container:!0,columnSpacing:2,children:[(0,N.jsxs)(d.ZP,{container:!0,item:!0,xs:12,md2:7,columnSpacing:2,rowSpacing:2,children:[(0,N.jsxs)(d.ZP,{item:!0,xs:12,sm2:6,children:[(0,N.jsxs)(l.Z,{spacing:2,mb:2,children:[(0,N.jsxs)(l.Z,{direction:"row",alignItems:"center",width:"100%",children:[(0,N.jsx)(u.Z,{mr:"29px",children:"Service"}),(0,N.jsx)(l.Z,{direction:"row",alignItems:"center",width:"100%",spacing:1,children:(0,N.jsx)(b.Qr,{name:"service",control:ex,render:function(e){var n,t=e.value,r=e.onChange;return(0,N.jsx)(Z.q,{filterSelectedOptions:!0,isOptionEqualToValue:function(e,n){return e.value===n.value},value:t||null,onChange:function(e,n){null!=n&&n.value?r(n):(G(null),eb(H({},C.FY)))},loading:eC,options:eS,setSearch:ee,textFieldProps:{color:"secondary",variant:"standard",placeholder:"Service",error:ev.service,helperText:null===(n=ev.service)||void 0===n?void 0:n.message},sx:{width:"170px"}})}})})]}),(0,N.jsxs)(l.Z,{direction:"row",alignItems:"center",width:"100%",spacing:2,children:[(0,N.jsx)(u.Z,{children:"Schedule"}),(0,N.jsx)(b.Qr,{name:"schedule",control:ex,render:function(e){var n,t=e.value,r=e.onChange;return(0,N.jsx)(Z.q,{filterSelectedOptions:!0,isOptionEqualToValue:function(e,n){return e.value===n.value},value:t||null,onChange:function(e,n){null!=n&&n.value?(G(null==n?void 0:n.value),r(n)):(G(null),eb(H(H({},C.FY),{},{service:ey})))},loading:eT,options:eL,setSearch:er,textFieldProps:{color:"secondary",variant:"standard",placeholder:"Schedule",error:ev.schedule,helperText:null===(n=ev.schedule)||void 0===n?void 0:n.message},sx:{width:"200px"}})}})]}),(0,N.jsxs)(l.Z,{direction:"row",alignItems:"center",width:"100%",children:[(0,N.jsx)(u.Z,{mr:"34px",children:"Status"}),(0,N.jsx)(b.Qr,{name:"status",control:ex,render:function(e){var n,t=e.value,r=e.onChange;return(0,N.jsx)(P.P,{formControl:{fullWidth:!0,variant:"standard",color:"secondary",error:ev.status,helperText:null===(n=ev.status)||void 0===n?void 0:n.message},selectProps:{fullWidth:!0,sx:{width:"200px"}},value:t,onChange:r,options:C.hm})}})]})]}),(0,N.jsxs)(l.Z,{width:"100%",mb:2,children:[(0,N.jsx)(u.Z,{variant:"h6",fontWeight:700,children:"Priority"}),(0,N.jsx)(b.Qr,{name:"priority",control:ex,render:function(e){var n,t=e.value,r=e.onChange;return(0,N.jsx)(Z.q,{multiple:!0,fullWidth:!0,disabled:"Supplier"===i||"Customer"===i||"Location"===i,color:"secondary",filterSelectedOptions:!0,loading:ek,value:t||[],onChange:function(e,n){r(n)},options:eD,setSearch:ea,textFieldProps:{placeholder:"Select priority",variant:"standard",color:"secondary",error:ev.priority,helperText:null===(n=ev.priority)||void 0===n?void 0:n.message},sx:{width:"200px"}})}})]}),(0,N.jsxs)(d.ZP,{container:!0,item:!0,columnSpacing:2,rowSpacing:2,children:[(0,N.jsxs)(d.ZP,{item:!0,children:[(0,N.jsx)(u.Z,{children:"Minimum duration"}),(0,N.jsx)(b.Qr,{name:"minimumDuration",control:ex,render:function(e){var n,t=e.value,r=e.onChange;return(0,N.jsx)(j.I,{leftLabel:(0,N.jsx)(W.Z,{sx:{height:"18px"}}),rightLabel:"Mins",sx:{width:"60px"},type:"number",value:t,onChange:r,error:ev.minimumDuration,helperText:null===(n=ev.minimumDuration)||void 0===n?void 0:n.message})}})]}),(0,N.jsxs)(d.ZP,{item:!0,children:[(0,N.jsx)(u.Z,{children:"Minimum increment"}),(0,N.jsx)(b.Qr,{name:"minimumIncrement",control:ex,render:function(e){var n,t=e.value,r=e.onChange;return(0,N.jsx)(j.I,{leftLabel:(0,N.jsx)(W.Z,{sx:{height:"18px"}}),rightLabel:"Mins",sx:{width:"60px"},type:"number",value:t,onChange:r,error:ev.minimumIncrement,helperText:null===(n=ev.minimumIncrement)||void 0===n?void 0:n.message})}})]})]})]}),(0,N.jsxs)(d.ZP,{item:!0,xs:12,sm2:6,children:["Supplier"===i&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(_.B,{paginationSize:4,entity:"ServiceSchedule",entityId:$,name:"coverageAreas",values:ew||[],setValue:eg}),(0,N.jsx)("input",H(H({},ef("coverageAreas")),{},{type:"hidden"}))]}),"Customer"===i&&(0,N.jsx)(b.Qr,{name:"location",control:ex,render:function(e){var n,t=e.value,r=e.onChange;return(0,N.jsx)(Z.q,{multiple:!0,fullWidth:!0,color:"secondary",filterSelectedOptions:!0,loading:eU,value:t||[],onChange:function(e,n){r(n)},options:eN,setSearch:el,textFieldProps:{label:"Select location",variant:"standard",color:"secondary",error:ev.location,helperText:null===(n=ev.location)||void 0===n?void 0:n.message}})}})]}),(0,N.jsxs)(d.ZP,{container:!0,item:!0,xs:12,children:[(0,N.jsxs)(d.ZP,{item:!0,sx:12,height:"27px",width:"100%",pr:2,mb:1,children:[(0,N.jsx)(u.Z,{variant:"h6",fontWeight:700,children:"Rates"}),(0,N.jsx)(h.Z,{})]}),(0,N.jsxs)(d.ZP,{width:"100%",container:!0,item:!0,xs:12,columnSpacing:2,rowSpacing:2,children:[(0,N.jsx)(d.ZP,{item:!0,children:(0,N.jsxs)(l.Z,{spacing:1,children:[(0,N.jsx)(u.Z,{variant:"h6",fontWeight:700,children:"Normal"}),(0,N.jsxs)(l.Z,{children:[(0,N.jsx)(u.Z,{children:"First hour"}),(0,N.jsx)(b.Qr,{name:"normal.firstHour",control:ex,render:function(e){var n,t,r,o=e.value,i=e.onChange;return(0,N.jsx)(j.I,{leftLabel:(0,N.jsx)(g.Z,{sx:{height:"18px"}}),rightLabel:"Ex VAT",sx:{width:"80px"},type:"number",value:o,onChange:i,error:null===(n=ev.normal)||void 0===n?void 0:n.firstHour,helperText:null===(t=ev.normal)||void 0===t?void 0:null===(r=t.firstHour)||void 0===r?void 0:r.message})}})]}),(0,N.jsxs)(l.Z,{children:[(0,N.jsx)(u.Z,{children:"Subsequent hours"}),(0,N.jsx)(b.Qr,{name:"normal.subsequentHours",control:ex,render:function(e){var n,t,r,o=e.value,i=e.onChange;return(0,N.jsx)(j.I,{leftLabel:(0,N.jsx)(g.Z,{sx:{height:"18px"}}),rightLabel:"Ex VAT",sx:{width:"80px"},type:"number",value:o,onChange:i,error:null===(n=ev.normal)||void 0===n?void 0:n.subsequentHours,helperText:null===(t=ev.normal)||void 0===t?void 0:null===(r=t.subsequentHours)||void 0===r?void 0:r.message})}})]})]})}),(0,N.jsx)(d.ZP,{item:!0,children:(0,N.jsxs)(l.Z,{spacing:1,children:[(0,N.jsx)(u.Z,{variant:"h6",fontWeight:700,children:"OOH"}),(0,N.jsxs)(l.Z,{children:[(0,N.jsx)(u.Z,{children:"First hour"}),(0,N.jsx)(b.Qr,{name:"ooh.firstHour",control:ex,render:function(e){var n,t,r,o=e.value,i=e.onChange;return(0,N.jsx)(j.I,{leftLabel:(0,N.jsx)(g.Z,{sx:{height:"18px"}}),rightLabel:"Ex VAT",sx:{width:"80px"},type:"number",value:o,onChange:i,error:null===(n=ev.ooh)||void 0===n?void 0:n.firstHour,helperText:null===(t=ev.ooh)||void 0===t?void 0:null===(r=t.firstHour)||void 0===r?void 0:r.message})}})]}),(0,N.jsxs)(l.Z,{children:[(0,N.jsx)(u.Z,{children:"Subsequent hours"}),(0,N.jsx)(b.Qr,{name:"ooh.subsequentHours",control:ex,render:function(e){var n,t,r,o=e.value,i=e.onChange;return(0,N.jsx)(j.I,{leftLabel:(0,N.jsx)(g.Z,{sx:{height:"18px"}}),rightLabel:"Ex VAT",sx:{width:"80px"},type:"number",value:o,onChange:i,error:null===(n=ev.ooh)||void 0===n?void 0:n.subsequentHours,helperText:null===(t=ev.ooh)||void 0===t?void 0:null===(r=t.subsequentHours)||void 0===r?void 0:r.message})}})]})]})}),(0,N.jsx)(d.ZP,{item:!0,children:(0,N.jsxs)(l.Z,{spacing:1,children:[(0,N.jsx)(u.Z,{variant:"h6",fontWeight:700,children:"Premium"}),(0,N.jsxs)(l.Z,{children:[(0,N.jsx)(u.Z,{children:"First hour"}),(0,N.jsx)(b.Qr,{name:"premium.firstHour",control:ex,render:function(e){var n,t,r,o=e.value,i=e.onChange;return(0,N.jsx)(j.I,{leftLabel:(0,N.jsx)(g.Z,{sx:{height:"18px"}}),rightLabel:"Ex VAT",sx:{width:"80px"},type:"number",value:o,onChange:i,error:null===(n=ev.premium)||void 0===n?void 0:n.firstHour,helperText:null===(t=ev.premium)||void 0===t?void 0:null===(r=t.firstHour)||void 0===r?void 0:r.message})}})]}),(0,N.jsxs)(l.Z,{children:[(0,N.jsx)(u.Z,{children:"Subsequent hours"}),(0,N.jsx)(b.Qr,{name:"premium.subsequentHours",control:ex,render:function(e){var n,t,r,o=e.value,i=e.onChange;return(0,N.jsx)(j.I,{leftLabel:(0,N.jsx)(g.Z,{sx:{height:"18px"}}),rightLabel:"Ex VAT",sx:{width:"80px"},type:"number",value:o,onChange:i,error:null===(n=ev.premium)||void 0===n?void 0:n.subsequentHours,helperText:null===(t=ev.premium)||void 0===t?void 0:null===(r=t.subsequentHours)||void 0===r?void 0:r.message})}})]})]})})]})]})]}),(0,N.jsx)(d.ZP,{item:!0,xs:12,md2:5,children:(0,N.jsxs)(l.Z,{spacing:1,children:[(0,N.jsxs)(l.Z,{children:[(0,N.jsx)(u.Z,{variant:"h6",fontWeight:700,mb:1,children:"Times"}),(0,N.jsx)(h.Z,{})]}),(0,N.jsxs)(l.Z,{spacing:.5,children:[(0,N.jsx)(u.Z,{variant:"h6",fontWeight:700,children:"OOH"}),(0,N.jsx)(l.Z,{spacing:.5,children:C.jT.map(function(e){var n,t,r;return(0,N.jsx)(S.k,{control:ex,name:"oohTimes.".concat(e.value),day:e.label,error:null===(n=ev.oohTimes)||void 0===n?void 0:n[e.value],helperText:null===(t=ev.oohTimes)||void 0===t?void 0:null===(r=t[e.value])||void 0===r?void 0:r.message})})})]}),(0,N.jsxs)(l.Z,{spacing:.5,children:[(0,N.jsx)(u.Z,{variant:"h6",fontWeight:700,children:"Premium"}),(0,N.jsx)(l.Z,{spacing:.5,children:C.jT.map(function(e){var n,t,r;return(0,N.jsx)(S.k,{control:ex,name:"premiumTimes.".concat(e.value),day:e.label,error:null===(n=ev.premiumTimes)||void 0===n?void 0:n[e.value],helperText:null===(t=ev.premiumTimes)||void 0===t?void 0:null===(r=t[e.value])||void 0===r?void 0:r.message})})})]})]})}),(0,N.jsxs)(d.ZP,{container:!0,item:!0,xs:12,mt:2,columnSpacing:2,children:[(0,N.jsx)(d.ZP,{item:!0,xs:0,md2:7}),(0,N.jsx)(d.ZP,{item:!0,xs:12,md2:5,children:(0,N.jsxs)(l.Z,{children:[(0,N.jsx)(u.Z,{variant:"h6",fontWeight:700,children:"Days"}),(0,N.jsx)(l.Z,{direction:"row",spacing:1,flexWrap:"wrap",children:eZ.fields.map(function(e,n){return(0,N.jsx)(m.Z,{label:D()(e).format("YYYY-MM-DD"),size:"small",onDelete:function(){return eZ.remove(n)}})})}),(0,N.jsxs)(l.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,N.jsx)(k.M,{inputFormat:"YYYY-MM-DD",placeholder:"Select days",value:ed,onChange:function(e){eh(e)},renderInput:function(e){return(0,N.jsx)(p.Z,H(H({},e),{},{fullWidth:!0,color:"secondary",variant:"standard"}))}}),(0,N.jsx)(x.Z,{disableMinWidth:!0,color:"secondary",variant:"contained",size:"small",onClick:function(){return eZ.append(ed)},children:(0,N.jsx)(F.Z,{})})]})]})})]}),(0,N.jsx)(d.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center"},mt:2,children:(0,N.jsx)(u.Z,{color:"muiGray.main",children:"All job start times occurring outside times specified above will be charged based on Normal rates."})})]})}),(0,N.jsxs)(l.Z,{width:"100%",direction:"row",justifyContent:"center",spacing:2,children:[(0,N.jsx)(x.Z,{color:"danger",variant:"contained",onClick:f,children:"Cancel"}),(0,N.jsx)(x.Z,{color:"secondary",variant:"contained",type:"submit",children:Q?"Save":"Add schedule"})]})]})})]})};Q.defaultProps={};var M=(0,v.ZP)(f.Z)(function(e){var n=e.is600pxOrLess;return{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:n?"100vw":"90vw",height:n?"100vh":"90vh",padding:"16px 27px 16px 27px",borderRadius:"8px"}}),Y={Supplier:"supplier",Customer:"customer",Location:"location"}},9316:function(e,n,t){t.d(n,{E:function(){return c}});var r,o=t(50029),i=t(64687),a=t.n(i),s=t(69496),c=(r=(0,o.Z)(a().mark(function e(n,t){var r,o,i,c=arguments;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],e.prev=1,e.next=4,n.query({query:s.WF,variables:{email:t}});case 4:if(!((i=e.sent.data.users)&&i.length>0)){e.next=8;break}return e.abrupt("return",!!r&&i[0]);case 8:return e.abrupt("return",!r||null);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",!0);case 14:case"end":return e.stop()}},e,null,[[1,11]])})),function(e,n){return r.apply(this,arguments)})},19796:function(e,n,t){t.d(n,{H:function(){return V}});var r,o,i=t(59499),a=t(27812),s=t(67294),c=t(6812),l=t(42283),u=t(79665),d=t(69368),h=t(26447),m=t(15861),p=t(98456),x=t(5616),v=t(94054),f=t(56815),j=t(50135),g=t(76600),b=t(49501),Z=t(95103),y=t(55563),w=t(90951),O=t(3915),I=t(18902),C=t(74231),P=(0,C.Ry)().shape({nameFirst:(0,C.Z_)().required(),nameLast:(0,C.Z_)().required(),email:(0,C.Z_)().required().email(),phone:(0,C.Z_)().required(),status:(0,C.Z_)().when("$hasRole",function(e){return e?(0,C.Z_)().oneOf(["active","inactive"]).required():void 0}),invoiceThreshold:(0,C.Rx)().nullable(!0).transform(function(e){return isNaN(e)?null:e}),quoteThreshold:(0,C.Rx)().nullable(!0).transform(function(e){return isNaN(e)?null:e}),role:(0,C.Z_)().when(["$hasRole","$hasOneOwner","accountId"],function(e,n,t){if(e)return n?(0,C.Z_)().oneOf(["owner"],"Each account must have a designated owner.\n          If you would like to change the account type on this user,\n          please create another user account and designate this new account as an owner."):t&&t.length>0&&(0,C.Z_)().required()}),position:(0,C.Z_)().when("accountId",{is:function(e){return e&&e.length>0},then:(0,C.Z_)()}),isContact:(0,C.Z_)().when("accountId",{is:function(e){return e&&e.length>0},then:(0,C.Z_)().oneOf(["yes","no"]).required()}),location:(0,C.IX)().when("$hasLocation",function(e){return e?(0,C.IX)().of((0,C.Rx)().integer().required()).required():void 0})}),S=t(72936),_=t(69496),T=t(42846),q=t(60092),L=t(63928),E=t(50480),k=t(85893),A=function(e){var n=e.name,t=e.control,r=e.permissions,o=e.styles;return(0,k.jsxs)(x.Z,{sx:o,children:[(0,k.jsx)(m.Z,{variant:"h6",color:"dark.main",sx:{fontFamily:"Arial, sans-serif, sans-serif",fontWeight:"normal"},children:"Permissions"}),(0,k.jsx)(h.Z,{spacing:1,direction:"row",children:r.map(function(e){return(0,k.jsx)(l.Qr,{name:"".concat(n?n+".":"").concat(e.name),control:t,render:function(n){var t=n.value,r=n.onChange;return(0,k.jsx)(E.Z,{color:"dark.main",control:(0,k.jsx)(d.Z,{color:"secondary",checked:t,onChange:function(e){return r(e.target.checked)}}),label:e.label})}})})})]})};A.defaultProps={permissions:[]};var D={customer_user:[{label:"Job reports",name:"jobReports"},{label:"PPM Schedules",name:"ppmSchedules"},{label:"Quotes",name:"quotes"},{label:"Finances",name:"finances"}]},F=t(71383),U=t(75063),W=(0,U.Ps)(r||(r=(0,F.Z)(["\n  query GetUserEditOffCanvas($userId: Int!, $accountId: Int, $includeAccount: Boolean!) {\n    user: User_by_pk(id: $userId) {\n      id\n      name: nameFirst\n      nameFirst\n      nameLast\n      phone\n      status\n      email\n      createdAt\n      meta\n      invoiceThreshold\n      quoteThreshold\n      accounts: Account_Users(where: { accountId: { _eq: $accountId } })\n        @include(if: $includeAccount) {\n        id\n        role\n        position\n        isContact\n        status\n        modules\n        account: Account {\n          id\n          name\n          type\n        }\n        userLocations: User_Account_Locations {\n          accountLocationId\n        }\n      }\n    }\n  }\n"]))),N=(0,U.Ps)(o||(o=(0,F.Z)(['\n  query FindOwnersByAccount($accountId: Int, $userId: Int) {\n    accountUsers: Account_User(\n      where: { role: { _eq: "owner" }, accountId: { _eq: $accountId }, userId: { _neq: $userId } }\n    ) {\n      id\n      role\n    }\n  }\n']))),R=t(32836);function H(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?H(Object(t),!0).forEach(function(n){(0,i.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):H(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var M=["customer_user"],Y=["customer_user","tenant_user"],V=function(e){var n,t=e.userId,r=e.accountId,o=e.accountType,i=e.submit,C=(0,S.x)(),E=C.hasRole,F=C.user,U=(0,T.x)({filters:{}}),H=U.initialData,V=U.ref,$=(0,s.useState)(!0),G=$[0],z=$[1],B=(0,s.useState)(""),X=B[0],J=B[1],K=(0,s.useState)(null),ee=K[0],en=K[1],et=(0,l.cI)({defaultValues:{id:t,accountId:r},resolver:(0,u.S)(P),context:{hasRole:(0,L.t4)(o,E),hasLocation:!M.includes(F.role)&&M.includes(X),hasOneOwner:G}}),er=et.control,eo=et.errors,ei=et.handleSubmit,ea=et.register,es=et.watch,ec=et.reset,el=et.setValue,eu=es("role"),ed=es("location");(0,s.useEffect)(function(){J("".concat(o,"_").concat(eu))},[o,eu]);var eh=(0,c.a)(W,{skip:!t,variables:{userId:t,accountId:r,includeAccount:!!r},onCompleted:function(e){var n,t=e.user,i={id:t.id,accountId:t.accountId,nameFirst:t.nameFirst||"",nameLast:t.nameLast||"",email:t.email||"",phone:t.phone||"",invoiceThreshold:t.invoiceThreshold,quoteThreshold:t.quoteThreshold,role:"",position:"",isContact:"",status:"active",meta:t.meta},a=null===(n=t.accounts)||void 0===n?void 0:n.find(function(e){return e.account.id===r});a&&(i.accountUserId=a.id,i.accountId=a.account.id,i.role=a.role,i.position=a.position,i.isContact=!0===a.isContact?"yes":"no",i.status=a.status,i.location=a.userLocations.map(function(e){return e.accountLocationId}),i.modules=a.modules),ec(i),J("".concat(o,"_").concat(i.role)),en(i.accountUserId)}}),em=eh.data,ep=(em=void 0===em?{}:em).user,ex=eh.loading;(0,c.a)(N,{skip:!r,variables:{accountId:r,userId:t},onCompleted:function(e){z(!(e.accountUsers.length>0))}});var ev=(0,c.a)(_.ZA,{variables:Q(Q({},H),{},{accountId:r})}),ef=ev.data,ej=(ef=void 0===ef?{location:[],meta:{aggregate:{totalCount:0}}}:ef).location,eg=ef.meta,eb=ev.loading,eZ=ev.refetch,ey=(0,a.Z)(I.I);switch(o){case"supplier":ey.push({text:"Operative",value:"contractor"});break;case"admin":ey.push({text:"Helpdesk",value:"helpdesk"})}var ew={control:er,errors:eo,register:ea},eO=function(e){i(e,null==ep?void 0:ep.meta)},eI=(0,s.useCallback)(function(e){return function(n){n.target.checked?el("location",[].concat((0,a.Z)(null!=ed?ed:[]),[e])):el("location",ed.filter(function(n){return n!==e}))}},[ed,el]),eC=(0,s.useMemo)(function(){return[{sortable:!1,minWidth:10,field:"id",headerName:"",renderCell:function(e){var n=e.row;return(0,k.jsx)(d.Z,{color:"secondary",checked:null==ed?void 0:ed.includes(n.id),onChange:eI(n.id)})}},{sortable:!1,flex:1,field:"name",headerName:"Name"},{sortable:!1,flex:1,field:"address",headerName:"Address",renderCell:function(e){var n=e.row;return n.address?(0,k.jsxs)(h.Z,{children:[(0,k.jsx)(m.Z,{children:n.address.addressLine1}),(0,k.jsx)(m.Z,{children:n.address.postCode})]}):(0,k.jsx)(m.Z,{children:"Please add"})}}]},[ed,eI]);if(ex)return(0,k.jsx)(h.Z,{widht:"100%",alignItems:"center",children:(0,k.jsx)(p.Z,{color:"secondary"})});var eP={id:(0,L.t4)(o,E)};return(0,k.jsxs)(g.Z,{id:"offCanvasForm",handleSubmit:ei(eO),children:[(0,k.jsx)(O.q,Q({},ew)),r&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(x.Z,{children:[(0,L.t4)(o,E)&&(0,k.jsx)(v.Z,{fullWidth:!0,error:eo.role,children:(0,k.jsxs)(b.Z,{label:"Role",children:[(0,k.jsx)(Z.Z,Q(Q({},ew),{},{name:"role",options:ey})),(0,k.jsx)(f.Z,{sx:{margin:0},children:null===(n=eo.role)||void 0===n?void 0:n.message})]})}),(0,k.jsx)(b.Z,{label:"Position / Job title",children:(0,k.jsx)(y.Z,Q(Q({},ew),{},{name:"position"}))}),(0,L.pP)({accountType:o,role:eu,hasRole:E})&&(null==ep?void 0:ep.id)!==F.id&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(b.Z,{label:"Threshold limit / Invoice",children:(0,k.jsx)(j.Z,{inputRef:ea,inputProps:{min:0},size:"small",name:"invoiceThreshold",type:"number",sx:{width:"100%",fieldset:{border:"1px solid ".concat(q.Q.COLOUR.dark)}},InputProps:{sx:{input:{padding:"0 0.725rem",height:"2.25rem"}}}})}),(0,k.jsx)(b.Z,{label:"Threshold limit / Quote",children:(0,k.jsx)(j.Z,{inputRef:ea,inputProps:{min:0},size:"small",name:"quoteThreshold",type:"number",sx:{width:"100%",fieldset:{border:"1px solid ".concat(q.Q.COLOUR.dark)}},InputProps:{sx:{input:{padding:"0 0.725rem",height:"2.25rem"}}}})})]}),(0,k.jsx)(w.Z,Q(Q({},ew),{},{data:[{id:"yes",label:"Yes",value:"yes"},{id:"no",label:"No",value:"no"}],legend:"Contact User",name:"isContact",stacked:!0})),Y.includes(X)&&t!==F.id&&(0,k.jsx)(A,{name:"modules",control:er,permissions:D[X],styles:{mb:2}})]}),(0,k.jsx)(x.Z,{children:M.includes(X)&&t!==F.id&&(0,k.jsxs)(b.Z,{label:"Locations",children:[(0,k.jsx)(R.i,{columnVisibilityModel:eP,columns:eC,loading:eb,meta:eg,ref:V,refetch:eZ,rows:ej.map(function(e){var n;return{id:e.accountLocations[0].id,name:e.name,address:null===(n=e.addresses[0])||void 0===n?void 0:n.address}})}),(0,k.jsx)("input",Q(Q({},ea("location")),{},{type:"hidden"}))]})})]}),t&&(0,k.jsx)(y.Z,Q(Q({},ew),{},{name:"id",type:"hidden"})),r&&(0,k.jsx)(y.Z,Q(Q({},ew),{},{name:"accountId",type:"hidden"})),ee&&(0,k.jsx)(y.Z,Q(Q({},ew),{},{name:"accountUserId",type:"hidden"}))]})}},63928:function(e,n,t){t.d(n,{pP:function(){return u},qF:function(){return c},t4:function(){return l},te:function(){return s}});var r=t(27812),o=t(59499),i=t(19015);function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var s=function(e,n,t){var r={};return e.id?(r.id=parseInt(e.id),r.changes={nameFirst:e.nameFirst,nameLast:e.nameLast,email:e.email,phone:e.phone,meta:function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach(function(n){(0,o.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({},n),invoiceThreshold:e.invoiceThreshold||null,quoteThreshold:e.quoteThreshold||null},e.accountUserId?(r.updateAccountUser=!0,r.accountUserId=parseInt(e.accountUserId),r.accountUserChanges={role:e.role,position:e.position,isContact:"yes"===e.isContact,status:e.status,modules:e.modules}):(r.accountUserId=0,r.updateAccountUser=!1)):(r.role=e.role||"user",r.position=e.position,r.isContact="yes"===e.isContact,r.status=e.status,r.accountId=e.accountId,r.modules=e.modules,t?r.userId=t.id:r.User={data:{nameFirst:e.nameFirst,nameLast:e.nameLast,email:e.email,phone:e.phone,status:e.status,meta:{sendDefaultWelcomeEmail:!0},invoiceThreshold:e.invoiceThreshold||null,quoteThreshold:e.quoteThreshold||null}}),r},c=function(e){return{accountUserId:e.accountUserId,objects:e.location.map(function(n){return{accountUserId:e.accountUserId,accountLocationId:n}})}},l=function(e,n){return"customer"!==e&&"supplier"!==e||n([].concat((0,r.Z)(i.td),(0,r.Z)(i.Sf),(0,r.Z)(i.n),(0,r.Z)(i.nx)))},u=function(e){var n=e.accountType,t=e.role,r=e.hasRole;return r(["admin_owner","customer_owner","supplier_owner"])?!["admin_owner","customer_owner","supplier_owner"].includes("".concat(n,"_").concat(t)):r(["customer_manager","supplier_manager"])?["admin_user","customer_user","supplier_user"].includes("".concat(n,"_").concat(t)):!!r(["admin_manager"])&&["admin_user","customer_user","supplier_user","customer_manager","supplier_manager"].includes("".concat(n,"_").concat(t))}},45155:function(e,n,t){t.d(n,{q:function(){return U}});var r=t(59499),o=t(50029),i=t(27812),a=t(16835),s=t(64687),c=t.n(s),l=t(67294),u=t(11163),d=t.n(u),h=t(30381),m=t.n(h),p=t(69661),x=t(26447),v=t(11057),f=t(90629),j=t(15861),g=t(66252),b=t(6812),Z=t(50319),y=t(14651),w=t(26143),O=t(32836),I=t(35137),C=t(19796),P=t(73073),S=t(69496),_=t(42846),T=t(63928),q=t(9316),L=t(72936),E=t(58095),k=t(53344),A=t(85893);function D(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function F(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?D(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):D(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var U=function(e){var n=e.accountType,t=e.filters,r=(0,g.x)(),s=(0,_.x)({filters:t}),u=s.initialData,h=s.ref,D=(0,E.a)(),U=(0,l.useState)(null),N=U[0],R=U[1],H=(0,L.x)(),Q=H.user,M=H.hasRole,Y=(0,b.a)(S.fo,{variables:u}),V=Y.data,$=(V=void 0===V?{users:[],meta:{aggregate:{totalCount:0}}}:V).users,G=V.meta,z=Y.loading,B=Y.refetch,X=(0,Z.D)(S.I4,{onCompleted:function(){D.close(),B()}}),J=(0,a.Z)(X,2),K=J[0],ee=J[1].error,en=(0,Z.D)(S.AX,{onCompleted:function(){D.close(),B()}}),et=(0,a.Z)(en,2),er=et[0],eo=et[1].error,ei=(0,Z.D)(S.tW,{onCompleted:function(){B()}}),ea=(0,a.Z)(ei,2),es=ea[0],ec=ea[1].error;ee&&ee.graphQLErrors.forEach(function(e){var n;(null===(n=e.extensions)||void 0===n?void 0:n.code)==="constraint-violation"?R("Error: a user with this e-mail address already exists"):R("Error creating user")}),eo&&eo.graphQLErrors.forEach(function(e){var n;(null===(n=e.extensions)||void 0===n?void 0:n.code)==="constraint-violation"?R("Error, a user with this e-mail address already exists"):R("Error updating user")}),ec&&R("Error getting user`s locations");var el,eu=function(e){return[{context:"secondary",icon:"edit",onClick:ex(e),tooltip:"Edit"},{context:"secondary",icon:"avatar",onClick:ep(e),tooltip:"Avatar"}]},ed=[{headerName:"",field:"avatar",maxWidth:60,sortable:!1,renderCell:function(e){var n=e.row;return(0,A.jsx)(p.Z,{src:(0,k.Q)(n.media),sx:{marginLeft:"15px",width:"24px",height:"24px"}})}},{headerName:"Name",field:"name",minWidth:150,sortName:'{"nameFirst": "ORDER"}'},{headerName:"Email Address",field:"email",minWidth:150},{headerName:"Contact User",field:"contactUser",width:130,sortable:!1,renderCell:function(e){if(e.row.accountUser.isContact)return(0,A.jsx)(x.Z,{direction:"row",width:"100%",alignItems:"center",justifyContent:"flex-start",children:(0,A.jsx)(y.Z,{color:"error"})})}},{headerName:"Phone",field:"phone",minWidth:100,sortable:!1},{headerName:"Position",field:"position",minWidth:100,sortable:!1},{headerName:"Role",field:"role",minWidth:110,sortable:!1},{headerName:"Status",field:"status",minWidth:110,sortable:!1},{headerName:"Date Added",field:"createdAt",minWidth:130}].concat((0,i.Z)(M(["admin","customer","supplier"])?[{headerName:"Actions",field:"actions",minWidth:100,flex:1,sortable:!1,renderCell:function(e){var n=e.row;return M(["customer_user","supplier_user"])?n.id===Q.id&&(0,A.jsx)(w.C,{actionsData:eu,row:n}):(0,A.jsx)(w.C,{actionsData:eu,row:n})}}]:[])),eh=(0,l.useMemo)(function(){var e=[];return $.forEach(function(n){var r,o,i=null;i=t.accountId?n.accounts.find(function(e){var n;return(null===(n=e.account)||void 0===n?void 0:n.id)===parseInt(t.accountId)}):n.accounts.find(function(e){return null!==e.account});var a={id:n.id,name:"".concat(n.nameFirst," ").concat(n.nameLast),nameFirst:n.nameFirst,nameLast:n.nameLast,accountId:i&&i.account.id,type:i&&i.account.type,email:n.email,account:i?"".concat(i.account.name," (").concat(i.account.type,")"):"-",phone:n.phone,position:null!==(r=i)&&void 0!==r&&r.position?i.position:"N/A",accountUser:i,role:null===(o=i)||void 0===o?void 0:o.role,status:i?i.status:n.status,createdAt:m()(n.createdAt).format("YYYY-MM-DD"),media:n.media};e.push(a)}),e},[t.accountId,$]),em=(0,l.useCallback)((el=(0,o.Z)(c().mark(function e(n,t){var o,i,a,s;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,q.E)(r,n.email,!0);case 2:if(o=e.sent,i=(0,T.te)(F({},n),t,o),!n.id){e.next=9;break}er({variables:F({},i)}),n.location&&es({variables:F({},(0,T.qF)(n))}),e.next=14;break;case 9:return e.next=11,K({variables:{objects:i}});case 11:s=e.sent.data.insert_Account_User.returning,n.location&&es({variables:F({},(0,T.qF)({location:n.location,accountUserId:s[0].id}))});case 14:case"end":return e.stop()}},e)})),function(e,n){return el.apply(this,arguments)}),[es,r,K,er]),ep=function(e){return function(n){n.stopPropagation(),D.show({content:(0,A.jsx)(P.G,{category:"avatar",entity:"User",entityId:e.id,limit:1,type:"image"}),submit:!1,title:"Upload avatar"})}},ex=(0,l.useCallback)(function(e){return function(r){var o;r.stopPropagation(),D.show({content:(0,A.jsx)(C.H,{accountType:n,userId:null!==(o=null==e?void 0:e.id)&&void 0!==o?o:null,submit:em,submitError:N,accountId:t.accountId}),title:e?"Edit user":"Add user"})}},[n,D,em,N,t.accountId]),ev=function(e){d().push("/dashboard/users/view?id=".concat(e.id))},ef=(0,l.useMemo)(function(){var e={};return eh.length||(e={title:"No users",subtitleFirstLine:"You currently have users set up in the system",subtitleSecondLine:"Click\xa0create user to get started building.",buttonText:"Create user",onAction:ex(null)}),e},[ex,eh]);return(0,A.jsxs)(x.Z,{spacing:2,sx:W.container,children:[(0,A.jsx)(x.Z,{width:"100%",direction:"row",sx:W.header,justifyContent:"flex-end",children:(0,A.jsx)(v.Z,{variant:"contained",color:"secondary",onClick:ex(null),children:"Create User"})}),(0,A.jsxs)(f.Z,{sx:W.tableContainer,children:[(0,A.jsx)(j.Z,{ml:2,variant:"h5",sx:W.title,children:"Users"}),null!=eh&&eh.length?(0,A.jsx)(O.i,{ref:h,loading:z,columns:ed,rows:eh,meta:G,refetch:B,autoHeight:!1,onRowClick:ev,containerHeight:"calc(100% - 52px)"}):!z&&(0,A.jsx)(I.C,F({imageSrc:"/static/icons/no_locations_found.svg"},ef))]})]})},W={container:{width:"100%",height:"100%"},header:{margin:"1em 0",paddingRight:"1em"},tableContainer:{padding:"16px 0px",height:"calc(80vh - 22px)"},title:{fontWeight:600,marginBottom:"15px"}}},3915:function(e,n,t){t.d(n,{q:function(){return f}});var r=t(27812),o=t(59499),i=t(9270),a=t(62140),s=t(49501),c=t(55563),l=t(70982),u=t(95103),d=t(26380),h=t(72936),m=t(19015),p=t(85893);function x(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function v(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?x(Object(t),!0).forEach(function(n){(0,o.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var f=function(e){var n=e.errors,t=e.prefix,o=e.register,x=(0,h.x)().hasRole,f={errors:n,register:o};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(i.Z,{children:[(0,p.jsx)(a.Z,{md:6,children:(0,p.jsx)(s.Z,{label:"First name",children:(0,p.jsx)(c.Z,v(v({},f),{},{name:"".concat(t,"nameFirst")}))})}),(0,p.jsx)(a.Z,{md:6,children:(0,p.jsx)(s.Z,{label:"Last name",children:(0,p.jsx)(c.Z,v(v({},f),{},{name:"".concat(t,"nameLast")}))})}),(0,p.jsx)(a.Z,{md:6,children:(0,p.jsxs)(s.Z,{label:"Email",children:[(0,p.jsx)(c.Z,v(v({},f),{},{name:"".concat(t,"email"),type:"email"})),n["".concat(t,"email")]&&"duplicate"===n["".concat(t,"email")].type&&(0,p.jsx)(l.Z,{message:n["".concat(t,"email")].message})]})}),(0,p.jsx)(a.Z,{md:6,children:(0,p.jsx)(s.Z,{label:"Mobile",children:(0,p.jsx)(c.Z,v(v({},f),{},{name:"".concat(t,"phone")}))})})]}),x([].concat((0,r.Z)(m.td),(0,r.Z)(m.Sf),(0,r.Z)(m.n),(0,r.Z)(m.nx)))&&(0,p.jsx)(s.Z,{label:"Status",children:(0,p.jsx)(u.Z,v(v({},f),{},{name:"".concat(t,"status"),options:d.bg}))}),(0,p.jsx)(c.Z,v(v({},f),{},{name:"".concat(t,"userId"),type:"hidden"}))]})};f.defaultProps={prefix:""}},62929:function(e,n,t){t.d(n,{Y:function(){return o},l:function(){return r}});var r=[{text:"Account Type",value:""},{text:"Admin",value:"admin"},{text:"Customer",value:"customer"},{text:"Supplier",value:"supplier"},{text:"Tenant",value:"tenant"}],o=function(e){return[{icon:"edit",tooltip:"Edit",to:"/dashboard/".concat(e.type,"s/").concat("supplier"===e.type?"edit":"manage","?id=").concat(e.id)}]}},18902:function(e,n,t){t.d(n,{I:function(){return r}});var r=[{text:"Select Role",value:""},{text:"Owner",value:"owner"},{text:"Manager",value:"manager"},{text:"User",value:"user"}]}}]);