"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3180],{13304:function(e,n,t){var r=t(64836);n.Z=void 0;var a=r(t(64938)),i=t(85893);n.Z=(0,a.default)((0,i.jsx)("path",{d:"M18 16v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1zm-5 0h-2v-2h2zm0-4h-2V8h2zm-1 10c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2"}),"NotificationImportant")},23855:function(e,n,t){t.d(n,{Z:function(){return d}});var r=t(83946),a=t(13882),i={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},o=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,s=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,u=/^([+-])(\d{2})(?::?(\d{2}))?$/;function d(e,n){(0,a.Z)(1,arguments);var t,d,f=n||{},v=null==f.additionalDigits?2:(0,r.Z)(f.additionalDigits);if(2!==v&&1!==v&&0!==v)throw RangeError("additionalDigits must be 0, 1 or 2");if(!("string"==typeof e||"[object String]"===Object.prototype.toString.call(e)))return new Date(NaN);var y=function(e){var n,t={},r=e.split(i.dateTimeDelimiter);if(r.length>2)return t;if(/:/.test(r[0])?(t.date=null,n=r[0]):(t.date=r[0],n=r[1],i.timeZoneDelimiter.test(t.date)&&(t.date=e.split(i.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){var a=i.timezone.exec(n);a?(t.time=n.replace(a[1],""),t.timezone=a[1]):t.time=n}return t}(e);if(y.date){var g=function(e,n){var t=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+n)+"})|(\\d{2}|[+-]\\d{"+(2+n)+"})$)"),r=e.match(t);if(!r)return{year:null};var a=r[1]&&parseInt(r[1]),i=r[2]&&parseInt(r[2]);return{year:null==i?a:100*i,restDateString:e.slice((r[1]||r[2]).length)}}(y.date,v);t=function(e,n){if(null===n)return null;var t=e.match(o);if(!t)return null;var r=!!t[4],a=l(t[1]),i=l(t[2])-1,s=l(t[3]),u=l(t[4]),d=l(t[5])-1;if(r){return(c=n,f=u,v=d,f>=1&&f<=53&&v>=0&&v<=6)?(y=n,g=u,b=d,h=new Date(0),h.setUTCFullYear(y,0,4),_=h.getUTCDay()||7,h.setUTCDate(h.getUTCDate()+((g-1)*7+b+1-_)),h):new Date(NaN)}var c,f,v,y,g,b,h,_,I,q,$,x,j,S=new Date(0);return(I=n,q=i,$=s,q>=0&&q<=11&&$>=1&&$<=(m[q]||(p(I)?29:28))&&(x=n,j=a,j>=1&&j<=(p(x)?366:365)))?(S.setUTCFullYear(n,i,Math.max(a,s)),S):new Date(NaN)}(g.restDateString,g.year)}if(isNaN(t)||!t)return new Date(NaN);var b=t.getTime(),h=0;if(y.time&&(isNaN(h=function(e){var n=e.match(s);if(!n)return null;var t,r,a,i=c(n[1]),o=c(n[2]),u=c(n[3]);return(t=i,r=o,a=u,24===t?0===r&&0===a:a>=0&&a<60&&r>=0&&r<60&&t>=0&&t<25)?36e5*i+6e4*o+1e3*u:NaN}(y.time))||null===h))return new Date(NaN);if(y.timezone){if(isNaN(d=function(e){if("Z"===e)return 0;var n=e.match(u);if(!n)return 0;var t,r,a="+"===n[1]?-1:1,i=parseInt(n[2]),o=n[3]&&parseInt(n[3])||0;return(t=i,r=o,r>=0&&r<=59)?a*(36e5*i+6e4*o):NaN}(y.timezone)))return new Date(NaN)}else{var _=new Date(b+h),I=new Date(0);return I.setFullYear(_.getUTCFullYear(),_.getUTCMonth(),_.getUTCDate()),I.setHours(_.getUTCHours(),_.getUTCMinutes(),_.getUTCSeconds(),_.getUTCMilliseconds()),I}return new Date(b+h+d)}function l(e){return e?parseInt(e):1}function c(e){return e&&parseFloat(e.replace(",","."))||0}var m=[31,null,31,30,31,30,31,31,30,31,30,31];function p(e){return e%400==0||e%4==0&&e%100}},19958:function(e,n,t){t.d(n,{V:function(){return V}});var r=t(16835),a=t(50029),i=t(59499),o=t(64687),s=t.n(o),u=t(67294),d=t(45697),l=t(6812),c=t(50319),m=t(95102),p=t(11163),f=t.n(p),v=t(42283),y=t(79665),g=t(76600),b=t(15214),h=t(9270),_=t(62140),I=t(49501),q=t(55563),$=t(6710),x=t(95103),j=t(84043),S=t(50480),w=t(69368),D=t(11057),O=t(6054),Z=t(71772),k=t(85893);function A(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function C(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?A(Object(t),!0).forEach(function(n){(0,i.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var N=function(e){var n=e.accountId,t=e.accountName,r=e.canSelectAccount,a=e.control,i=e.errors,o=e.setValue,s=e.watch,d=n?{value:n,label:t}:s("propertyOwner"),l=(0,O.Z)(d),c=function(e){o("contactUser",null)};(0,u.useEffect)(function(){d!==l&&l&&c(d)},[d]);var m={control:a,errors:i};return(0,k.jsxs)(h.Z,{children:[(0,k.jsx)(_.Z,{md:6,children:(0,k.jsx)(Z.P,C(C({},m),{},{defaultValue:n&&{value:n,label:t},errors:C({},i),isDisabled:!r,label:"Client",name:"propertyOwner",placeholder:"Select",type:"customer"}))}),(0,k.jsx)(_.Z,{md:6,children:(0,k.jsx)(Z.P,C(C({},m),{},{accountId:(null==d?void 0:d.value)||null,errors:C({},i),isDisabled:!d,label:"Contact Name",name:"contactUser",placeholder:d?"Select":"Select the location owner",type:"user"}))})]})},P=t(34197),T=function(e,n){var t=e.propertyOwner,r=e.contactUser;return e.Account_Locations={data:{accountId:t.value}},delete e.propertyOwner,e.contactUserId=(null==r?void 0:r.value)||null,delete e.contactUser,n&&delete e.Account_Locations,e},U=function(e,n,t,r){var a={location:T(e,!0),locationId:n.locationId,accountId:n.accountId,newAccountId:n.newAccountId,hasChanged:n.hasChanged};r({variables:a})},F=t(74231),E=t(58969),R=t(26380),L=t(72936),M=t(58095);function z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function J(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?z(Object(t),!0).forEach(function(n){(0,i.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):z(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Q="/dashboard/properties/",V=function(e){var n,t,i,o,d=e.accountId,p=e.accountName,O=e.entity,Z=e.data,A=e.refetch,C=e.onAddressCreated,z=e.isPropsComponent,V=e.initialValues,W=e.xeroContactId,B=e.displayXeroContacts,H=e.xeroContacts,Y=e.displaySignin,X=e.handleXeroAuthorize,G=e.onClose,K=(0,M.a)(),ee=(0,L.x)().hasRole,en=(0,u.useState)(!1),et=en[0],er=en[1],ea=null==H?void 0:H.find(function(e){return e.value===W}),ei=J(J(J({},Z?(location.propertyOwner={label:Z.customer[0].account.name,value:Z.customer[0].account.id},location.contactUser=(null==Z?void 0:Z.user)&&Z.customer[0].account.id&&{label:Z.user.fullName,value:Z.user.id},location.access=Z.access,location.name=Z.name,location.status=Z.status,location.permitsRequired=Z.permitsRequired,location):{}),V),{},{xeroContact:ea})||{},eo=(0,v.cI)({defaultValues:ei,resolver:(0,y.S)((0,F.Ry)().shape({access:(0,F.Z_)().required(),contactUser:(0,F.Ry)().required(),name:(0,F.Z_)().required(),propertyOwner:(0,F.Ry)().required(),status:ee("admin")&&(0,F.Z_)().required(),permitsRequired:(0,F.O7)()}))}),es=eo.control,eu=eo.errors,ed=eo.handleSubmit,el=eo.register,ec=eo.setValue,em=eo.getValues,ep=eo.watch,ef=(0,l.a)(m.yf,{variables:{id:null==Z?void 0:Z.id},skip:!(null!=Z&&Z.id)}).data,ev=(ef=void 0===ef?{property:{}}:ef).property,ey=(i=(0,a.Z)(s().mark(function e(n){var t,r,a,i,o,u,d,l,c;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:var o,s;return t=n.addressFormData,r=n.outerFormData,a={Addresses:{data:{Address:{data:J({},t)},entity:O}}},i=J(J(J({},em()),a),r),ee("customer")&&(i.status="active"),e.next=6,e_({variables:{objects:[T(o=i)]}});case 6:c=void 0===(l=(d=void 0===(d=(u=void 0===(u=e.sent.data)?{}:u).insert_Location)?{}:d).returning)?{}:l,C&&C(c),K.close();case 14:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}),eg=(o=(0,a.Z)(s().mark(function e(n){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:K.show({title:"Add new address",content:(0,k.jsx)(E.k,{onCancel:function(){},onSubmit:function(e){ey({addressFormData:e,outerFormData:n})},type:"text"}),submit:!1});case 1:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)}),eb=(0,c.D)(m.A1,{onCompleted:function(e){if(!z){var n=e.insert_Location.returning[0].id;K.close(),A?A():f().push("".concat(Q,"view?id=").concat(n))}}}),eh=(0,r.Z)(eb,2),e_=eh[0],eI=eh[1].loading,eq=(0,c.D)(m.$A,{onCompleted:function(e){var n=e.update_Location_by_pk.id;K.close(),A?A():f().push("".concat(Q,"view?id=").concat(n))}}),e$=(0,r.Z)(eq,2),ex=e$[0],ej=e$[1].loading,eS=(0,c.D)(m.$E),ew=(0,r.Z)(eS,1)[0],eD=function(e){if(er(!1),Z){if("inactive"===e.status&&!(n=ev.jobs).every(function(e){return!!(0,P.E)(e,["completed","closed"])})){er(!0);return}e.xeroContact&&ew({variables:{id:null==Z?void 0:null===(i=Z.customer[0])||void 0===i?void 0:i.account.id,changes:{meta:J(J({},null==Z?void 0:null===(o=Z.customer[0])||void 0===o?void 0:o.account.meta),{},{xeroContactId:e.xeroContact.value})}}});var n,t,r,a,i,o,s={locationId:null==Z?void 0:Z.id,accountId:null==Z?void 0:null===(t=Z.customer[0])||void 0===t?void 0:t.account.id,newAccountId:null==e?void 0:null===(r=e.propertyOwner)||void 0===r?void 0:r.value,hasChanged:(null==Z?void 0:null===(a=Z.customer[0])||void 0===a?void 0:a.account.id)!==(null==e?void 0:e.propertyOwner.value)};U(J(J({},e),{},{xeroContact:void 0}),s,Z.id,ex),G()}else eg(e),G()},eO={control:es,errors:eu,register:el};return(0,k.jsxs)(g.Z,{disabled:eI||ej,id:"offCanvasForm",handleSubmit:ed(eD),children:[et&&(0,k.jsx)(b.Z,{context:"info",content:" This location cannot be made inactive, it has active jobs."}),(0,k.jsx)(h.Z,{children:(0,k.jsx)(_.Z,{md:12,children:(0,k.jsx)(N,J(J({},eO),{},{accountId:d,accountName:p,canSelectAccount:!d,setValue:ec,watch:ep}))})}),(0,k.jsx)(I.Z,{label:"Name",children:(0,k.jsx)(q.Z,J(J({},eO),{},{name:"name"}))}),(0,k.jsx)(I.Z,{label:"Access information",children:(0,k.jsx)($.Z,J(J({},eO),{},{name:"access",rows:4}))}),ee("admin")&&(0,k.jsx)(I.Z,{label:"Status",children:(0,k.jsx)(x.Z,J(J({},eO),{},{name:"status",options:R.bg}))}),(0,k.jsx)(v.Qr,{name:"permitsRequired",control:es,render:function(e){var n=e.value,t=e.onChange;return(0,k.jsx)(S.Z,{control:(0,k.jsx)(w.Z,{color:"secondary",checked:n||!1,onChange:function(e){return t(e.target.checked)}}),label:"Permits required"})}}),ee("admin")&&void 0!==B&&B&&(0,k.jsx)(I.Z,{label:"Xero Contact",children:Y?(0,k.jsx)(D.Z,{variant:"contained",onClick:function(){X()},children:"Connect to Xero to select Contact"}):(0,k.jsx)(j.Z,J(J({options:H},eO),{},{name:"xeroContact"}))})]})};N.propTypes={accountId:d.number,accountName:d.string,data:d.object,refetch:d.func,offCanvas:d.func}},37559:function(e,n,t){t.d(n,{r:function(){return _}});var r=t(59499),a=t(16835),i=t(67294),o=t(52019),s=t(9270),u=t(62140),d=t(49501),l=t(84043),c=t(33366),m=t(71772),p=t(52220),f=t(83894),v=t(10367),y=t(19015),g=t(85893);function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var _=function(e){var n=e.control,t=e.errors,r=e.initialValues,l=e.register,v=e.setFilters,b=e.setValue,_=e.watch,q=(0,i.useContext)(o.Z).hasRole,$={control:n,errors:t,register:l},x=_("customerId"),j=_("supplierId"),S=_("startDate"),w=_("userId"),D=!r.customerId;(0,i.useEffect)(function(){var e=O.filter(function(e){return"quoteOffered"===e.value}),n=(0,a.Z)(e,1)[0];v(function(e){return h(h({},e),{},{status:S?[n.value]:null})}),b("status",S?[n]:null)},[S]);var O=c.iz.map(function(e){return q("supplier")?{label:e.supplierText,value:e.value}:q("customer")?{label:e.customerText,value:e.value}:{label:e.text,value:e.value}}).filter(function(e){return null!==e.label});(0,i.useEffect)(function(){D&&v(function(e){return h(h({},e),{},{customerId:(null==x?void 0:x.value)||null})})},[x]),(0,i.useEffect)(function(){D&&v(function(e){return h(h({},e),{},{supplierId:(null==j?void 0:j.value)||null})})},[j]),(0,i.useEffect)(function(){v(function(e){return h(h({},e),{},{userId:"number"==typeof w?w:(null==w?void 0:w.value)||null})})},[w]);var Z=function(e){var n=e.map(function(e){return e.value});v(function(e){return h(h({},e),{},{status:n.length>0?n:null})}),b("status",e)};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(s.Z,{children:[(0,g.jsx)(u.Z,{md:6,children:(0,g.jsx)(p.M,h(h({},$),{},{name:"startDate",onChange:function(e){v(function(n){return h(h({},n),{},{startDate:e||null})}),b("startDate",e)},placeholder:"Quote offered date"}))}),(0,g.jsx)(u.Z,{md:6,children:(0,g.jsx)(p.M,h(h({},$),{},{name:"endDate",onChange:function(e){var n=e?(0,f.Z)(e):e;v(function(e){return h(h({},e),{},{endDate:n})}),b("endDate",n)},placeholder:"Quote due date"}))})]}),(0,g.jsxs)(s.Z,{align:"baseline",children:[(0,g.jsx)(u.Z,{md:6,children:(0,g.jsx)(d.Z,{label:null,children:(0,g.jsx)(I,h(h({},$),{},{isDisabled:Boolean(S),placeholder:"Select status",name:"status",isMulti:Boolean(!S),onChange:Z,options:O}))})}),!q(["customer","supplier"])&&(0,g.jsx)(u.Z,{md:6,children:(0,g.jsx)(m.P,h(h({},$),{},{label:"",name:"customerId",placeholder:"Select customer",isClearable:!0,type:"customer"}))}),q(y.n)&&(0,g.jsx)(u.Z,{md:6,children:(0,g.jsx)(m.P,h(h({},$),{},{errors:h({},t),label:"",userId:r.userId,name:"userId",placeholder:"Select user",type:"user"}))})]}),!q(["supplier","customer"])&&!S&&(0,g.jsx)(s.Z,{children:(0,g.jsx)(u.Z,{md:6,children:(0,g.jsx)(m.P,h(h({},$),{},{label:"",name:"supplierId",isClearable:!0,placeholder:"Select supplier",type:"supplier"}))})})]})},I=(0,v.ZP)(l.Z).withConfig({displayName:"filter__StyledSelect",componentId:"sc-18vz0yz-0"})(["div > div > div{background:",";}div > div{background:",";}"],function(e){return e.isDisabled&&"#dddddd"},function(e){return e.isDisabled&&"#dddddd"})},18479:function(e,n,t){t.d(n,{w:function(){return v},L:function(){return f}});var r,a,i,o,s=t(71383),u=t(75063),d=t(15641),l=t(59636),c=t(4431),m=(0,u.Ps)(r||(r=(0,s.Z)(["\n  fragment QuoteFields on Job {\n    quoteNumber\n    quoteDue\n    quoteCharge\n  }\n"])));(0,u.Ps)(a||(a=(0,s.Z)(["\n  query Quote($id: Int!) {\n    job: Job_by_pk(id: $id) {\n      id\n      title\n      description\n      costCategory\n      status\n      workStatus\n      scheduledAt\n      createdAt\n      customerId\n      customerUserId\n      locationId\n      managerId\n      parentId\n      serviceId\n      slaId\n      tenantId\n      reference\n      amount\n      accountByTenantid {\n        id\n        companyNumber\n        createdAt\n        name\n        status\n        type\n        updatedAt\n        website\n        clientType\n        managerId\n        vatId\n        meta\n        media: Media {\n          id\n          medium: Medium {\n            id\n            category\n            filename\n            meta\n            type\n          }\n        }\n        manager: Manager {\n          id\n          fullName\n        }\n      }\n      customer: Account {\n        id\n        companyNumber\n        createdAt\n        name\n        status\n        type\n        updatedAt\n        website\n        clientType\n        managerId\n        vatId\n        meta\n        media: Media {\n          id\n          medium: Medium {\n            id\n            category\n            filename\n            meta\n            type\n          }\n        }\n        manager: Manager {\n          id\n          fullName\n        }\n      }\n      customerUser: CustomerUser {\n        id\n        name: nameFirst\n        nameFirst\n        nameLast\n        phone\n        status\n        email\n        createdAt\n        fullName\n        accounts: Account_Users {\n          id\n          role\n          position\n          isContact\n          status\n          account: Account {\n            id\n            name\n            type\n          }\n        }\n      }\n      expenses: Expenses {\n        id\n        paid\n        description\n        amount\n        markup\n        vat\n      }\n      location: Location {\n        id\n        access\n        createdAt\n        name\n        contactUserId\n      }\n      messages: Messages {\n        id\n        message\n        priority\n        taskId\n        jobId\n        locationId\n        description\n      }\n      service: Service {\n        id\n        name\n        countryId\n        currencyId\n      }\n      supplier: Suplier {\n        id\n        companyNumber\n        createdAt\n        name\n        status\n        type\n        updatedAt\n        website\n        clientType\n        managerId\n        vatId\n        meta\n        media: Media {\n          id\n          medium: Medium {\n            id\n            category\n            filename\n            meta\n            type\n          }\n        }\n        manager: Manager {\n          id\n          fullName\n        }\n      }\n      manager: Manager {\n        id\n        name: nameFirst\n        nameFirst\n        nameLast\n        phone\n        status\n        email\n        createdAt\n        fullName\n        accounts: Account_Users {\n          id\n          role\n          position\n          isContact\n          status\n          account: Account {\n            id\n            name\n            type\n          }\n        }\n      }\n      timings: JobTimings {\n        id\n        status\n        createdAt\n      }\n    }\n  }\n"])));var p=t(69496),f=(0,u.Ps)(i||(i=(0,s.Z)(["\n  query GetQuotes(\n    $endDate: timestamptz\n    $limit: Int\n    $offset: Int\n    $orderBy: Job_order_by!\n    $q: String\n    $startDate: timestamptz\n    $status: [String!]\n    $type: String\n  ) {\n    quotes: Job(\n      limit: $limit\n      offset: $offset\n      where: {\n        _and: [\n          {\n            _or: [\n              { description: { _ilike: $q } }\n              { reference: { _ilike: $q } }\n              { title: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { Customer: { name: { _ilike: $q } } }\n              { CustomerUser: { email: { _ilike: $q } } }\n              { Supplier: { name: { _ilike: $q } } }\n              { SupplierUser: { email: { _ilike: $q } } }\n              { Location: { name: { _ilike: $q } } }\n              { Taxonomy: { Taxonomy: { name: { _ilike: $q } } } }\n            ]\n          }\n        ]\n        createdAt: { _gte: $startDate }\n        quoteDue: { _lte: $endDate }\n        status: { _in: $status }\n        quoted: { _eq: true }\n        type: { _eq: $type }\n      }\n      order_by: [$orderBy]\n    ) {\n      ...JobFields\n      ...JobSupplierFields\n      ...QuoteFields\n      quotations: SupplierQuotes {\n        id\n        createdAt\n        jobId\n        methodStatement\n        notes\n        quoteNumber\n        startDate\n        status\n        totalDuration\n        totalDurationUnit\n        updatedAt\n        siteVisitAt\n        supplier: Supplier {\n          ...AccountFields\n        }\n      }\n      location: Location {\n        id\n        name\n      }\n      service: Service {\n        id\n        name\n      }\n      timings: JobTimings {\n        id\n        status\n        notes\n        createdAt\n        user: User {\n          ...UserFields\n        }\n      }\n    }\n    meta: Job_aggregate(\n      where: {\n        _and: [\n          {\n            _or: [\n              { description: { _ilike: $q } }\n              { reference: { _ilike: $q } }\n              { title: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { Customer: { name: { _ilike: $q } } }\n              { CustomerUser: { email: { _ilike: $q } } }\n              { Supplier: { name: { _ilike: $q } } }\n              { SupplierUser: { email: { _ilike: $q } } }\n              { Location: { name: { _ilike: $q } } }\n              { Taxonomy: { Taxonomy: { name: { _ilike: $q } } } }\n            ]\n          }\n        ]\n        createdAt: { _gte: $startDate }\n        quoteDue: { _lte: $endDate }\n        status: { _in: $status }\n        quoted: { _eq: true }\n        type: { _eq: $type }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),d.z,l.aL,m,l.H_,p.Px),v=function(e){var n=e.tagsWhere;return(0,u.Ps)(o||(o=(0,s.Z)(["\n  query GetQuotes(\n    $customerId: Int\n    $date: timestamptz\n    $endDate: timestamptz\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $customerManagerId: Int\n    $offset: Int\n    $orderBy: Job_order_by!\n    $q: String\n    $startDate: timestamptz\n    $status: [String!]\n    $supplierId: Int\n    $type: String\n    $userId: Int\n  ) {\n    quotes: Job(\n      limit: $limit\n      offset: $offset\n      where: {\n        _and: [\n          {\n            _or: [\n              { description: { _ilike: $q } }\n              { reference: { _ilike: $q } }\n              { title: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { Customer: { name: { _ilike: $q } } }\n              { CustomerUser: { email: { _ilike: $q } } }\n              { Supplier: { name: { _ilike: $q } } }\n              { SupplierUser: { email: { _ilike: $q } } }\n              { Location: { name: { _ilike: $q } } }\n              { Taxonomy: { Taxonomy: { name: { _ilike: $q } } } }\n            ]\n          }\n        ]\n        ",'\n        createdAt: { _gte: $startDate }\n        quoteDue: { _lte: $endDate }\n        status: { _in: $status }\n        type: { _eq: $type }\n        customerId: { _eq: $customerId }\n        locationId: { _eq: $locationId }\n        managerId: { _eq: $managerId }\n        Customer: { managerId: { _eq: $customerManagerId } }\n        supplierId: { _eq: $supplierId }\n        quoted: { _eq: true }\n        customerUserId: { _eq: $userId }\n      }\n      order_by: [$orderBy]\n    ) {\n      ...JobFields\n      ...JobAdminFields\n      ...QuoteFields\n      statusLog\n      quotations: SupplierQuotes {\n        id\n        createdAt\n        jobId\n        methodStatement\n        notes\n        quoteNumber\n        startDate\n        status\n        totalDuration\n        totalDurationUnit\n        updatedAt\n        siteVisitAt\n        supplier: Supplier {\n          ...AccountFields\n        }\n        lineItems: SupplierQuoteLineItems {\n          id\n          qty\n          total\n        }\n      }\n      supplier: Supplier {\n        ...AccountFields\n      }\n      admin: Admin {\n        id\n        name\n      }\n      customer: Customer {\n        ...AccountFields\n        manager: Manager {\n          id\n          fullName\n        }\n      }\n      location: Location {\n        id\n        name\n      }\n      sublocation: Sublocation {\n        id\n        name\n      }\n      manager: Manager {\n        ...UserFields\n      }\n      service: Service {\n        id\n        name\n      }\n      timings: JobTimings {\n        id\n        status\n        notes\n        createdAt\n        user: User {\n          ...UserFields\n        }\n      }\n      tags: Taxonomy(\n        where: {\n          entity: { _eq: "Job" }\n          Taxonomy: {\n            _and: [\n              {status: { _eq: "active" }}\n              {type: { _eq: "tags" }}\n            ]\n          }\n        }\n      ) {\n        id\n        tag: Taxonomy {\n          id\n          name\n          meta\n          type\n        }\n      }\n    }\n    meta: Job_aggregate(\n      where: {\n        _and: [\n          {\n            _or: [\n              { description: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { reference: { _ilike: $q } }\n              { title: { _ilike: $q } }\n              { Customer: { name: { _ilike: $q } } }\n              { CustomerUser: { email: { _ilike: $q } } }\n              { Supplier: { name: { _ilike: $q } } }\n              { SupplierUser: { email: { _ilike: $q } } }\n              { Location: { name: { _ilike: $q } } }\n              { Taxonomy: { Taxonomy: { name: { _ilike: $q } } } }\n            ]\n          }\n        ]\n        ',"\n        createdAt: { _gte: $startDate }\n        quoteDue: { _lte: $endDate }\n        status: { _in: $status }\n        customerId: { _eq: $customerId }\n        locationId: { _eq: $locationId }\n        managerId: { _eq: $managerId }\n        Customer: { managerId: { _eq: $customerManagerId } }\n        supplierId: { _eq: $supplierId }\n        quoted: { _eq: true }\n        type: { _eq: $type }\n        customerUserId: { _eq: $userId }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),n,n,d.z,c.WW,l.aL,l.wd,m,p.Px)}},44594:function(e,n,t){t.d(n,{v:function(){return Y}});var r=t(27812),a=t(16835),i=t(59499),o=t(67294),s=t(11163),u=t.n(s),d=t(6812),l=t(73359),c=t(57460),m=t.n(c),p=t(78289),f=t(62466),v=t(11082),y=t(26186),g=t(68956),b=t(16551),h=t(55843),_=t(77439),I=t(40826),q=t(58965),$=t(18479),x=t(87175),j=t(83894),S=t(23855);function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function D(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach(function(n){(0,i.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var O=function(e,n,t,r){var a=e.limit,i=e.offset,o=e.orderBy,s=e.q,u=e.status,d=e.tagsWhere;return t.hasOwnProperty("tileName")?{query:x.Z,variables:D({q:null,accountId:null,userId:null,currentUserId:null==n?void 0:n.id,asAt:(0,j.Z)((0,S.Z)(r.asAt)),tileName:null==t?void 0:t.tileName,limit:50,offset:0,orderBy:{jobId:"desc"},monthStart:r.monthStart,dayStart:r.todayStart,yearStart:r.yearStart,adminId:null==n?void 0:n.adminId},e)}:"supplier"===n.accountType?{query:$.L,variables:D({limit:a,offset:i,orderBy:o,q:s,status:u},e)}:{query:(0,$.w)({tagsWhere:d}),variables:D({},e)}},Z=t(67872),k=t(33366),A=t(93673),C=t(825),N=t(72936),P=t(55863),T=t(48829),U=t(42846),F=t(94568),E=t(48501),R=t(43703),L=t(69119),M=t(38148),z=function(e){var n=(0,R.Z)(e),t=(0,L.Z)(e),r=(0,j.Z)(e),a=(0,M.Z)(e);return{monthStart:n,todayEnd:r,todayStart:t,yearStart:a}},J=t(13304),Q=t(46353),V=t(10367),W=t(85893);function B(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function H(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?B(Object(t),!0).forEach(function(n){(0,i.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):B(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Y=function(e){var n,t,i,c,$,x=e.filters,j=(0,o.useContext)(p.Z),S=(0,P.q)(),w=(0,s.useRouter)().query,D=(0,o.useState)(!1),R=D[0],L=D[1],M=null===(n=S.admin)||void 0===n?void 0:null===(t=n.jobSetting)||void 0===t?void 0:t.jobNumberPrefix,V=null===(i=S.admin)||void 0===i?void 0:null===(c=i.jobSetting)||void 0===c?void 0:c.jobNumberSuffix,B=(0,N.x)(),Y=B.hasRole,ee=B.user,en=(0,U.x)({filters:x}),et=en.initialData,er=en.ref,ea=H(H({},et),{},{managerId:x.managerId?ee.id:null,tagsWhere:(0,Q.Y)(et.tags)}),ei=new Date(w.asAt),eo=(0,o.useState)({monthStart:z(ei).monthStart,todayEnd:z(ei).todayEnd,todayStart:z(ei).todayStart,yearStart:z(ei).yearStart,asAt:w.asAt}),es=eo[0],eu=eo[1];(0,o.useEffect)(function(){var e,n=z(ei),t=n.monthStart,r=n.todayEnd;eu({monthStart:t,todayEnd:r,todayStart:n.todayStart,yearStart:n.yearStart,asAt:w.asAt})},[null==x?void 0:x.asAt]);var ed=O(ea,ee,w,es),el=ed.query,ec=ed.variables;"Accepted"===ec.status?(ec.type="reactive",delete ec.status):delete ec.type;var em=(0,d.a)(el,{variables:ec}),ep=em.data,ef=(ep=void 0===ep?{quotes:[],meta:{aggregate:{totalCount:0}}}:ep).quotes,ev=ep.meta,ey=em.loading,eg=em.refetch,eb=(0,l.t)(el,{variables:H(H({},ec),{},{limit:(null==ev?void 0:null===($=ev.aggregate)||void 0===$?void 0:$.totalCount)||150}),onCompleted:function(e){var n=e.quotes;if(R){var t=m().unparse(eN(n,!0)),r="data:application/octet-stream,"+encodeURIComponent(t);(0,T.S)(r,"quotes.csv"),L(!1)}},skip:!0}),eh=(0,a.Z)(eb,2),e_=eh[0],eI=eh[1].loading,eq=void 0===eI||eI,e$=function(){eg(),j.close()},ex=function(e){e.stopPropagation(),e_(),L(!0)},ej=function(e){var n=e.e,t=e.row;n.stopPropagation(),j.show({content:(0,W.jsx)(E.m,{onSuccess:e$,quotationId:t.quotationsId}),title:"Quotation",width:"50%"})},eS={content:"Edit",context:"secondary",icon:["fas","edit"],onClick:function(e,n){e.stopPropagation(),u().push("/dashboard/issues/manage?id=".concat(n.number,"&quoted=1"))},tooltip:"Edit"},ew={context:"info",icon:["fas","receipt"],onClick:function(e,n){return ej({e:e,row:n})},tooltip:"Fill quotation"},eD={context:"secondary",icon:["fas","receipt"],onClick:function(e,n){return u().push("/dashboard/issues/view?id=".concat(n.number))},tooltip:"info"},eO=[{sortable:!0,text:"ID",sortName:"id",formatter:function(e){var n=e.row;return(0,W.jsx)(C.D,{id:n.id,number:n.number,numberPrefix:M,numberSuffix:V,status:n.status,openCanvas:!0,type:n.type,isQuote:n.quoted})}},{text:"Creator"},{hidden:!0},{hidden:!0},{hidden:!0},{hidden:!0},{hidden:!0},{hidden:!0},{hidden:!0},{hidden:!0},{hidden:!0},{hidden:!0},{formatter:function(e){var n=e.row;return(0,W.jsx)(W.Fragment,{children:(0,W.jsx)(G,{children:n.type})})},text:"Type",sortName:"type"},{formatter:function(e){var n=e.row;return(0,W.jsx)(W.Fragment,{children:(0,W.jsx)(G,{children:n.description})})},text:"Description"},{sortable:!0,hidden:!Y("admin"),formatter:(0,f.Z)("/dashboard/users/view","managerId","manager"),sortName:'{"Manager": {"nameFirst": "ORDER"}}',text:"Assigned to"},{sortable:!0,hidden:!Y(["admin","customer"]),formatter:(0,f.Z)("/dashboard/properties/view","propertyId","location"),text:"Location",sortName:'{"Location": {"name": "ORDER"}}'},{sortable:!0,hidden:Y(["admin","customer"]),text:"Location",sortName:'{"Location": {"name": "ORDER"}}'},{sortable:!0,hidden:!Y("admin"),formatter:(0,f.Z)("/dashboard/customers/view","customerId","customer"),text:"Customer",sortName:'{"Customer": {"name": "ORDER"}}'},{sortable:!0,hidden:!Y("admin")&&!Y("supplier"),formatter:(0,f.Z)("/dashboard/suppliers/view","supplierId","acceptSupplier"),text:"Accepted Supplier",sortName:'{"Supplier": {"name": "ORDER"}}'},{sortable:!0,hidden:!Y("admin")&&!Y("supplier"),formatter:function(e){var n,t=e.row;return e.data,(0,W.jsx)(W.Fragment,{children:(null==t?void 0:null===(n=t.offeredSupplier)||void 0===n?void 0:n.length)>0?(0,W.jsx)(W.Fragment,{children:((null==t?void 0:t.offeredSupplier)||[]).map(function(e){var n;return(0,W.jsx)(X,{onClick:function(n){var t;return eZ(n,null==e?void 0:null===(t=e.supplier)||void 0===t?void 0:t.id)},children:null==e?void 0:null===(n=e.supplier)||void 0===n?void 0:n.name})})}):"-"})},text:"Offered Supplier",sortName:'{"Supplier": {"name": "ORDER"}}'},{hidden:!Y("admin"),text:"Quotations"},{hidden:!Y("admin")&&!Y("supplier"),text:"Received"},{hidden:!Y("admin"),text:"Quotations Range (if multiple)",formatter:function(e){var n=e.row.range;return n?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(K,{children:["high: ",(0,v.Z)(n.high)]}),(0,W.jsxs)(K,{children:["low:\xa0 ",(0,v.Z)(n.low)]})]}):"N/A"}},{sortable:!0,text:"Quote Due",sortName:"quoteDue",formatter:function(e){var n=e.row,t=(0,y.Z)(new Date),r="Quote"===n.type,a=n.status.includes("quoteSent");return r&&n.due<t&&!a?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(J.Z,{color:"error"})," ",n.due]}):n.due}},{text:"Scheduled",sortable:!0,sortName:"scheduledAt"},{text:"Created",sortable:!0,sortName:"createdAt"},{formatter:function(e){var n=e.row;return(null==n?void 0:n.offeredSupplier.length)>0&&null!=n&&n.offeredSupplier.every(function(e){return"quotationRejected"===e.status})?"Rejected":n.statusText},text:"Status",sortable:!0,sortName:"status"},{hidden:!0},{hidden:!0},{formatter:g.Z,formatterData:function(e){var n=[];return Y("admin")&&n.push(eS),Y("admin")&&n.push(eD),(Y("admin")||Y("supplier"))&&"quoteOffered"===e.status&&n.push(ew),n},text:"Actions"}],eZ=function(e,n){e.stopPropagation(),u().push("/dashboard/suppliers/view?id=".concat(n))},ek=function(e){u().push("/dashboard/issues/view?id=".concat(e.number))},eA=function(e){e.stopPropagation(),u().push("/dashboard/issues/manage?quoted=1")},eC=function(e){var n=null;if(e.length>1){var t=e.map(function(e){var n;return null===(n=e.lineItems)||void 0===n?void 0:n.reduce(function(e,n){return e+(n.total||0)*n.qty},0)});n={high:Math.max.apply(Math,(0,r.Z)(t||[])),low:Math.min.apply(Math,(0,r.Z)(t||[]))}}return n},eN=function(e,n){return e.map(function(e){var t,a,i,o,s,u,d,l,c,m,p,f,v,g,b,h=(0,r.Z)(k.iz).find(function(n){return n.value===e.status})||{text:"Accepted"},_=h.text,I=h.supplierText,q=h.customerText,$=((0,r.Z)(A.x).find(function(n){return n.value===e.type})||{text:"Quote"}).text,x=e.manager?"".concat(e.manager.nameFirst," ").concat(e.manager.nameLast):"Unassigned",j=e.scheduledAt?(0,y.Z)(e.scheduledAt,!0):"-",S=(null==e?void 0:null===(t=e.quotations)||void 0===t?void 0:t.length)>0?e.quotations:[];return{id:e.id,creator:(null==e?void 0:null===(a=e.timings[0])||void 0===a?void 0:null===(i=a.user)||void 0===i?void 0:i.fullName)||"-",description:null!=e&&e.description?null==e?void 0:e.description:"-",number:e.number,type:$,status:e.status,propertyId:null===(o=e.location)||void 0===o?void 0:o.id,managerId:null===(s=e.manager)||void 0===s?void 0:s.id,customerId:null===(u=e.customer)||void 0===u?void 0:u.id,supplierId:e.supplier?e.supplier.id:"",siteVisitStart:e.siteVisitStart,siteVisitEnd:e.siteVisitEnd,siteVisitWeekends:e.siteVisitWeekends,service:(null===(d=e.service)||void 0===d?void 0:d.name)||"-",manager:x,location:(null===(l=e.location)||void 0===l?void 0:l.name)||"-",property:(null===(c=e.location)||void 0===c?void 0:c.name)||"-",customer:(null===(m=e.customer)||void 0===m?void 0:m.name)||"-",acceptSupplier:e.supplier?e.supplier.name:"-",offeredSupplier:(null==e?void 0:null===(p=e.quotations)||void 0===p?void 0:p.length)>0?(b=e.quotations,n?b.map(function(e){var n;return null==e?void 0:null===(n=e.supplier)||void 0===n?void 0:n.name}).join(" / "):b):[],quotations:"".concat((null===(f=e.quotations)||void 0===f?void 0:f.length)||0,"/").concat(e.quoteNumber),received:"".concat(null===(v=e.quotations||[])||void 0===v?void 0:v.reduce(function(e,n){return"supplierQuoteComplete"===n.status?e+1:e},0),"/").concat((null===(g=e.quotations)||void 0===g?void 0:g.length)||0),range:eC(e.quotations),due:(0,y.Z)(e.quoteDue),scheduleDate:j,date:(0,y.Z)(e.createdAt),statusText:function(){if(S.every(function(e){return"quotationRejected"===e.status}))return"Quotation Rejected";if(Y("admin"));else if(Y("supplier"))return I||"Accepted";else if(Y("customer"))return q||"Accepted";return _}(),quoted:e.quoted||!1,quotationsId:e.quotations[0]&&e.quotations[0].id,actions:""}})},eP=function(){return(0,W.jsxs)(b.Z,{children:[(0,W.jsx)(h.Z,{marginRight:"xs",children:!(0,F.s)()&&(0,W.jsx)(_.Z,{content:"Export to excel",context:"secondary",size:"sm",disabled:eq,onClick:ex,children:(0,W.jsx)(I.Z,{context:"white",icon:"file-csv",size:"lg"})})}),Y("admin")&&(0,W.jsx)(_.Z,{context:"secondary",content:"Add Quote",onClick:eA,size:"sm"})]})};return(0,W.jsx)(q.Z,{toolbar:(0,W.jsx)(eP,{}),open:!0,title:"Quotes",children:(0,W.jsx)(Z.t,{columns:eO,loading:ey,meta:ev,ref:er,refetch:eg,rowClick:ek,rows:eN(ef)})})},X=V.ZP.button.withConfig({displayName:"table__LinkWrapper",componentId:"sc-1opq252-0"})(["cursor:pointer;margin:2px 0px;padding:8px 5px;color:rgb(41,41,204);background-color:transparent;border:none;&:hover{background-color:#dddddd;border-radius:5px;}"]),G=V.ZP.div.withConfig({displayName:"table__StyledLink",componentId:"sc-1opq252-1"})(["line-height:1.5em;height:3em;overflow:hidden;"]),K=V.ZP.div.withConfig({displayName:"table__DivWrapper",componentId:"sc-1opq252-2"})(["white-space:nowrap;"]);Y.defaultProps={filters:{customerId:null,date:null,managerId:!1,q:null,status:null,supplierId:null,filterType:"quotes_table"}}},87175:function(e,n,t){var r,a=t(71383),i=t(75063),o=t(15641),s=t(59636),u=t(4431),d=t(69496),l=function(e){var n=e.tagsWhere;return(0,i.Ps)(r||(r=(0,a.Z)(["\n  query GetDashboardList(\n    $accountId: Int\n    $adminId: Int\n    $customerId: Int\n    $supplierId: Int\n    $locationId: Int\n    $managerId: Int\n    $number: String\n    $asAt: timestamptz\n    $jobHoldReasonId: Int\n    $limit: Int\n    $monthStart: timestamptz\n    $offset: Int\n    $orderBy: dashboard_home_details_order_by!\n    $q: String\n    $tileName: String\n    $dayStart: timestamptz\n    $userId: Int\n    $status: [String!]\n    $yearStart: timestamptz\n    $type: String\n  ) {\n    quotes: getDashboard_HomeTile_Details(\n      args: {\n        accountId: $accountId\n        adminId: $adminId\n        asAt: $asAt\n        jobHoldReasonId: $jobHoldReasonId\n        monthStart: $monthStart\n        tileName: $tileName\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n        locationId: $locationId\n        managerId: $managerId\n      }\n      where: {\n        _and: [\n          {\n            _or: [\n              { number: { _eq: $number } }\n              { reference: { _ilike: $q } }\n              { description: { _ilike: $q } }\n              { customerName: { _ilike: $q } }\n              { serviceName: { _ilike: $q } }\n              { assignedTo: { _ilike: $q } }\n              { supplierName: { _ilike: $q } }\n              { location: { _ilike: $q } }\n              { number: { _ilike: $q } }\n            ]\n          }\n        ]\n        ",'\n        customerId: { _eq: $customerId }\n        supplierId: { _eq: $supplierId }\n        status: { _in: $status }\n        Job: { type: { _eq: $type } }\n        locationId: { _eq: $locationId }\n        managerId: { _eq: $managerId }\n      }\n      order_by: [$orderBy]\n      limit: $limit\n      offset: $offset\n    ) {\n      Assets {\n        id\n        assetId\n        __typename\n      }\n      ...JobFields\n      ...JobAdminFields\n      admin: Admin {\n        id\n        name\n        __typename\n      }\n      customer: Customer {\n        ...AccountFields\n        __typename\n      }\n      location: Location {\n        id\n        name\n        __typename\n      }\n      manager: Manager {\n        ...UserFields\n        __typename\n      }\n      service: Service {\n        id\n        name\n        __typename\n      }\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        id\n        taxonomyId\n        comments\n        taxonomy: Taxonomy {\n          name\n          __typename\n        }\n        __typename\n      }\n      tags: Taxonomy(\n        where: {\n          entity: { _eq: "Job" }\n          Taxonomy: {\n            _and: [\n              {status: { _eq: "active" }}\n              {type: { _eq: "tags" }}\n            ]\n          }\n        }\n      ) {\n        id\n        tag: Taxonomy {\n          id\n          name\n          meta\n          type\n        }\n      }\n      sla: SLA {\n        id\n        name\n        __typename\n      }\n      supplier: Supplier {\n        ...AccountFields\n        __typename\n      }\n      supplierOffers: SupplierOffers {\n        status\n        rate\n        supplier: Supplier {\n          ...AccountFields\n          __typename\n        }\n        __typename\n      }\n      job: Job {\n        type\n      }\n      timings: JobTimings(order_by: { createdAt: asc }) {\n        id\n        status\n        createdAt\n        user: User {\n          ...UserFields\n          __typename\n        }\n        __typename\n      }\n      quotations: SupplierQuotes {\n        id\n        createdAt\n        jobId\n        methodStatement\n        notes\n        quoteNumber\n        startDate\n        status\n        totalDuration\n        totalDurationUnit\n        updatedAt\n        siteVisitAt\n        supplier: Supplier {\n          ...AccountFields\n        }\n      }\n      id: jobId\n      number\n      # location\n      priority\n      scheduledAt\n      assignedTo\n      jobHoldReason\n      locationId\n      meta\n      managerId\n      description\n      customerName\n      customerId\n      reference\n      serviceName\n      status\n      supplierId\n      supplierName\n      timingStart\n      type\n      quoteNumber\n      quoteDue\n      createdAt\n    }\n    meta: getDashboard_HomeTile_Details_aggregate(\n      args: {\n        accountId: $accountId\n        adminId: $adminId\n        asAt: $asAt\n        jobHoldReasonId: $jobHoldReasonId\n        monthStart: $monthStart\n        tileName: $tileName\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n      }\n      where: {\n        _and: [\n          {\n            _or: [\n              { reference: { _ilike: $q } }\n              { description: { _ilike: $q } }\n              { customerName: { _ilike: $q } }\n              { serviceName: { _ilike: $q } }\n              { assignedTo: { _ilike: $q } }\n              { supplierName: { _ilike: $q } }\n              { location: { _ilike: $q } }\n              { number: { _ilike: $q } }\n            ]\n          }\n        ]\n        ',"\n        customerId: { _eq: $customerId }\n        supplierId: { _eq: $supplierId }\n        number: { _eq: $number }\n        status: { _in: $status }\n        Job: { type: { _eq: $type } }\n        locationId: { _eq: $locationId }\n        managerId: { _eq: $managerId }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n        __typename\n      }\n      __typename\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),n,n,o.z,u.WW,s.aL,s.wd,d.Px)};n.Z=l}}]);