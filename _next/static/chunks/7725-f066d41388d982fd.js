"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7725],{92375:function(e,t,n){n.d(t,{s:function(){return p}});var r=n(59499),o=n(67294),i=n(27434),s=n(86532),a=n(38895),l=n(22797),c=n(85893);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var p=function(e){var t=e.title,n=e.children,r=e.accordionSx,i=e.accordionSummarySx,u=e.accordionDetailsSx,p=e.expandIcon,x=e.headerAdornment,m=void 0===x?null:x,v=e.disabled,f=void 0!==v&&v,h=e.id,b=void 0===h?"".concat(t.toLowerCase(),"-details"):h,j=(0,o.useState)(!f),g=j[0],O=j[1];return(0,o.useEffect)(function(){f||O(!0)},[f]),(0,c.jsxs)(s.Z,{sx:d({borderTop:"none!important",boxShadow:"none",marginBottom:"15px",opacity:f?.5:1},r),expanded:g,onClick:f?function(){}:function(e){e.stopPropagation(),O(function(e){return!e})},children:[(0,c.jsxs)(a.Z,{sx:d({backgroundColor:"#F2F2F2",borderRadius:"4px"},i),expandIcon:(0,c.jsx)(p,{}),id:b,children:[m&&(0,c.jsx)(m,{}),t]}),(0,c.jsx)(l.Z,{onClick:function(e){return e.stopPropagation()},sx:d({},u),children:n})]})};p.defaultProps={accordionSx:{},accordionSummarySx:{},accordionDetailsSx:{},expandIcon:i.Z}},17497:function(e,t,n){n.d(t,{b:function(){return s}});var r=n(59499);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var s=function(e,t){if(null!==(n=e.meta)&&void 0!==n&&null!==(r=n.customerVATInvoice)&&void 0!==r&&null!==(o=r.rateInfo)&&void 0!==o&&o.selectedSla)return e.meta.customerVATInvoice.rateInfo.selectedSla;var n,r,o,s,a,l,c,u=i({},e.sla);u.entity="Job";var d=i({},null===(s=e.location)||void 0===s?void 0:null===(a=s.slas)||void 0===a?void 0:a.find(function(e){return e.slaId===(null==u?void 0:u.id)&&e.inUse}));null!=d&&d.sla&&(d.entity="Property",d.name=d.sla.name);var p=i({},null===(l=e.customer)||void 0===l?void 0:null===(c=l.slas)||void 0===c?void 0:c.find(function(e){return e.slaId===(null==u?void 0:u.id)&&e.inUse}));return null!=p&&p.sla&&(p.entity="Customer",p.name=p.sla.name),i(i(i({},u),p),d)}},825:function(e,t,n){n.d(t,{D:function(){return d}});var r=n(10367),o=n(51466),i=n(64951),s=n(69532),a=n(37068),l=n(46902),c=n(58095),u=n(85893),d=function(e){var t=e.id,n=e.invoiceNumber,r=e.number,d=e.numberPrefix,x=e.numberSuffix,m=e.openCanvas,v=e.isQuote,f=e.shortJobDesc,h=e.status,b=e.style,j=e.type,g=e.toggleShow,O=(0,c.a)(),y=function(e){e.stopPropagation(),O.show({content:(0,u.jsx)(a.g,{jobId:t,toggleShow:function(){O.close(),g&&g()},numberPrefix:d,numberSuffix:x}),submit:!1,title:v?"Quote Details":"Job Details",xs3:"100vw",sm:"100vw",sm2:"100vw",sm3:"40vw",md2:"40vw",lg:"40vw",lg2:"40vw"})};return(0,u.jsxs)("div",{style:b,children:[(0,u.jsxs)(p,{onClick:function(e){return m&&y(e)},openCanvas:m,children:[h&&(0,s.B)({value:h,withTooltip:!0}),"".concat((0,i.y)(j)," ").concat("quote"!==j&&v?"Q":""),(0,l.p)({id:t,number:r,invoiceNumber:n,numberPrefix:d,numberSuffix:x})]}),f&&(0,u.jsx)(o.Z,{size:"xs",children:f})]})},p=r.ZP.a.withConfig({displayName:"renderJobId__StyledLink",componentId:"sc-j20nx5-0"})(["display:flex;color:",";cursor:",";"],function(e){var t=e.openCanvas,n=e.theme;return t&&n.COLOUR&&n.COLOUR.secondary},function(e){return e.openCanvas&&"pointer"});d.defaultProps={openCanvas:!1,numberPrefix:"",numberSuffix:""}},37068:function(e,t,n){n.d(t,{g:function(){return W},h:function(){return em}});var r=n(27812),o=n(67294),i=n(6812),s=n(13352),a=n(11163),l=n(9205),c=n(69661),u=n(15861),d=n(34193),p=n(26447),x=n(85893),m=function(e){var t=e.avatar,n=e.entity;return(0,x.jsxs)(p.Z,{direction:"row",alignItems:"center",sx:{margin:"1.3em 0em"},spacing:4,children:[(0,x.jsx)(c.Z,{sx:{width:"55px",height:"55px"},content:(null==n?void 0:n.name)||"test",context:"primary",src:t}),(0,x.jsxs)(p.Z,{direction:"row",alignItems:"center",sx:{color:"#000"},children:[(0,x.jsx)(d.Z,{sx:{marginRight:"5px",width:"14px",height:"14px"}}),(0,x.jsx)(u.Z,{variant:"h6",sx:{height:"24px"},children:null==n?void 0:n.name})]})]})},v=n(84808),f=n(98456),h=n(72936),b=n(30381),j=n.n(b),g=n(90948),O=n(5616),y=n(86886),C=n(9164),Z=n(17497),P=n(41749),S=n(825),w=n(92375),R=(0,g.ZP)(O.Z)({margin:"5px 0px"}),U=function(e){var t,n,r,o,i,s,a,l=e.isQuotes,c=e.job,d=e.numberPrefix,m=e.numberSuffix,v=e.showOrder,f=(0,Z.b)(c),b=(0,h.x)().hasRole;return(0,x.jsx)(w.s,{title:"Details",children:(0,x.jsxs)(y.ZP,{container:!0,children:[(0,x.jsxs)(y.ZP,{item:!0,xs:8,md:6,lg:6,rowSpacing:6,children:[v&&(0,x.jsxs)(R,{children:[(0,x.jsx)(u.Z,{children:"Order"}),(0,x.jsx)(C.r,{sx:{color:"#2196F3"},href:"/dashboard/issues/view?id=".concat(c.number),children:(0,x.jsx)(S.D,{id:c.id,number:c.number,numberPrefix:d,numberSuffix:m,type:c.type})})]}),c.tenantUser&&(0,x.jsxs)(R,{children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:"Tenant"}),(0,x.jsx)(u.Z,{variant:"subtitle1",children:c.tenantUser.fullName})]}),c.reference&&(0,x.jsxs)(R,{children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:"Reference"}),(0,x.jsx)(u.Z,{variant:"subtitle1",children:c.reference})]}),(0,x.jsxs)(R,{children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:l?"Description":"Short Job Description"}),(0,x.jsx)(u.Z,{variant:"subtitle1",sx:{maxWidth:"14rem"},children:(null==c?void 0:null===(t=c.shortJobDesc)||void 0===t?void 0:t.length)>0&&(null==c?void 0:null===(n=c.shortJobDesc[0])||void 0===n?void 0:n.taxonomy.name)||c.title})]}),(0,x.jsxs)(R,{children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:"Status"}),(0,x.jsx)(P.B,{value:c.status})]}),l&&(0,x.jsxs)(R,{children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:"Quote due date"}),(0,x.jsx)(u.Z,{variant:"subtitle1",children:j()(c.quoteDue).format("YYYY-MM-DD")})]}),l&&!b("customer")&&(0,x.jsxs)(p.Z,{rowGap:.5,children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:"Supplier(s)"}),null===(r=c.quotations)||void 0===r?void 0:r.map(function(e){var t=e.supplier;return(0,x.jsx)(C.r,{href:"/dashboard/suppliers/view?id=".concat(null==t?void 0:t.id),color:"secondary",noWrap:!b("admin"),children:null==t?void 0:t.name})})]})]}),(0,x.jsxs)(y.ZP,{item:!0,xs:8,md:6,lg:6,rowSpacing:6,children:[l&&!b("customer")&&(0,x.jsxs)(R,{children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:b("admin")?"Required quotes":"Quotation"}),(0,x.jsx)(u.Z,{variant:"subtitle1",children:c.quotations.length})]}),l&&!b("customer")&&(0,x.jsxs)(R,{children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:b("admin")?"Quotes received":"Received"}),(0,x.jsx)(u.Z,{variant:"subtitle1",children:"".concat((c.quotations||[]).reduce(function(e,t){return"supplierQuoteComplete"===t.status?e+1:e},0),"/").concat((null===(o=c.quotations)||void 0===o?void 0:o.length)||0)})]}),!l&&(0,x.jsxs)(R,{children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:"Cost Category"}),(0,x.jsx)(u.Z,{variant:"subtitle1",children:null===(i=c.costCategoryTaxonomy)||void 0===i?void 0:i.name})]}),!l&&(0,x.jsxs)(R,{children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:"Service"}),(0,x.jsx)(u.Z,{variant:"subtitle1",children:null===(s=c.service)||void 0===s?void 0:s.name})]}),"ppm"!==c.type&&(0,x.jsxs)(R,{children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:"Priority"}),(0,x.jsx)(u.Z,{variant:"subtitle1",children:"".concat((null==f?void 0:f.name)||"Not Specified "," (").concat((null==f?void 0:f.entity)||"Default",")")})]}),(0,x.jsxs)(R,{children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:"Assigned To"}),(0,x.jsx)(u.Z,{variant:"subtitle1",children:c.manager?"".concat(c.manager.nameFirst," ").concat(c.manager.nameLast," "):"Unassigned"})]}),(null===(a=c.compliances)||void 0===a?void 0:a.length)>0&&(0,x.jsxs)(R,{children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:"Compliance"}),(0,x.jsx)(u.Z,{variant:"subtitle1",children:c.compliances[0].compliance.name})]})]})]})})};U.defaultProps={showOrder:!0};var I=n(45110),Q=n(55863),L=(0,g.ZP)(O.Z)({margin:"5px 0px"}),q=function(e){var t,n,r=e.job,o=(0,Q.q)().hasUserModule,i=(0,(0,h.x)().hasRole)("customer_user"),s=o("finances");return(0,x.jsx)(w.s,{title:"Customer",children:(0,x.jsxs)(y.ZP,{container:!0,children:[(0,x.jsxs)(y.ZP,{item:!0,xs:8,md:6,lg:6,rowSpacing:6,children:[(0,x.jsxs)(L,{children:[(0,x.jsx)(u.Z,{children:"Name"}),(0,x.jsx)(C.r,{sx:{color:"#2196F3"},href:"/dashboard/customers/view?id=".concat(r.customer.id),children:r.customer.name})]}),r.customerUser&&(0,x.jsxs)(L,{children:[(0,x.jsx)(u.Z,{children:"Contact"}),(0,x.jsx)(C.r,{sx:{color:"#2196F3"},href:"/dashboard/users/view?id=".concat(r.customerUser.id),children:r.customerUser.fullName})]}),(!i||s)&&(0,x.jsxs)(L,{children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:"Spend Threshold"}),(0,x.jsx)(u.Z,{variant:"subtitle1",children:(0,I.T)(r.customerSpendThreshold)})]})]}),(0,x.jsxs)(y.ZP,{item:!0,xs:8,md:6,lg:6,rowSpacing:6,children:[(0,x.jsxs)(L,{children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:"Email"}),(0,x.jsx)(u.Z,{variant:"subtitle1",children:null===(t=r.customerUser)||void 0===t?void 0:t.email})]}),(0,x.jsxs)(L,{children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:"Phone"}),(0,x.jsx)(u.Z,{variant:"subtitle1",children:null===(n=r.customerUser)||void 0===n?void 0:n.phone})]})]})]})})},T=(0,g.ZP)(O.Z)({margin:"5px 0px"}),A=function(e){var t,n,r,o,i,s,a,l,c,d,p=e.job,m=null===(t=p.supplier)||void 0===t?void 0:null===(n=t.contactUsers)||void 0===n?void 0:n[0],v=(null===(r=p.supplierUser)||void 0===r?void 0:r.id)&&(null==m?void 0:m.user)&&(null===(o=p.supplierUser)||void 0===o?void 0:o.id)!==(null==m?void 0:null===(i=m.user)||void 0===i?void 0:i.id);return(0,x.jsx)(w.s,{title:"Supplier",children:(0,x.jsxs)(y.ZP,{container:!0,children:[(0,x.jsxs)(y.ZP,{item:!0,xs:8,md:6,lg:6,rowSpacing:6,children:[(0,x.jsxs)(T,{children:[(0,x.jsx)(u.Z,{children:"Name"}),(0,x.jsx)(C.r,{sx:{color:"#2196F3"},href:"/dashboard/suppliers/view?id=".concat(p.supplier.id),children:p.supplier.name})]}),m&&(0,x.jsxs)(T,{children:[(0,x.jsx)(u.Z,{children:v?"Contact":"Contact / Operative"}),(0,x.jsx)(C.r,{sx:{color:"#2196F3"},href:"/dashboard/users/view?id=".concat(m.user.id),children:m.user.fullName})]}),p.supplierUser&&v&&(0,x.jsxs)(T,{children:[(0,x.jsx)(u.Z,{children:"Operative"}),(0,x.jsx)(C.r,{sx:{color:"#2196F3"},href:"/dashboard/users/view?id=".concat(p.supplierUser.id),children:p.supplierUser.fullName})]})]}),(0,x.jsxs)(y.ZP,{item:!0,xs:8,md:6,lg:6,rowSpacing:6,children:[(0,x.jsxs)(T,{children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:v?"Contact email":"Email"}),(0,x.jsx)(u.Z,{variant:"subtitle1",children:null==m?void 0:null===(s=m.user)||void 0===s?void 0:s.email})]}),(0,x.jsxs)(T,{children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:v?"Contact phone":"Phone"}),(0,x.jsx)(u.Z,{variant:"subtitle1",children:null!==(a=null==m?void 0:null===(l=m.user)||void 0===l?void 0:l.phone)&&void 0!==a?a:"N/A"})]}),p.supplierUser&&v&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(T,{children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:"Operative email"}),(0,x.jsx)(u.Z,{variant:"subtitle1",children:null===(c=p.supplierUser)||void 0===c?void 0:c.email})]}),(0,x.jsxs)(T,{children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:"Operative phone"}),(0,x.jsx)(u.Z,{variant:"subtitle1",children:null===(d=p.supplierUser)||void 0===d?void 0:d.phone})]})]})]})]})})},D=(0,g.ZP)(O.Z)({margin:"5px 0px"}),k=function(e){var t=e.address,n=e.location,r=e.sublocation,o=(0,h.x)().hasRole;return(0,x.jsx)(w.s,{title:"Address",children:(0,x.jsxs)(y.ZP,{container:!0,children:[(0,x.jsxs)(y.ZP,{item:!0,xs:8,md:6,lg:6,rowSpacing:6,children:[(0,x.jsxs)(D,{children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:"Property"}),(0,x.jsx)(C.r,{href:"/dashboard/properties/view?id=".concat(n.id,"&tab=details"),noWrap:o("supplier"),color:"secondary",children:n.name}),"\xa0",r&&(0,x.jsxs)(C.r,{href:"/dashboard/properties/view?id=".concat(n.id,"&tab=sublocations"),noWrap:o("supplier"),color:"secondary",children:["(",r.name,")"]})]}),(0,x.jsxs)(D,{children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:"Name"}),(0,x.jsx)(u.Z,{variant:"subtitle1",children:t.name||"N/A"})]})]}),(0,x.jsxs)(y.ZP,{item:!0,xs:8,md:6,lg:6,rowSpacing:6,children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:"Address"}),(0,x.jsx)(u.Z,{variant:"subtitle1",children:t.addressLine1}),(0,x.jsx)(u.Z,{variant:"subtitle1",children:t.addressLine2}),(0,x.jsx)(u.Z,{variant:"subtitle1",children:t.addressLine3}),(0,x.jsx)(u.Z,{variant:"subtitle1",children:t.city}),o(["admin","customer"])&&(0,x.jsx)(u.Z,{variant:"subtitle1",children:t.county}),(0,x.jsx)(u.Z,{variant:"subtitle1",children:t.postCode})]})]})})},_=n(99751),N=n(48758),J=(0,g.ZP)(O.Z)({margin:"5px 0px"}),$=function(e){var t,n=e.isQuote,r=e.job,o=r.shortJobDesc&&r.shortJobDesc.length?r.shortJobDesc[0].taxonomy.name:"",i=null===(t=r.answers)||void 0===t?void 0:t.map(function(e){var t,n=e.id,r=e.taxonomyId;return{id:n,taxonomyId:r,comments:e.comments,name:e.taxonomy.name}});return(0,x.jsxs)(w.s,{title:"Issue Reported - Client",children:[(0,x.jsxs)(J,{children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:"Short Job Description"}),(0,x.jsx)(u.Z,{variant:"subtitle1",children:o||"N/A"})]}),(0,x.jsxs)(J,{children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:n?"Description":"Job Description"}),(0,x.jsx)(_.O,{sx:{fontSize:"1rem"},children:r.description||"N/A"})]}),(0,x.jsx)(N.y,{answers:i})]})},F=n(33366),E=(0,g.ZP)(O.Z)({margin:"5px 0px"}),M=function(e){var t=e.quotation,n=(0,Q.q)().hasUserModule,r=(0,h.x)().hasRole,o=r("supplier"),i=r("customer"),s=r("customer_user"),a=n("finances"),l=F.E6.find(function(e){return e.value===t.status})||{text:"-",context:"info"},c=(0,I.T)(null==t?void 0:t.lineItems.filter(function(e){return"Labour"===e.type}).reduce(function(e,t){return e+t.supplierTotal},0)),d=(0,I.T)(null==t?void 0:t.lineItems.filter(function(e){return"Materials"===e.type}).reduce(function(e,t){return e+t.supplierTotal},0)),p=(0,I.T)(null==t?void 0:t.lineItems.reduce(function(e,t){return e+t.supplierTotal},0)),m=(0,I.T)(null==t?void 0:t.lineItems.reduce(function(e,t){return e+t.total*t.qty},0));return(0,x.jsx)(w.s,{title:"Quotation ".concat((null==t?void 0:t.quoteNumber)||""),children:(0,x.jsxs)(y.ZP,{container:!0,children:[(0,x.jsxs)(y.ZP,{item:!0,xs:8,md:6,lg:6,rowSpacing:6,children:[(0,x.jsxs)(E,{children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:"Status"}),(0,x.jsx)(u.Z,{variant:"subtitle1",children:l.text})]}),!i&&(0,x.jsxs)(E,{children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:"Labour Total"}),(0,x.jsx)(u.Z,{variant:"subtitle1",children:c})]}),!i&&(0,x.jsxs)(E,{children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:"Materials Total"}),(0,x.jsx)(u.Z,{variant:"subtitle1",children:d})]})]}),(0,x.jsxs)(y.ZP,{item:!0,xs:8,md:6,lg:6,rowSpacing:6,children:[!i&&(0,x.jsxs)(E,{children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:"Supplier Total"}),(0,x.jsx)(u.Z,{variant:"subtitle1",children:p})]}),!o&&(!s||a)&&(0,x.jsxs)(E,{children:[(0,x.jsx)(u.Z,{variant:"subtitle2",children:"Customer Total"}),(0,x.jsx)(u.Z,{variant:"subtitle1",children:m})]})]})]})})},V=function(e){var t,n=e.jobId,c=e.toggleShow,u=e.numberPrefix,d=e.numberSuffix,p=(0,Q.q)().hasUserModule,b=(0,h.x)().hasRole,j=(0,a.useRouter)(),g=b("customer_user"),O=p("finances"),y=p("quotes");(0,o.useEffect)(function(){var e=function(){c()};return j.events.on("routeChangeComplete",e),function(){j.events.off("routeChangeComplete",e)}},[j.events,c]);var C=(0,i.a)(s.Vw,{variables:{jobId:n}}),Z=C.loading,P=C.data,S=(P=void 0===P?{job:{}}:P).job,w=S.quoted;if(Z)return(0,x.jsx)(v.Z,{sx:{zIndex:1e5},open:!0,children:(0,x.jsx)(f.Z,{color:"secondary"})});var R,I,L=null!=S&&null!==(t=S.quotations)&&void 0!==t&&t.length?(0,r.Z)(S.quotations).sort(function(e,t){return e.id-t.id}):[],T=(0,l.WE)(null==S?void 0:S.location,"registered");return(0,x.jsxs)(x.Fragment,{children:[S.customer&&(0,x.jsx)(m,{editable:!1,entity:{id:S.customer.id,name:S.customer.name,website:S.customer.website},entityName:"Account"}),(0,x.jsx)(U,{isQuotes:w,job:S,numberPrefix:u,numberSuffix:d}),T&&(0,x.jsx)(k,{address:T.address,location:null==S?void 0:S.location,sublocation:null==S?void 0:S.sublocation}),b(["admin","customer"])&&(0,x.jsx)(q,{job:S}),b(["admin"])&&S.supplier&&(0,x.jsx)(A,{job:S}),!!L.length&&w&&(!g||y)&&(!g||O)&&(I=(0,r.Z)(L),b("customer")&&(I=I.filter(function(e){var t=e.status;return"supplierQuoteSent"===t||"quotationAccepted"===t||"quotationRejected"===t})),I).map(function(e){return(0,x.jsx)(M,{quotation:e})}),(0,x.jsx)($,{isQuote:w,job:S})]})};V.defaultProps={numberPrefix:"",numberSuffix:""};var W=V,z=n(50029),G=n(16835),H=n(64687),B=n.n(H),Y=n(42283),K=n(67432),X=n(50319),ee=n(74231),et=n(79665),en=n(3084),er=n(46901),eo=n(64666),ei=n(37645),es=n(6514),ea=n(58951),el=n(31425),ec=n(11057),eu=n(32715),ed=[{label:"Accepted",value:"accepted",color:"white.main",bgcolor:"success.main"},{label:"In Progress",value:"inProgress",color:"white.main",bgcolor:"primary.main"}],ep=ee.Ry({status:ee.Z_().oneOf(ed.map(function(e){return e.value})).required()}),ex=function(e){var t,n=e.jobId,r=e.completed,i=e.close,a=(0,eu.d)(),l=(0,G.Z)(a,2),c=l[0],u=l[1],d=(0,Y.cI)({defaultValues:{status:"accepted"},resolver:(0,et.S)(ep)}),p=d.control,m=d.errors,v=d.handleSubmit,f=(0,en.D)(),h=(0,X.D)(s.Nl,{refetchQueries:["GetJob"],onCompleted:function(){f.show({content:"Success: Job was roll backed",severity:"success"}),i()},onError:function(e){f.show({content:"Error: ".concat(e.message),severity:"error"})}}),b=(0,G.Z)(h,1)[0],j=(t=(0,z.Z)(B().mark(function e(t){return B().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:u({content:function(e){var r=e.onClose;return(0,x.jsx)(ev,{onClose:r,onApprove:function(){b({variables:{jobId:n,status:t.status}})}})}});case 1:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),g=(0,o.useMemo)(function(){return ed.filter(function(e){return"inProgress"!==e.value||r})},[r]);return(0,x.jsxs)(x.Fragment,{children:[c,(0,x.jsxs)("form",{id:"offCanvasForm",onSubmit:v(j),children:[(0,x.jsx)(er.Z,{severity:"warning",color:"info",variant:"filled",sx:{mb:2},children:"Where possible, information such as added media, follow on jobs and remedial quotes will be saved along with the original work order details. However, please note that some information will be lost in reverting a job to a prior status."}),(0,x.jsx)(Y.Qr,{control:p,name:"status",render:function(e){var t,n=e.value,r=e.onChange;return(0,x.jsx)(K.P,{formControl:{color:"secondary",variant:"standard",error:m.status,helperText:null===(t=m.status)||void 0===t?void 0:t.message},selectProps:{fullWidth:!0},inputComponent:"chip",selectComponent:"chip",label:"Status:",value:n,onChange:r,options:g})}})]})]})};ex.defaultProps={close:function(){}};var em=ex;function ev(e){var t=e.onClose,n=e.onApprove,r=function(){n()},o=function(){t()};return(0,x.jsxs)(eo.Z,{open:!0,onClose:o,children:[(0,x.jsx)(ei.Z,{children:"Roll back?"}),(0,x.jsx)(es.Z,{children:(0,x.jsx)(ea.Z,{children:"Rolling the job back will revert the job back to its immediately prior status. Please note some information may be lost by doing so."})}),(0,x.jsxs)(el.Z,{children:[(0,x.jsx)(ec.Z,{onClick:o,color:"danger",variant:"contained",children:"Cancel"}),(0,x.jsx)(ec.Z,{onClick:r,color:"secondary",variant:"contained",autoFocus:!0,children:"Ok"})]})]})}},13352:function(e,t,n){n.d(t,{Nl:function(){return b},Vw:function(){return h},xY:function(){return f}});var r,o,i,s,a,l,c,u,d,p,x=n(71383),m=n(75063),v=n(4431);(0,m.Ps)(r||(r=(0,x.Z)(["\n  fragment JobFields on Job {\n    access\n    adminId\n    costCategory\n    createdAt\n    description\n    id\n    meta\n    pricing\n    reference\n    scheduledAt\n    status\n    supplierLabourAmount\n    supplierMaterialsAmount\n    timing\n    timingEnd\n    timingNormalHours\n    timingStart\n    title\n    type\n    siteVisitStart\n    siteVisitEnd\n    siteVisitWeekends\n    amount\n    number\n    quoted\n    timingStatus\n    correctDuration\n    correctStart\n    correctEnd\n  }\n"]))),(0,m.Ps)(o||(o=(0,x.Z)(["\n  fragment JobQuoteFields on Job {\n    quoted\n    quoteNumber\n    quoteDue\n    quoteCharge\n  }\n"]))),(0,m.Ps)(i||(i=(0,x.Z)(["\n  fragment JobAdminFields on Job {\n    supplierId\n    supplierUserId\n  }\n"]))),(0,m.Ps)(s||(s=(0,x.Z)(["\n  fragment JobSupplierFields on Job {\n    supplierId\n    supplierUserId\n  }\n"])));var f=(0,m.Ps)(a||(a=(0,x.Z)(["\n  mutation UpdateJob(\n    $id: Int!\n    $changes: Job_set_input\n    $timing: [JobTiming_insert_input!]!\n    $_append: Job_append_input = {}\n  ) {\n    update_Job_by_pk(pk_columns: { id: $id }, _set: $changes, _append: $_append) {\n      id\n    }\n    insert_JobTiming(objects: $timing) {\n      returning {\n        id\n        status\n        createdAt\n      }\n    }\n  }\n"])));(0,m.Ps)(l||(l=(0,x.Z)(["\n  mutation InsertJobTiming($timing: [JobTiming_insert_input!]!) {\n    insert_JobTiming(objects: $timing) {\n      returning {\n        id\n        status\n        createdAt\n      }\n    }\n  }\n"]))),(0,m.Ps)(c||(c=(0,x.Z)(['\n  query GetJobHistory(\n    $jobId: Int\n    $locationId: Int!\n    $limit: Int\n    $offset: Int\n    $serviceId: Int\n    $startDate: timestamptz!\n  ) {\n    jobs: Job(\n      limit: $limit\n      offset: $offset\n      order_by: { createdAt: desc }\n      where: {\n        createdAt: { _gte: $startDate }\n        id: { _neq: $jobId }\n        locationId: { _eq: $locationId }\n        serviceId: { _eq: $serviceId }\n        status: { _nin: ["pending", "raised", "offered", "accepted", "inProgress"] }\n      }\n    ) {\n      id\n      title\n      status\n      scheduledAt\n      createdAt\n      meta\n      service: Service {\n        id\n        name\n      }\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        id\n        taxonomyId\n        comments\n        taxonomy: Taxonomy {\n          name\n        }\n      }\n    }\n    meta: Job_aggregate(\n      where: {\n        createdAt: { _gte: $startDate }\n        id: { _neq: $jobId }\n        locationId: { _eq: $locationId }\n        serviceId: { _eq: $serviceId }\n        status: { _nin: ["pending", "raised", "offered", "accepted", "inProgress"] }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n'])));var h=(0,m.Ps)(u||(u=(0,x.Z)(['\n  query GetJob($jobId: Int!) {\n    job: Job_by_pk(id: $jobId) {\n      access\n      costCategory\n      customerSpendThreshold\n      description\n      supplierLabourAmount\n      supplierMaterialsAmount\n      quoteDue\n      quoteNumber\n      id\n      number\n      meta\n      paymentMethod\n      reference\n      status\n      title\n      type\n      quoted\n      sublocation: Sublocation {\n        name\n      }\n      invoices: Invoices(order_by: { createdAt: desc }) {\n        id\n        invoiceNumber\n      }\n      quotations: SupplierQuotes {\n        id\n        quoteNumber\n        status\n        lineItems: SupplierQuoteLineItems {\n          id\n          description\n          item\n          qty\n          qtyUnit\n          quoteId\n          total\n          type\n          unitRate\n          supplierTotal\n        }\n        supplier: Supplier {\n          id\n          type\n          name\n          accountUsers: Account_Users {\n            user: User {\n              id\n              fullName\n              nameFirst\n              nameLast\n              phone\n              email\n              devices: UserDevices(where: { status: { _eq: "active" } }) {\n                id\n                playerId\n              }\n            }\n          }\n        }\n      }\n      admin: Admin {\n        id\n        name\n      }\n      service: Service {\n        id\n        name\n      }\n      manager: Manager {\n        id\n        nameFirst\n        nameLast\n      }\n      customer: Customer {\n        id\n        name\n        website\n        slas: SLAs(where: { entity: { _eq: "Account" } }) {\n          id\n          entity\n          entityId\n          onSite\n          onSiteUnit\n          jobReport\n          jobReportUnit\n          completion\n          completionUnit\n          notes\n          inUse\n          normalRate\n          oohRate\n          premiumRate\n          minimumInterval\n          minimumLength\n          slaId\n          sla: SLA {\n            id\n            name\n            notes\n            normalRate\n            oohRate\n            premiumRate\n            onSite\n            onSiteUnit\n            jobReport\n            jobReportUnit\n            completion\n            completionUnit\n            minimumInterval\n            minimumLength\n          }\n        }\n      }\n      customerUser: CustomerUser {\n        id\n        nameFirst\n        nameLast\n        fullName\n        email\n        phone\n      }\n      supplier: Supplier {\n        id\n        name\n        contactUsers: Account_Users(where: { isContact: { _eq: true } }) {\n          id\n          role\n          position\n          isContact\n          lastSignInAt\n          userId\n          user: User {\n            id\n            fullName\n            nameFirst\n            nameLast\n            email\n            phone\n          }\n        }\n      }\n      supplierUser: SupplierUser {\n        id\n        fullName\n        nameFirst\n        nameLast\n        email\n        phone\n      }\n      location: Location {\n        id\n        name\n        addresses: Addresses(where: { entity: { _eq: "Location" } }) {\n          ...AddressEntityFields\n          address: Address {\n            ...AddressFields\n            country: Country {\n              id\n              name\n            }\n          }\n        }\n        slas: SLAs(where: { entity: { _eq: "Location" } }) {\n          id\n          entity\n          entityId\n          onSite\n          onSiteUnit\n          jobReport\n          jobReportUnit\n          completion\n          completionUnit\n          notes\n          inUse\n          normalRate\n          oohRate\n          premiumRate\n          minimumInterval\n          minimumLength\n          slaId\n          sla: SLA {\n            id\n            name\n            notes\n            normalRate\n            oohRate\n            premiumRate\n            onSite\n            onSiteUnit\n            jobReport\n            jobReportUnit\n            completion\n            completionUnit\n            minimumInterval\n            minimumLength\n          }\n        }\n      }\n      sla: SLA {\n        id\n        name\n        notes\n        normalRate\n        oohRate\n        premiumRate\n        onSite\n        onSiteUnit\n        jobReport\n        jobReportUnit\n        completion\n        completionUnit\n        minimumInterval\n        minimumLength\n      }\n      costCategoryTaxonomy: CostCategory {\n        id\n        name\n      }\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        id\n        taxonomyId\n        comments\n        taxonomy: Taxonomy {\n          name\n        }\n      }\n    }\n  }\n  ',"\n  ","\n"])),v.WW,v.MR);(0,m.Ps)(d||(d=(0,x.Z)(["\n  mutation calculateJobFinance($jobId: Int!, $invoiceType: String!) {\n    calculateJobFinance(jobId: $jobId, invoiceType: $invoiceType) {\n      data\n    }\n  }\n"])));var b=(0,m.Ps)(p||(p=(0,x.Z)(["\n  mutation RollbackToStatus($jobId: Int!, $status: String!) {\n    rollbackToStatus(jobId: $jobId, status: $status) {\n      data\n      success\n    }\n  }\n"])))},41749:function(e,t,n){n.d(t,{B:function(){return v}});var r=n(59499),o=n(27812),i=n(4730),s=n(36864),a=n(87918),l=n(92742),c=n(72936),u=n(33366),d=n(85893),p=["value"];function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=function(e){var t=(0,s.Z)({},e),n=t.value,r=(0,i.Z)(t,p),x=(0,l.b)(n),v=(0,c.x)().hasRole,f=[].concat((0,o.Z)(u.iz),(0,o.Z)(u.yW),(0,o.Z)(u.l8)).find(function(e){return e.value===n})||{statusText:""},h=f.text,b=f.customerText,j=f.supplierText,g=v("admin")?h:v("supplier")?j||h:v("customer")&&b||h;return(0,d.jsx)(a.Z,m(m({},r),{},{label:g,color:x,size:"small"}))}},46902:function(e,t,n){n.d(t,{p:function(){return r}});var r=function(e){var t=e.id,n=e.number,r=e.invoiceNumber,o=e.numberPrefix,i=e.numberSuffix,s=t?"".concat(o," ").concat(n||t," ").concat(i):"";return r?"".concat(s," / ").concat(r):s}},69532:function(e,t,n){n.d(t,{B:function(){return d}});var r=n(27812),o=n(10367),i=n(41564),s=n(51466),a=n(33366),l=n(92742),c=n(72936),u=n(85893),d=function(e){var t=e.size,n=e.value,o=e.withTooltip,d=e.textColor,x=(0,l.t)(n),m=(0,c.x)().hasRole,v=[].concat((0,r.Z)(a.iz),(0,r.Z)(a.yW),(0,r.Z)(a.l8)).find(function(e){return e.value===n})||{statusText:""},f=v.text,h=v.customerText,b=v.supplierText,j=m("admin")?f:m("supplier")?b||f:m("customer")&&h||f;return o?(0,u.jsx)(i.Z,{content:j,context:"black",children:(0,u.jsx)(p,{children:(0,u.jsx)("svg",{height:"16",width:"16",children:(0,u.jsx)("circle",{cx:"8",cy:"8",r:"6",fill:x})})})}):(0,u.jsxs)(p,{children:[(0,u.jsx)("svg",{height:"16",width:"16",children:(0,u.jsx)("circle",{cx:"8",cy:"8",r:"6",fill:x})}),(0,u.jsx)(s.Z,{size:t,context:d,children:j})]})},p=o.ZP.span.withConfig({displayName:"status__StyledLabel",componentId:"sc-sb0gv0-0"})(["display:flex;align-items:center;"]);d.defaultProps={size:"sm",withTooltip:!1}},9164:function(e,t,n){n.d(t,{r:function(){return u}});var r=n(59499),o=n(41664),i=n.n(o),s=n(23795),a=n(85893);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u=function(e){var t=e.children,n=e.href,r=e.noWrap,o=e.target,l=e.sx,u=void 0===l?{}:l;return r?(0,a.jsx)(a.Fragment,{children:t}):n?(0,a.jsx)(i(),{href:n,target:o,passHref:!0,children:(0,a.jsx)(s.Z,c(c({sx:u},e),{},{children:t}))}):(0,a.jsx)(s.Z,c(c({sx:u},e),{},{children:t}))};u.defaultProps={onClick:function(e){e.stopPropagation()}}},67432:function(e,t,n){n.d(t,{P:function(){return O}});var r=n(59499),o=n(10166),i=n(26447),s=n(15861),a=n(87918),l=n(69368),c=n(18360),u=n(5616),d=n(18972),p=n(56815),x=n(94054),m=n(47312),v=n(85893),f=n(67294);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var j={text:function(e){var t=e.option,n=e.multiple,r=e.index;return n&&r>0?", ".concat(t.label):t.label},textWithIcon:function(e){var t=e.option;return(0,v.jsxs)(i.Z,{direction:"row",alignItems:"center",spacing:1,children:[t.icon,(0,v.jsxs)(s.Z,{children:[" ",t.label]})]})},chip:function(e){var t=e.chipProps,n=e.option;return(0,f.createElement)(a.Z,b(b({},t),{},{key:n.value,label:n.label,icon:n.icon,sx:{color:n.color,bgcolor:n.bgcolor}}))}},g={text:function(e){return e.option.label},textWithIcon:function(e){var t=e.option;return(0,v.jsxs)(i.Z,{direction:"row",alignItems:"center",spacing:1,children:[t.icon,(0,v.jsxs)(s.Z,{children:[" ",t.label]})]})},chip:function(e){var t=e.chipProps,n=e.option;return(0,f.createElement)(a.Z,b(b({},t),{},{key:n.value,label:n.label,icon:n.icon,sx:{color:n.color,bgcolor:n.bgcolor}}))},checkbox:function(e){var t=e.option,n=e.value;return(0,v.jsxs)(i.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,v.jsx)(l.Z,{color:"secondary",sx:{height:"10px"},checked:n.indexOf(t.value)>-1}),(0,v.jsxs)(s.Z,{children:[" ",t.label]})]})}},O=function(e){var t=e.label,n=e.value,r=e.onChange,o=e.leftSideLabel,i=e.options,a=e.inputComponent,l=e.selectComponent,x=e.withoutSelectIcon,m=e.formControl,f=e.chipProps,h=e.selectProps,O=function(e){return i.find(function(t){return t.value===e})};return(0,v.jsxs)(y,b(b({},m),{},{leftSideLabel:o,withoutSelectIcon:x,children:[t&&o&&(0,v.jsx)(s.Z,{children:t}),t&&!o&&(0,v.jsx)(C,{shrink:""!==n&&void 0!==n,children:t}),(0,v.jsx)(c.Z,b(b({displayEmpty:!0},h),{},{value:n,onChange:r,inputProps:{shrink:!0},renderValue:function(){if(Array.isArray(n))return(0,v.jsx)(u.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:n.map(function(e,t){var n=O(e);return n?j[a]({chipProps:f,option:n,multiple:!0,index:t}):""})});var e=O(n);return e?(0,v.jsx)(u.Z,{children:j[a]({chipProps:f,option:e})}):""},children:i.map(function(e){return(0,v.jsx)(d.Z,{value:e.value,children:g[l]({chipProps:f,option:e,value:n})},e.value)})})),(null==m?void 0:m.helperText)&&(0,v.jsx)(p.Z,{children:m.helperText})]}))};O.defaultProps={label:"",onChange:function(){},leftSideLabel:!1,options:[],inputComponent:"text",selectComponent:"text",withoutSelectIcon:!1,formControl:{error:!1,helperText:""},chipProps:{size:"small"},selectProps:{}};var y=(0,o.Z)(x.Z)(function(e){e.theme;var t=e.leftSideLabel,n=e.withoutSelectIcon;return{"&.MuiFormControl-root":b({display:"flex",flexDirection:"column",alignItems:"flex-start"},t&&{display:"flex",flexDirection:"row",alignItems:"center",gap:"10px"}),"& .MuiSelect-icon":b({},n&&{display:"none"})}}),C=(0,o.Z)(m.Z)(function(e){return{"&.MuiFormLabel-root.MuiInputLabel-root.Mui-focused":{color:e.theme.palette.secondary.main}}})},48758:function(e,t,n){n.d(t,{y:function(){return a}});var r=n(67720),o=n(5616),i=n(15861),s=n(85893),a=function(e){var t=e.answers;return(0,s.jsxs)(s.Fragment,{children:[t&&t.length>0&&(0,s.jsx)(r.Z,{children:"Questions"}),t&&t.map(function(e){var t,n,r,a=e.meta;return(null==a?void 0:a.input)==="media"?null:(0,s.jsxs)(o.Z,{children:[(0,s.jsx)(i.Z,{variant:"subtitle2",children:(null===(t=e.taxonomy)||void 0===t?void 0:t.name)||e.name}),(0,s.jsx)(i.Z,{children:e.comments||(null===(n=e.taxonomy_entity)||void 0===n?void 0:null===(r=n[0])||void 0===r?void 0:r.comments)})]},e.id||e.taxonomyId)}),t&&t.length>0&&(0,s.jsx)(r.Z,{})]})}},99751:function(e,t,n){n.d(t,{O:function(){return p}});var r=n(59499),o=n(4730),i=n(67294),s=n(9164),a=n(15861),l=n(85893),c=["maxLength","children","href","fontSize"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var p=function(e){var t=e.maxLength,n=e.children,r=e.href,u=e.fontSize,p=(0,o.Z)(e,c),x=(0,i.useState)(!1),m=x[0],v=x[1],f=function(e){e.stopPropagation(),v(!m)},h=(null==n?void 0:n.length)>t?"".concat(n.slice(0,t),"..."):n,b=m?n:h,j=r?(0,l.jsx)(s.r,{color:"secondary",href:r,children:b}):b;return(0,l.jsxs)(a.Z,d(d({fontSize:u},p),{},{children:[j,!m&&(null==n?void 0:n.length)>t&&(0,l.jsx)(a.Z,{underline:"none",fontSize:u,sx:{cursor:"pointer",display:"inline-block",fontWeight:600,color:"rgba(0, 0, 0, 0.5)"},onClick:f,children:"more"}),m&&n.length>t&&(0,l.jsx)(a.Z,{underline:"none",fontSize:u,sx:{cursor:"pointer",display:"inline-block",fontWeight:600,color:"rgba(0, 0, 0, 0.5)"},onClick:f,children:" | less"})]}))};p.defaultProps={maxLength:100,children:""}},45110:function(e,t,n){n.d(t,{T:function(){return r}});function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GBP";return new Intl.NumberFormat(["en-GB"],{currency:t,currencyDisplay:"symbol",style:"currency"}).format(e)}},92742:function(e,t,n){n.d(t,{b:function(){return i},t:function(){return o}});var r=n(60092),o=function(e){switch(e){case"raised":case"pending":default:return r.Q.COLOUR.info;case"offered":return r.Q.COLOUR.warning;case"accepted":return r.Q.COLOUR.success;case"inProgress":return r.Q.COLOUR.primary;case"completed":return r.Q.COLOUR.muiLightGray;case"reportSent":return r.Q.COLOUR.muiGray;case"invoiceSent":return r.Q.COLOUR.secondary;case"customerPaid":case"supplierPaid":return r.Q.COLOUR.help;case"closed":return r.Q.COLOUR.black;case"quoteOffered":case"quoteReceived":case"quoteNew":return r.Q.COLOUR.muiLightViolet}},i=function(e){switch(e){case"raised":case"pending":default:return"info";case"offered":return"warning";case"accepted":return"success";case"inProgress":return"primary";case"completed":return"muiLightGray";case"reportSent":return"muiGray";case"invoiceSent":return"secondary";case"customerPaid":case"supplierPaid":return"help";case"closed":case"quoteClosed":return"black";case"quoteOffered":case"quoteReceived":case"quoteNew":return"muiLightViolet"}}},64951:function(e,t,n){n.d(t,{y:function(){return r}});var r=function(e){switch(e){case"ppm":return"PM";case"quote":return"Q";case"reactive":return"J";case"cppm":return"C";default:return""}}},32715:function(e,t,n){n.d(t,{d:function(){return s}});var r=n(11994),o=n(67294),i=n(85893);function s(){var e=(0,o.useState)(null),t=e[0],n=e[1],s=(0,o.useCallback)(function(){n(null)},[]),a=(0,o.useMemo)(function(){if(null===t)return null;var e=t.content,n=t.keepMounted;return(0,i.jsx)(r.Z,{open:!0,keepMounted:n,onClose:s,children:e})},[t,s]),l=(0,o.useCallback)(function(e){var t=e.content,r=e.keepMounted;n({keepMounted:void 0===r||r,content:t({onClose:s})})},[s]);return[a,l]}},33366:function(e,t,n){n.d(t,{AK:function(){return l},DJ:function(){return d},E6:function(){return o},cj:function(){return a},hD:function(){return u},iz:function(){return i},l8:function(){return c},yW:function(){return s}});var r=n(60092),o=[{text:"Quotation Requested",value:"supplierQuoteRequested",context:"info"},{text:"Quotation Completed",value:"supplierQuoteComplete",context:"help"},{text:"Draft Quotation",value:"supplierQuoteDraft",context:"info"},{text:"Awaiting threshold approval",value:"waitingThresholdApproval",context:"info"},{text:"Quotation Refused",value:"supplierQuoteRefused",context:"danger"},{text:"Quotation Sent",value:"supplierQuoteSent",context:"success"},{text:"Quotation Accepted",value:"quotationAccepted",context:"success"},{text:"Quotation Rejected",value:"quotationRejected",context:"danger"},{text:"Quotation Updated",value:"supplierQuoteUpdated",context:"success"}],i=[{text:"New Quote",value:"quoteNew",customerText:"Quote issued",supplierText:null},{text:"Sent to Supplier(s)",value:"quoteOffered",customerText:"Quote issued",supplierText:"Quote offered"},{text:"Received from Supplier(s)",value:"quoteReceived",customerText:"Final review",supplierText:"Quote submitted"},{text:"Sent to Customer",value:"quoteSent",customerText:"Awaiting approval",supplierText:"Awaiting approval"},{text:"Quote Accepted",value:"quoteAccepted",customerText:"Quote accepted",supplierText:"Quote accepted"},{text:"Quote Rejected",value:"quoteRejected",customerText:"Quote rejected",supplierText:"Quote rejected"},{text:"Canceled",value:"quoteCancelled",customerText:"Cancelled",supplierText:null},{text:"Closed",value:"quoteClosed",customerText:"Closed",supplierText:"Closed"}],s=[{text:"Pending",value:"pending",colour:r.Q.COLOUR.info},{text:"Raised",value:"raised",colour:r.Q.COLOUR.info},{text:"Offered",value:"offered",colour:r.Q.COLOUR.warning},{text:"Accepted",value:"accepted",colour:r.Q.COLOUR.success},{text:"In Progress",value:"inProgress",colour:r.Q.COLOUR.primary},{text:"Completed",value:"completed",colour:r.Q.COLOUR.muiLightGray},{text:"Awaiting threshold approval",value:"waitingThresholdApproval",colour:r.Q.COLOUR.info},{text:"Report Sent",value:"reportSent",colour:r.Q.COLOUR.muiGray},{text:"Invoice Sent",value:"invoiceSent",colour:r.Q.COLOUR.secondary},{text:"Customer Paid",value:"customerPaid",colour:r.Q.COLOUR.help},{text:"Supplier Paid",value:"supplierPaid",colour:r.Q.COLOUR.help},{text:"Canceled",value:"canceled",colour:r.Q.COLOUR.black},{text:"Closed",value:"closed",colour:r.Q.COLOUR.black},{text:"On Hold",value:"onHold",colour:r.Q.COLOUR.black},{text:"Continued",value:"continued",colour:r.Q.COLOUR.primary},{text:"Paused",value:"paused",colour:r.Q.COLOUR.black}],a=[{label:"Pending",value:"pending"},{label:"Raised",value:"raised"},{label:"Offered",value:"offered"},{label:"Accepted",value:"accepted"},{label:"In Progress",value:"inProgress"},{label:"Completed",value:"completed"},{label:"Awaiting threshold approval",value:"waitingThresholdApproval"},{label:"Report Sent",value:"reportSent"},{label:"Invoice Sent",value:"invoiceSent"},{label:"Customer Paid",value:"customerPaid"},{label:"Supplier Paid",value:"supplierPaid"},{label:"Quote",value:"quote"},{label:"Site Visit",value:"siteVisit"},{label:"Canceled",value:"canceled"},{label:"Closed",value:"closed"},{label:"On Hold",value:"onHold"},{label:"Continued",value:"continued"},{label:"Paused",value:"paused"}],l=[{text:"Uplift Draft",value:"upliftDraft",context:"info"},{text:"Supplier Uplift Requested",value:"supplierUpliftRequested",context:"secondary"},{text:"Uplift Requested Send to Customer",value:"upliftRequestSendCustomer",context:"secondary"},{text:"Uplift Approved",value:"customerUpliftApproved",context:"success"},{text:"Uplift Rejected",value:"customerUpliftRejected",context:"danger"}],c=[{text:"Offered",value:"offered",context:"info"},{text:"Raised",value:"raised",context:"info"},{text:"Pending",value:"pending",context:"info"},{text:"Accepted",value:"accepted",context:"info"},{text:"Uplift Requested by Supplier",value:"supplierUpliftRequested",context:"info"},{text:"Uplift Draft",value:"upliftDraft",context:"info"},{text:"Uplift Requested Send Customer",value:"upliftRequestSendCustomer",context:"info"},{text:"Uplift Requested Approved",value:"customerUpliftApproved",context:"success"},{text:"In Dispute",value:"inDispute",context:"info"},{text:"Resumed",value:"resumed",context:"Danger"},{text:"Quote Sent",value:"quoteSent",context:"info"},{text:"Quote Offered",value:"quoteOffered",context:"info"},{text:"Report Sent Supplier",value:"reportSentSupplier",context:"info"},{text:"Dispute Resolved",value:"disputeResolved",context:"info"},{text:"Validated",value:"validated",context:"success"},{text:"Un Validated",value:"unvalidated",context:"success"},{text:"Paused",value:"paused",context:"info"},{text:"TimingChanged",value:"timingChanged",context:"info"},{text:"Customer Paid",value:"customerPaid",context:"info"},{text:"In Progress",value:"inProgress",context:"info"},{text:"PPM Invoice Created",value:"ppmInvoiceCreated",context:"success"},{text:"Late Arrival",value:"lateArrival",context:"info"},{text:"Pricing Changed",value:"pricingChanged",context:"info"},{text:"Report Sent",value:"reportSent",context:"info"},{text:"Invoice Sent Supplier",value:"invoiceSentSupplier",context:"info"},{text:"Invoice Sent",value:"invoiceSent",context:"info"},{text:"Invoice Sent Customer",value:"invoiceSentCustomer",context:"info"},{text:"Quote Accepted",value:"quoteAccepted",context:"info"},{text:"On Hold",value:"onHold",context:"info"},{text:"Continued",value:"continued",context:"info"},{text:"Quote Received",value:"quoteReceived",context:"info"},{text:"Quote New",value:"quoteNew",context:"info"},{text:"Closed",value:"closed",context:"danger"},{text:"Re posted",value:"reposted",context:"info"},{text:"Supplier Paid",value:"supplierPaid",context:"info"},{text:"Rejected",value:"rejected",context:"info"},{text:"Completed",value:"completed",context:"info"},{text:"Canceled",value:"canceled",context:"danger"}],u=[{value:"complete",text:"Complete"},{value:"returnVisitByAnother",text:"Return Visit By Another"},{value:"returnVisit",text:"Return Visit"},{value:"completeCertificate",text:"Complete Certificate"},{value:"couldNotDo",text:"Could Not Do"}],d=[{text:"Not yet offered",value:"pending",colour:r.Q.COLOUR.muiGray},{text:"Not yet offered",value:"raised",colour:r.Q.COLOUR.muiGray},{text:"Offered",value:"offered",colour:r.Q.COLOUR.warning},{text:"Not yet started",value:"accepted",colour:r.Q.COLOUR.white},{text:"In Progress",value:"inProgress",colour:r.Q.COLOUR.primary},{text:"Completed",value:"completed",colour:r.Q.COLOUR.secondary},{text:"Requires approval",value:"waitingThresholdApproval",colour:r.Q.COLOUR.info},{text:"Completed",value:"reportSent",colour:r.Q.COLOUR.secondary},{text:"Completed",value:"invoiceSent",colour:r.Q.COLOUR.secondary},{text:"Completed",value:"customerPaid",colour:r.Q.COLOUR.secondary},{text:"Completed",value:"supplierPaid",colour:r.Q.COLOUR.secondary},{text:"Quote",value:"quote",colour:r.Q.COLOUR.white},{text:"Not yet started",value:"siteVisit",colour:r.Q.COLOUR.white},{text:"Closed",value:"canceled",colour:r.Q.COLOUR.black},{text:"Closed",value:"closed",colour:r.Q.COLOUR.black},{text:"On Hold",value:"onHold",colour:r.Q.COLOUR.help},{text:"In Progress",value:"continued",colour:r.Q.COLOUR.primary},{text:"Closed",value:"paused",colour:r.Q.COLOUR.black},{text:"Not yet offered",value:"quoteNew",colour:r.Q.COLOUR.muiGray},{text:"Offered",value:"quoteOffered",colour:r.Q.COLOUR.warning},{text:"Completed",value:"quoteReceived",colour:r.Q.COLOUR.secondary},{text:"Requires approval",value:"quoteSent",colour:r.Q.COLOUR.info},{text:"Not yet started",value:"quoteAccepted",colour:r.Q.COLOUR.white},{text:"Closed",value:"quoteRejected",colour:r.Q.COLOUR.black},{text:"Closed",value:"quoteCancelled",colour:r.Q.COLOUR.black},{text:"Closed",value:"quoteClosed",colour:r.Q.COLOUR.black},{text:"Not yet started",value:"ppmNew",colour:r.Q.COLOUR.white}]}}]);