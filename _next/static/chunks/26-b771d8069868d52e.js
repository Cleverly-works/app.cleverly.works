"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{26143:function(e,t,n){n.d(t,{C:function(){return D}});var r=n(67294),o=n(93946),i=n(25464),a=n(18972),c=n(57976),s=n(14218),l=n(95429),u=n(91988),d=n(70983),p=n(46761),g=n(91682),f=n(39702),m=n(36804),h=n(51797),y=n(53630),b=n(50748),v=n(23132),j=n(88127),x=n(52186),Z=n(59301),O=n(26447),P=n(15861),I=n(85893),w={add:(0,I.jsx)(s.Z,{}),archive:(0,I.jsx)(l.Z,{}),avatar:(0,I.jsx)(u.Z,{}),check:(0,I.jsx)(d.Z,{}),delete:(0,I.jsx)(p.Z,{}),description:(0,I.jsx)(g.Z,{}),download:(0,I.jsx)(f.Z,{}),info:(0,I.jsx)(m.Z,{}),edit:(0,I.jsx)(h.Z,{}),location:(0,I.jsx)(y.Z,{}),unarchive:(0,I.jsx)(b.Z,{}),uploadFile:(0,I.jsx)(v.Z,{}),receipt:(0,I.jsx)(j.Z,{}),visibility:(0,I.jsx)(x.Z,{})},C={default:(0,I.jsx)(c.Z,{}),defaultHoriz:(0,I.jsx)(Z.Z,{}),description:(0,I.jsx)(g.Z,{})},D=function(e){var t=e.actionsData,n=e.icon,c=e.row,s=e.disabled,l=(0,r.useState)(null),u=l[0],d=l[1],p=function(e){e.stopPropagation(),d(e.currentTarget)},g=function(){d(null)};return(0,I.jsxs)("div",{children:[(0,I.jsx)(o.Z,{sx:{":hover":{backgroundColor:"#DDDDDD"}},disabled:s,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:p,children:C[n]}),(0,I.jsx)(i.Z,{id:"simple-menu",anchorEl:u,keepMounted:!0,open:Boolean(u),onClose:g,PaperProps:{sx:{borderRadius:2}},children:t(c).map(function(e,t){return(0,I.jsx)(a.Z,{disabled:e.disabled,onClick:function(t){e.onClick(t),g()},sx:{pl:3,pr:4},children:(0,I.jsxs)(O.Z,{direction:"row",alignItems:"center",spacing:2,children:[(null==w?void 0:w[e.icon])||null,(0,I.jsx)(P.Z,{children:e.tooltip})]})},t)})})]})};D.defaultProps={actionsData:function(){return[{disabled:!1,onClick:function(){},icon:"edit",tooltip:"Edit"}]},icon:"default",disabled:!1}},32836:function(e,t,n){n.d(t,{i:function(){return I}});var r=n(59499),o=n(67294),i=n(11163),a=n(83148),c=n(26447),s=n(15861),l=n(90948),u=n(5616),d=n(41796),p=n(87361),g=n(42096),f=n(87043),m=n(61730),h=n(58886),y=n(70872),b=n(85893);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var x=function(e){var t=e.currentPage,n=e.totalCount,r=e.pageSize,o=e.onPageChange,i=(0,m.Z)("(max-width:400px)"),a=(0,m.Z)("(max-width:500px)");return(0,b.jsx)(Z,{mb:2,page:t,count:Math.ceil(n/r),onChange:function(e,t){return o(t)},variant:"outlined",shape:"rounded",size:i?"small":"medium",hidePrevButton:1===t,hideNextButton:t===Math.ceil(n/r),siblingCount:a?0:1,renderItem:function(e){return(0,b.jsx)(h.Z,j({slots:{previous:function(){return"Previous"},next:function(){return"Next"}}},e))}})};x.defaultProps={currentPage:1,totalCount:0,pageSize:50,onPageChange:function(){}};var Z=(0,l.ZP)(y.Z)(function(e){var t,n=e.hidePrevButton,o=e.hideNextButton,i=e.theme;return t={},(0,r.Z)(t,"&.MuiPagination-root",{alignSelf:"center",marginTop:"16px"}),(0,r.Z)(t,"& .MuiPaginationItem-root",{fontWeight:600,margin:0,borderRadius:0}),(0,r.Z)(t,"& .MuiPagination-ul > li:last-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"0 5px 5px 0"}),(0,r.Z)(t,"& .MuiPagination-ul > li:first-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"5px 0 0 5px"}),(0,r.Z)(t,"& button.Mui-selected",j(j({color:i.palette.white.main,backgroundColor:i.palette.secondary.main},o?{borderRadius:"0 5px 5px 0"}:{}),n?{borderRadius:"5px 0 0 5px"}:{})),t});function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var I=(0,o.forwardRef)(function(e,t){var n=e.columns,r=e.history,a=e.initialSort,l=e.meta,u=e.refetch,d=e.paginationSize,m=e.containerHeight,h=e.noResultsMessage,y=e.autoHeight,v=(0,i.useRouter)(),j=v.query,Z=void 0===j?{}:j,O=(0,o.useState)(parseInt(null==Z?void 0:Z.page,10)||1),I=O[0],D=O[1],S=(0,o.useState)(d||f.C1.paginationSize),k=S[0],_=S[1];a||(a={item:"createdAt",order:"desc"});var T=(0,o.useState)({item:a.item,order:a.order}),E=T[0],M=T[1],$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=v.query,n=void 0===t?{}:t;if(e>1?n.page=e:delete n.page,!(Object.keys(n).length>0))return{};var r=Object.keys(n).map(function(t){return"page"===t?"".concat(t,"=").concat(e):"".concat(t,"=").concat(n[t])}).join("&");return"?".concat(r)},F=function(){M({item:a.item,order:a.order}),D(1);var e=$();v.push(e),_(d||f.C1.paginationSize)};(0,o.useImperativeHandle)(t,function(){return{currentPage:I,pageSize:k,sort:E,resetPagination:function(){F()}}});var q=function(e){var t=$(e);r&&v.push(t),D(e),!r&&u&&u()},G=function(e){e&&e.field&&e.sort?(M({item:n.find(function(t){return t.field===e.field}).sortName||e.field||e.item||a.item,order:e.sort||e.order||a.order}),u&&u()):(M({item:a.item,order:a.order}),u&&u())};return(0,b.jsxs)(w,{containerHeight:m,children:[(0,b.jsx)(C,P({hideFooter:!0,disableColumnMenu:!0,disableSelectionOnClick:!0,autoHeight:y,sortingMode:"server",onSortModelChange:function(e){return G(e[0])},columns:n,pageSize:k,slots:{columnSortedAscendingIcon:function(){return(0,b.jsx)(p.Z,{})},columnSortedDescendingIcon:function(){return(0,b.jsx)(g.Z,{})},columnUnsortedIcon:function(){return(0,b.jsxs)(c.Z,{alignItems:"center",sx:{width:"33px"},children:[(0,b.jsx)(p.Z,{sx:{marginBottom:"-15px"}}),(0,b.jsx)(g.Z,{})]})},noResultsOverlay:function(){return(0,b.jsx)(c.Z,{height:"100%",alignItems:"center",justifyContent:"center",spacing:1,p:1,children:(0,b.jsx)(s.Z,{children:h})})},noRowsOverlay:function(){return(0,b.jsx)(c.Z,{height:"100%",alignItems:"center",justifyContent:"center",spacing:1,p:1,children:(0,b.jsx)(s.Z,{children:h})})}}},e)),l&&Math.ceil(l.aggregate.totalCount/k)>1&&(0,b.jsx)(x,{currentPage:I,totalCount:l.aggregate.totalCount,pageSize:k,onPageChange:q})]})});I.defaultProps={columns:[],history:!1,loading:!1,rows:[],noResultsMessage:"There are no results.",autoHeight:!0};var w=(0,l.ZP)(u.Z)(function(e){return{height:e.containerHeight,display:"flex",flexDirection:"column"}}),C=(0,l.ZP)(a.s)(function(e){var t,n=e.theme,o=e.hideHeader,i=(e.rows,e.loading,e.rowHeight),a=e.isPdf;return t={"--DataGrid-overlayHeight":"40px"},(0,r.Z)(t,"&.MuiDataGrid-root",P({color:n.palette.black.main,border:"none"},a&&{"@media print":{display:"block"}})),(0,r.Z)(t,"& .MuiDataGrid-main",P({},a&&{"@media print":{overflow:"visible !important"}})),(0,r.Z)(t,"& .MuiDataGrid-columnHeaders",P(P({},o&&{display:"none"}),{},{"& .MuiDataGrid-iconButtonContainer":{visibility:"visible","& .MuiButtonBase-root.MuiIconButton-root":{backgroundColor:"inherit",color:n.palette.black.main,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.1)"}}}})),(0,r.Z)(t,"& .MuiDataGrid-virtualScroller",P(P({},o&&{marginTop:"0 !important"}),a&&{"@media print":{overflow:"visible !important"}})),(0,r.Z)(t,"& .MuiDataGrid-iconSeparator",{opacity:0}),(0,r.Z)(t,"& .MuiDataGrid-columnHeaderTitle",{fontWeight:700}),(0,r.Z)(t,"& .MuiButtonBase-root.MuiDataGrid-columnHeaderTitle",{fontWeight:700}),(0,r.Z)(t,"& .MuiDataGrid-virtualScrollerContent",P({},a&&{height:"initial !important",minHeight:"initial !important"})),(0,r.Z)(t,"& .MuiDataGrid-virtualScrollerRenderZone",P({},a&&{position:"relative"})),(0,r.Z)(t,"& .MuiDataGrid-overlayWrapper",(0,r.Z)({},"& .MuiCircularProgress-root",{color:n.palette.secondary.main})),(0,r.Z)(t,"& .MuiDataGrid-row",P({},a&&{minHeight:"".concat(i,"cm !important"),maxHeight:"".concat(i,"cm !important")})),(0,r.Z)(t,"& .MuiDataGrid-row > .MuiDataGrid-cell",P({},a&&{minHeight:"".concat(i,"cm !important"),maxHeight:"".concat(i,"cm !important")})),(0,r.Z)(t,"& .MuiDataGrid-row.even",{backgroundColor:n.palette.muiLightGray.main,"&:hover, &.Mui-hovered":{backgroundColor:(0,d.Fq)(n.palette.muiLightGray.main,.3),"@media (hover: none)":{backgroundColor:"transparent"}},"&.Mui-selected":{backgroundColor:(0,d.Fq)(n.palette.muiLightGray.main,.3+n.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:(0,d.Fq)(n.palette.muiLightGray.main,.3+n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,d.Fq)(n.palette.muiLightGray.main,.3+n.palette.action.selectedOpacity)}}}}),t})},78898:function(e,t,n){n.d(t,{V:function(){return u}});var r=n(59499),o=n(67294),i=n(87918),a=n(41796),c=n(85893);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u=function(e){var t,n=e.chipProps,r=e.tagEntityId,s=e.name,u=e.color,d=e.onDelete,p=(0,o.useMemo)(function(){return d?l(l({},n),{},{onDelete:function(e){e.stopPropagation(),d(r)}}):l({},n)},[n,d,r]);return(0,c.jsx)(i.Z,l(l({},p),{},{size:"small",label:s,sx:{fontSize:"11px",color:(t=u,(0,a.mi)(t,"#FFFFFF")>2.5?"#FFFFFF":"#000"),bgcolor:u,borderRadius:"0px 16px 16px 0px"}}))};u.defaultProps={chipProps:{},onDelete:null,color:"#f2f2f2"}},33063:function(e,t,n){n.d(t,{T:function(){return h}});var r=n(26447),o=n(93946),i=n(50135),a=n(97212),c=n(98619),s=n(59334),l=n(95537),u=n(96059),d=n(26143),p=n(10166),g=n(67294),f=n(42283),m=n(85893),h=function(e){var t=e.tagEntityId,n=e.tagId,s=e.name,p=e.color,h=e.editable,b=e.onDelete,v=e.onColorChange,j=e.onNameChange,x=(0,f.cI)({defaultValues:{name:s,color:p}}),Z=x.register,O=x.handleSubmit,P=(0,g.useState)(null),I=P[0],w=P[1],C=function(){return[{icon:"delete",onClick:function(e){e.stopPropagation(),b(t)},tooltip:"Remove"},{icon:"edit",onClick:function(e){e.stopPropagation(),w("rename")},tooltip:"Rename"},{icon:"visibility",onClick:function(e){e.stopPropagation(),w("changeColor")},tooltip:"Change color"}]},D=function(e){e.stopPropagation(),w(null)},S=function(e){v({tagId:n,color:e.color}),w(null)},k=function(e){j({tagId:n,name:e.name}),w(null)};return(0,m.jsx)(a.ZP,{disablePadding:!0,secondaryAction:!h||!I&&(0,m.jsx)(d.C,{icon:"defaultHoriz",actionsData:C}),children:I?({changeColor:function(){return(0,m.jsxs)(r.Z,{width:"100%",direction:"row",justifyContent:"space-between",alignItems:"center",pl:"16px",pr:"16px",children:[(0,m.jsx)("input",{name:"color",ref:Z,type:"color",style:{padding:0,border:"none","background-color":"unset"}}),(0,m.jsxs)(r.Z,{direction:"row",alignItems:"center",children:[(0,m.jsx)(o.Z,{size:"small",color:"danger",onClick:D,children:(0,m.jsx)(l.Z,{})}),(0,m.jsx)(o.Z,{size:"small",color:"success",onClick:O(S),children:(0,m.jsx)(u.Z,{})})]})]})},rename:function(){return(0,m.jsxs)(r.Z,{width:"100%",direction:"row",justifyContent:"space-between",alignItems:"center",pl:"16px",pr:"16px",children:[(0,m.jsx)(i.Z,{name:"name",inputRef:Z,variant:"standard",color:"secondary"}),(0,m.jsxs)(r.Z,{direction:"row",alignItems:"center",children:[(0,m.jsx)(o.Z,{size:"small",color:"danger",onClick:D,children:(0,m.jsx)(l.Z,{})}),(0,m.jsx)(o.Z,{size:"small",color:"success",onClick:O(k),children:(0,m.jsx)(u.Z,{})})]})]})}})[I]():(0,m.jsx)(c.Z,{children:(0,m.jsx)(y,{primary:s,color:p})})},n)};h.defaultProps={onDelete:function(){},onColorChange:function(){},onNameChange:function(){},editable:!0};var y=(0,p.Z)(s.Z)(function(e){return e.theme,{"&.MuiListItemText-root .MuiListItemText-primary":{fontWeight:700,color:e.color}}})},24770:function(e,t,n){n.d(t,{K:function(){return _}});var r=n(27812),o=n(16835),i=n(50319),a=n(52098),c=n(59499),s=n(67294),l=n(6812),u=n(96405),d=n(5616),p=n(23776),g=n(18972),f=n(50135),m=n(98456),h=n(78462),y=n(26447),b=n(93946),v=n(14564),j=n(33063),x=n(93362),Z=n(10166),O=n(72936),P=n(85893);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach(function(t){(0,c.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var C=(0,x.D)(),D=function(e){var t=e.entityId,n=(e.getTagsForEntityQuery,e.getTagsForEntityVariables,e.refetchQueries),c=e.entity,v=e.handleDeleteTagEntity,x=(0,O.x)().user,Z=(0,s.useState)(null),I=Z[0],D=Z[1],k=(0,s.useState)(""),_=k[0],T=k[1],E=(0,s.useState)(""),M=E[0],$=E[1],F=(0,s.useState)(""),q=F[0],G=F[1],z=(0,l.a)(a.BU,{skip:!I,variables:{entityId:t,entity:c}}),H=z.data,U=(H=void 0===H?{tags:[]}:H).tags,A=z.loading,R=(0,l.a)(a.gI,{skip:!I,variables:{entityId:t,entity:c,q:""!==q?"%".concat(q,"%"):null}}),B=R.data,N=(B=void 0===B?{tags:[]}:B).tags,L=R.loading,Q=(0,i.D)(a.LE,{refetchQueries:["GetAllTags"].concat((0,r.Z)(n)),onCompleted:function(){$(""),T(null)}}),V=(0,o.Z)(Q,2),W=V[0],J=V[1].loading,K=(0,i.D)(a.g$,{refetchQueries:["GetAllTags"].concat((0,r.Z)(n))}),X=(0,o.Z)(K,2),Y=X[0],ee=X[1].loading;(0,s.useEffect)(function(){var e=setTimeout(function(){G(M)},500);return function(){return clearTimeout(e)}},[M]);var et=function(e){e.stopPropagation(),D(e.currentTarget)},en=function(){D(null)},er=function(e,n){"string"==typeof n?T({label:n}):n&&n.inputValue?(W({variables:{objects:[{entity:c,entityId:t,Taxonomy:{data:{type:"tags",status:"active",name:n.inputValue,meta:{color:"#0679d8"},isGroup:!1,adminId:x.adminId}}}]}}),T(null)):n&&n.value&&(W({variables:{objects:[{entity:c,entityId:t,taxonomyId:n.value}]}}),T(null))},eo=function(e,t){var n=C(e,t),r=t.inputValue,o=e.some(function(e){return r===e.label});return""===r||o||n.push({inputValue:r,label:'Add "'.concat(r,'"')}),n},ei=function(e){return"string"==typeof e?e:e.inputValue?e.inputValue:e.label},ea=function(e){var t;Y({variables:{tagId:e.tagId,object:{meta:{color:e.color}}}})},ec=function(e){var t;Y({variables:{tagId:e.tagId,object:{name:e.name}}})},es=Boolean(I),el=null==N?void 0:N.map(function(e){return{label:e.name,value:e.id}});return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(S,{id:es?"tags-popover":void 0,open:es,anchorEl:I,onClose:en,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,P.jsxs)(d.Z,{sx:{maxHeight:"80vh",width:"280px",p:"10px",pt:"5px"},children:[(0,P.jsx)(p.Z,{freeSolo:!0,selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,options:el,value:_,onChange:er,onInputChange:function(e,t){$(t)},filterOptions:eo,getOptionLabel:ei,renderOption:function(e,t){return(0,P.jsx)(g.Z,w(w({},e),{},{children:t.label}))},renderInput:function(e){return(0,P.jsx)(f.Z,w(w({},e),{},{variant:"standard",color:"secondary",label:"Search tag",InputProps:w(w({},e.InputProps),{},{endAdornment:(0,P.jsxs)(P.Fragment,{children:[L||J?(0,P.jsx)(m.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},sx:{pl:"16px",pr:"16px"}}),A||ee?(0,P.jsx)(y.Z,{width:"100%",alignItems:"center",p:4,children:(0,P.jsx)(m.Z,{color:"secondary"})}):(0,P.jsx)(h.Z,{children:U.map(function(e){var t;return(0,P.jsx)(j.T,{tagEntityId:e.id,tagId:e.tag.id,name:e.tag.name,color:null===(t=e.tag.meta)||void 0===t?void 0:t.color,onDelete:v,onColorChange:ea,onNameChange:ec})})})]})}),(0,P.jsx)(b.Z,{color:"black",onClick:et,children:(0,P.jsx)(u.Z,{sx:{height:"16px",width:"16px"}})})]})};D.defaultProps={entityId:null,entity:null,refetchQueries:[],handleDeleteTagEntity:function(){}};var S=(0,Z.Z)(v.ZP)(function(e){return e.theme,{"& .MuiPaper-root":{borderRadius:"12px"}}}),k=n(88284),_=function(e){var t=e.row,n=e.refetchQueries,c=e.entity,s=(0,i.D)(a.cS,{refetchQueries:["GetTaskTags"].concat((0,r.Z)(n))}),l=(0,o.Z)(s,1)[0],u=function(e){l({variables:{tagEntityId:e}})};return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(k.P,{tags:t.tags,title:t.title,handleDeleteTagEntity:u}),(0,P.jsx)(D,{entityId:t.id,refetchQueries:n,handleDeleteTagEntity:u,entity:c})]})};_.defaultProps={row:{},displayOnly:!1,refetchQueries:[],handleDeleteTagEntity:function(){}}},88284:function(e,t,n){n.d(t,{P:function(){return d}});var r=n(67294),o=n(26447),i=n(15861),a=n(14564),c=n(78462),s=n(78898),l=n(33063),u=n(85893),d=function(e){var t=e.tags,n=(e.title,e.handleDeleteTagEntity),d=(0,r.useState)(null),p=d[0],g=d[1],f=null==t?void 0:t.slice(0,5),m=(null==t?void 0:t.length)-(null==f?void 0:f.length),h=Boolean(p);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.Z,{direction:"row",spacing:1,children:f.map(function(e,t){var r;return(0,u.jsx)(s.V,{tagEntityId:e.id||t,name:e.tag.name,color:null===(r=e.tag.meta)||void 0===r?void 0:r.color,onDelete:n})})}),m>0&&(0,u.jsxs)(i.Z,{fontWeight:700,ml:1,onMouseEnter:function(e){g(e.currentTarget),e.stopPropagation()},children:["+",m]}),(0,u.jsx)(a.ZP,{id:h?"tags-in-table-popover":void 0,open:h,anchorEl:p,onClose:function(){return g(null)},anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,u.jsx)(c.Z,{children:null==t?void 0:t.map(function(e){var t;return(0,u.jsx)(l.T,{tagEntityId:e.id,tagId:e.tag.id,name:e.tag.name,color:null===(t=e.tag.meta)||void 0===t?void 0:t.color,editable:!1},e.tag.id)})})})]})};d.defaultProps={tags:{},displayOnly:!1,refetchQueries:[],handleDeleteTagEntity:function(){}}},15050:function(e,t,n){n.d(t,{r:function(){return h}});var r=n(59499),o=n(16835),i=n(67294),a=n(42283),c=n(73359),s=n(23776),l=n(87918),u=n(50135),d=n(98456),p=n(52098),g=n(85893);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=function(e){var t=e.control,n=(0,i.useState)(""),r=n[0],f=n[1],h=(0,i.useState)(""),y=h[0],b=h[1],v=(0,c.t)(p.lx,{variables:{q:""!==y?"%".concat(y,"%"):null}}),j=(0,o.Z)(v,2),x=j[0],Z=j[1],O=Z.loading,P=Z.data,I=(P=void 0===P?{items:[]}:P).items;return(0,i.useEffect)(function(){var e=setTimeout(function(){b(r)},500);return function(){return clearTimeout(e)}},[r]),(0,g.jsx)(a.Qr,{control:t,name:"tags",render:function(e){var t=e.value,n=e.onChange;return(0,g.jsx)(s.Z,{multiple:!0,limitTags:6,color:"secondary",onOpen:function(){return x()},options:I,value:t||[],inputValue:r,onChange:function(e,t){n(t)},onInputChange:function(e,t){f(t)},getOptionLabel:function(e){return e.label},renderTags:function(e,t){return e.map(function(e,n){return(0,g.jsx)(l.Z,m({size:"small",label:e.label},t({index:n})),n)})},renderInput:function(e){return(0,g.jsx)(u.Z,m(m({},e),{},{variant:"standard",color:"secondary",label:"Select tags",InputProps:m(m({},e.InputProps),{},{endAdornment:(0,g.jsxs)(g.Fragment,{children:[O?(0,g.jsx)(d.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))}})}})}},52098:function(e,t,n){n.d(t,{BU:function(){return m},LE:function(){return y},Zm:function(){return f},cS:function(){return b},g$:function(){return v},gI:function(){return g},lx:function(){return h}});var r,o,i,a,c,s,l,u,d=n(71383),p=n(75063),g=(0,p.Ps)(r||(r=(0,d.Z)(['\n  query GetTagsForEntity($q: String!, $limit: Int = 50, $offset: Int = 0) {\n    tags: Taxonomy(\n      where: { name: { _ilike: $q }, status: { _eq: "active" }, type: { _eq: "tags" } }\n      limit: $limit\n      offset: $offset\n      order_by: { id: desc }\n    ) {\n      id\n      name\n      meta\n    }\n  }\n']))),f=(0,p.Ps)(o||(o=(0,d.Z)(["\n  mutation CreateTag($objects: [Taxonomy_insert_input!]!) {\n    insert_Taxonomy(objects: $objects) {\n      returning {\n        id\n        name\n        meta\n      }\n    }\n  }\n"]))),m=(0,p.Ps)(i||(i=(0,d.Z)(['\n  query GetEntityTags($entityId: Int!, $entity: String!) {\n    tags: Taxonomy_Entity(\n      where: {\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n        Taxonomy: { status: { _eq: "active" }, type: { _eq: "tags" } }\n      }\n      order_by: { id: desc }\n    ) {\n      id\n      tag: Taxonomy {\n        id\n        name\n        meta\n      }\n    }\n  }\n']))),h=(0,p.Ps)(a||(a=(0,d.Z)(['\n  query GetTagsForSelect($q: String!, $limit: Int = 50, $offset: Int = 0) {\n    items: Taxonomy(\n      where: { name: { _ilike: $q }, status: { _eq: "active" }, type: { _eq: "tags" } }\n      limit: $limit\n      offset: $offset\n      order_by: { id: desc }\n    ) {\n      value: id\n      label: name\n    }\n  }\n'])));(0,p.Ps)(c||(c=(0,d.Z)(['\n  query GetAssignedToForSelect($accountId: Int, $q: String) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: { accountId: { _eq: $accountId }, status: { _eq: "active" } }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n'])));var y=(0,p.Ps)(s||(s=(0,d.Z)(["\n  mutation CreateTagsAgainstEntity($objects: [Taxonomy_Entity_insert_input!]!) {\n    insert_Taxonomy_Entity(objects: $objects) {\n      returning {\n        id\n      }\n    }\n  }\n"]))),b=(0,p.Ps)(l||(l=(0,d.Z)(["\n  mutation DeleteTagAgainstEntity($tagEntityId: Int!) {\n    delete_Taxonomy_Entity_by_pk(id: $tagEntityId) {\n      id\n    }\n  }\n"]))),v=(0,p.Ps)(u||(u=(0,d.Z)(["\n  mutation UpdateTagAgainstEntity($tagId: Int!, $object: Taxonomy_set_input!) {\n    update_Taxonomy_by_pk(pk_columns: { id: $tagId }, _set: $object) {\n      id\n      name\n      meta\n    }\n  }\n"])))},3896:function(e,t,n){n.d(t,{X:function(){return g}});var r,o,i=n(71383),a=n(16835),c=n(59499),s=n(67294),l=n(6812),u=n(50319),d=n(75063),p=n(55863);function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage",r=(0,p.q)().user,o=(0,s.useState)(function(){try{switch(n){case"network":return t;case"sessionStorage":return JSON.parse(window.sessionStorage.getItem(e))||t}}catch(r){return t}}),i=o[0],d=o[1],g=function(t){try{var o=t instanceof Function?t(i):t;switch(d(o),n){case"network":y({variables:{accountUserId:null==r?void 0:r.accountUserId,filters:(0,c.Z)({},e,o)}});break;case"sessionStorage":window.sessionStorage.setItem(e,JSON.stringify(o))}}catch(a){}};(0,l.a)(f,{variables:{accountUserId:null==r?void 0:r.accountUserId},skip:"network"!==n,onCompleted:function(n){var r=n.accountUser;r&&d(r.filters[e]||t)}});var h=(0,u.D)(m),y=(0,a.Z)(h,1)[0];return[i,g]}var f=(0,d.Ps)(r||(r=(0,i.Z)(["\n  query GetAccountUserFilters($accountUserId: Int!) {\n    accountUser: Account_User_by_pk(id: $accountUserId) {\n      filters\n    }\n  }\n"]))),m=(0,d.Ps)(o||(o=(0,i.Z)(["\n  mutation SetAccountUserFilters($accountUserId: Int!, $filters: jsonb) {\n    update_Account_User_by_pk(pk_columns: { id: $accountUserId }, _append: { filters: $filters }) {\n      id\n    }\n  }\n"])))}}]);