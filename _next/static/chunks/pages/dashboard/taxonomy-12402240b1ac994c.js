(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4031,1772],{26143:function(e,t,n){"use strict";n.d(t,{C:function(){return w}});var r=n(67294),i=n(93946),o=n(25464),a=n(18972),s=n(57976),l=n(14218),c=n(95429),u=n(91988),d=n(70983),m=n(46761),p=n(91682),y=n(39702),f=n(36804),g=n(51797),v=n(53630),b=n(50748),h=n(23132),x=n(88127),j=n(52186),I=n(59301),S=n(26447),O=n(15861),_=n(85893),P={add:(0,_.jsx)(l.Z,{}),archive:(0,_.jsx)(c.Z,{}),avatar:(0,_.jsx)(u.Z,{}),check:(0,_.jsx)(d.Z,{}),delete:(0,_.jsx)(m.Z,{}),description:(0,_.jsx)(p.Z,{}),download:(0,_.jsx)(y.Z,{}),info:(0,_.jsx)(f.Z,{}),edit:(0,_.jsx)(g.Z,{}),location:(0,_.jsx)(v.Z,{}),unarchive:(0,_.jsx)(b.Z,{}),uploadFile:(0,_.jsx)(h.Z,{}),receipt:(0,_.jsx)(x.Z,{}),visibility:(0,_.jsx)(j.Z,{})},q={default:(0,_.jsx)(s.Z,{}),defaultHoriz:(0,_.jsx)(I.Z,{}),description:(0,_.jsx)(p.Z,{})},w=function(e){var t=e.actionsData,n=e.icon,s=e.row,l=e.disabled,c=(0,r.useState)(null),u=c[0],d=c[1],m=function(e){e.stopPropagation(),d(e.currentTarget)},p=function(){d(null)};return(0,_.jsxs)("div",{children:[(0,_.jsx)(i.Z,{sx:{":hover":{backgroundColor:"#DDDDDD"}},disabled:l,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:m,children:q[n]}),(0,_.jsx)(o.Z,{id:"simple-menu",anchorEl:u,keepMounted:!0,open:Boolean(u),onClose:p,PaperProps:{sx:{borderRadius:2}},children:t(s).map(function(e,t){return(0,_.jsx)(a.Z,{disabled:e.disabled,onClick:function(t){e.onClick(t),p()},sx:{pl:3,pr:4},children:(0,_.jsxs)(S.Z,{direction:"row",alignItems:"center",spacing:2,children:[(null==P?void 0:P[e.icon])||null,(0,_.jsx)(O.Z,{children:e.tooltip})]})},t)})})]})};w.defaultProps={actionsData:function(){return[{disabled:!1,onClick:function(){},icon:"edit",tooltip:"Edit"}]},icon:"default",disabled:!1}},6911:function(e,t,n){"use strict";n.d(t,{q:function(){return y}});var r=n(59499),i=n(4730),o=n(23776),a=n(87918),s=n(50135),l=n(98456),c=n(67294),u=n(85893),d=["loading","setSearch","textFieldProps"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y=function(e){var t=e.loading,n=e.setSearch,r=e.textFieldProps,m=(0,i.Z)(e,d),y=(0,c.useState)(""),f=y[0],g=y[1];return(0,c.useEffect)(function(){var e=setTimeout(function(){n(f)},500);return function(){return clearTimeout(e)}},[f,n]),(0,u.jsx)(o.Z,p(p({},m),{},{loading:t,onInputChange:function(e,t){g(t)},getOptionLabel:function(e){return e.label},renderTags:function(e,t){return e.map(function(e,n){return(0,u.jsx)(a.Z,p({size:"small",label:e.label},t({index:n})))})},renderInput:function(e){return(0,u.jsx)(s.Z,p(p(p({},e),r),{},{InputProps:p(p(p({},e.InputProps),r.InputProps||{}),{},{endAdornment:(0,u.jsxs)(u.Fragment,{children:[t?(0,u.jsx)(l.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))}}))};y.defaultProps={color:"secondary",onChange:function(){},options:[],onOpen:function(){},setSearch:function(){},textFieldProps:{}}},52220:function(e,t,n){"use strict";n.d(t,{M:function(){return d}});var r=n(59499),i=n(4730),o=n(89345),a=n(99505),s=n(55843),l=n(85893),c=["control","errors","name","space"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var d=function(e){var t=e.control,n=e.errors,d=e.name,m=e.space,p=(0,i.Z)(e,c);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({control:t,errors:n,locale:o.Z,name:d},p)),m&&(0,l.jsx)(s.Z,{marginBottom:"sm"})]})};d.defaultProps={space:!0}},40527:function(e,t,n){"use strict";n.d(t,{$z:function(){return p},A5:function(){return x},G2:function(){return b},GU:function(){return h},I2:function(){return y},Pu:function(){return j},a6:function(){return v},eD:function(){return g},lV:function(){return f}});var r=n(59499),i=n(27812),o=n(30381),a=n.n(o),s=n(83704),l=n.n(s),c=n(99245);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}l()(a());var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o={};if(o.assetSelected=null,o.costCategorySelected=null,o.customerSelected=null,o.customerUserSelected=null,o.locationSelected=null,o.sublocationSelected=null,o.managerSelected=null,o.serviceSelected=null,o.siteVisitReq=!1,o.taxonomyId_ShortDesc=null,o.assetCategorySelected=null,o.access=null,o.paymentMethod="invoice",o.reportPassFail=!1,o.reportPassFailTitle="",o.requireReportRecommendations=!1,o.tags=[],e.customer&&(o.customerSelected={value:e.customer.id,label:e.customer.name}),e.location){var a,s,l,u,d,m=e.location.customerAssociations;o.locationSelected={value:e.location.id,label:e.location.name},m&&(o.customerSelected={value:null==m?void 0:null===(s=m[0])||void 0===s?void 0:null===(l=s.customer)||void 0===l?void 0:l.id,label:null==m?void 0:null===(u=m[0])||void 0===u?void 0:null===(d=u.customer)||void 0===d?void 0:d.name})}if(e.asset&&(o.assetSelected={value:e.asset.id,label:e.asset.name},o.assetCategorySelected={value:null===(p=e.asset)||void 0===p?void 0:null===(y=p.Category)||void 0===y?void 0:y.id,label:null===(f=e.asset)||void 0===f?void 0:null===(g=f.Category)||void 0===g?void 0:g.name}),t("admin")&&(o.managerSelected={value:n.id,label:"".concat(n.nameFirst," ").concat(n.nameLast)}),null!==(a=o.tags)&&void 0!==a&&a.length&&(o.Taxonomy={data:(0,i.Z)(o.tags?(0,c.O)(o.tags):[])}),t("customer")&&(o.customerUserSelected={value:n.id,label:"".concat(n.nameFirst," ").concat(n.nameLast)}),e.parentJob){var p,y,f,g,v,b,h,x,j,I=e.parentJob,S=I.access,O=I.answers,_=I.assetCategory,P=I.assets,q=I.costCategoryTaxonomy,w=I.customer,Z=I.customerUser,C=I.manager,$=I.siteVisitAt,k=I.service,D=I.shortJobDesc,T=I.location,A=I.sublocation;o.access=S,w&&(o.customerSelected={value:w.id,label:w.name}),Z&&(o.customerUserSelected={value:Z.id,label:"".concat(Z.nameFirst," ").concat(Z.nameLast)}),T&&(o.locationSelected={value:T.id,label:T.name}),A&&(o.sublocationSelected={value:A.id,label:A.name}),C&&(o.managerSelected={value:C.id,label:"".concat(C.nameFirst," ").concat(C.nameLast),accounts:C.accounts}),(null==P?void 0:P.length)>0&&(o.assetSelected=P.map(function(e){return{value:e.asset.id,label:e.asset.name,assetId:e.id,jobId:e.jobId}})),_&&(o.assetCategorySelected={value:_.id,label:_.name}),"true"===r&&(o.title="Recall: ".concat((null==I?void 0:null===(v=I.shortJobDesc[0])||void 0===v?void 0:v.taxonomy.name)||I.title),o.description=I.description,o.reference=I.reference,o.source=I.source,o.slaId=I.slaId,o.paymentMethod=I.paymentMethod,o.pricing=I.pricing,o.taxonomyId_ShortDesc={value:D[0].taxonomyId,label:null===(b=D[0])||void 0===b?void 0:null===(h=b.taxonomy)||void 0===h?void 0:h.name,meta:null===(x=D[0])||void 0===x?void 0:null===(j=x.taxonomy)||void 0===j?void 0:j.meta},k&&(o.serviceSelected={value:k.id,label:k.name}),$&&(o.siteVisitReq=!0),o.questions=O.map(function(e){var t;return{id:e.id,taxonomyId:e.taxonomyId,comments:e.comments,name:null===(t=e.taxonomy)||void 0===t?void 0:t.name}}),q&&(o.costCategorySelected={value:q.id,label:q.name}))}return o},y=function(e){var t,n,r={};return Object.keys(e).map(function(t){var n=e[t];return"number"==typeof n&&(n=n.toString()),["timingStart","timingEnd","quoteDue","quoteDueSupplier","siteVisitStart","siteVisitEnd"].includes(t)&&null!==n&&(n=new Date(n)),r[t]=n,r}),r.siteVisitReq||(r.siteVisitWeekends=!1),delete r.siteVisitReq,r.siteVisitWeekends?r.siteVisitWeekends=!0:r.siteVisitWeekends=!1,e.customer&&(r.customerSelected={value:e.customer.id,label:e.customer.name}),e.customerUser&&(r.customerUserSelected={value:e.customerUser.id,label:"".concat(e.customerUser.nameFirst," ").concat(e.customerUser.nameLast)}),e.location&&(r.locationSelected={value:e.location.id,label:e.location.name,permitsRequired:null==e?void 0:null===(n=e.location)||void 0===n?void 0:n.permitsRequired}),e.sublocation&&(r.sublocationSelected={value:e.sublocation.id,label:e.sublocation.name}),null!==(t=e.issueTypes[0])&&void 0!==t&&t.issue&&(r.issueType={label:e.issueTypes[0].issue.name,value:e.issueTypes[0].issue.id}),e.manager&&(r.managerSelected={value:e.manager.id,label:"".concat(e.manager.nameFirst," ").concat(e.manager.nameLast),accounts:e.manager.accounts}),e.service&&(r.serviceSelected={value:e.service.id,label:e.service.name}),e.assets&&e.assets.length>0?(r.assetSelected=e.assets.map(function(e){return{value:e.asset.id,label:e.asset.name,assetId:e.id,jobId:e.jobId}}),delete r.assets):r.assetSelected=[],r.assetCategory&&(r.assetCategorySelected={value:r.assetCategory.id,label:r.assetCategory.name},delete r.assetCategory),r.siteVisitReq=!1,e.siteVisitStart&&(r.siteVisitReq=!0),r.shortJobDesc&&r.shortJobDesc.length>0&&(r.taxonomyId_ShortDesc={value:r.shortJobDesc[0].taxonomyId,label:r.shortJobDesc[0].taxonomy.name,meta:r.shortJobDesc[0].taxonomy.meta}),r.questions=r.answers.map(function(e){var t;return{id:e.id,taxonomyId:e.taxonomyId,comments:e.comments,name:null===(t=e.taxonomy)||void 0===t?void 0:t.name}}),delete r.answers,r.costCategoryTaxonomy?r.costCategorySelected={value:r.costCategoryTaxonomy.id,label:r.costCategoryTaxonomy.name}:r.costCategorySelected=null,r.allowTimingNormalHours=!e.timingNormalHours,e.estimatedDuration&&e.estimatedDurationUnit&&(r.estimatedDuration=a().duration(e.estimatedDuration,"milliseconds").as(e.estimatedDurationUnit)),r},f=function(e){var t,n,r,o,s,l,u,d=e.query,p=e.data,y=e.hasRole,f=e.user,g=e.type;p.title=null,["slaId","customerSpendThreshold"].map(function(e){return p[e]?p[e]=parseInt(p[e]):p[e]=null,p}),delete p.timeSpan,["quoteDue","quoteDueSupplier","timingEnd","timingStart","endDate"].map(function(e){return p[e]&&(p[e]=a()(p[e]).utc().format()),p}),p.siteVisitReq?["siteVisitStart","siteVisitEnd"].map(function(e){return p[e]&&(p[e]=a()(p[e]).format()),p}):(p.siteVisitStart=null,p.siteVisitEnd=null),p.siteVisitWeekends="true"===p.siteVisitWeekends,delete p.siteVisitReq,["costCategory","customer","customerUser","location","manager","service"].map(function(e){return p[e+"Selected"]&&p[e+"Selected"].value&&(p[e+"Id"]=p[e+"Selected"].value),delete p[e+"Selected"],p}),null!==(t=p.sublocationSelected)&&void 0!==t&&t.value?p.sublocationId=null===(r=p.sublocationSelected)||void 0===r?void 0:r.value:p.sublocationId=null,delete p.sublocationSelected,"allowTimingNormalHours"===p.allowTimingNormalHours?p.timingNormalHours=!1:p.timingNormalHours=!0,delete p.allowTimingNormalHours,p.multipleDays&&"fixed"===p.pricing||(p.endDate=null),delete p.multipleDays;var v="";d.quoted?(p.type="quote",p.serviceId=null,p.quoted=!0,p.pricing="fixed",v="quoteNew"):"ppm"===g?p.type="ppm":(p.type="reactive",v=y("admin")?"raised":"pending"),d.id||(p.status=v,p.JobTimings={data:{status:p.status,userId:f.id}},y("admin")?p.adminId=f.accountId:p.adminId=f.adminId||1),d.parentId&&(p.parentId=parseInt(d.parentId)),p.timing&&"at"===p.timing&&(p.timingEnd=null),"foc"===p.quoteCharge&&(p.quoteChargeAmount=null);var b=[];if(p.questions&&(b=JSON.parse(p.questions).map(function(e){return{comments:e.comments,entity:e.entity,taxonomyId:e.taxonomyId}})),!d.id&&p.taxonomyId_ShortDesc&&(p.Taxonomy={data:[{entity:"Job",taxonomyId:p.taxonomyId_ShortDesc.value}].concat((0,i.Z)(b))}),null!==(n=p.tags)&&void 0!==n&&n.length&&(p.Taxonomy={data:[].concat((0,i.Z)(null!==(o=null===(s=p.Taxonomy)||void 0===s?void 0:s.data)&&void 0!==o?o:[]),(0,i.Z)((0,c.O)(p.tags)))}),p.issueType&&(p.Taxonomy={data:[].concat((0,i.Z)(null!==(l=null===(u=p.Taxonomy)||void 0===u?void 0:u.data)&&void 0!==l?l:[]),[{entity:"Job",taxonomyId:p.issueType.value}])}),delete p.taxonomyId_ShortDesc,delete p.questions,p.estimatedDuration&&p.estimatedDurationUnit?p.estimatedDuration=a().duration(p.estimatedDuration,p.estimatedDurationUnit).as("milliseconds"):(delete p.estimatedDuration,delete p.estimatedDurationUnit),p.meta=m(m({},p.meta),{},{customerSignature:p.customerSignature,supplierSignature:p.supplierSignature}),delete p.customerSignature,delete p.supplierSignature,p.assetSelected&&p.assetSelected.length>0){var h=p.assetSelected.map(function(e){return{assetId:e.value,status:"active"}});p.Assets={data:h}}return delete p.assetSelected,p.assetCategoryId=p.assetCategorySelected&&p.assetCategorySelected.value,delete p.assetCategorySelected,delete p.tags,delete p.issueType,p},g=function(e,t){if(t){if(!(null!==(n=e.taxonomyId_ShortDesc)&&void 0!==n&&n.value))return{};var n,r,o,a=JSON.parse(e.questions).map(function(e){return{comments:e.comments,entityId:t,entity:"Job",taxonomyId:e.taxonomyId}});return[{entityId:t,entity:"Job",taxonomyId:e.taxonomyId_ShortDesc.value}].concat((0,i.Z)(null!==(r=e.issueType)&&void 0!==r&&r.value?[{entityId:t,entity:"Job",taxonomyId:e.issueType.value}]:[]),(0,i.Z)((0,c.O)(null!==(o=e.tags)&&void 0!==o?o:[]).map(function(e){return m({entityId:t},e)})),(0,i.Z)(a))}},v=function(e,t){var n={meta:m(m({},e.meta),{},{reporter:m(m({},e.meta.reporter),{},{nameFirst:t.name.split(" ")[0],nameLast:t.name.split(" ")[1]||"",phone:t.phone,email:t.email,shouldSendNotifications:t.shouldSendNotifications})})};return delete t.name,delete t.phone,delete t.email,delete t.shouldSendNotifications,n},b=function(e){return{nameFirst:e.name.split(" ")[0],nameLast:e.name.split(" ")[1]||"",phone:e.phone,email:e.email,meta:{shouldSendNotifications:e.shouldSendNotifications}}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"reactive",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{slas:[],customerSlas:[],locationSlas:[]},n=t.slas,r=t.customerSlas,i=t.locationSlas;return n.filter(function(t){return t.subtype===e}).map(function(e){var t=null==i?void 0:i.find(function(t){return t.slaId===e.id&&t.inUse}),n=null==r?void 0:r.find(function(t){return t.slaId===e.id&&t.inUse}),o=(null==t?void 0:t.notes)||(null==n?void 0:n.notes),a=(null==t?void 0:t.onSite)||(null==n?void 0:n.onSite),s=(null==t?void 0:t.onSiteUnit)||(null==n?void 0:n.onSiteUnit),l=(null==t?void 0:t.quoteReturned)||(null==n?void 0:n.quoteReturned),c=(null==t?void 0:t.quoteReturnedUnit)||(null==n?void 0:n.quoteReturnedUnit);return{id:e.id,label:e.label,value:e.id,notes:o||e.notes,onSite:a||e.onSite,onSiteUnit:s||e.onSiteUnit,quoteReturned:l||e.quoteReturned,quoteReturnedUnit:c||e.quoteReturnedUnit,disabled:!!(null!=i&&i.find(function(t){return t.slaId===e.id&&!t.inUse})||null!=r&&r.find(function(t){return t.slaId===e.id&&!t.inUse}))}})},x=function(e,t){var n=[];if(t.Media_Entity){var r,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}}(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(t.Media_Entity.data);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=m(m({},o),{},{entityId:e});n.push(a)}}catch(s){i.e(s)}finally{i.f()}delete t.Media_Entity}return n},j=function(e,t,n){return{managerSelected:t("admin")?{value:n.id,label:"".concat(n.nameFirst," ").concat(n.nameLast)}:null,access:e.location.access,sublocationSelected:e.sublocation?{value:e.sublocation.id,label:e.sublocation.name}:null,locationSelected:{value:e.location.id,label:e.location.name},customerSelected:{value:e.customer.id,label:e.customer.name},customerUserSelected:{value:e.customerUser.id,label:e.customerUser.name},assetSelected:[{value:e.asset.id,label:e.asset.name}],assetCategorySelected:{value:e.assetCategory.id,label:e.assetCategory.name}}}},9164:function(e,t,n){"use strict";n.d(t,{r:function(){return u}});var r=n(59499),i=n(41664),o=n.n(i),a=n(23795),s=n(85893);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u=function(e){var t=e.children,n=e.href,r=e.noWrap,i=e.target,l=e.sx,u=void 0===l?{}:l;return r?(0,s.jsx)(s.Fragment,{children:t}):n?(0,s.jsx)(o(),{href:n,target:i,passHref:!0,children:(0,s.jsx)(a.Z,c(c({sx:u},e),{},{children:t}))}):(0,s.jsx)(a.Z,c(c({sx:u},e),{},{children:t}))};u.defaultProps={onClick:function(e){e.stopPropagation()}}},73073:function(e,t,n){"use strict";n.d(t,{G:function(){return R}});var r=n(59499),i=n(6812),o=n(12603),a=n(32836),s=n(4788),l=n(94784),c=n(85011),u=n(40826),d=n(85893),m=function(e,t){var n=function(){return(0,d.jsx)(u.Z,{context:"success",icon:"check",size:"sm",title:"Yes"})},r=function(){return(0,d.jsx)(u.Z,{context:"warning",icon:"times",size:"sm",title:"No"})},i=function(){return(0,d.jsx)(u.Z,{context:"dark",icon:"minus",size:"sm",title:"Unavailable"})};return"image"===e?null!=t&&t.thumbnails&&null!=t&&t.thumbnails.length?n:r:i},p=n(42846),y=n(72936),f=n(21023),g=n(5616),v=n(86532),b=n(38895),h=n(15861),x=n(22797),j=n(26447),I=n(11057),S=n(58886),O=n(90948),_=n(70872),P=n(67294),q=n(77314),w=n(42850);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var C=(0,w.bH)(q.ZP),$=function(e){var t=e.images,n=e.showPagination,i=e.height,o=(0,P.useState)(0),a=o[0],s=o[1],l=function(e){s(e)};return(0,d.jsxs)(j.Z,{width:"100%",alignItems:"center",children:[(0,d.jsx)(C,{index:a,onChangeIndex:l,enableMouseEvents:!0,interval:1e4,children:t.map(function(e){return(0,d.jsx)(g.Z,{component:"img",sx:{height:i,display:"block",overflow:"hidden",width:"100%",objectFit:"cover"},src:e.filename,alt:e.caption},e.caption)})}),n&&t.length>1&&(0,d.jsx)(k,{page:a+1,count:t.length,onChange:function(e,t){return l(t-1)},variant:"outlined",shape:"rounded",renderItem:function(e){return(0,d.jsx)(S.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({slots:{previous:function(){return"Previous"},next:function(){return"Next"}}},e))}})]})};$.defaultProps={images:[],showPagination:!0};var k=(0,O.ZP)(_.Z)(function(e){e.hidePrevButton,e.hideNextButton;var t,n=e.theme;return t={},(0,r.Z)(t,"&.MuiPagination-root",{alignSelf:"center",marginTop:"16px"}),(0,r.Z)(t,"& .MuiPaginationItem-root",{fontWeight:600,margin:0,borderRadius:0}),(0,r.Z)(t,"& .MuiPagination-ul > li:last-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"0 5px 5px 0"}),(0,r.Z)(t,"& .MuiPagination-ul > li:first-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"5px 0 0 5px"}),(0,r.Z)(t,"& button.Mui-selected",{color:n.palette.white.main,backgroundColor:n.palette.secondary.main}),t}),D=n(27434),T=n(26143),A=n(9164),M=n(58095);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var R=function(e){var t=e.carousel,n=e.category,r=e.data,u=e.entity,S=e.entityId,O=e.filters,_=e.listView,P=e.mediaMeta,q=e.onMediaAdd,w=e.onMediaRemove,Z=e.showActionButtons,C=e.showEntityColumn,k=e.showItemActions,E=e.title,R=e.type,U=e.expanded,L=e.onChangeExpanded,G=e.hideExpandIcon,N=e.mediaFormProps,z=e.offCanvasProps,V=e.onlySingleMedia,H=(0,p.x)({filters:O}),B=H.initialData,J=H.ref,Q=(0,y.x)(),W=Q.hasRole,Y=Q.user,K=(0,M.a)(),X=(0,i.a)(o.t,{variables:F(F({},B),{},{entity:u,entityId:S,category:n,adminId:Y.adminId,meta:P})}),ee=X.data,et=(ee=void 0===ee?{items:[],meta:{aggregate:{totalCount:0}}}:ee).items,en=ee.meta,er=X.loading,ei=X.refetch,eo=function(e){K.close(),r.length||ei();var t=e.map(function(e){return F(F({},e),{},{link:"".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(e.filename)})});q&&q(t)},ea=function(e){K.close(),r.length||ei(),w&&w(e)},es=function(e){e.stopPropagation(),K.show(F({content:(0,d.jsx)(c.z,F({accept:"image/*",adminId:Y.adminId,category:n,entity:u,entityId:S,expiryShow:!1,mediaMeta:P,multiple:!0,onSuccess:eo,type:"image"},N)),title:"Upload Photos"},z))},el=function(e){e.stopPropagation(),K.show(F({content:(0,d.jsx)(c.z,F({accept:".pdf, .doc, .docx, .xlsx",adminId:Y.adminId,category:n,entity:u,entityId:S,expiryShow:!1,mediaMeta:P,onSuccess:eo,type:"document"},N)),title:"Upload Documents"},z))},ec=function(e){K.show({content:(0,d.jsx)(s.d,{mediaId:e.data.id,onSuccess:ea}),submit:!1,title:"Delete Media"})},eu=function(e){K.show({content:(0,d.jsx)(l.z,{media:e.data,toggleShow:K.close}),title:"Media Details",width:"50%"})},ed=function(e){return[{context:"primary",icon:"info",onClick:function(t){return eu(e)},tooltip:"Details"},{context:"danger",icon:"delete",onClick:function(t){return ec(e)},tooltip:"Delete"}]},em=[{field:"file",headerName:"File",flex:1,sortable:!1,renderCell:function(e){var t=e.row,n=e.value;return(0,d.jsx)(A.r,{color:"secondary",onClick:function(e){e.preventDefault(),window.open("".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(t.filename))},children:n})}},{field:"visibility",headerName:"Visible to",flex:1,sortable:!1},{hide:!C,field:"entity",headerName:"Entity",flex:1,sortable:!1},{field:"authority",headerName:"",width:50,sortable:!1,renderCell:function(e){var t=e.value;return(0,d.jsx)(d.Fragment,{children:(null==t?void 0:t.adminOnly)&&(0,d.jsx)(f.Z,{title:"Admin user only",children:(0,d.jsx)(g.Z,{component:"img",alt:"Admin Only",src:"/messaging/admin-only.svg",sx:{height:"24px"}})})})}},{field:"uploaded",headerName:"Uploaded by",flex:1,sortable:!1},{hide:!_,field:"thumbnails",headerName:"Thumbnails",flex:1,sortable:!1,renderCell:function(e){var t=e.value;return"function"==typeof t?t():t}},{hide:!k,field:"actions",headerName:"",width:50,sortable:!1,renderCell:function(e){var t=e.row;return W("admin")?(0,d.jsx)(T.C,{actionsData:ed,row:t}):Y.id===t.userId?(0,d.jsx)(T.C,{actionsData:ed,row:t}):null}}],ep=[],ey=et.filter(function(e){var t=e.item;return(null==t?void 0:t.visibility)&&W(null==t?void 0:t.visibility)}).map(function(e){var t=e.entity,n=e.entityId,r=e.id,i=e.item,o=i.caption,a=i.filename,s=i.meta,l=i.name,c=i.type,u=i.user,d=i.visibility;return{data:i,id:r,userId:null==u?void 0:u.id,filename:a,visibility:d.join(", "),file:o||l||a,entity:t&&"".concat(t,"#").concat(n),authority:s,uploaded:"".concat(null==u?void 0:u.nameFirst," ").concat(null==u?void 0:u.nameLast),thumbnails:m(c,s),actions:""}}),ef=(et.filter(function(e){var t=e.item;return(null==t?void 0:t.visibility)&&W(null==t?void 0:t.visibility)}).forEach(function(e){var t=e.item,n=t.caption,r=t.filename;"image"===t.type&&ep.push({caption:n,filename:"".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(r)})}),ep),eg=ef.length;return(0,d.jsxs)(v.Z,{expanded:U,onChange:L,children:[(0,d.jsx)(b.Z,F(F({},G?{}:{expandIcon:(0,d.jsx)(D.Z,{})}),{},{children:(0,d.jsx)(h.Z,{variant:"h6",children:E})})),(0,d.jsxs)(x.Z,{children:[t&&eg>0&&(0,d.jsx)($,{height:"200px",images:ef}),(0,d.jsx)(a.i,{columns:em,rows:ey,loading:er,meta:en,ref:J,refetch:ei,columnVisibilityModel:{entity:C,thumbnails:_,actions:k}}),Z&&!(V&&ey.length>0)&&(0,d.jsxs)(j.Z,{direction:"row",justifyContent:"center",spacing:2,mt:2,children:[(!R||"document"===R)&&(0,d.jsx)(I.Z,{variant:"contained",color:"secondary",onClick:el,children:"Add Document"}),(!R||"image"===R||"avatar"===R)&&(0,d.jsxs)(I.Z,{variant:"contained",color:"secondary",onClick:es,children:["Add ",R?"".concat(R.charAt(0).toUpperCase()).concat(R.slice(1)):"Image"]})]})]})]})};R.defaultProps={carousel:!0,data:[],filters:{},listView:!1,mediaMeta:null,showActionButtons:!0,showEntityColumn:!1,showItemActions:!0,title:"Media",type:null,onChangeExpanded:function(){},mediaFormProps:{},offCanvasProps:{},category:"media",onlySingleMedia:!1}},86901:function(e,t,n){"use strict";n.d(t,{S:function(){return o}});var r=n(40826),i=n(85893),o=function(e,t){var n=function(){return(0,i.jsx)(r.Z,{context:"success",icon:"check",size:"sm",title:"Yes"})},o=function(){return(0,i.jsx)(r.Z,{context:"warning",icon:"times",size:"sm",title:"No"})},a=function(){return(0,i.jsx)(r.Z,{context:"dark",icon:"minus",size:"sm",title:"Unavailable"})};return"image"===e?null!=t&&t.thumbnails&&null!=t&&t.thumbnails.length?n:o:a}},12603:function(e,t,n){"use strict";n.d(t,{O:function(){return l},t:function(){return s}});var r,i,o=n(71383),a=n(75063),s=(0,a.Ps)(r||(r=(0,o.Z)(["\n  query MEDIAS(\n    $category: String\n    $entity: String\n    $entityId: Int\n    $limit: Int\n    $offset: Int\n    $q: String\n    $type: String\n    $adminId: Int\n    $meta: jsonb\n  ) {\n    items: Media_Entity(\n      limit: $limit\n      offset: $offset\n      where: {\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n        Medium: {\n          adminId: { _eq: $adminId }\n          caption: { _ilike: $q }\n          category: { _eq: $category }\n          type: { _eq: $type }\n          meta: { _contains: $meta }\n        }\n      }\n      order_by: { Medium: { createdAt: desc } }\n    ) {\n      id\n      entity\n      entityId\n      mediaId\n      item: Medium {\n        id\n        visibility\n        caption\n        category\n        createdAt\n        expiryAt\n        filename\n        name\n        type\n        meta\n        userId\n        user: User {\n          id\n          nameFirst\n          nameLast\n        }\n      }\n    }\n    meta: Media_Entity_aggregate(\n      where: {\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n        Medium: {\n          adminId: { _eq: $adminId }\n          caption: { _ilike: $q }\n          category: { _eq: $category }\n          type: { _eq: $type }\n          meta: { _contains: $meta }\n        }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"]))),l=(0,a.Ps)(i||(i=(0,o.Z)(["\n  query GetPreloadedMediaByEntity(\n    $category: String\n    $entity: String\n    $entityId: Int\n    $adminId: Int\n  ) {\n    items: Media_Entity(\n      where: {\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n        Medium: { adminId: { _eq: $adminId }, category: { _eq: $category } }\n      }\n    ) {\n      mediaId\n      media: Medium {\n        id\n        filename\n        caption\n      }\n    }\n  }\n"])))},4788:function(e,t,n){"use strict";n.d(t,{d:function(){return m}});var r=n(16835),i=n(50319),o=n(75847),a=n(84808),s=n(98456),l=n(15861),c=n(26447),u=n(11057),d=n(85893),m=function(e){var t=e.mediaId,n=e.onSuccess,m=(0,i.D)(o.CI,{variables:{id:t},refetchQueries:["MEDIAS"],onCompleted:function(){return n(t)}}),p=(0,r.Z)(m,2),y=p[0],f=p[1].loading;return f?(0,d.jsx)(a.Z,{sx:{zIndex:1e5},open:!0,children:(0,d.jsx)(s.Z,{color:"secondary"})}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.Z,{children:"Are you sure you want to delete this?"}),(0,d.jsx)(c.Z,{alignItems:"flex-end",children:(0,d.jsx)(u.Z,{variant:"contained",color:"danger",disabled:f,onClick:function(){return y()},children:"Delete"})})]})}},94784:function(e,t,n){"use strict";n.d(t,{z:function(){return w}});var r=n(59499),i=n(50029),o=n(16835),a=n(64687),s=n.n(a),l=n(67294),c=n(50319),u=n(75847),d=n(84808),m=n(98456),p=n(26186),y=n(76600),f=n(34953),g=n(16540),v=n(55843),b=n(86901),h=n(47159),x=n(39496),j=n(60036),I=n(72936),S=n(42283),O=n(6911),_=n(85893);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var w=function(e){var t,n=e.media,r=e.toggleShow,a=(0,l.useState)(!1),P=a[0],w=a[1],Z=(0,I.x)().hasRole,C=n.caption,$=n.createdAt,k=n.entity,D=n.entityId,T=n.filename,A=n.mediaId,M=n.meta,E=n.name,F=n.id,R=n.visibility,U=n.type,L=n.user,G=(0,S.cI)({defaultValues:{visibility:(0,x.c)(R)}}),N=G.control,z=G.handleSubmit,V=(0,c.D)(u.o7,{refetchQueries:["MEDIAS"],onCompleted:function(e){w(!1),e&&r&&r()}}),H=(0,o.Z)(V,2),B=H[0];H[1].error;var J,Q=(t=(0,i.Z)(s().mark(function e(t){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:B({variables:{changes:{visibility:t.visibility.value},id:F}}).then(function(){return r()});case 1:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),W=[{key:"ID",value:A,hidden:!0},{key:"Name",value:E||T},{key:"Visible to",value:R.join(", ")},{key:"Caption",value:C},{key:"Entity",value:k?"".concat(k,"#").concat(D):"-",hidden:!0},{key:"Type",value:U},{key:"Uploaded by",value:"".concat(null==L?void 0:L.nameFirst," ").concat(null==L?void 0:L.nameLast)},{key:"Created at",value:(0,p.Z)($)}];"image"===U&&W.push({key:"Thumbnails",value:(0,b.S)(U,M),hidden:!0}),(0,i.Z)(s().mark(function e(){var t,n,r,i;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),n="".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(null!=M&&null!==(t=M.original)&&void 0!==t&&t.relativePath?M.original.relativePath:T),r=(0,h.V)(),(i=new window.FormData).append("sizes",r),i.append("url",n),e.next=8,window.fetch("https://aws.cleverly.works/image/process",{method:"POST",body:i}).then(function(e){return e.json()}).then(function(e){var t,n=null,r=q({},M)||{},i=e.key,o=e.data.find(function(e){return"large"===e.name});i.startsWith("https://cleverly-media.s3.eu-west-2.amazonaws.com")&&(i=i.replace("".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/"),"")),n=o?o.relativePath:i,r.original={relativePath:i},r.thumbnails=e.data||null;var a={extension:null===(t=n)||void 0===t?void 0:t.split(".").pop(),filename:n,meta:r};B({variables:{changes:a,id:A}})}).catch(function(e){(0,j.Tb)({message:e,section:"fetch"})});case 8:case"end":return e.stop()}},e)})),null!=M&&M.thumbnails;var Y=(0,x.z)(Z).options;return P?(0,_.jsx)(d.Z,{sx:{zIndex:1e5},open:!0,children:(0,_.jsx)(m.Z,{color:"secondary"})}):(0,_.jsxs)(y.Z,{id:"offCanvasForm",handleSubmit:z(Q),children:["image"===U&&(0,_.jsx)(f.Z,{alt:C||T,src:"".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(T)}),(0,_.jsx)(g.Z,{rows:W}),(0,_.jsx)(S.Qr,{name:"visibility",control:N,render:function(e){var t=e.value,n=e.onChange;return(0,_.jsx)(O.q,{value:t,disableClearable:!0,textFieldProps:{color:"secondary",variant:"standard",label:"Select media visibility"},onChange:function(e,t){return n(t)},options:Y})}}),!1,(0,_.jsx)(v.Z,{}),!1]})};w.defaultProps={type:"image"}},85011:function(e,t,n){"use strict";n.d(t,{z:function(){return A}});var r=n(59499),i=n(50029),o=n(16835),a=n(64687),s=n.n(a),l=n(67294),c=n(42283),u=n(79665),d=n(30381),m=n.n(d),p=n(50319),y=n(75847),f=n(73987),g=n(76600),v=n(49501),b=n(55563),h=n(13439),x=n(51466),j=n(92264),I=n(52220),S=n(49088),O=n(74231),_=(0,O.Ry)().shape({caption:(0,O.Z_)(),dropzone:(0,O.nK)().required()}),P=n(72936),q=n(6911),w=n(60036),Z=n(84808),C=n(98456),$=n(39496),k=n(85893);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var A=function(e){var t,n=e.accept,r=e.adminId,a=e.category,d=e.entity,O=e.entityId,D=e.expiryShow,A=e.mediaMeta,M=e.multiple,E=e.onSuccess,F=e.type,R=e.showSubmitButton,U=(0,l.useState)(!1),L=U[0],G=U[1],N=(0,l.useState)(!1),z=N[0],V=N[1],H=(0,P.x)().hasRole,B=(0,$.z)(H),J=B.defaultOption,Q=B.options,W=(0,c.cI)({resolver:(0,u.S)(_),defaultValues:{visibility:J}}),Y=W.control,K=W.errors,X=W.handleSubmit,ee=W.register,et=W.reset,en=(0,l.useContext)(f.Z).user,er=(0,p.D)(y.xM,{refetchQueries:["MEDIAS"]}),ei=(0,o.Z)(er,2),eo=ei[0],ea=ei[1].loading,es=(0,p.D)(y.tv,{refetchQueries:["MEDIAS"]}),el=(0,o.Z)(es,2),ec=el[0],eu=el[1].loading,ed=(t=(0,i.Z)(s().mark(function e(t){var n,o,l,c,u;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.caption,o=t.visibility,l=t.dropzone,c=t.expiryAt,e.prev=1,G(!0),V(!1),e.t0=Promise,e.next=7,l.map(function(){var e=(0,i.Z)(s().mark(function e(t){var i,l,u,d,p,y,f;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=9;break}return e.next=3,(0,S.V)(t,F);case 3:return l=e.sent,u=null,d=null,"image"===F?(p=l.key,u=(y=l.data.find(function(e){return"large"===e.name}))?y.relativePath:p,d={original:{relativePath:p},thumbnails:l.data||null}):u=l.key,f={adminId:r,category:a,caption:n,expiryAt:c?m()(c).utc().format():null,extension:null===(i=u)||void 0===i?void 0:i.split(".").pop(),userId:en.id,filename:u,meta:T(T({},d),A),type:F,visibility:o.value},e.abrupt("return",f);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 7:return e.t1=e.sent,e.next=10,e.t0.all.call(e.t0,e.t1);case 10:eo({variables:{objects:e.sent}}).then(function(){var e=(0,i.Z)(s().mark(function e(t){var n,r,i;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.data.insert_Media.returning,!(d&&O)){e.next=6;break}return i=r.map(function(e){return{mediaId:e.id,entity:d,entityId:O}}),e.next=6,ec({variables:{objects:i}});case 6:et(),G(!1),E&&E(r);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=19;break;case 14:e.prev=14,e.t2=e.catch(1),G(!1),V(!0),(0,w.Tb)({message:e.t2,section:"upload"});case 19:case"end":return e.stop()}},e,null,[[1,14]])})),function(e){return t.apply(this,arguments)}),em={control:Y,errors:K,register:ee};return L||ea||eu?(0,k.jsx)(Z.Z,{sx:{zIndex:1e5},open:!0,children:(0,k.jsx)(C.Z,{color:"secondary"})}):(0,k.jsxs)(g.Z,{id:"offCanvasForm",handleSubmit:X(ed),children:[(0,k.jsx)(v.Z,{label:"Caption",children:(0,k.jsx)(b.Z,T(T({},em),{},{name:"caption"}))}),D&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(v.Z,{label:"Expiry"}),(0,k.jsx)(I.M,T(T({},em),{},{name:"expiryAt"}))]}),(0,k.jsx)(v.Z,{label:"Media"}),(0,k.jsx)(c.Qr,T(T({},em),{},{as:(0,k.jsx)(h.Z,{accept:"image/*"===n?n+", .heic":n,multiple:M}),name:"dropzone"})),(0,k.jsx)(c.Qr,{name:"visibility",control:Y,render:function(e){var t=e.value,n=e.onChange;return(0,k.jsx)(q.q,{value:t,disableClearable:!0,getOptionLabel:function(e){return e.label},textFieldProps:{color:"secondary",variant:"standard",label:"Select media visibility"},onChange:function(e,t){return n(t)},options:Q})}}),z&&(0,k.jsx)(x.Z,{context:"danger",content:"Can not upload Media"}),R&&(0,k.jsx)(j.H,{content:"Submit",type:"submit"})]})};A.defaultProps={accept:h.Z.defaultProps.accept,category:null,expiryShow:!0,mediaMeta:null,showSubmitButton:!1,showAdminOnly:!0,type:"image"}},75847:function(e,t,n){"use strict";n.d(t,{CI:function(){return d},o7:function(){return m},tv:function(){return u},xM:function(){return c}});var r,i,o,a,s=n(71383),l=n(75063),c=(0,l.Ps)(r||(r=(0,s.Z)(["\n  mutation AddMedia($objects: [Media_insert_input!]!) {\n    insert_Media(objects: $objects) {\n      returning {\n        id\n        filename\n      }\n    }\n  }\n"]))),u=(0,l.Ps)(i||(i=(0,s.Z)(["\n  mutation AddMediaEntity($objects: [Media_Entity_insert_input!]!) {\n    insert_Media_Entity(objects: $objects) {\n      returning {\n        id\n      }\n    }\n  }\n"]))),d=(0,l.Ps)(o||(o=(0,s.Z)(["\n  mutation DeleteMedia($id: Int!) {\n    delete_Media_by_pk(id: $id) {\n      id\n    }\n  }\n"]))),m=(0,l.Ps)(a||(a=(0,s.Z)(["\n  mutation UpdateMedia($changes: Media_set_input, $id: Int!) {\n    update_Media_by_pk(pk_columns: { id: $id }, _set: $changes) {\n      id\n    }\n  }\n"])))},47159:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});var r=function(){var e="cleverly-media";return JSON.stringify([{width:32,height:32,bucket:e,sizeName:"vSmall",fit:"inside"},{width:200,height:200,bucket:e,sizeName:"small",fit:"inside"},{width:600,height:600,bucket:e,sizeName:"medium",fit:"inside"},{width:1200,height:1200,bucket:e,sizeName:"large",fit:"inside"}])}},49088:function(e,t,n){"use strict";n.d(t,{V:function(){return l}});var r,i=n(50029),o=n(64687),a=n.n(o),s=n(47159),l=(r=(0,i.Z)(a().mark(function e(t,n){var r,i,o,l,c;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r="cleverly-media",i="https://aws.cleverly.works/aws/s3/upload",(o=new window.FormData).append("file",t,t.name),e.t0=n,e.next="image"===e.t0?7:"document"===e.t0?10:"audio"===e.t0?14:18;break;case 7:return l="https://aws.cleverly.works/image/process",o.append("sizes",(0,s.V)()),e.abrupt("break",19);case 10:case 14:return o.append("bucket",r),o.append("folder","".concat(n,"s")),l=i,e.abrupt("break",19);case 18:return e.abrupt("break",19);case 19:return e.next=21,window.fetch(l,{method:"POST",body:o});case 21:return c=e.sent,e.abrupt("return",c.json());case 23:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)})},76301:function(e,t,n){"use strict";n.d(t,{Ak:function(){return L},Cj:function(){return W},K4:function(){return er},Qn:function(){return R},RJ:function(){return Q},SW:function(){return F},T_:function(){return H},UH:function(){return E},UM:function(){return et},Ve:function(){return Y},_d:function(){return N},_f:function(){return en},by:function(){return B},cz:function(){return T},he:function(){return U},j$:function(){return G},kB:function(){return X},kU:function(){return K},kx:function(){return z},nD:function(){return M},nP:function(){return eo},pY:function(){return ei},qd:function(){return A},t1:function(){return V},yR:function(){return J},zR:function(){return ee}});var r,i,o,a,s,l,c,u,d,m,p,y,f,g,v,b,h,x,j,I,S,O,_,P,q,w,Z,C,$,k=n(71383),D=n(75063),T=(0,D.Ps)(r||(r=(0,k.Z)(["\n  query GetAddressForSelect($q: String, $entity: String!, $entityId: Int!) {\n    items: Address(\n      where: {\n        Address_Entities: { entity: { _eq: $entity }, entityId: { _eq: $entityId } }\n        _or: [\n          { addressLine1: { _eq: $q } }\n          { addressLine2: { _eq: $q } }\n          { addressLine3: { _eq: $q } }\n          { county: { _eq: $q } }\n          { postCode: { _eq: $q } }\n          { city: { _eq: $q } }\n        ]\n      }\n    ) {\n      label: addressLine1\n      value: id\n      id\n      name\n      addressLine1\n      addressLine2\n      addressLine3\n      postCode\n      county\n      country: Country {\n        name\n      }\n      city\n      Address_Entities {\n        invoice\n      }\n    }\n  }\n"]))),A=(0,D.Ps)(i||(i=(0,k.Z)(["\n  query GetAccountsForSelect($q: String, $type: String, $limit: Int, $offset: Int) {\n    items: Account(\n      where: { name: { _ilike: $q }, type: { _eq: $type } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]))),M=(0,D.Ps)(o||(o=(0,k.Z)(['\n  query GetTaxonomy($q: String, $id: Int) {\n    items: Taxonomy(\n      where: { type: { _eq: "assetCategory" }, status: { _eq: "active" } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      options: Taxonomies(\n        where: {\n          type: { _eq: "assetCategory" }\n          name: { _ilike: $q }\n          id: { _eq: $id }\n          status: { _eq: "active" }\n        }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']))),E=(0,D.Ps)(a||(a=(0,k.Z)(["\n  query GetAssetsForSelect($locationId: Int, $q: String, $categoryId: Int, $bookable: String) {\n    items: Asset(\n      where: {\n        categoryId: { _eq: $categoryId }\n        locationId: { _eq: $locationId }\n        name: { _ilike: $q }\n        bookable: { _eq: $bookable }\n      }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n      parent: ParentAsset {\n        id\n        name\n      }\n      media: Media {\n        id\n        item: Medium {\n          id\n          name\n          filename\n          meta\n          category\n          type\n        }\n      }\n    }\n  }\n"]))),F=(0,D.Ps)(s||(s=(0,k.Z)(['\n  query GetCustomersForSelect($q: String, $limit: Int, $offset: Int) {\n    items: Account(\n      where: { name: { _ilike: $q }, type: { _eq: "customer" } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      admin: Admins {\n        id: adminId\n      }\n      label: name\n      spendThreshold: meta(path: "$.finance.spendThreshold")\n      serviceRateLabour: meta(path: "$.finance.serviceRateLabour")\n      serviceRateExpenses: meta(path: "$.finance.serviceRateExpenses")\n      value: id\n    }\n  }\n']))),R=(0,D.Ps)(l||(l=(0,k.Z)(["\n  query GetJobsForSelect($_q: Int, $locationId: Int) {\n    items: Job(\n      where: {\n        Location: { id: { _eq: $locationId } }\n        _or: [{ id: { _eq: $_q } }, { Invoices: { id: { _eq: $_q } } }]\n      }\n      order_by: { title: asc }\n    ) {\n      label: label\n      value: id\n      number\n      createdAt\n      description\n      status\n      timingStart\n      title\n      type\n      Location {\n        name\n      }\n      Taxonomy {\n        Taxonomy {\n          shortJobDescription: name\n        }\n      }\n    }\n  }\n"]))),U=(0,D.Ps)(c||(c=(0,k.Z)(['\n  query GetManagersForSelect($userId: Int, $accountId: Int!, $q: String) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          role: { _in: ["owner", "manager"] }\n          status: { _eq: "active" }\n          Account: { id: { _eq: $accountId } }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n        id: { _neq: $userId }\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n']))),L=(0,D.Ps)(u||(u=(0,k.Z)(['\n  query GetManagersForSelect(\n    $userId: Int\n    $accountId: Int!\n    $q: String\n    $invoiceThreshold: numeric\n    $quoteThreshold: numeric\n  ) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          role: { _in: ["owner", "manager"] }\n          status: { _eq: "active" }\n          Account: { id: { _eq: $accountId } }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n        id: { _neq: $userId }\n        _and: [\n          {\n            _or: [\n              { invoiceThreshold: { _gt: $invoiceThreshold } }\n              { invoiceThreshold: { _is_null: true } }\n            ]\n          }\n          {\n            _or: [\n              { quoteThreshold: { _gt: $quoteThreshold } }\n              { quoteThreshold: { _is_null: true } }\n            ]\n          }\n        ]\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n']))),G=(0,D.Ps)(d||(d=(0,k.Z)(["\n  query GetPostCodeAreaForSelect($countryId: Int, $q: String) {\n    items: PostcodeArea(\n      where: { name: { _ilike: $q }, countryId: { _eq: $countryId } }\n      order_by: { name: asc }\n    ) {\n      area\n      label: name\n      value: id\n    }\n  }\n"]))),N=(0,D.Ps)(m||(m=(0,k.Z)(['\n  query GetPropertiesForSelect($where: Location_bool_exp, $limit: Int, $offset: Int) {\n    items: Location(where: $where, order_by: { name: asc }, limit: $limit, offset: $offset) {\n      label: name\n      value: id\n      access\n      permitsRequired\n      registeredAddress: Addresses(\n        where: { entity: { _eq: "Location" }, registered: { _eq: true } }\n      ) {\n        address: Address {\n          id\n          addressLine1\n          addressLine2\n          addressLine3\n          county\n          country: Country {\n            name\n          }\n          postCode\n          city\n        }\n      }\n    }\n  }\n']))),z=(0,D.Ps)(p||(p=(0,k.Z)(['\n  query GetServicesForSelect($q: String, $limit: Int, $offset: Int) {\n    items: Service(\n      where: { name: { _ilike: $q }, status: { _eq: "active" } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n']))),V=(0,D.Ps)(y||(y=(0,k.Z)(["\n  query GetSlasForSelect($q: String, $adminId: Int, $type: String) {\n    items: SLA(\n      where: { name: { _ilike: $q }, type: { _eq: $type }, adminId: { _eq: $adminId } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]))),H=(0,D.Ps)(f||(f=(0,k.Z)(["\n  query GetSlasForSelectNew($where: SLA_bool_exp, $limit: Int, $offset: Int) {\n    items: SLA(where: $where, order_by: { name: asc }, limit: $limit, offset: $offset) {\n      label: name\n      value: id\n    }\n  }\n"]))),B=(0,D.Ps)(g||(g=(0,k.Z)(["\n  query GetSuppliersForSelect($where: Account_bool_exp, $limit: Int, $offset: Int) {\n    items: Account(where: $where, limit: $limit, offset: $offset, order_by: { name: asc }) {\n      label: name\n      value: id\n    }\n  }\n"]))),J=(0,D.Ps)(v||(v=(0,k.Z)(['\n  query GetUsersForSelect($accountId: Int, $q: String, $limit: Int, $offset: Int) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          accountId: { _eq: $accountId }\n          isContact: { _eq: true }\n          status: { _eq: "active" }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      order_by: { nameFirst: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      label: fullName\n      value: id\n      email\n      phone\n    }\n  }\n']))),Q=(0,D.Ps)(b||(b=(0,k.Z)(['\n  query GetUsersForSelect($q: String) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n      email\n      phone\n    }\n  }\n']))),W=(0,D.Ps)(h||(h=(0,k.Z)(["\n  query GetTaxonomyGroupForSelect($q: String, $type: String!) {\n    items: Taxonomy(\n      where: { isGroup: { _eq: true }, name: { _ilike: $q }, type: { _eq: $type } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]))),Y=(0,D.Ps)(x||(x=(0,k.Z)(['\n  query GetTaxonomy($q: String) {\n    items: Taxonomy(where: { type: { _eq: "expenseCategoryGroup" } }, order_by: { name: asc }) {\n      label: name\n      options: Taxonomies(\n        where: { type: { _eq: "expenseCategory" }, name: { _ilike: $q } }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']))),K=(0,D.Ps)(j||(j=(0,k.Z)(['\n  query GetCompliancesForSelect($q: String, $locationId: Int) {\n    items: Taxonomy(where: { type: { _eq: "complianceCategory" } }, order_by: { name: asc }) {\n      label: name\n      options: Compliances(\n        where: {\n          name: { _ilike: $q }\n          Compliance_Entities: { Location: { id: { _eq: $locationId } } }\n        }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']))),X=(0,D.Ps)(I||(I=(0,k.Z)(["\n  query GetUserRole($userId: Int!, $accountId: Int!) {\n    accountUsers: Account_User(\n      where: { userId: { _eq: $userId }, accountId: { _eq: $accountId } }\n    ) {\n      role\n    }\n  }\n"]))),ee=(0,D.Ps)(S||(S=(0,k.Z)(["\n  query GetSublocationsForSelect($locationId: Int!, $q: String, $limit: Int, $offset: Int) {\n    items: Sublocation(\n      where: { name: { _ilike: $q }, locationId: { _eq: $locationId }, active: { _eq: true } }\n      limit: $limit\n      offset: $offset\n      order_by: { createdAt: desc }\n    ) {\n      value: id\n      label: name\n    }\n  }\n"]))),et=(0,D.Ps)(O||(O=(0,k.Z)(['\n  query GetTaxonomy($q: String, $id: Int, $limit: Int, $offset: Int) {\n    items: Taxonomy(\n      where: {\n        id: { _eq: $id }\n        type: { _eq: "assetCategory" }\n        isGroup: { _eq: false }\n        status: { _eq: "active" }\n        name: { _ilike: $q }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n']))),en=(0,D.Ps)(_||(_=(0,k.Z)(["\n  query GetTaxonomyForSelect(\n    $where: Taxonomy_bool_exp\n    $limit: Int\n    $offset: Int\n    $orderBy: Taxonomy_order_by!\n  ) {\n    items: Taxonomy(where: $where, limit: $limit, offset: $offset, order_by: [$orderBy]) {\n      value: id\n      label: name\n    }\n  }\n"])));(0,D.Ps)(P||(P=(0,k.Z)(['\n  query GetTagsForTask($q: String!, $limit: Int = 50, $offset: Int = 0) {\n    items: Taxonomy(\n      where: { name: { _ilike: $q }, status: { _eq: "active" }, type: { _eq: "taskTags" } }\n      limit: $limit\n      offset: $offset\n      order_by: { id: desc }\n    ) {\n      value: id\n      label: name\n    }\n  }\n']))),(0,D.Ps)(q||(q=(0,k.Z)(['\n  query GetTagsForEntity(\n    $entityId: Int\n    $entity: String!\n    $q: String!\n    $limit: Int = 50\n    $offset: Int = 0\n  ) {\n    tags: Taxonomy(\n      where: {\n        name: { _ilike: $q }\n        status: { _eq: "active" }\n        type: { _eq: "taskTags" }\n        _not: { Taxonomy_Entities: { entity: { _eq: $entity }, entityId: { _eq: $entityId } } }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { id: desc }\n    ) {\n      id\n      name\n      meta\n    }\n  }\n']))),(0,D.Ps)(w||(w=(0,k.Z)(['\n  query GetEntityTags($entityId: Int!, $entity: String!) {\n    tags: Taxonomy_Entity(\n      where: {\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n        Taxonomy: { status: { _eq: "active" }, type: { _eq: "taskTags" } }\n      }\n      order_by: { id: desc }\n    ) {\n      id\n      tag: Taxonomy {\n        id\n        name\n        meta\n      }\n    }\n  }\n'])));var er=(0,D.Ps)(Z||(Z=(0,k.Z)(["\n  query GetCustomerManagers($accountId: Int, $q: String, $limit: Int, $offset: Int) {\n    items: User(\n      where: { Account_Users: { accountId: { _eq: $accountId } }, fullName: { _ilike: $q } }\n      order_by: { fullName: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n"]))),ei=(0,D.Ps)(C||(C=(0,k.Z)(["\n  query GetServiceSchedulesForSelect(\n    $q: String\n    $serviceId: Int\n    $entity: service_schedule_entity\n    $entityId: Int\n    $limit: Int = 50\n    $offset: Int = 0\n  ) {\n    items: ServiceSchedule(\n      where: {\n        name: { _ilike: $q }\n        serviceId: { _eq: $serviceId }\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]))),eo=(0,D.Ps)($||($=(0,k.Z)(['\n  query GetPropertyById($id: Int!) {\n    item: Location_by_pk(id: $id) {\n      label: name\n      value: id\n      access\n      registeredAddress: Addresses(\n        where: { entity: { _eq: "Location" }, registered: { _eq: true } }\n      ) {\n        address: Address {\n          id\n          addressLine1\n          addressLine2\n          addressLine3\n          county\n          country: Country {\n            name\n          }\n          postCode\n          city\n        }\n      }\n    }\n  }\n'])))},71772:function(e,t,n){"use strict";n.d(t,{P:function(){return _}});var r=n(59499),i=n(50029),o=n(4730),a=n(64687),s=n.n(a),l=n(67294),c=n(10367),u=n(66252),d=n(76301),m=n(78289),p=n(52019),y=n(49501),f=n(9270),g=n(62140),v=n(84043),b=n(77439),h=n(85893),x=["AddForm","accountId","area","assetCategoryId","control","entity","entityId","errors","id","isClearable","isDisabled","label","locationId","name","serviceId","taxonomyGroupType","customerId","customerRole","type","userId","invoiceThreshold","quoteThreshold"];function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var S=function(e,t){var n,r,i,o=!0;return(null===(n=e.errors[e.name])||void 0===n?void 0:n.message)!==(null===(r=t.errors[t.name])||void 0===r?void 0:r.message)&&(o=!1),["accountId","assetCategoryId","entity","entityId","locationId","serviceId","type","value","customerId","customerRole"].forEach(function(n){e[n]!==t[n]&&(o=!1)}),o},O=function(e){var t=e.accountId,n=e.area,r=e.assetCategoryId,i=e.entity,o=e.entityId,a=(e.hasRole,e.id),s=e.locationId,l=e.serviceId,c=e.taxonomyGroupType,u=e.customerId,m=e.customerRole,p=e.type,y=e.userId,f=e.invoiceThreshold,g=e.quoteThreshold,v=p;switch(m&&(v="".concat(p,"_").concat(m)),v){case"address":return{query:d.cz,variables:{entity:i,entityId:o}};case"asset":return{query:d.UH,variables:{categoryId:r,locationId:s}};case"assetBookable":return{query:d.UH,variables:{categoryId:r,locationId:s,bookable:"yes"}};case"assetCategory":return{query:d.nD,variables:{id:a}};case"assetSublocation":return{query:d.UH,variables:{category:"sublocation",adminId:t,locationId:s}};case"compliance":return{query:d.kU,variables:{locationId:s}};case"coverage":return{query:d.j$};case"customer":return{query:d.SW};case"job":return{query:d.Qn,variables:{locationId:s}};case"manager":return{query:d.he,variables:{accountId:t,userId:y}};case"thresholdManagers":return{query:d.Ak,variables:{accountId:t,userId:y,invoiceThreshold:f,quoteThreshold:g}};case"product":return{query:d.UH,variables:{category:"product",locationId:s}};case"property":return{query:d._d,variables:{where:{status:{_eq:"active"},Account_Locations:{accountId:{_eq:t}}}}};case"property_user":return{query:d._d,variables:{where:{status:{_eq:"active"},Account_Locations:{accountId:{_eq:t},Account:{type:{_eq:"customer"},Account_Users:{role:{_eq:"user"},userId:{_eq:u}}},User_Account_Locations:{Account_User:{userId:{_eq:u},accountId:{_eq:t}}}}}}};case"sensor":return{query:d.UH,variables:{category:"sensor",locationId:s}};case"service":return{query:d.kx};case"sla":return{query:d.t1,variables:{type:"priority",adminId:t}};case"sublocation":return{query:d.zR,variables:{locationId:s}};case"supplier":var b={type:{_eq:"supplier"}};return n&&(b.PostcodeAreas={PostcodeArea:{area:{_eq:n}},entity:{_eq:"Account"},status:{_eq:"active"}}),l&&(b.ServiceSchedule={status:{_eq:"active"},entity:{_eq:"Supplier"},serviceId:{_eq:l}},n&&(b.ServiceSchedule.PostcodeAreas={PostcodeArea:{area:{_eq:n}}})),{query:d.by,variables:{where:b}};case"user":return{query:d.yR,variables:{accountId:t}};case"usersForBookings":return{query:d.yR,variables:{accountId:y}};case"tenant":return{query:d.RJ};case"taxonomyGroup":return{query:d.Cj,variables:{type:c}};case"expenseCategory":return{query:d.Ve};default:return{query:d.qd}}},_=(0,l.memo)(function(e){var t,n=e.AddForm,r=e.accountId,a=e.area,c=e.assetCategoryId,d=e.control,j=e.entity,S=e.entityId,_=e.errors,q=e.id,w=e.isClearable,Z=e.isDisabled,C=e.label,$=e.locationId,k=e.name,D=e.serviceId,T=e.taxonomyGroupType,A=e.customerId,M=e.customerRole,E=e.type,F=e.userId,R=e.invoiceThreshold,U=e.quoteThreshold,L=(0,o.Z)(e,x),G=(0,u.x)(),N=(0,l.useState)(!1),z=N[0],V=N[1],H=(0,l.useState)(),B=H[0],J=H[1],Q=(0,l.useState)(!1),W=Q[0],Y=Q[1],K=(0,l.useContext)(m.Z),X=(0,l.useContext)(p.Z).hasRole,ee=(0,l.useState)(!1),et=ee[0],en=ee[1];(0,l.useEffect)(function(){return en(!1),Y(!1),function(){}},[r,c,j,S,$,D,E,A,M,F]);var er=(t=(0,i.Z)(s().mark(function e(){var t,n,i,o,l,u,d;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!W){e.next=3;break}return en(!0),e.abrupt("return",null);case 3:return V(!0),n=(t=O({accountId:r,area:a,assetCategoryId:c,entity:j,entityId:S,hasRole:X,id:q,locationId:$,serviceId:D,taxonomyGroupType:T,customerId:A,customerRole:M,type:E,userId:F,invoiceThreshold:R,quoteThreshold:U})).query,o=void 0===(i=t.variables)?{}:i,e.next=7,G.query({query:n,variables:I({},o)});case 7:J((u=void 0===(u=e.sent.data)?{items:[]}:u).items),V(!1),Y(!0),en(!0);case 15:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),ei=function(){K.show({content:(0,h.jsx)("div",{children:(0,h.jsx)(n,{})}),title:"Add form"})};return(0,h.jsx)(y.Z,{id:k,label:C,children:(0,h.jsxs)(f.Z,{children:[(0,h.jsx)(g.Z,{md:n?11:12,children:(0,h.jsx)(v.Z,I({autoload:!1,blurInputOnSelect:!0,cacheOptions:!0,control:d,errors:_,isDisabled:Z,isClearable:w,isLoading:z,menuIsOpen:et,options:B,onFocus:er,onBlur:function(){en(!1)},name:k,searchable:!0},L),L.defaultValue)}),n&&(0,h.jsx)(g.Z,{md:1,children:(0,h.jsx)(P,{children:(0,h.jsx)(b.Z,{content:null,startIcon:"plus",size:"sm",onClick:ei})})})]})})},S),P=c.ZP.div.withConfig({displayName:"select__ButtonWrapper",componentId:"sc-v7qj9m-0"})(["position:relative;right:25px;top:2px;"]);_.defaultProps={isClearable:!0,label:"Account",name:"account",type:"account"}},32836:function(e,t,n){"use strict";n.d(t,{i:function(){return _}});var r=n(59499),i=n(67294),o=n(11163),a=n(83148),s=n(26447),l=n(15861),c=n(90948),u=n(5616),d=n(41796),m=n(87361),p=n(42096),y=n(87043),f=n(61730),g=n(58886),v=n(70872),b=n(85893);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var j=function(e){var t=e.currentPage,n=e.totalCount,r=e.pageSize,i=e.onPageChange,o=(0,f.Z)("(max-width:400px)"),a=(0,f.Z)("(max-width:500px)");return(0,b.jsx)(I,{mb:2,page:t,count:Math.ceil(n/r),onChange:function(e,t){return i(t)},variant:"outlined",shape:"rounded",size:o?"small":"medium",hidePrevButton:1===t,hideNextButton:t===Math.ceil(n/r),siblingCount:a?0:1,renderItem:function(e){return(0,b.jsx)(g.Z,x({slots:{previous:function(){return"Previous"},next:function(){return"Next"}}},e))}})};j.defaultProps={currentPage:1,totalCount:0,pageSize:50,onPageChange:function(){}};var I=(0,c.ZP)(v.Z)(function(e){var t,n=e.hidePrevButton,i=e.hideNextButton,o=e.theme;return t={},(0,r.Z)(t,"&.MuiPagination-root",{alignSelf:"center",marginTop:"16px"}),(0,r.Z)(t,"& .MuiPaginationItem-root",{fontWeight:600,margin:0,borderRadius:0}),(0,r.Z)(t,"& .MuiPagination-ul > li:last-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"0 5px 5px 0"}),(0,r.Z)(t,"& .MuiPagination-ul > li:first-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"5px 0 0 5px"}),(0,r.Z)(t,"& button.Mui-selected",x(x({color:o.palette.white.main,backgroundColor:o.palette.secondary.main},i?{borderRadius:"0 5px 5px 0"}:{}),n?{borderRadius:"5px 0 0 5px"}:{})),t});function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var _=(0,i.forwardRef)(function(e,t){var n=e.columns,r=e.history,a=e.initialSort,c=e.meta,u=e.refetch,d=e.paginationSize,f=e.containerHeight,g=e.noResultsMessage,v=e.autoHeight,h=(0,o.useRouter)(),x=h.query,I=void 0===x?{}:x,S=(0,i.useState)(parseInt(null==I?void 0:I.page,10)||1),_=S[0],w=S[1],Z=(0,i.useState)(d||y.C1.paginationSize),C=Z[0],$=Z[1];a||(a={item:"createdAt",order:"desc"});var k=(0,i.useState)({item:a.item,order:a.order}),D=k[0],T=k[1],A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=h.query,n=void 0===t?{}:t;if(e>1?n.page=e:delete n.page,!(Object.keys(n).length>0))return{};var r=Object.keys(n).map(function(t){return"page"===t?"".concat(t,"=").concat(e):"".concat(t,"=").concat(n[t])}).join("&");return"?".concat(r)},M=function(){T({item:a.item,order:a.order}),w(1);var e=A();h.push(e),$(d||y.C1.paginationSize)};(0,i.useImperativeHandle)(t,function(){return{currentPage:_,pageSize:C,sort:D,resetPagination:function(){M()}}});var E=function(e){var t=A(e);r&&h.push(t),w(e),!r&&u&&u()},F=function(e){e&&e.field&&e.sort?(T({item:n.find(function(t){return t.field===e.field}).sortName||e.field||e.item||a.item,order:e.sort||e.order||a.order}),u&&u()):(T({item:a.item,order:a.order}),u&&u())};return(0,b.jsxs)(P,{containerHeight:f,children:[(0,b.jsx)(q,O({hideFooter:!0,disableColumnMenu:!0,disableSelectionOnClick:!0,autoHeight:v,sortingMode:"server",onSortModelChange:function(e){return F(e[0])},columns:n,pageSize:C,slots:{columnSortedAscendingIcon:function(){return(0,b.jsx)(m.Z,{})},columnSortedDescendingIcon:function(){return(0,b.jsx)(p.Z,{})},columnUnsortedIcon:function(){return(0,b.jsxs)(s.Z,{alignItems:"center",sx:{width:"33px"},children:[(0,b.jsx)(m.Z,{sx:{marginBottom:"-15px"}}),(0,b.jsx)(p.Z,{})]})},noResultsOverlay:function(){return(0,b.jsx)(s.Z,{height:"100%",alignItems:"center",justifyContent:"center",spacing:1,p:1,children:(0,b.jsx)(l.Z,{children:g})})},noRowsOverlay:function(){return(0,b.jsx)(s.Z,{height:"100%",alignItems:"center",justifyContent:"center",spacing:1,p:1,children:(0,b.jsx)(l.Z,{children:g})})}}},e)),c&&Math.ceil(c.aggregate.totalCount/C)>1&&(0,b.jsx)(j,{currentPage:_,totalCount:c.aggregate.totalCount,pageSize:C,onPageChange:E})]})});_.defaultProps={columns:[],history:!1,loading:!1,rows:[],noResultsMessage:"There are no results.",autoHeight:!0};var P=(0,c.ZP)(u.Z)(function(e){return{height:e.containerHeight,display:"flex",flexDirection:"column"}}),q=(0,c.ZP)(a.s)(function(e){var t,n=e.theme,i=e.hideHeader,o=(e.rows,e.loading,e.rowHeight),a=e.isPdf;return t={"--DataGrid-overlayHeight":"40px"},(0,r.Z)(t,"&.MuiDataGrid-root",O({color:n.palette.black.main,border:"none"},a&&{"@media print":{display:"block"}})),(0,r.Z)(t,"& .MuiDataGrid-main",O({},a&&{"@media print":{overflow:"visible !important"}})),(0,r.Z)(t,"& .MuiDataGrid-columnHeaders",O(O({},i&&{display:"none"}),{},{"& .MuiDataGrid-iconButtonContainer":{visibility:"visible","& .MuiButtonBase-root.MuiIconButton-root":{backgroundColor:"inherit",color:n.palette.black.main,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.1)"}}}})),(0,r.Z)(t,"& .MuiDataGrid-virtualScroller",O(O({},i&&{marginTop:"0 !important"}),a&&{"@media print":{overflow:"visible !important"}})),(0,r.Z)(t,"& .MuiDataGrid-iconSeparator",{opacity:0}),(0,r.Z)(t,"& .MuiDataGrid-columnHeaderTitle",{fontWeight:700}),(0,r.Z)(t,"& .MuiButtonBase-root.MuiDataGrid-columnHeaderTitle",{fontWeight:700}),(0,r.Z)(t,"& .MuiDataGrid-virtualScrollerContent",O({},a&&{height:"initial !important",minHeight:"initial !important"})),(0,r.Z)(t,"& .MuiDataGrid-virtualScrollerRenderZone",O({},a&&{position:"relative"})),(0,r.Z)(t,"& .MuiDataGrid-overlayWrapper",(0,r.Z)({},"& .MuiCircularProgress-root",{color:n.palette.secondary.main})),(0,r.Z)(t,"& .MuiDataGrid-row",O({},a&&{minHeight:"".concat(o,"cm !important"),maxHeight:"".concat(o,"cm !important")})),(0,r.Z)(t,"& .MuiDataGrid-row > .MuiDataGrid-cell",O({},a&&{minHeight:"".concat(o,"cm !important"),maxHeight:"".concat(o,"cm !important")})),(0,r.Z)(t,"& .MuiDataGrid-row.even",{backgroundColor:n.palette.muiLightGray.main,"&:hover, &.Mui-hovered":{backgroundColor:(0,d.Fq)(n.palette.muiLightGray.main,.3),"@media (hover: none)":{backgroundColor:"transparent"}},"&.Mui-selected":{backgroundColor:(0,d.Fq)(n.palette.muiLightGray.main,.3+n.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:(0,d.Fq)(n.palette.muiLightGray.main,.3+n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,d.Fq)(n.palette.muiLightGray.main,.3+n.palette.action.selectedOpacity)}}}}),t})},78898:function(e,t,n){"use strict";n.d(t,{V:function(){return u}});var r=n(59499),i=n(67294),o=n(87918),a=n(41796),s=n(85893);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u=function(e){var t,n=e.chipProps,r=e.tagEntityId,l=e.name,u=e.color,d=e.onDelete,m=(0,i.useMemo)(function(){return d?c(c({},n),{},{onDelete:function(e){e.stopPropagation(),d(r)}}):c({},n)},[n,d,r]);return(0,s.jsx)(o.Z,c(c({},m),{},{size:"small",label:l,sx:{fontSize:"11px",color:(t=u,(0,a.mi)(t,"#FFFFFF")>2.5?"#FFFFFF":"#000"),bgcolor:u,borderRadius:"0px 16px 16px 0px"}}))};u.defaultProps={chipProps:{},onDelete:null,color:"#f2f2f2"}},33063:function(e,t,n){"use strict";n.d(t,{T:function(){return g}});var r=n(26447),i=n(93946),o=n(50135),a=n(97212),s=n(98619),l=n(59334),c=n(95537),u=n(96059),d=n(26143),m=n(10166),p=n(67294),y=n(42283),f=n(85893),g=function(e){var t=e.tagEntityId,n=e.tagId,l=e.name,m=e.color,g=e.editable,b=e.onDelete,h=e.onColorChange,x=e.onNameChange,j=(0,y.cI)({defaultValues:{name:l,color:m}}),I=j.register,S=j.handleSubmit,O=(0,p.useState)(null),_=O[0],P=O[1],q=function(){return[{icon:"delete",onClick:function(e){e.stopPropagation(),b(t)},tooltip:"Remove"},{icon:"edit",onClick:function(e){e.stopPropagation(),P("rename")},tooltip:"Rename"},{icon:"visibility",onClick:function(e){e.stopPropagation(),P("changeColor")},tooltip:"Change color"}]},w=function(e){e.stopPropagation(),P(null)},Z=function(e){h({tagId:n,color:e.color}),P(null)},C=function(e){x({tagId:n,name:e.name}),P(null)};return(0,f.jsx)(a.ZP,{disablePadding:!0,secondaryAction:!g||!_&&(0,f.jsx)(d.C,{icon:"defaultHoriz",actionsData:q}),children:_?({changeColor:function(){return(0,f.jsxs)(r.Z,{width:"100%",direction:"row",justifyContent:"space-between",alignItems:"center",pl:"16px",pr:"16px",children:[(0,f.jsx)("input",{name:"color",ref:I,type:"color",style:{padding:0,border:"none","background-color":"unset"}}),(0,f.jsxs)(r.Z,{direction:"row",alignItems:"center",children:[(0,f.jsx)(i.Z,{size:"small",color:"danger",onClick:w,children:(0,f.jsx)(c.Z,{})}),(0,f.jsx)(i.Z,{size:"small",color:"success",onClick:S(Z),children:(0,f.jsx)(u.Z,{})})]})]})},rename:function(){return(0,f.jsxs)(r.Z,{width:"100%",direction:"row",justifyContent:"space-between",alignItems:"center",pl:"16px",pr:"16px",children:[(0,f.jsx)(o.Z,{name:"name",inputRef:I,variant:"standard",color:"secondary"}),(0,f.jsxs)(r.Z,{direction:"row",alignItems:"center",children:[(0,f.jsx)(i.Z,{size:"small",color:"danger",onClick:w,children:(0,f.jsx)(c.Z,{})}),(0,f.jsx)(i.Z,{size:"small",color:"success",onClick:S(C),children:(0,f.jsx)(u.Z,{})})]})]})}})[_]():(0,f.jsx)(s.Z,{children:(0,f.jsx)(v,{primary:l,color:m})})},n)};g.defaultProps={onDelete:function(){},onColorChange:function(){},onNameChange:function(){},editable:!0};var v=(0,m.Z)(l.Z)(function(e){return e.theme,{"&.MuiListItemText-root .MuiListItemText-primary":{fontWeight:700,color:e.color}}})},88284:function(e,t,n){"use strict";n.d(t,{P:function(){return d}});var r=n(67294),i=n(26447),o=n(15861),a=n(14564),s=n(78462),l=n(78898),c=n(33063),u=n(85893),d=function(e){var t=e.tags,n=(e.title,e.handleDeleteTagEntity),d=(0,r.useState)(null),m=d[0],p=d[1],y=null==t?void 0:t.slice(0,5),f=(null==t?void 0:t.length)-(null==y?void 0:y.length),g=Boolean(m);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i.Z,{direction:"row",spacing:1,children:y.map(function(e,t){var r;return(0,u.jsx)(l.V,{tagEntityId:e.id||t,name:e.tag.name,color:null===(r=e.tag.meta)||void 0===r?void 0:r.color,onDelete:n})})}),f>0&&(0,u.jsxs)(o.Z,{fontWeight:700,ml:1,onMouseEnter:function(e){p(e.currentTarget),e.stopPropagation()},children:["+",f]}),(0,u.jsx)(a.ZP,{id:g?"tags-in-table-popover":void 0,open:g,anchorEl:m,onClose:function(){return p(null)},anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,u.jsx)(s.Z,{children:null==t?void 0:t.map(function(e){var t;return(0,u.jsx)(c.T,{tagEntityId:e.id,tagId:e.tag.id,name:e.tag.name,color:null===(t=e.tag.meta)||void 0===t?void 0:t.color,editable:!1},e.tag.id)})})})]})};d.defaultProps={tags:{},displayOnly:!1,refetchQueries:[],handleDeleteTagEntity:function(){}}},49908:function(e,t,n){"use strict";n.d(t,{n:function(){return D}});var r=n(59499),i=n(27812),o=n(50029),a=n(16835),s=n(64687),l=n.n(s),c=n(96486),u=n(6812),d=n(50319),m=n(96405),p=n(26447),y=n(5616),f=n(23776),g=n(18972),v=n(50135),b=n(98456),h=n(78462),x=n(93946),j=n(14564),I=n(67294),S=n(93362),O=n(10166),_=n(72936),P=n(33063),q=n(52098),w=n(88284),Z=n(85893);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var k=(0,S.D)(),D=function(e){var t=e.entityId,n=e.entity,r=e.values,s=void 0===r?[]:r,j=e.name,S=void 0===j?"tags":j,O=e.setValue,C=(0,_.x)().user,D=(0,I.useState)(null),A=D[0],M=D[1],E=(0,I.useState)(""),F=E[0],R=E[1],U=(0,I.useState)(""),L=U[0],G=U[1],N=(0,I.useState)(""),z=N[0],V=N[1],H=(0,u.a)(q.BU,{skip:!t,variables:{entityId:t,entity:n},onCompleted:function(e){O(S,e.tags)}}),B=H.data,J=(B=void 0===B?{tags:[]}:B).tags,Q=H.loading,W=H.refetch,Y=(0,u.a)(q.gI,{skip:!A,variables:{entityId:t,entity:n,q:""!==z?"%".concat(z,"%"):null}}),K=Y.data,X=(K=void 0===K?{tags:[]}:K).tags,ee=Y.loading,et=(0,d.D)(q.Zm,{refetchQueries:["GetAllTags"]}),en=(0,a.Z)(et,2),er=en[0],ei=en[1].loading,eo=(0,d.D)(q.LE,{onCompleted:function(){W()}}),ea=(0,a.Z)(eo,2),es=ea[0],el=ea[1].loading,ec=(0,d.D)(q.cS,{onCompleted:function(){W()}}),eu=(0,a.Z)(ec,2),ed=eu[0],em=eu[1].loading,ep=(0,d.D)(q.g$,{refetchQueries:["GetAllTags"]}),ey=(0,a.Z)(ep,2),ef=ey[0],eg=ey[1].loading;(0,I.useEffect)(function(){var e=setTimeout(function(){V(L)},500);return function(){return clearTimeout(e)}},[L]);var ev,eb,eh,ex=function(e){e.stopPropagation(),M(e.currentTarget)},ej=function(){M(null)},eI=(ev=(0,o.Z)(l().mark(function e(r,o){var a,c;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof o){e.next=4;break}R({label:o}),e.next=24;break;case 4:if(!(o&&o.inputValue&&t)){e.next=9;break}es({variables:{objects:[{entity:n,entityId:t,Taxonomy:{data:{type:"tags",status:"active",name:o.inputValue,meta:{color:"#0679d8"},isGroup:!1,adminId:C.adminId}}}]}}),R(null),e.next=24;break;case 9:if(!(o&&o.value&&t)){e.next=14;break}es({variables:{objects:[{entity:n,entityId:t,taxonomyId:o.value}]}}),R(null),e.next=24;break;case 14:if(!(o&&o.inputValue)){e.next=23;break}return e.next=17,er({variables:{objects:[{type:"tags",status:"active",name:o.inputValue,meta:{color:"#0679d8"},isGroup:!1,adminId:C.adminId}]}});case 17:c=e.sent.data.insert_Taxonomy,O(S,[].concat((0,i.Z)(s),[{id:null,tag:{id:c.returning[0].id,name:c.returning[0].name,meta:c.returning[0].meta}}])),R(null),e.next=24;break;case 23:o&&o.value&&(O(S,[].concat((0,i.Z)(s),[{id:null,tag:{id:o.value,name:o.label,meta:o.meta}}])),R(null));case 24:case"end":return e.stop()}},e)})),function(e,t){return ev.apply(this,arguments)}),eS=(0,I.useCallback)(function(e,t){var n=k(e,t),r=t.inputValue,i=e.some(function(e){return r===e.label});return""===r||i||n.push({inputValue:r,label:'Add "'.concat(r,'"')}),n},[]),eO=(0,I.useCallback)(function(e){return"string"==typeof e?e:e.inputValue?e.inputValue:e.label},[]),e_=function(e){t?ed({variables:{tagEntityId:e}}):O(S,s.filter(function(t,n){return n!==e}))},eP=(eb=(0,o.Z)(l().mark(function e(t){var n,r,i,o,a;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.tagId,r=t.color,e.next=3,ef({variables:{tagId:n,object:{meta:{color:r}}}});case 3:o=e.sent.data.update_Taxonomy_by_pk,a=s.map(function(e){return e.tag.id===n?$($({},e),{},{tag:$({},o)}):e}),O(S,a);case 7:case"end":return e.stop()}},e)})),function(e){return eb.apply(this,arguments)}),eq=(eh=(0,o.Z)(l().mark(function e(t){var n,r,i,o,a;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.tagId,r=t.name,e.next=3,ef({variables:{tagId:n,object:{name:r}}});case 3:o=e.sent.data.update_Taxonomy_by_pk,a=s.map(function(e){return e.tag.id===n?$($({},e),{},{tag:$({},o)}):e}),O(r,a);case 7:case"end":return e.stop()}},e)})),function(e){return eh.apply(this,arguments)}),ew=Boolean(A),eZ=(0,I.useMemo)(function(){return X.map(function(e){return{label:e.name,value:e.id,meta:e.meta}})},[X]),eC=(0,I.useMemo)(function(){return c.uniqBy([].concat((0,i.Z)(J),(0,i.Z)(s)),function(e){var t;return null===(t=e.tag)||void 0===t?void 0:t.id})},[J,s]);return(0,Z.jsxs)(p.Z,{direction:"row",alignItems:"center",children:[(0,Z.jsx)(w.P,{tags:eC,handleDeleteTagEntity:e_}),(0,Z.jsx)(T,{id:ew?"tags-popover":void 0,open:ew,anchorEl:A,onClose:ej,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,Z.jsxs)(y.Z,{sx:{maxHeight:"80vh",width:"280px",p:"10px",pt:"5px"},children:[(0,Z.jsx)(f.Z,{freeSolo:!0,selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,options:(0,i.Z)(eZ),value:F,onChange:eI,onInputChange:function(e,t){G(t)},filterOptions:eS,getOptionLabel:eO,renderOption:function(e,t){return(0,Z.jsx)(g.Z,$($({},e),{},{children:t.label}))},renderInput:function(e){return(0,Z.jsx)(v.Z,$($({},e),{},{variant:"standard",color:"secondary",label:"Search tag",InputProps:$($({},e.InputProps),{},{endAdornment:(0,Z.jsxs)(Z.Fragment,{children:[ee||ei||el?(0,Z.jsx)(b.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},sx:{pl:"16px",pr:"16px"}}),Q||em||eg?(0,Z.jsx)(p.Z,{width:"100%",alignItems:"center",p:4,children:(0,Z.jsx)(b.Z,{color:"secondary"})}):(0,Z.jsx)(h.Z,{children:null==eC?void 0:eC.map(function(e,t){var n;return(0,Z.jsx)(P.T,{tagEntityId:e.id||t,tagId:e.tag.id,name:e.tag.name,color:null===(n=e.tag.meta)||void 0===n?void 0:n.color,onDelete:e_,onColorChange:eP,onNameChange:eq})})})]})}),(0,Z.jsx)(x.Z,{color:"black",onClick:ex,children:(0,Z.jsx)(m.Z,{sx:{height:"16px",width:"16px"}})})]})};D.defaultProps={entityId:null};var T=(0,O.Z)(j.ZP)({"& .MuiPaper-root":{borderRadius:"12px"}})},99245:function(e,t,n){"use strict";n.d(t,{O:function(){return r}});var r=function(e){return e.map(function(e){return{entity:"Job",taxonomyId:e.tag.id}})}},52098:function(e,t,n){"use strict";n.d(t,{BU:function(){return f},LE:function(){return v},Zm:function(){return y},cS:function(){return b},g$:function(){return h},gI:function(){return p},lx:function(){return g}});var r,i,o,a,s,l,c,u,d=n(71383),m=n(75063),p=(0,m.Ps)(r||(r=(0,d.Z)(['\n  query GetTagsForEntity($q: String!, $limit: Int = 50, $offset: Int = 0) {\n    tags: Taxonomy(\n      where: { name: { _ilike: $q }, status: { _eq: "active" }, type: { _eq: "tags" } }\n      limit: $limit\n      offset: $offset\n      order_by: { id: desc }\n    ) {\n      id\n      name\n      meta\n    }\n  }\n']))),y=(0,m.Ps)(i||(i=(0,d.Z)(["\n  mutation CreateTag($objects: [Taxonomy_insert_input!]!) {\n    insert_Taxonomy(objects: $objects) {\n      returning {\n        id\n        name\n        meta\n      }\n    }\n  }\n"]))),f=(0,m.Ps)(o||(o=(0,d.Z)(['\n  query GetEntityTags($entityId: Int!, $entity: String!) {\n    tags: Taxonomy_Entity(\n      where: {\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n        Taxonomy: { status: { _eq: "active" }, type: { _eq: "tags" } }\n      }\n      order_by: { id: desc }\n    ) {\n      id\n      tag: Taxonomy {\n        id\n        name\n        meta\n      }\n    }\n  }\n']))),g=(0,m.Ps)(a||(a=(0,d.Z)(['\n  query GetTagsForSelect($q: String!, $limit: Int = 50, $offset: Int = 0) {\n    items: Taxonomy(\n      where: { name: { _ilike: $q }, status: { _eq: "active" }, type: { _eq: "tags" } }\n      limit: $limit\n      offset: $offset\n      order_by: { id: desc }\n    ) {\n      value: id\n      label: name\n    }\n  }\n'])));(0,m.Ps)(s||(s=(0,d.Z)(['\n  query GetAssignedToForSelect($accountId: Int, $q: String) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: { accountId: { _eq: $accountId }, status: { _eq: "active" } }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n'])));var v=(0,m.Ps)(l||(l=(0,d.Z)(["\n  mutation CreateTagsAgainstEntity($objects: [Taxonomy_Entity_insert_input!]!) {\n    insert_Taxonomy_Entity(objects: $objects) {\n      returning {\n        id\n      }\n    }\n  }\n"]))),b=(0,m.Ps)(c||(c=(0,d.Z)(["\n  mutation DeleteTagAgainstEntity($tagEntityId: Int!) {\n    delete_Taxonomy_Entity_by_pk(id: $tagEntityId) {\n      id\n    }\n  }\n"]))),h=(0,m.Ps)(u||(u=(0,d.Z)(["\n  mutation UpdateTagAgainstEntity($tagId: Int!, $object: Taxonomy_set_input!) {\n    update_Taxonomy_by_pk(pk_columns: { id: $tagId }, _set: $object) {\n      id\n      name\n      meta\n    }\n  }\n"])))},39496:function(e,t,n){"use strict";n.d(t,{z:function(){return a},c:function(){return s}});var r=n(27812),i=n(96486),o={ALL:["admin","customer","supplier","tenant"],ADMIN_ONLY:["admin"],ADMIN_CUSTOMER:["admin","customer"],ADMIN_SUPPLIER:["admin","supplier"]},a=function(e){return e("admin")?{defaultOption:{label:"All",value:o.ALL},options:[{label:"All",value:o.ALL},{label:"Admin only",value:o.ADMIN_ONLY},{label:"Admin+customer",value:o.ADMIN_CUSTOMER},{label:"Admin+supplier",value:o.ADMIN_SUPPLIER}]}:e("customer")?{defaultOption:{label:"Admin+customer",value:o.ADMIN_CUSTOMER},options:[{label:"All",value:o.ALL},{label:"Admin+customer",value:o.ADMIN_CUSTOMER}]}:e("supplier")?{defaultOption:{label:"Admin+supplier",value:o.ADMIN_SUPPLIER},options:[{label:"All",value:o.ALL},{label:"Admin+supplier",value:o.ADMIN_SUPPLIER}]}:void 0},s=function(e){var t=(0,r.Z)(e).sort();return i.isEqual(t,o.ALL)?{label:"All",value:o.ALL}:i.isEqual(t,o.ADMIN_ONLY)?{label:"Admin only",value:o.ADMIN_ONLY}:i.isEqual(t,o.ADMIN_CUSTOMER)?{label:"Admin+customer",value:o.ADMIN_CUSTOMER}:i.isEqual(t,o.ADMIN_SUPPLIER)?{label:"Admin+supplier",value:o.ADMIN_SUPPLIER}:void 0}},12750:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ef}});var r=n(19076),i=n(67294),o=n(11163),a=n(41085),s=n(12964),l=n(59499),c=n(6812),u=n(88854),d=n(68956),m=n(74297),p=n(16551),y=n(77439),f=n(58965),g=n(40826),v=n(85893),b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dark";return function(){return(0,v.jsx)(g.Z,{context:t,icon:"check",size:"sm",title:e})}},h=function(e,t){return"assetCategory"===e&&!t},x=n(67872),j=n(50029),I=n(16835),S=n(64687),O=n.n(S),_=n(50319),P=n(73359),q=n(42283),w=n(76600),Z=n(49501),C=n(6710),$=n(90951),k=n(15214),D=n(28497),T=n(9270),A=n(62140),M=n(79665),E=n(71772),F=n(27940),R=n(40527),U=n(50480),L=n(69368),G=n(56815),N=n(15861),z=n(18187),V=n(60092),H=n(72936),B=n(49908);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach(function(t){(0,l.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var W=function(e){var t,n,r=e.defaultValues,o=e.onSuccess,a=(e.groups,e.parentId),s=void 0===a?null:a,l=(0,H.x)().hasRole,c=(0,q.cI)({defaultValues:null==r?void 0:r.template,resolver:(0,M.S)(z.b)}),d=c.control,m=c.errors,p=c.handleSubmit,y=c.register,f=c.watch,g=c.setValue,b=(0,_.D)(u.ze,{onCompleted:function(e){var t=e.update_Taxonomy_by_pk.id;o&&o(t)}}),h=(0,I.Z)(b,1)[0],x=(0,P.t)(u.uY),S=(0,I.Z)(x,2),V=S[0],J=S[1],W=J.data,K=J.loading,X=f("reportPassFail"),ee=f("reportPassFailTitle"),et=f("slaId"),en=f("tags");if((0,i.useEffect)(function(){var e;null!=W&&null!==(e=W.slas)&&void 0!==e&&e.length||V()},[]),K)return null;var er,ei=(0,R.GU)("reactive",W),eo=null==ei?void 0:null===(t=ei.find(function(e){return e.id===Number(et)}))||void 0===t?void 0:t.notes,ea=(er=(0,j.Z)(O().mark(function e(t){var n;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=5;break}return t.parentId=s,n={meta:Q(Q({},r||{}),{},{template:t})},e.next=5,h({variables:{id:s,changes:n}});case 5:case"end":return e.stop()}},e)})),function(e){return er.apply(this,arguments)}),es={errors:m,register:y,control:d};return(0,v.jsxs)(w.Z,{id:"offCanvasForm",handleSubmit:p(ea),children:[(0,v.jsx)(Z.Z,{label:"Work Description",children:(0,v.jsx)(C.Z,Q(Q({},es),{},{name:"description",rows:3}))}),l("admin")&&(0,v.jsx)(B.n,{entityId:s,entity:"Taxonomy",name:"tags",setValue:g,values:en}),(0,v.jsx)(U.Z,{sx:Y,control:(0,v.jsx)(q.Qr,{name:"reportPassFail",control:d,render:function(e){var t=e.onChange,n=e.value;return(0,v.jsx)(L.Z,{color:"secondary",checked:n,onChange:function(e){return t(e.target.checked)}})}}),label:"Add Pass/Fail status"}),!!X&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(U.Z,{sx:Y,control:(0,v.jsx)(q.Qr,{name:"requireReportRecommendations",control:d,render:function(e){var t=e.onChange,n=e.value;return(0,v.jsx)(L.Z,{color:"secondary",checked:n,onChange:function(e){return t(e.target.checked)}})}}),label:'Require "Recommendations" if job fails'}),(0,v.jsxs)(Z.Z,{label:"Specify text to appear Pass/Fail toggle",children:[(0,v.jsx)(C.Z,Q(Q({},es),{},{name:"reportPassFailTitle",rows:3})),(null==m?void 0:m.reportPassFailTitle)&&(0,v.jsx)(G.Z,{sx:{m:0},children:null==m?void 0:null===(n=m.reportPassFailTitle)||void 0===n?void 0:n.message}),(0,v.jsxs)(N.Z,{children:[(null==ee?void 0:ee.length)||0,"/50"]})]})]}),(0,v.jsx)($.Z,Q(Q({},es),{},{data:ei,legend:"Priority",name:"slaId"})),et&&(0,v.jsx)(k.Z,{content:eo||"-",context:"light"}),(0,v.jsx)(F.l,Q(Q({},es),{},{label:"Cost category",name:"costCategorySelected",type:"costCategory"})),(0,v.jsx)(E.P,Q(Q({},es),{},{errors:Q({},m),name:"serviceSelected",label:"Service",type:"service"})),(0,v.jsx)(D.Z,Q(Q({},es),{},{label:"Customer",name:"amount",vat:"Ex VAT"})),(0,v.jsxs)(T.Z,{children:[(0,v.jsx)(A.Z,{sm:12,md:6,children:(0,v.jsx)(D.Z,Q(Q({},es),{},{label:"Supplier labour amount",name:"supplierLabourAmount",vat:"Ex VAT"}))}),(0,v.jsx)(A.Z,{sm:12,md:6,children:(0,v.jsx)(D.Z,Q(Q({},es),{},{label:"Supplier materials amount",name:"supplierMaterialsAmount",vat:"Ex VAT"}))})]}),(0,v.jsx)(U.Z,{sx:Y,control:(0,v.jsx)(q.Qr,{name:"customerSignature",control:d,render:function(e){var t=e.onChange,n=e.value;return(0,v.jsx)(L.Z,{color:"secondary",checked:n,onChange:function(e){return t(e.target.checked)}})}}),label:"Require customer signature"}),(0,v.jsx)(U.Z,{sx:Y,control:(0,v.jsx)(q.Qr,{name:"supplierSignature",control:d,render:function(e){var t=e.onChange,n=e.value;return(0,v.jsx)(L.Z,{color:"secondary",checked:n,onChange:function(e){return t(e.target.checked)}})}}),label:"Require engineer signature"}),(0,v.jsx)("input",Q({type:"hidden"},y("tags")))]})},Y={color:V.Q.COLOUR.dark,"& .MuiTypography-root":{fontFamily:"Arial,sans-serif,sans-serif"}},K=n(2034),X=n(47914),ee=n(42846),et=n(73073),en=function(e){var t=e.entityId,n=(0,_.D)(u.ze),r=(0,I.Z)(n,1)[0],i=function(e){r({variables:{id:t,changes:{meta:{imageLink:e[0].link}}}})};return(0,v.jsx)(et.G,{entity:"Taxonomy",entityId:t,type:"image",onMediaAdd:i,onlySingleMedia:!0})},er=n(58095);function ei(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ei(Object(n),!0).forEach(function(t){(0,l.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ei(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ea=function(e){var t,n=e.filters,r=e.props,i={item:"id",order:"desc"},o=(0,ee.x)({filters:n,initialSort:i}),a=o.initialData,s=o.ref,l=(0,er.a)(),g=eo(eo({},a),{},{isGroup:r.isAssetCategoryParent,typeGroup:(t=r.type,"expenseCategory"===t?"expenseCategoryGroup":t),fetchGroup:"expenseCategory"===r.type||"assetCategory"===r.type}),j=(0,c.a)(u.Im,{variables:g}),I=j.data,S=(I=void 0===I?{taxonomy:[],meta:{aggregate:{totalCount:0}}}:I).taxonomy,O=I.meta,_=I.taxonomyGroup,P=j.loading,q=j.refetch,w=function(){q(),l.close()},Z=function(e,t){var n,i;e.stopPropagation(),t||(t={status:"active"}),t.type=r.type,l.show({content:(0,v.jsx)(X.j,{defaultValues:t,onSuccess:w,isAssetCategoryParent:r.isAssetCategoryParent,groups:("expenseCategory"===r.type||h(r.type,r.isAssetCategoryParent))&&_,hasSublocation:S.find(function(e){var t;return(null===(t=e.meta)||void 0===t?void 0:t.sublocation)===!0}),systemQuestions:{sensor:void 0!==S.find(function(e){var t;return null===(t=e.childs)||void 0===t?void 0:t.find(function(e){var t,n;return(null===(t=e.meta)||void 0===t?void 0:t.isSystem)&&(null===(n=e.meta)||void 0===n?void 0:n.questionType)==="sensor"})})}}),title:t.id?"Edit":"Add ".concat(r.title)})},C=function(e){l.show({content:(0,v.jsx)(K.R,{defaultValues:e,type:"jobTags"===r.type?"jobQuestion":"assetQuestion",parentId:e.id,groups:{}}),submit:!1,title:"Questions"})},$=function(e){l.show({content:(0,v.jsx)(W,{defaultValues:eo(eo({},e.meta),{},{name:e.name}),groups:{},onSuccess:w,parentId:e.id}),title:e.name,width:"35%"})},k=function(e){l.show({content:(0,v.jsx)(en,{entityId:e.id}),title:e.name,width:"35%",submit:!1})},D=[{context:"secondary",icon:["fas","edit"],onClick:function(e,t){return Z(e,t)},tooltip:"Edit"}];["jobTags","assetCategory"].includes(r.type)&&!r.isAssetCategoryParent&&D.push({context:"info",icon:["fas","question"],numberOverlay:"childCount",onClick:function(e,t){return C(t)},tooltip:"Manage Questions"}),"jobTags"===r.type&&D.push({context:"secondary",icon:["fas","info-circle"],numberOverlay:"hasDescription",onClick:function(e,t){return $(t)},tooltip:"Add Template"}),"issueType"===r.type&&D.push({context:"secondary",icon:["fas","info-circle"],numberOverlay:"hasDescription",onClick:function(e,t){return k(t)},tooltip:"Add issue type photo"});var T=[{hidden:!0},{hidden:!0},{text:"Name"},{hidden:"expenseCategory"!==r.type&&!h(r.type,r.isAssetCategoryParent),text:"Group"},{hidden:"jobTags"!==r.type,text:"Jobs"},{hidden:!0},{hidden:"assetCategory"!==r.type||r.isAssetCategoryParent,text:"TCO"},{hidden:"assetCategory"!==r.type||r.isAssetCategoryParent,text:"Sensor"},{hidden:"assetCategory"!==r.type||r.isAssetCategoryParent,text:"Sublocation"},{text:"Status"},{hidden:"signatures"!==r.type,text:"Display for"},{hidden:!0},{hidden:!0,text:"meta"},{hidden:!0},{formatter:d.Z,formatterData:D,text:"Actions"}],A=function(){return(0,v.jsx)(p.Z,{children:(0,v.jsx)(y.Z,{context:"secondary",content:"Add New",onClick:Z,size:"sm"})})};return(0,v.jsx)(f.Z,{handleClick:Z,open:!0,title:r.title,toolbar:(0,v.jsx)(A,{}),children:(0,v.jsx)(x.t,{columns:T,loading:P,meta:O,ref:s,initialSort:i,refetch:q,rows:S.map(function(e){var t,n,r,i,o,a,s,l,c,u,d=[];return(null!==(t=e.meta)&&void 0!==t&&t.customerSignature||null!==(n=e.meta)&&void 0!==n&&n.supplierSignature)&&(null!==(s=e.meta)&&void 0!==s&&s.customerSignature&&d.push("Customer"),null!==(l=e.meta)&&void 0!==l&&l.supplierSignature&&d.push("Supplier")),{id:e.id,parentId:e.parentId,name:e.name,groupText:null===(r=e.parent)||void 0===r?void 0:r.name,jobs:e.jobs.aggregate.count,status:e.status,hasTCO:(c=null==e?void 0:e.childs).find(function(e){var t,n;return(null===(t=e.meta)||void 0===t?void 0:t.isSystem)&&(null===(n=e.meta)||void 0===n?void 0:n.questionType)==="tco"})&&b("TCO"),hasSensor:(u=null==e?void 0:e.childs).find(function(e){var t,n;return(null===(t=e.meta)||void 0===t?void 0:t.isSystem)&&(null===(n=e.meta)||void 0===n?void 0:n.questionType)==="sensor"})&&b("Sensor"),hasSublocation:(null===(i=e.meta)||void 0===i?void 0:i.sublocation)&&b("Sub-location"),statusText:(0,m.Z)(e.status),displayFor:d.length>0&&d.join(", "),childCount:null===(o=e.childs)||void 0===o?void 0:o.length,meta:e.meta,hasDescription:null!==(a=e.meta)&&void 0!==a&&a.template?"1":"",actions:""}})})})},es=n(75420),el=n(26380);function ec(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ec(Object(n),!0).forEach(function(t){(0,l.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ec(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ed=function(e){var t=e.control,n=e.errors,r=e.register,o=e.setFilters,a=e.props,s=e.watch,l={control:t,errors:n,register:r},c=s("parentId");return(0,i.useEffect)(function(){o(function(e){return eu(eu({},e),{},{parentId:(null==c?void 0:c.value)||null,type:a.type})})},[c]),(0,v.jsxs)(T.Z,{align:"baseline",children:[(0,v.jsx)(A.Z,{md:6,children:(0,v.jsx)(es.r,eu(eu({},l),{},{onChange:function(e){return o(function(t){return eu(eu({},t),{},{status:e.target.value||null,type:a.type})})},options:el.bg}))}),"expenseCategory"===a.type&&(0,v.jsx)(A.Z,{md:6,children:(0,v.jsx)(E.P,eu(eu({},l),{},{errors:eu({},n),label:"",name:"parentId",placeholder:"Group",type:"taxonomyGroup",isClearable:!0,taxonomyGroupType:"expenseCategoryGroup"}))})]})},em=function(e){var t={q:null,status:null,type:e.type||"",parentId:null,filterType:"taxonomy_table"};return(0,v.jsx)(s.J,{FiltersComp:ed,initialFilters:t,props:e,TableComp:ea})},ep=n(55863),ey=function(){var e,t,n=(0,o.useRouter)().query,r=(0,ep.q)(),s=null==r?void 0:null===(e=r.admin)||void 0===e?void 0:null===(t=e.modules)||void 0===t?void 0:t.assets,l=(0,i.useMemo)(function(){return n.tab||"expense-categories"},[n.tab]),c=[(0,v.jsx)("div",{active:"expense-categories"===l,label:"Expense Categories",children:(0,v.jsx)(em,{type:"expenseCategory",title:"Expense Categories"})}),(0,v.jsx)("div",{active:"cost-categories"===l,label:"Cost Categories",children:(0,v.jsx)(em,{type:"costCategory",title:"Cost Categories"})}),(0,v.jsx)("div",{active:"job-templates-and-questions"===l,label:"Job templates and questions",children:(0,v.jsx)(em,{type:"jobTags",title:"Job Descriptions"})}),(0,v.jsx)("div",{active:"supplier-questions"===l,label:"Supplier Questions",children:(0,v.jsx)(em,{type:"supplierQuestion",title:"Supplier Questions"})}),(0,v.jsx)("div",{hide:!s,active:"asset-categories"===l,label:"Asset Categories",children:(0,v.jsxs)(a.Z,{handleChange:!1,children:[(0,v.jsx)("div",{active:!0,label:"Asset Categories Parent",children:(0,v.jsx)(em,{type:"assetCategory",title:"Asset Categories Parent",isAssetCategoryParent:!0})}),(0,v.jsx)("div",{label:"Asset Categories Child",children:(0,v.jsx)(em,{type:"assetCategory",title:"Asset Categories Child"})})]})}),(0,v.jsx)("div",{active:"compliance-categories"===l,label:"Compliance Categories",children:(0,v.jsx)(em,{type:"complianceCategory",title:"Compliance Categories"})}),(0,v.jsx)("div",{active:"client-type"===l,label:"Client Type",children:(0,v.jsx)(em,{type:"clientType",title:"Client Type"})}),(0,v.jsx)("div",{active:"tags"===l,label:"Tags",children:(0,v.jsx)(em,{type:"tags",title:"Tags"})}),(0,v.jsx)("div",{active:"job-hold-reason"===l,label:"Job Hold Reason",children:(0,v.jsx)(em,{type:"jobHoldReason",title:"Job Hold Reason"})}),(0,v.jsx)("div",{active:"signatures"===l,label:"Signatures",children:(0,v.jsx)(em,{type:"signatures",title:"Signatures"})}),(0,v.jsx)("div",{active:"issue-types"===l,label:"Issue Types",children:(0,v.jsx)(em,{type:"issueType",title:"Issue types"})})];return(0,v.jsx)(a.Z,{children:c.filter(function(e){return!e.props.hide}).map(function(e){return e})},l)},ef=function(){return(0,v.jsx)(r.Z,{pageHeading:{heading:"Categories"},View:(0,v.jsx)(ey,{})})}},23570:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/taxonomy",function(){return n(12750)}])}},function(e){e.O(0,[3662,2283,212,8890,619,1100,1336,4135,6043,1564,5370,3776,6540,2329,778,4046,1023,3148,2797,9241,653,6344,597,3704,14,202,5175,9774,2888,179],function(){return e(e.s=23570)}),_N_E=e.O()}]);