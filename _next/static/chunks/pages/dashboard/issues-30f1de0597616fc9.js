(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3731],{34193:function(e,n,t){"use strict";var r=t(64836);n.Z=void 0;var i=r(t(64938)),o=t(85893);n.Z=(0,i.default)((0,o.jsx)("path",{d:"m12 5.69 5 4.5V18h-2v-6H9v6H7v-7.81zM12 3 2 12h3v8h6v-6h2v6h6v-8h3z"}),"HomeOutlined")},8602:function(e,n,t){"use strict";var r=t(82066),i=t(85893);n.Z=(0,r.Z)((0,i.jsx)("path",{d:"M2 20h20v-4H2zm2-3h2v2H4zM2 4v4h20V4zm4 3H4V5h2zm-4 7h20v-4H2zm2-3h2v2H4z"}),"Storage")},58951:function(e,n,t){"use strict";t.d(n,{Z:function(){return b}});var r=t(63366),i=t(87462),o=t(67294),s=t(63961),a=t(58510),u=t(90948),c=t(14136),d=t(71657),l=t(15861),f=t(1977),m=t(8027);function p(e){return(0,m.ZP)("MuiDialogContentText",e)}(0,f.Z)("MuiDialogContentText",["root"]);var h=t(85893);let y=["children","className"],g=e=>{let{classes:n}=e,t=(0,a.Z)({root:["root"]},p,n);return(0,i.Z)({},n,t)},_=(0,u.ZP)(l.Z,{shouldForwardProp:e=>(0,c.Z)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,n)=>n.root})({}),v=o.forwardRef(function(e,n){let t=(0,d.Z)({props:e,name:"MuiDialogContentText"}),{className:o}=t,a=(0,r.Z)(t,y),u=g(a);return(0,h.jsx)(_,(0,i.Z)({component:"p",variant:"body1",color:"text.secondary",ref:n,ownerState:a,className:(0,s.Z)(u.root,o)},t,{classes:u}))});var b=v},37645:function(e,n,t){"use strict";var r=t(87462),i=t(63366),o=t(67294),s=t(63961),a=t(58510),u=t(15861),c=t(90948),d=t(71657),l=t(4472),f=t(34182),m=t(85893);let p=["className","id"],h=e=>{let{classes:n}=e;return(0,a.Z)({root:["root"]},l.a,n)},y=(0,c.ZP)(u.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,n)=>n.root})({padding:"16px 24px",flex:"0 0 auto"}),g=o.forwardRef(function(e,n){let t=(0,d.Z)({props:e,name:"MuiDialogTitle"}),{className:a,id:u}=t,c=(0,i.Z)(t,p),l=h(t),{titleId:g=u}=o.useContext(f.Z);return(0,m.jsx)(y,(0,r.Z)({component:"h2",className:(0,s.Z)(l.root,a),ownerState:t,ref:n,variant:"h6",id:null!=u?u:g},c))});n.Z=g},26186:function(e,n,t){"use strict";var r=t(34613),i=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=new Date(e),i=t.getFullYear(),o=""+(t.getMonth()+1),s=""+t.getDate();o.length<2&&(o="0"+o),s.length<2&&(s="0"+s);var a=[i,o,s].join("-");return n?a+" "+(0,r.Z)(e):a};n.Z=i},34613:function(e,n){"use strict";var t=function(e){var n=new Date(e),t=""+n.getHours(),r=""+n.getMinutes();return t.length<2&&(t="0"+t),r.length<2&&(r="0"+r),"".concat(t,":").concat(r)};n.Z=t},30845:function(e,n){"use strict";var t=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function r(e,n){return!!(e===n||t(e)&&t(n))}function i(e,n){if(e.length!==n.length)return!1;for(var t=0;t<e.length;t++)if(!r(e[t],n[t]))return!1;return!0}n.Z=function(e,n){void 0===n&&(n=i);var t,r,o=[],s=!1;return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return s&&t===this&&n(i,o)||(r=e.apply(this,i),s=!0,t=this,o=i),r}}},15641:function(e,n,t){"use strict";t.d(n,{z:function(){return o}});var r,i=t(71383),o=(0,t(75063).Ps)(r||(r=(0,i.Z)(["\n  fragment AccountFields on Account {\n    id\n    type\n    name\n    status\n    vatId\n  }\n"])))},18574:function(e,n,t){"use strict";t.d(n,{F:function(){return j}});var r=t(59499),i=t(10166),o=t(50135),s=t(98456),a=t(16143),u=t(80482),c=t(23776),d=t(27812),l=t(4730),f=t(74061),m=t(6498),p=t(61730),h=t(75438),y=t(15861),g=t(67294),_=t(85893),v=["children"];function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function I(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var $=(0,g.createContext)({}),q=(0,g.forwardRef)(function(e,n){var t=(0,g.useContext)($);return(0,_.jsx)("div",I(I({ref:n},e),t))}),S=(0,g.forwardRef)(function(e,n){var t=e.children,r=(0,l.Z)(e,v),i=[];t.forEach(function(e){i.push(e),i.push.apply(i,(0,d.Z)(e.children||[]))});var o,s,a=(0,m.u)(),u=(0,p.Z)(a.breakpoints.up("sm"),{noSsr:!0}),c=i.length,h=u?36:48,y=function(e){return e.hasOwnProperty("group")?48:h},b=(s=(0,g.useRef)(null),(0,g.useEffect)(function(){null!=s.current&&s.current.resetAfterIndex(0,!0)},[c]),s);return(0,_.jsx)("div",{ref:n,children:(0,_.jsx)($.Provider,{value:r,children:(0,_.jsx)(f.S_,{itemData:i,height:(c>8?8*h:i.map(y).reduce(function(e,n){return e+n},0))+16,width:"100%",ref:b,outerElementType:q,innerElementType:"ul",itemSize:function(e){return y(i[e])},overscanCount:5,itemCount:c,children:w})})})});function w(e){var n=e.data,t=e.index,r=e.style,i=n[t],o=I(I({},r),{},{top:r.top+8});return i.hasOwnProperty("group")?(0,_.jsx)(h.Z,{component:"div",style:o,children:i.group},i.key):(0,_.jsx)(y.Z,I(I({component:"li"},i[0]),{},{noWrap:!0,style:o,children:i[1].label}))}function x(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function O(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?x(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var j=function(e){var n=e.label,t=e.loading,r=e.placeholder,i=e.error,a=e.helperText,u=e.inputProps;return(0,_.jsx)(A,O(O({},e),{},{disableListWrap:!0,PopperComponent:k,ListboxComponent:S,renderInput:function(e){return(0,_.jsx)(o.Z,O(O(O({},e),u),{},{error:i,helperText:a,label:n,placeholder:r,color:"secondary",variant:"standard",InputProps:O(O(O({},e.InputProps),(null==u?void 0:u.InputProps)||{}),{},{endAdornment:(0,_.jsxs)(_.Fragment,{children:[t?(0,_.jsx)(s.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},renderOption:function(e,n,t){return[e,n,t.index]},renderGroup:function(e){return e}}))};j.defaultProps={value:null,onChange:function(){},label:"",loading:!1,error:!1,onOpen:function(){},options:[],inputProps:{},withoutSelectIcon:!1};var k=(0,i.Z)(a.Z)((0,r.Z)({zIndex:"12000 !important"},"& .".concat(u.Z.listbox),{boxSizing:"border-box","& ul":{padding:0,margin:0}})),A=(0,i.Z)(c.Z)(function(e){return{"& .MuiAutocomplete-root":{cursor:"pointer"},"& .MuiAutocomplete-popper":{zIndex:"12000 "},"& .MuiAutocomplete-endAdornment":{"& .MuiButtonBase-root.MuiIconButton-root.MuiAutocomplete-popupIndicator":{"& .MuiSvgIcon-root":O({},e.withoutSelectIcon&&{display:"none"})}}}})},6911:function(e,n,t){"use strict";t.d(n,{q:function(){return p}});var r=t(59499),i=t(4730),o=t(23776),s=t(87918),a=t(50135),u=t(98456),c=t(67294),d=t(85893),l=["loading","setSearch","textFieldProps"];function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var p=function(e){var n=e.loading,t=e.setSearch,r=e.textFieldProps,f=(0,i.Z)(e,l),p=(0,c.useState)(""),h=p[0],y=p[1];return(0,c.useEffect)(function(){var e=setTimeout(function(){t(h)},500);return function(){return clearTimeout(e)}},[h,t]),(0,d.jsx)(o.Z,m(m({},f),{},{loading:n,onInputChange:function(e,n){y(n)},getOptionLabel:function(e){return e.label},renderTags:function(e,n){return e.map(function(e,t){return(0,d.jsx)(s.Z,m({size:"small",label:e.label},n({index:t})))})},renderInput:function(e){return(0,d.jsx)(a.Z,m(m(m({},e),r),{},{InputProps:m(m(m({},e.InputProps),r.InputProps||{}),{},{endAdornment:(0,d.jsxs)(d.Fragment,{children:[n?(0,d.jsx)(u.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))}}))};p.defaultProps={color:"secondary",onChange:function(){},options:[],onOpen:function(){},setSearch:function(){},textFieldProps:{}}},59636:function(e,n,t){"use strict";t.d(n,{H_:function(){return _},Vw:function(){return $},aL:function(){return h},iU:function(){return q},pf:function(){return y},sW:function(){return I},wd:function(){return g},xY:function(){return v},yT:function(){return b}});var r,i,o,s,a,u,c,d,l,f=t(71383),m=t(75063),p=t(4431),h=(0,m.Ps)(r||(r=(0,f.Z)(["\n  fragment JobFields on Job {\n    access\n    issueReportedDescription\n    adminId\n    costCategory\n    createdAt\n    description\n    id\n    meta\n    pricing\n    reference\n    scheduledAt\n    status\n    supplierLabourAmount\n    supplierMaterialsAmount\n    timing\n    timingEnd\n    timingNormalHours\n    timingStart\n    title\n    type\n    siteVisitStart\n    siteVisitEnd\n    siteVisitWeekends\n    amount\n    number\n    quoted\n    timingStatus\n    correctDuration\n    correctStart\n    correctEnd\n  }\n"]))),y=(0,m.Ps)(i||(i=(0,f.Z)(["\n  fragment JobQuoteFields on Job {\n    quoted\n    quoteNumber\n    quoteDue\n    quoteDueSupplier\n    quoteCharge\n  }\n"]))),g=(0,m.Ps)(o||(o=(0,f.Z)(["\n  fragment JobAdminFields on Job {\n    supplierId\n    supplierUserId\n  }\n"]))),_=(0,m.Ps)(s||(s=(0,f.Z)(["\n  fragment JobSupplierFields on Job {\n    supplierId\n    supplierUserId\n  }\n"]))),v=(0,m.Ps)(a||(a=(0,f.Z)(["\n  mutation UpdateJob(\n    $id: Int!\n    $changes: Job_set_input\n    $timing: [JobTiming_insert_input!]!\n    $_append: Job_append_input = {}\n  ) {\n    update_Job_by_pk(pk_columns: { id: $id }, _set: $changes, _append: $_append) {\n      id\n    }\n    insert_JobTiming(objects: $timing) {\n      returning {\n        id\n        status\n        createdAt\n      }\n    }\n  }\n"]))),b=(0,m.Ps)(u||(u=(0,f.Z)(["\n  mutation InsertJobTiming($timing: [JobTiming_insert_input!]!) {\n    insert_JobTiming(objects: $timing) {\n      returning {\n        id\n        status\n        createdAt\n      }\n    }\n  }\n"]))),I=(0,m.Ps)(c||(c=(0,f.Z)(['\n  query GetJobHistory(\n    $jobId: Int\n    $locationId: Int!\n    $limit: Int\n    $offset: Int\n    $serviceId: Int\n    $startDate: timestamptz!\n  ) {\n    jobs: Job(\n      limit: $limit\n      offset: $offset\n      order_by: { createdAt: desc }\n      where: {\n        createdAt: { _gte: $startDate }\n        id: { _neq: $jobId }\n        locationId: { _eq: $locationId }\n        serviceId: { _eq: $serviceId }\n        status: { _nin: ["pending", "raised", "offered", "accepted", "inProgress"] }\n      }\n    ) {\n      id\n      title\n      status\n      scheduledAt\n      createdAt\n      meta\n      service: Service {\n        id\n        name\n      }\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        id\n        taxonomyId\n        comments\n        taxonomy: Taxonomy {\n          name\n        }\n      }\n    }\n    meta: Job_aggregate(\n      where: {\n        createdAt: { _gte: $startDate }\n        id: { _neq: $jobId }\n        locationId: { _eq: $locationId }\n        serviceId: { _eq: $serviceId }\n        status: { _nin: ["pending", "raised", "offered", "accepted", "inProgress"] }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n']))),$=(0,m.Ps)(d||(d=(0,f.Z)(['\n  query GetJob($jobId: Int!) {\n    job: Job_by_pk(id: $jobId) {\n      access\n      costCategory\n      customerSpendThreshold\n      description\n      supplierLabourAmount\n      supplierMaterialsAmount\n      quoteDue\n      quoteNumber\n      id\n      number\n      meta\n      paymentMethod\n      reference\n      status\n      title\n      type\n      quoted\n      invoices: Invoices(order_by: { createdAt: desc }) {\n        id\n        invoiceNumber\n      }\n      quotations: SupplierQuotes {\n        id\n        quoteNumber\n        status\n        lineItems: SupplierQuoteLineItems {\n          id\n          description\n          item\n          qty\n          qtyUnit\n          quoteId\n          total\n          type\n          unitRate\n          supplierTotal\n        }\n        supplier: Supplier {\n          id\n          type\n          name\n          accountUsers: Account_Users {\n            user: User {\n              id\n              fullName\n              nameFirst\n              nameLast\n              phone\n              email\n              devices: UserDevices(where: { status: { _eq: "active" } }) {\n                id\n                playerId\n              }\n            }\n          }\n        }\n      }\n      admin: Admin {\n        id\n        name\n      }\n      service: Service {\n        id\n        name\n      }\n      manager: Manager {\n        id\n        nameFirst\n        nameLast\n      }\n      customer: Customer {\n        id\n        name\n        website\n        slas: SLAs(where: { entity: { _eq: "Account" } }) {\n          id\n          entity\n          entityId\n          onSite\n          onSiteUnit\n          jobReport\n          jobReportUnit\n          completion\n          completionUnit\n          notes\n          inUse\n          normalRate\n          oohRate\n          premiumRate\n          minimumInterval\n          minimumLength\n          slaId\n          sla: SLA {\n            id\n            name\n            notes\n            normalRate\n            oohRate\n            premiumRate\n            onSite\n            onSiteUnit\n            jobReport\n            jobReportUnit\n            completion\n            completionUnit\n            minimumInterval\n            minimumLength\n          }\n        }\n      }\n      customerUser: CustomerUser {\n        id\n        nameFirst\n        nameLast\n        fullName\n        email\n        phone\n      }\n      supplier: Supplier {\n        id\n        name\n        contactUsers: Account_Users(where: { isContact: { _eq: true } }) {\n          id\n          role\n          position\n          isContact\n          lastSignInAt\n          userId\n          user: User {\n            id\n            fullName\n            nameFirst\n            nameLast\n            email\n            phone\n          }\n        }\n      }\n      supplierUser: SupplierUser {\n        id\n        fullName\n        nameFirst\n        nameLast\n        email\n        phone\n      }\n      location: Location {\n        id\n        name\n        addresses: Addresses(where: { entity: { _eq: "Location" } }) {\n          ...AddressEntityFields\n          address: Address {\n            ...AddressFields\n            country: Country {\n              id\n              name\n            }\n          }\n        }\n        slas: SLAs(where: { entity: { _eq: "Location" } }) {\n          id\n          entity\n          entityId\n          onSite\n          onSiteUnit\n          jobReport\n          jobReportUnit\n          completion\n          completionUnit\n          notes\n          inUse\n          normalRate\n          oohRate\n          premiumRate\n          minimumInterval\n          minimumLength\n          slaId\n          sla: SLA {\n            id\n            name\n            notes\n            normalRate\n            oohRate\n            premiumRate\n            onSite\n            onSiteUnit\n            jobReport\n            jobReportUnit\n            completion\n            completionUnit\n            minimumInterval\n            minimumLength\n          }\n        }\n      }\n      sla: SLA {\n        id\n        name\n        notes\n        normalRate\n        oohRate\n        premiumRate\n        onSite\n        onSiteUnit\n        jobReport\n        jobReportUnit\n        completion\n        completionUnit\n        minimumInterval\n        minimumLength\n      }\n      costCategoryTaxonomy: CostCategory {\n        id\n        name\n      }\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        id\n        taxonomyId\n        comments\n        taxonomy: Taxonomy {\n          name\n        }\n      }\n    }\n  }\n  ',"\n  ","\n"])),p.WW,p.MR),q=(0,m.Ps)(l||(l=(0,f.Z)(["\n  mutation calculateJobFinance($jobId: Int!, $invoiceType: String!) {\n    calculateJobFinance(jobId: $jobId, invoiceType: $invoiceType) {\n      data\n    }\n  }\n"])))},76301:function(e,n,t){"use strict";t.d(n,{Ak:function(){return N},Cj:function(){return Q},K4:function(){return er},Qn:function(){return L},RJ:function(){return K},SW:function(){return U},T_:function(){return J},UH:function(){return D},UM:function(){return en},Ve:function(){return V},_d:function(){return z},_f:function(){return et},by:function(){return B},cz:function(){return T},he:function(){return F},j$:function(){return M},kB:function(){return X},kU:function(){return Y},kx:function(){return G},nD:function(){return E},nP:function(){return eo},pY:function(){return ei},qd:function(){return Z},t1:function(){return W},yR:function(){return H},zR:function(){return ee}});var r,i,o,s,a,u,c,d,l,f,m,p,h,y,g,_,v,b,I,$,q,S,w,x,O,j,k,A,P,C=t(71383),R=t(75063),T=(0,R.Ps)(r||(r=(0,C.Z)(["\n  query GetAddressForSelect($q: String, $entity: String!, $entityId: Int!) {\n    items: Address(\n      where: {\n        Address_Entities: { entity: { _eq: $entity }, entityId: { _eq: $entityId } }\n        _or: [\n          { addressLine1: { _eq: $q } }\n          { addressLine2: { _eq: $q } }\n          { addressLine3: { _eq: $q } }\n          { county: { _eq: $q } }\n          { postCode: { _eq: $q } }\n          { city: { _eq: $q } }\n        ]\n      }\n    ) {\n      label: addressLine1\n      value: id\n      id\n      name\n      addressLine1\n      addressLine2\n      addressLine3\n      postCode\n      county\n      country: Country {\n        name\n      }\n      city\n      Address_Entities {\n        invoice\n      }\n    }\n  }\n"]))),Z=(0,R.Ps)(i||(i=(0,C.Z)(["\n  query GetAccountsForSelect($q: String, $type: String, $limit: Int, $offset: Int) {\n    items: Account(\n      where: { name: { _ilike: $q }, type: { _eq: $type } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]))),E=(0,R.Ps)(o||(o=(0,C.Z)(['\n  query GetTaxonomy($q: String, $id: Int) {\n    items: Taxonomy(\n      where: { type: { _eq: "assetCategory" }, status: { _eq: "active" } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      options: Taxonomies(\n        where: {\n          type: { _eq: "assetCategory" }\n          name: { _ilike: $q }\n          id: { _eq: $id }\n          status: { _eq: "active" }\n        }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']))),D=(0,R.Ps)(s||(s=(0,C.Z)(["\n  query GetAssetsForSelect($locationId: Int, $q: String, $categoryId: Int, $bookable: String) {\n    items: Asset(\n      where: {\n        categoryId: { _eq: $categoryId }\n        locationId: { _eq: $locationId }\n        name: { _ilike: $q }\n        bookable: { _eq: $bookable }\n      }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n      parent: ParentAsset {\n        id\n        name\n      }\n      media: Media {\n        id\n        item: Medium {\n          id\n          name\n          filename\n          meta\n          category\n          type\n        }\n      }\n    }\n  }\n"]))),U=(0,R.Ps)(a||(a=(0,C.Z)(['\n  query GetCustomersForSelect($q: String, $limit: Int, $offset: Int) {\n    items: Account(\n      where: { name: { _ilike: $q }, type: { _eq: "customer" } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      admin: Admins {\n        id: adminId\n      }\n      label: name\n      spendThreshold: meta(path: "$.finance.spendThreshold")\n      serviceRateLabour: meta(path: "$.finance.serviceRateLabour")\n      serviceRateExpenses: meta(path: "$.finance.serviceRateExpenses")\n      value: id\n    }\n  }\n']))),L=(0,R.Ps)(u||(u=(0,C.Z)(["\n  query GetJobsForSelect($_q: Int, $locationId: Int) {\n    items: Job(\n      where: {\n        Location: { id: { _eq: $locationId } }\n        _or: [{ id: { _eq: $_q } }, { Invoices: { id: { _eq: $_q } } }]\n      }\n      order_by: { title: asc }\n    ) {\n      label: label\n      value: id\n      number\n      createdAt\n      description\n      status\n      timingStart\n      title\n      type\n      Location {\n        name\n      }\n      Taxonomy {\n        Taxonomy {\n          shortJobDescription: name\n        }\n      }\n    }\n  }\n"]))),F=(0,R.Ps)(c||(c=(0,C.Z)(['\n  query GetManagersForSelect($userId: Int, $accountId: Int!, $q: String) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          role: { _in: ["owner", "manager"] }\n          status: { _eq: "active" }\n          Account: { id: { _eq: $accountId } }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n        id: { _neq: $userId }\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n']))),N=(0,R.Ps)(d||(d=(0,C.Z)(['\n  query GetManagersForSelect(\n    $userId: Int\n    $accountId: Int!\n    $q: String\n    $invoiceThreshold: numeric\n    $quoteThreshold: numeric\n  ) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          role: { _in: ["owner", "manager"] }\n          status: { _eq: "active" }\n          Account: { id: { _eq: $accountId } }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n        id: { _neq: $userId }\n        _and: [\n          {\n            _or: [\n              { invoiceThreshold: { _gt: $invoiceThreshold } }\n              { invoiceThreshold: { _is_null: true } }\n            ]\n          }\n          {\n            _or: [\n              { quoteThreshold: { _gt: $quoteThreshold } }\n              { quoteThreshold: { _is_null: true } }\n            ]\n          }\n        ]\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n']))),M=(0,R.Ps)(l||(l=(0,C.Z)(["\n  query GetPostCodeAreaForSelect($countryId: Int, $q: String) {\n    items: PostcodeArea(\n      where: { name: { _ilike: $q }, countryId: { _eq: $countryId } }\n      order_by: { name: asc }\n    ) {\n      area\n      label: name\n      value: id\n    }\n  }\n"]))),z=(0,R.Ps)(f||(f=(0,C.Z)(['\n  query GetPropertiesForSelect($where: Location_bool_exp, $limit: Int, $offset: Int) {\n    items: Location(where: $where, order_by: { name: asc }, limit: $limit, offset: $offset) {\n      label: name\n      value: id\n      access\n      permitsRequired\n      registeredAddress: Addresses(\n        where: { entity: { _eq: "Location" }, registered: { _eq: true } }\n      ) {\n        address: Address {\n          id\n          addressLine1\n          addressLine2\n          addressLine3\n          county\n          country: Country {\n            name\n          }\n          postCode\n          city\n        }\n      }\n    }\n  }\n']))),G=(0,R.Ps)(m||(m=(0,C.Z)(['\n  query GetServicesForSelect($q: String, $limit: Int, $offset: Int) {\n    items: Service(\n      where: { name: { _ilike: $q }, status: { _eq: "active" } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n']))),W=(0,R.Ps)(p||(p=(0,C.Z)(["\n  query GetSlasForSelect($q: String, $adminId: Int, $type: String) {\n    items: SLA(\n      where: { name: { _ilike: $q }, type: { _eq: $type }, adminId: { _eq: $adminId } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]))),J=(0,R.Ps)(h||(h=(0,C.Z)(["\n  query GetSlasForSelectNew($where: SLA_bool_exp, $limit: Int, $offset: Int) {\n    items: SLA(where: $where, order_by: { name: asc }, limit: $limit, offset: $offset) {\n      label: name\n      value: id\n    }\n  }\n"]))),B=(0,R.Ps)(y||(y=(0,C.Z)(["\n  query GetSuppliersForSelect($where: Account_bool_exp, $limit: Int, $offset: Int) {\n    items: Account(where: $where, limit: $limit, offset: $offset, order_by: { name: asc }) {\n      label: name\n      value: id\n    }\n  }\n"]))),H=(0,R.Ps)(g||(g=(0,C.Z)(['\n  query GetUsersForSelect($accountId: Int, $q: String, $limit: Int, $offset: Int) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          accountId: { _eq: $accountId }\n          isContact: { _eq: true }\n          status: { _eq: "active" }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      order_by: { nameFirst: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      label: fullName\n      value: id\n      email\n      phone\n    }\n  }\n']))),K=(0,R.Ps)(_||(_=(0,C.Z)(['\n  query GetUsersForSelect($q: String) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n      email\n      phone\n    }\n  }\n']))),Q=(0,R.Ps)(v||(v=(0,C.Z)(["\n  query GetTaxonomyGroupForSelect($q: String, $type: String!) {\n    items: Taxonomy(\n      where: { isGroup: { _eq: true }, name: { _ilike: $q }, type: { _eq: $type } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]))),V=(0,R.Ps)(b||(b=(0,C.Z)(['\n  query GetTaxonomy($q: String) {\n    items: Taxonomy(where: { type: { _eq: "expenseCategoryGroup" } }, order_by: { name: asc }) {\n      label: name\n      options: Taxonomies(\n        where: { type: { _eq: "expenseCategory" }, name: { _ilike: $q } }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']))),Y=(0,R.Ps)(I||(I=(0,C.Z)(['\n  query GetCompliancesForSelect($q: String, $locationId: Int) {\n    items: Taxonomy(where: { type: { _eq: "complianceCategory" } }, order_by: { name: asc }) {\n      label: name\n      options: Compliances(\n        where: {\n          name: { _ilike: $q }\n          Compliance_Entities: { Location: { id: { _eq: $locationId } } }\n        }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']))),X=(0,R.Ps)($||($=(0,C.Z)(["\n  query GetUserRole($userId: Int!, $accountId: Int!) {\n    accountUsers: Account_User(\n      where: { userId: { _eq: $userId }, accountId: { _eq: $accountId } }\n    ) {\n      role\n    }\n  }\n"]))),ee=(0,R.Ps)(q||(q=(0,C.Z)(["\n  query GetSublocationsForSelect($locationId: Int!, $q: String, $limit: Int, $offset: Int) {\n    items: Sublocation(\n      where: { name: { _ilike: $q }, locationId: { _eq: $locationId }, active: { _eq: true } }\n      limit: $limit\n      offset: $offset\n      order_by: { createdAt: desc }\n    ) {\n      value: id\n      label: name\n    }\n  }\n"]))),en=(0,R.Ps)(S||(S=(0,C.Z)(['\n  query GetTaxonomy($q: String, $id: Int, $limit: Int, $offset: Int) {\n    items: Taxonomy(\n      where: {\n        id: { _eq: $id }\n        type: { _eq: "assetCategory" }\n        isGroup: { _eq: false }\n        status: { _eq: "active" }\n        name: { _ilike: $q }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n']))),et=(0,R.Ps)(w||(w=(0,C.Z)(["\n  query GetTaxonomyForSelect(\n    $where: Taxonomy_bool_exp\n    $limit: Int\n    $offset: Int\n    $orderBy: Taxonomy_order_by!\n  ) {\n    items: Taxonomy(where: $where, limit: $limit, offset: $offset, order_by: [$orderBy]) {\n      value: id\n      label: name\n    }\n  }\n"])));(0,R.Ps)(x||(x=(0,C.Z)(['\n  query GetTagsForTask($q: String!, $limit: Int = 50, $offset: Int = 0) {\n    items: Taxonomy(\n      where: { name: { _ilike: $q }, status: { _eq: "active" }, type: { _eq: "taskTags" } }\n      limit: $limit\n      offset: $offset\n      order_by: { id: desc }\n    ) {\n      value: id\n      label: name\n    }\n  }\n']))),(0,R.Ps)(O||(O=(0,C.Z)(['\n  query GetTagsForEntity(\n    $entityId: Int\n    $entity: String!\n    $q: String!\n    $limit: Int = 50\n    $offset: Int = 0\n  ) {\n    tags: Taxonomy(\n      where: {\n        name: { _ilike: $q }\n        status: { _eq: "active" }\n        type: { _eq: "taskTags" }\n        _not: { Taxonomy_Entities: { entity: { _eq: $entity }, entityId: { _eq: $entityId } } }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { id: desc }\n    ) {\n      id\n      name\n      meta\n    }\n  }\n']))),(0,R.Ps)(j||(j=(0,C.Z)(['\n  query GetEntityTags($entityId: Int!, $entity: String!) {\n    tags: Taxonomy_Entity(\n      where: {\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n        Taxonomy: { status: { _eq: "active" }, type: { _eq: "taskTags" } }\n      }\n      order_by: { id: desc }\n    ) {\n      id\n      tag: Taxonomy {\n        id\n        name\n        meta\n      }\n    }\n  }\n'])));var er=(0,R.Ps)(k||(k=(0,C.Z)(["\n  query GetCustomerManagers($accountId: Int, $q: String, $limit: Int, $offset: Int) {\n    items: User(\n      where: { Account_Users: { accountId: { _eq: $accountId } }, fullName: { _ilike: $q } }\n      order_by: { fullName: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n"]))),ei=(0,R.Ps)(A||(A=(0,C.Z)(["\n  query GetServiceSchedulesForSelect(\n    $q: String\n    $serviceId: Int\n    $entity: service_schedule_entity\n    $entityId: Int\n    $limit: Int = 50\n    $offset: Int = 0\n  ) {\n    items: ServiceSchedule(\n      where: {\n        name: { _ilike: $q }\n        serviceId: { _eq: $serviceId }\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]))),eo=(0,R.Ps)(P||(P=(0,C.Z)(['\n  query GetPropertyById($id: Int!) {\n    item: Location_by_pk(id: $id) {\n      label: name\n      value: id\n      access\n      registeredAddress: Addresses(\n        where: { entity: { _eq: "Location" }, registered: { _eq: true } }\n      ) {\n        address: Address {\n          id\n          addressLine1\n          addressLine2\n          addressLine3\n          county\n          country: Country {\n            name\n          }\n          postCode\n          city\n        }\n      }\n    }\n  }\n'])))},42846:function(e,n,t){"use strict";t.d(n,{x:function(){return d}});var r=t(59499),i=t(67294),o=t(96486),s=t(87043),a=function(e){try{return JSON.parse(e)}catch(n){return!1}};function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var d=function(e){var n,t,u,d,l,f,m,p,h,y,g,_=e.filters,v=e.newFilters,b=e.initialSort,I=(0,i.useRef)(),$=(0,i.useState)({}),q=$[0],S=$[1],w=(0,i.useState)({}),x=w[0],O=w[1],j=b||{item:"createdAt",order:"desc"},k=(0,r.Z)({},(null===(n=I.current)||void 0===n?void 0:n.sort.item)||j.item,j.inneritem?(0,r.Z)({},j.inneritem,(null===(t=I.current)||void 0===t?void 0:t.sort.order)||j.order):(null===(u=I.current)||void 0===u?void 0:u.sort.order)||j.order);return(0,i.useEffect)(function(){var e=!(0,o.isEqual)(q,_),n=!(0,o.isEqual)(x,v);if(e&&(S(_),null==I||null===(r=I.current)||void 0===r||r.resetPagination()),n&&(O(v),null==I||null===(i=I.current)||void 0===i||i.resetPagination()),null!=I&&null!==(t=I.current)&&void 0!==t&&t.setSort&&!(e||n)){var t,r,i,s,a,u,c,d,l,f,m,p=null!==(s=I.current)&&void 0!==s&&null!==(a=s.sort)&&void 0!==a&&a.item&&null!==(u=I.current)&&void 0!==u&&null!==(c=u.sort)&&void 0!==c&&c.order?{item:null===(d=I.current)||void 0===d?void 0:null===(l=d.sort)||void 0===l?void 0:l.item,order:null===(f=I.current)||void 0===f?void 0:null===(m=f.sort)||void 0===m?void 0:m.order}:k;I.current.setSort(p)}},[_,v]),{initialData:c(c({},_),{},{newFilters:(null==v?void 0:v.length)>0?v:void 0,limit:(null===(d=I.current)||void 0===d?void 0:d.pageSize)==="Infinity"?null:parseInt(null===(l=I.current)||void 0===l?void 0:l.pageSize,10)||s.C1.paginationSize,offset:((null===(f=I.current)||void 0===f?void 0:f.currentPage)-1||0)*((null===(m=I.current)||void 0===m?void 0:m.pageSize)||s.C1.paginationSize),orderBy:a(null===(p=I.current)||void 0===p?void 0:null===(h=p.sort)||void 0===h?void 0:null===(y=h.item)||void 0===y?void 0:y.replace(/ORDER/i,null===(g=I.current)||void 0===g?void 0:g.sort.order))||k}),initialSort:b,ref:I}}},69496:function(e,n,t){"use strict";t.d(n,{$E:function(){return E},AX:function(){return S},I4:function(){return q},JA:function(){return x},MT:function(){return P},Px:function(){return j},WF:function(){return O},ZA:function(){return L},a8:function(){return k},fA:function(){return Z},fo:function(){return w},ge:function(){return U},iM:function(){return T},nE:function(){return C},nh:function(){return R},r1:function(){return A},tW:function(){return F},uz:function(){return D}});var r,i,o,s,a,u,c,d,l,f,m,p,h,y,g,_,v,b,I=t(71383),$=t(75063),q=(0,$.Ps)(r||(r=(0,I.Z)(["\n  mutation InsertAccountUser($objects: [Account_User_insert_input!]!) {\n    insert_Account_User(objects: $objects) {\n      returning {\n        id\n      }\n    }\n  }\n"]))),S=(0,$.Ps)(i||(i=(0,I.Z)(["\n  mutation UpdateUser(\n    $id: Int!\n    $accountUserId: Int!\n    $accountUserChanges: Account_User_set_input\n    $changes: User_set_input\n    $updateAccountUser: Boolean!\n  ) {\n    update_Account_User_by_pk(pk_columns: { id: $accountUserId }, _set: $accountUserChanges)\n      @include(if: $updateAccountUser) {\n      id\n    }\n    update_User_by_pk(pk_columns: { id: $id }, _set: $changes) {\n      id\n    }\n  }\n"]))),w=(0,$.Ps)(o||(o=(0,I.Z)(["\n  query GetUsers(\n    $accountId: Int\n    $accountType: String\n    $date: timestamptz\n    $limit: Int\n    $offset: Int\n    $q: String\n    $orderBy: User_order_by!\n    $status: String\n  ) {\n    users: User(\n      limit: $limit\n      offset: $offset\n      where: {\n        Account_Users: { Account: { id: { _eq: $accountId }, type: { _eq: $accountType } } }\n        createdAt: { _eq: $date }\n        _or: [\n          { email: { _ilike: $q } }\n          { nameFirst: { _ilike: $q } }\n          { nameLast: { _ilike: $q } }\n        ]\n        status: { _eq: $status }\n      }\n      order_by: [$orderBy]\n    ) {\n      id\n      name: nameFirst\n      nameFirst\n      nameLast\n      phone\n      status\n      email\n      createdAt\n      meta\n      invoiceThreshold\n      quoteThreshold\n      media: Media {\n        id\n        medium: Medium {\n          id\n          category\n          filename\n          meta\n          type\n        }\n      }\n      accounts: Account_Users {\n        id\n        role\n        position\n        isContact\n        status\n        account: Account {\n          id\n          name\n          type\n        }\n        userLocations: User_Account_Locations {\n          accountLocationId\n        }\n      }\n    }\n    meta: User_aggregate(\n      where: {\n        Account_Users: { Account: { id: { _eq: $accountId }, type: { _eq: $accountType } } }\n        createdAt: { _eq: $date }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n        status: { _eq: $status }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"]))),x=(0,$.Ps)(s||(s=(0,I.Z)(["\n  query GetUser($id: Int!) {\n    user: User_by_pk(id: $id) {\n      id\n      fullName\n      name: nameFirst\n      nameFirst\n      nameLast\n      phone\n      status\n      email\n      createdAt\n      meta\n      invoiceThreshold\n      quoteThreshold\n      media: Media {\n        id\n        medium: Medium {\n          id\n          category\n          filename\n          meta\n          type\n        }\n      }\n      accounts: Account_Users {\n        id\n        role\n        position\n        isContact\n        status\n        account: Account {\n          id\n          name\n          type\n        }\n      }\n    }\n  }\n"]))),O=(0,$.Ps)(a||(a=(0,I.Z)(["\n  query CheckDuplicateEmail($email: String!) {\n    users: User_public(where: { email: { _eq: $email } }) {\n      id\n      nameFirst\n      nameLast\n      email\n      phone\n    }\n  }\n"]))),j=(0,$.Ps)(u||(u=(0,I.Z)(["\n  fragment UserFields on User {\n    id\n    email\n    nameFirst\n    nameLast\n    fullName\n    phone\n    status\n  }\n"]))),k=(0,$.Ps)(c||(c=(0,I.Z)(["\n  mutation SendGoogleAuthCode($code: String!, $id: Int!, $type: String!) {\n    createGoogleToken(code: $code, id: $id, type: $type) {\n      success\n      tokens\n      error\n    }\n  }\n"]))),A=(0,$.Ps)(d||(d=(0,I.Z)(["\n  mutation GenerateMSURL($type: String!, $id: Int!) {\n    genenrateMSURL(id: $id, type: $type) {\n      url\n    }\n  }\n"]))),P=(0,$.Ps)(l||(l=(0,I.Z)(["\n  mutation signoutMS($id: Int!, $type: String!, $email: String!) {\n    signoutMS(id: $id, type: $type, email: $email) {\n      error\n      msId\n      success\n    }\n  }\n"]))),C=(0,$.Ps)(f||(f=(0,I.Z)(["\n  query getAccountMeta($id: Int!) {\n    account: Account_by_pk(id: $id) {\n      meta\n    }\n  }\n"]))),R=(0,$.Ps)(m||(m=(0,I.Z)(["\n  query user($id: Int!) {\n    user: User_by_pk(id: $id) {\n      meta\n      invoiceThreshold\n      quoteThreshold\n    }\n  }\n"]))),T=(0,$.Ps)(p||(p=(0,I.Z)(["\n  query GetAccountUserMeta($userId: Int!, $accountId: Int!) {\n    accountUser: Account_User(where: { userId: { _eq: $userId }, accountId: { _eq: $accountId } }) {\n      meta\n    }\n  }\n"]))),Z=(0,$.Ps)(h||(h=(0,I.Z)(["\n  mutation UpdateAccountUserByUserIdAccoutId(\n    $userId: Int!\n    $accountId: Int!\n    $changes: Account_User_set_input!\n  ) {\n    update_Account_User(\n      where: { userId: { _eq: $userId }, accountId: { _eq: $accountId } }\n      _set: $changes\n    ) {\n      returning {\n        id\n      }\n    }\n  }\n"]))),E=(0,$.Ps)(y||(y=(0,I.Z)(["\n  mutation updateAccount($accountId: Int!, $set: Account_set_input!) {\n    update_Account_by_pk(pk_columns: { id: $accountId }, _set: $set) {\n      id\n    }\n  }\n"]))),D=(0,$.Ps)(g||(g=(0,I.Z)(["\n  mutation updateUserMeta($userId: Int!, $meta: jsonb!) {\n    update_User_by_pk(pk_columns: { id: $userId }, _set: { meta: $meta }) {\n      id\n      meta\n    }\n  }\n"]))),U=(0,$.Ps)(_||(_=(0,I.Z)(['\n  query userDevices($accountId: Int!) {\n    users: User(\n      where: {\n        Account_Users: { accountId: { _eq: $accountId }, status: { _eq: "active" } }\n        UserDevices: { status: { _eq: "active" } }\n        status: { _eq: "active" }\n      }\n    ) {\n      id\n      fullName\n      devices: UserDevices(\n        order_by: { updatedAt: desc_nulls_last }\n        where: { status: { _eq: "active" } }\n        limit: 1\n      ) {\n        id\n        playerId\n      }\n    }\n  }\n']))),L=(0,$.Ps)(v||(v=(0,I.Z)(['\n  query GetAccountLocations($accountId: Int, $limit: Int, $offset: Int) {\n    location: Location(\n      offset: $offset\n      limit: $limit\n      where: {\n        Account_Locations: {\n          accountId: { _eq: $accountId }\n          Account: { type: { _eq: "customer" } }\n        }\n      }\n    ) {\n      id\n      name\n      accountLocations: Account_Locations {\n        id\n      }\n      addresses: Addresses(where: { entity: { _eq: "Location" }, registered: { _eq: true } }) {\n        id\n        status\n        address: Address {\n          id\n          name\n          addressLine1\n          postCode\n        }\n      }\n    }\n    meta: Location_aggregate(\n      where: {\n        Account_Locations: {\n          accountId: { _eq: $accountId }\n          Account: { type: { _eq: "customer" } }\n        }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n']))),F=(0,$.Ps)(b||(b=(0,I.Z)(["\n  mutation InsertUserAccountLocations(\n    $accountUserId: Int!\n    $objects: [User_Account_Location_insert_input!]!\n  ) {\n    delete_User_Account_Location(where: { accountUserId: { _eq: $accountUserId } }) {\n      affected_rows\n    }\n    insert_User_Account_Location(objects: $objects) {\n      affected_rows\n      returning {\n        id\n      }\n    }\n  }\n"])))},78450:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return X}});var r=t(67294),i=t(11163),o=t.n(i),s=t(73987),a=t(16835),u=t(59499),c=t(6812),d=t(73359),l=t(26447),f=t(5616),m=t(11057),p=t(98456),h=t(90629),y=t(15861),g=t(57460),_=t.n(g),v=t(55863),b=t(72936),I=t(42846),$=t(26186);function q(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function S(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?q(Object(t),!0).forEach(function(n){(0,u.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):q(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var w=function(e){var n=e.data,t=e.isCSV,r=e.isAdmin,i=e.type;return n.map(function(e){var n,o,s,a,u,c,d,l,f,m,p,h,y,g,_,v,b,I,q,w,x,O=e.manager?"".concat(e.manager.nameFirst," ").concat(e.manager.nameLast):"Unassigned",j=e.scheduledAt?(0,$.Z)(e.scheduledAt,!0):(0,$.Z)(e.timingStart,!0),k=t&&(null==e?void 0:e.supplierOffers.length)>0?null==e?void 0:null===(n=e.supplierOffers[0].supplier)||void 0===n?void 0:n.name:null,A="bookings"===i||t?(null===(o=e.sublocation)||void 0===o?void 0:o.name)||"-":void 0;return S(S({id:e.id,type:e.type,number:e.number,invoiceNumber:null===(s=e.invoices)||void 0===s?void 0:null===(a=s[0])||void 0===a?void 0:a.invoiceNumber,sublocation:A,creator:null===(u=e.timings)||void 0===u?void 0:null===(c=u[0])||void 0===c?void 0:null===(d=c.user)||void 0===d?void 0:d.fullName,propertyId:null===(l=e.location)||void 0===l?void 0:l.id,managerId:null===(f=e.manager)||void 0===f?void 0:f.id,customerId:null===(m=e.customer)||void 0===m?void 0:m.id,priority:(null===(p=e.sla)||void 0===p?void 0:p.name)||"-",supplierId:e.supplier?e.supplier.id:"",service:(null===(h=e.service)||void 0===h?void 0:h.name)||"-",description:(null===(y=e.shortJobDesc)||void 0===y?void 0:null===(g=y[0])||void 0===g?void 0:g.taxonomy.name)||"-",manager:O,location:(null===(_=e.location)||void 0===_?void 0:_.name)||"-",customer:(null===(v=e.customer)||void 0===v?void 0:v.name)||"-",customerManager:(null===(b=e.customer)||void 0===b?void 0:null===(I=b.manager)||void 0===I?void 0:I.fullName)||"-"},!t&&{customerManagerId:null===(q=e.customer)||void 0===q?void 0:null===(w=q.manager)||void 0===w?void 0:w.id}),{},{supplier:e.supplier?e.supplier.name:"-",supplierUser:e.supplierUser?e.supplierUser.fullName:"-",scheduleDate:j,tags:null==e?void 0:e.tags,date:(0,$.Z)(e.createdAt),status:null!=e&&e.job?null===(x=e.job)||void 0===x?void 0:x.status:e.status,offerTo:r?k:"",actions:""})})},x=t(48829),O=t(71847),j=t(75360),k=t(22982),A=t(84209);function P(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function C(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?P(Object(t),!0).forEach(function(n){(0,u.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var R=function(e){var n=e.variables,t=e.user,r=e.queryParams,i=e.hasRole,o=r.hasOwnProperty("tileName");if(!n.isChangedStatusSelect)switch(r.show){case"offered":n.status=["offered"];break;case"current":n.status=["accepted","inProgress","pending"];break;case"openJobs":n.status=["raised","pending"];break;case"raised":n.status=["raised"];break;case"pending":n.status=["pending"];break;case"past":n.status=["completed","inDispute","disputeResolved","reportSent","invoiceSent","customerPaid","supplierPaid","closed"];break;default:n.status=r.show}var s=n.limit,a=n.offset,u=n.orderBy,c=n.q,d=n.status,l=n.startDate,f=n.endDate,m=n.type,p=n.number,h=n.userId,y=n.managerId,g=n.locationId,_=n.monthStart,v=n.tagsWhere,b=n.todayStart,I=n.yearStart,$=n.asAt;if(o){var q=h||+r.userId,S=+r.accountId;return i(["customer","supplier"])&&(q=t.id,S=t.accountId),{query:(0,k.Z)({tagsWhere:v}),variables:C(C({},n),{},{locationId:g||r.locationId,managerId:y||r.managerId,customerManagerId:+r.customerManagerId,accountId:S,adminId:null==t?void 0:t.adminId,asAt:$,tileName:null==r?void 0:r.tileName,orderBy:u,monthStart:_,dayStart:b,yearStart:I,type:r.type||m,userId:q})}}switch(t.accountType){case"supplier":return{query:A.p7,variables:{limit:s,offset:a,orderBy:u,q:c,status:d,startDate:l,endDate:f,type:m,number:p,userId:h||y}};case"customer":return{query:A.lS,variables:{limit:s,offset:a,orderBy:u,q:c,status:d,type:m,number:p,startDate:l,endDate:f,userId:h||y,locationId:g}};case"tenant":return{query:A.lS,variables:{limit:s,offset:a,orderBy:u,q:c,status:d,type:m,startDate:l,endDate:f}};default:return{query:(0,A.ct)({tagsWhere:v}),variables:C({},n)}}},T=function(e){var n,t,r;return C(C({},e),{},{orderBy:null!=e&&null!==(n=e.orderBy)&&void 0!==n&&n.scheduleDate?{scheduledAt:null==e?void 0:null===(t=e.orderBy)||void 0===t?void 0:t.scheduleDate,timingStart:null==e?void 0:null===(r=e.orderBy)||void 0===r?void 0:r.scheduleDate}:e.orderBy})},Z=t(825),E=t(41749),D=t(32836),U=t(26143),L=t(8602),F=t(30381),N=t.n(F),M=t(94568),z=t(9164),G=t(24770),W=t(46353),J=t(85893);function B(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function H(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?B(Object(t),!0).forEach(function(n){(0,u.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):B(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var K="/dashboard/issues/",Q=function(e){var n,t,s,u,g,$=e.initialFilters,q=e.type,S=e.title,k=e.subtitle,A=(0,v.q)(),P=(0,b.x)(),C=P.hasRole,F=P.user,B=(0,i.useRouter)().query,Q=(0,r.useState)(H({},$)),V=Q[0],Y=Q[1],X=(0,r.useState)(!1),ee=X[0],en=X[1],et=(0,r.useState)(!1),er=et[0],ei=et[1],eo=null===(n=A.admin)||void 0===n?void 0:null===(t=n.jobSetting)||void 0===t?void 0:t.jobNumberPrefix,es=null===(s=A.admin)||void 0===s?void 0:null===(u=s.jobSetting)||void 0===u?void 0:u.jobNumberSuffix,ea=(0,M.s)(),eu=C("admin"),ec=C("customer"),ed=C("tenant"),el=C("supplier"),ef=(0,I.x)({filters:V}),em=ef.initialData,ep=ef.ref,eh=R({variables:H(H({assetId:null},T(em)),{},{monthStart:N()(B.asAt).startOf("month"),todayEnd:N()(B.asAt).endOf("day"),todayStart:N()(B.asAt).startOf("day"),yearStart:N()(B.asAt).startOf("year"),asAt:N()(B.asAt).endOf("day"),number:em.id?String(em.id):null,tagsWhere:(0,W.Y)(em.tags),type:q}),user:F,queryParams:B,hasRole:C}),ey=eh.query,eg=eh.variables,e_=(0,c.a)(ey,{variables:eg}),ev=e_.data,eb=(ev=void 0===ev?{jobs:[],meta:{aggregate:{totalCount:0}}}:ev).jobs,eI=ev.meta,e$=e_.loading,eq=e_.refetch,eS=(0,d.t)(ey,{fetchPolicy:"no-cache",variables:H(H({},eg),{},{limit:(null==eI?void 0:null===(g=eI.aggregate)||void 0===g?void 0:g.totalCount)||150}),onCompleted:function(e){var n=e.jobs;try{var t=_().unparse(w({data:n,isCSV:!0,isAdmin:eu})),r="data:application/octet-stream,"+encodeURIComponent(t);(0,x.S)(r,"jobs.csv")}finally{ei(!1)}}}),ew=(0,a.Z)(eS,1)[0],ex=function(e){o().push("".concat(K,"manage?id=").concat(e.number))},eO=function(e){return[{context:"secondary",icon:"edit",onClick:function(n){return ex(e)},tooltip:"Edit"},{context:"secondary",icon:"info",onClick:function(n){return o().push("/dashboard/issues/view?id=".concat(e.number))},tooltip:"Info"}]},ej=function(e){e.stopPropagation();var n=(0,O.Uu)(V);o().push("".concat(K,"manage").concat(n))},ek=function(e){e.stopPropagation(),ei(!0),ew()};return(0,J.jsxs)(l.Z,{width:"100%",spacing:2,sx:{height:"100%"},children:[(0,J.jsxs)(l.Z,{width:"100%",direction:"row",justifyContent:"space-between",children:[(0,J.jsx)(m.Z,{variant:"contained",startIcon:(0,J.jsx)(L.Z,{}),onClick:function(){return en(!0)},children:"Filters"}),(0,J.jsxs)(l.Z,{direction:"row",spacing:2,children:["reactive"===q&&(eu||ec)&&(0,J.jsx)(m.Z,{variant:"contained",color:"secondary",onClick:ej,children:"Create Work Order"}),!ea&&(0,J.jsx)(m.Z,{startIcon:!er&&(0,J.jsx)("img",{src:"/static/icons/csv.svg"}),disabled:er,variant:"contained",color:"success",onClick:ek,children:er?(0,J.jsx)(p.Z,{size:20,color:"secondary"}):"Export"})]})]}),(0,J.jsxs)(h.Z,{sx:{paddingTop:"16px",paddingBottom:"16px",height:"calc(100% - 52px)"},children:[(0,J.jsxs)(l.Z,{children:[(0,J.jsx)(y.Z,{ml:2,variant:"h5",sx:{fontWeight:600},children:S}),k&&(0,J.jsx)(y.Z,{typography:"subtitle1",ml:2,children:k})]}),(0,J.jsx)(j.h,{open:ee,setOpen:en,initialFilters:$,filters:V,setFilters:Y}),(0,J.jsx)(D.i,{autoHeight:!1,loading:e$,ref:ep,columns:[{minWidth:60,field:"id",headerName:"Job ID",renderCell:function(e){var n=e.row;return(0,J.jsx)(Z.D,{id:n.id,number:n.number,openCanvas:!0,type:n.type,numberPrefix:eo,numberSuffix:es})}},{minWidth:60,field:"invoiceNumber",headerName:"Invoice ID",renderCell:function(e){return e.row.invoiceNumber},sortable:!1},{maxWidth:80,field:"priority",headerName:"Priority",sortName:'{"SLA": {"name": "ORDER"}}'},{minWidth:200,field:"service",headerName:"Service",sortName:'{"Service": {"name": "ORDER"}}'},{minWidth:80,field:"type",headerName:"Type",sortable:!0},{minWidth:300,field:"tags",headerName:"Tags",sortable:!1,renderCell:function(e){var n=e.row;return(0,J.jsx)(G.K,{row:n,refetchQueries:["GetJobs","GetDashboardList"],entity:"Job"})}},{minWidth:200,flex:1,field:"description",headerName:"Description",sortable:!1},{minWidth:130,flex:1,field:"manager",headerName:"Assigned to",sortName:'{"Manager": {"nameFirst": "ORDER"}}',renderCell:function(e){var n=e.row;return(0,J.jsx)(z.r,{noWrap:!n.managerId,color:"secondary",href:"/dashboard/users/view?id=".concat(n.managerId),children:n.manager})}},{minWidth:200,flex:1,field:"location",headerName:ec||el||ed?"Location":"Customer",sortName:'{"Customer": {"name": "ORDER"}}',renderCell:function(e){var n=e.row;return(0,J.jsxs)(l.Z,{children:[eu&&(0,J.jsx)(z.r,{color:"secondary",href:"/dashboard/customers/view?id=".concat(n.customerId),children:n.customer}),(0,J.jsx)(z.r,{noWrap:el||ed,color:"secondary",href:"/dashboard/properties/view?id=".concat(n.propertyId),children:n.location})]})}},{minWidth:180,flex:1,field:"customerManager",headerName:"Account Manager",sortName:'{"Customer": {"Manager": {"fullName": "ORDER"}}}',renderCell:function(e){var n=e.row;return(0,J.jsx)(z.r,{noWrap:!n.customerManagerId,color:"secondary",href:"/dashboard/users/view?id=".concat(n.customerManagerId),children:n.customerManager})}},{minWidth:140,flex:1,field:"supplier",headerName:"Supplier",sortName:'{"Supplier": {"name": "ORDER"}}',renderCell:function(e){var n=e.row;return(0,J.jsx)(z.r,{color:"secondary",href:"/dashboard/suppliers/view?id=".concat(n.supplierId),children:n.supplier})}},{flex:1,minWidth:120,field:"supplierUser",headerName:"Assigned to",sortName:'{"SupplierUser": {"nameFirst": "ORDER"}}'},{minWidth:160,field:"scheduleDate",headerName:"Scheduled",sortable:!0},{minWidth:120,flex:1,field:"date",headerName:"Created",sortName:"createdAt"},{minWidth:120,flex:1,field:"status",headerName:"Status",renderCell:function(e){var n,t,r=e.row;return(0,J.jsxs)(l.Z,{children:[(0,J.jsx)(f.Z,{children:(0,J.jsx)(E.B,{value:r.status})}),eu&&"offered"===r.status&&r.offerTo&&r.offerTo.length>0&&(0,J.jsx)(z.r,{color:"secondary",href:"/dashboard/suppliers/view?id=".concat(null===(n=r.offerTo[0].supplier)||void 0===n?void 0:n.id),children:null===(t=r.offerTo[0].supplier)||void 0===t?void 0:t.name})]})}},{width:50,field:"actions",headerName:"",sortable:!1,renderCell:function(e){var n=e.row;return(0,J.jsx)(U.C,{actionsData:eO,row:n})}}],rows:w({data:eb,isCSV:!1,isAdmin:eu}),meta:eI,refetch:eq,containerHeight:"calc(100% - ".concat(k?52:32,"px)"),columnVisibilityModel:{priority:!("ppm"===q||ec||el),manager:eu,customerManager:eu,supplier:eu,supplierUser:el,actions:eu,tags:eu}})]})]})};Q.defaultProps={initialFilters:{},type:"reactive",title:"",subtitle:""};var V=t(38033),Y=function(){var e,n,t=(0,r.useContext)(s.Z).user,a=(0,i.useRouter)().query;if(!t)return o().push("/account/sign-in"),null;var u=null;return u="ppm"===a.type?(0,J.jsx)(Q,{type:"ppm",title:null!==(e=null==a?void 0:a.title)&&void 0!==e?e:"Find PPM",subtitle:null==a?void 0:a.subtitle,initialFilters:ee}):(0,J.jsx)(Q,{type:"reactive",title:null!==(n=null==a?void 0:a.title)&&void 0!==n?n:"Work Orders",subtitle:null==a?void 0:a.subtitle,initialFilters:en}),(0,J.jsx)(V.Z,{children:u})};Y.getLayout=function(e){return e};var X=Y,ee={customerId:null,endDate:null,id:null,locationId:null,managerId:null,q:null,startDate:null,status:[],supplierId:null,userId:null,tags:null,customerManagerId:null,isChangedStatusSelect:!1,filterType:"reactive_table"},en={customerId:null,endDate:null,id:null,meta:null,locationId:null,managerId:null,q:null,startDate:null,status:[],supplierId:null,userId:null,tags:null,customerManagerId:null,isChangedStatusSelect:!1,filterType:"ppm_table"}},61400:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/issues",function(){return t(78450)}])},57460:function(e,n){var t,r,i,o; /* @license
Papa Parse
v5.3.0
https://github.com/mholt/PapaParse
License: MIT
*/ o=function e(){"use strict";var n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{},t=!n.document&&!!n.postMessage,r=t&&/blob:/i.test((n.location||{}).protocol),i={},o=0,s={parse:function(t,r){var a=(r=r||{}).dynamicTyping||!1;if(I(a)&&(r.dynamicTypingFunction=a,a={}),r.dynamicTyping=a,r.transform=!!I(r.transform)&&r.transform,r.worker&&s.WORKERS_SUPPORTED){var u=function(){if(!s.WORKERS_SUPPORTED)return!1;var t,r,a=(t=n.URL||n.webkitURL||null,r=e.toString(),s.BLOB_URL||(s.BLOB_URL=t.createObjectURL(new Blob(["(",r,")();"],{type:"text/javascript"})))),u=new n.Worker(a);return u.onmessage=y,u.id=o++,i[u.id]=u}();return u.userStep=r.step,u.userChunk=r.chunk,u.userComplete=r.complete,u.userError=r.error,r.step=I(r.step),r.chunk=I(r.chunk),r.complete=I(r.complete),r.error=I(r.error),delete r.worker,void u.postMessage({input:t,config:r,workerId:u.id})}var m=null;return s.NODE_STREAM_INPUT,"string"==typeof t?m=r.download?new c(r):new l(r):!0===t.readable&&I(t.read)&&I(t.on)?m=new f(r):(n.File&&t instanceof File||t instanceof Object)&&(m=new d(r)),m.stream(t)},unparse:function(e,n){var t=!1,r=!0,i=",",o="\r\n",a='"',u=a+a,c=!1,d=null,l=!1;!function(){if("object"==typeof n){if("string"!=typeof n.delimiter||s.BAD_DELIMITERS.filter(function(e){return -1!==n.delimiter.indexOf(e)}).length||(i=n.delimiter),("boolean"==typeof n.quotes||"function"==typeof n.quotes||Array.isArray(n.quotes))&&(t=n.quotes),"boolean"!=typeof n.skipEmptyLines&&"string"!=typeof n.skipEmptyLines||(c=n.skipEmptyLines),"string"==typeof n.newline&&(o=n.newline),"string"==typeof n.quoteChar&&(a=n.quoteChar),"boolean"==typeof n.header&&(r=n.header),Array.isArray(n.columns)){if(0===n.columns.length)throw Error("Option columns is empty");d=n.columns}void 0!==n.escapeChar&&(u=n.escapeChar+a),"boolean"==typeof n.escapeFormulae&&(l=n.escapeFormulae)}}();var f=RegExp(p(a),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return h(null,e,c);if("object"==typeof e[0])return h(d||m(e[0]),e,c)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:m(e.data[0])),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),h(e.fields||[],e.data||[],c);throw Error("Unable to serialize unrecognized input");function m(e){if("object"!=typeof e)return[];var n=[];for(var t in e)n.push(t);return n}function h(e,n,t){var s="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof n&&(n=JSON.parse(n));var a=Array.isArray(e)&&0<e.length,u=!Array.isArray(n[0]);if(a&&r){for(var c=0;c<e.length;c++)0<c&&(s+=i),s+=y(e[c],c);0<n.length&&(s+=o)}for(var d=0;d<n.length;d++){var l=a?e.length:n[d].length,f=!1,m=a?0===Object.keys(n[d]).length:0===n[d].length;if(t&&!a&&(f="greedy"===t?""===n[d].join("").trim():1===n[d].length&&0===n[d][0].length),"greedy"===t&&a){for(var p=[],h=0;h<l;h++){var g=u?e[h]:h;p.push(n[d][g])}f=""===p.join("").trim()}if(!f){for(var _=0;_<l;_++){0<_&&!m&&(s+=i);var v=a&&u?e[_]:_;s+=y(n[d][v],_)}d<n.length-1&&(!t||0<l&&!m)&&(s+=o)}}return s}function y(e,n){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);!0===l&&"string"==typeof e&&null!==e.match(/^[=+\-@].*$/)&&(e="'"+e);var r=e.toString().replace(f,u);return"boolean"==typeof t&&t||"function"==typeof t&&t(e,n)||Array.isArray(t)&&t[n]||function(e,n){for(var t=0;t<n.length;t++)if(-1<e.indexOf(n[t]))return!0;return!1}(r,s.BAD_DELIMITERS)||-1<r.indexOf(i)||" "===r.charAt(0)||" "===r.charAt(r.length-1)?a+r+a:r}}};if(s.RECORD_SEP="\x1e",s.UNIT_SEP="\x1f",s.BYTE_ORDER_MARK="\uFEFF",s.BAD_DELIMITERS=["\r","\n",'"',s.BYTE_ORDER_MARK],s.WORKERS_SUPPORTED=!t&&!!n.Worker,s.NODE_STREAM_INPUT=1,s.LocalChunkSize=10485760,s.RemoteChunkSize=5242880,s.DefaultDelimiter=",",s.Parser=h,s.ParserHandle=m,s.NetworkStreamer=c,s.FileStreamer=d,s.StringStreamer=l,s.ReadableStreamStreamer=f,n.jQuery){var a=n.jQuery;a.fn.parse=function(e){var t=e.config||{},r=[];return this.each(function(e){if(!("INPUT"===a(this).prop("tagName").toUpperCase()&&"file"===a(this).attr("type").toLowerCase()&&n.FileReader)||!this.files||0===this.files.length)return!0;for(var i=0;i<this.files.length;i++)r.push({file:this.files[i],inputElem:this,instanceConfig:a.extend({},t)})}),i(),this;function i(){if(0!==r.length){var n,t,i,u,c=r[0];if(I(e.before)){var d=e.before(c.file,c.inputElem);if("object"==typeof d){if("abort"===d.action)return n="AbortError",t=c.file,i=c.inputElem,u=d.reason,void(I(e.error)&&e.error({name:n},t,i,u));if("skip"===d.action)return void o();"object"==typeof d.config&&(c.instanceConfig=a.extend(c.instanceConfig,d.config))}else if("skip"===d)return void o()}var l=c.instanceConfig.complete;c.instanceConfig.complete=function(e){I(l)&&l(e,c.file,c.inputElem),o()},s.parse(c.file,c.instanceConfig)}else I(e.complete)&&e.complete()}function o(){r.splice(0,1),i()}}}function u(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(e){var n=v(e);n.chunkSize=parseInt(n.chunkSize),e.step||e.chunk||(n.chunkSize=null),this._handle=new m(n),(this._handle.streamer=this)._config=n}).call(this,e),this.parseChunk=function(e,t){if(this.isFirstChunk&&I(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(e);void 0!==i&&(e=i)}this.isFirstChunk=!1,this._halted=!1;var o=this._partialLine+e;this._partialLine="";var a=this._handle.parse(o,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var u=a.meta.cursor;this._finished||(this._partialLine=o.substring(u-this._baseIndex),this._baseIndex=u),a&&a.data&&(this._rowCount+=a.data.length);var c=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(r)n.postMessage({results:a,workerId:s.WORKER_ID,finished:c});else if(I(this._config.chunk)&&!t){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);a=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!c||!I(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),c||a&&a.meta.paused||this._nextChunk(),a}this._halted=!0},this._sendError=function(e){I(this._config.error)?this._config.error(e):r&&this._config.error&&n.postMessage({workerId:s.WORKER_ID,error:e,finished:!1})}}function c(e){var n;(e=e||{}).chunkSize||(e.chunkSize=s.RemoteChunkSize),u.call(this,e),this._nextChunk=t?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(n=new XMLHttpRequest,this._config.withCredentials&&(n.withCredentials=this._config.withCredentials),t||(n.onload=b(this._chunkLoaded,this),n.onerror=b(this._chunkError,this)),n.open(this._config.downloadRequestBody?"POST":"GET",this._input,!t),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var r in e)n.setRequestHeader(r,e[r])}if(this._config.chunkSize){var i=this._start+this._config.chunkSize-1;n.setRequestHeader("Range","bytes="+this._start+"-"+i)}try{n.send(this._config.downloadRequestBody)}catch(o){this._chunkError(o.message)}t&&0===n.status&&this._chunkError()}},this._chunkLoaded=function(){var e,t;4===n.readyState&&(n.status<200||400<=n.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:n.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null===(t=(e=n).getResponseHeader("Content-Range"))?-1:parseInt(t.substring(t.lastIndexOf("/")+1))),this.parseChunk(n.responseText)))},this._chunkError=function(e){var t=n.statusText||e;this._sendError(Error(t))}}function d(e){(e=e||{}).chunkSize||(e.chunkSize=s.LocalChunkSize),u.call(this,e);var n,t,r="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,t=e.slice||e.webkitSlice||e.mozSlice,r?((n=new FileReader).onload=b(this._chunkLoaded,this),n.onerror=b(this._chunkError,this)):n=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var i=Math.min(this._start+this._config.chunkSize,this._input.size);e=t.call(e,this._start,i)}var o=n.readAsText(e,this._config.encoding);r||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(n.error)}}function l(e){var n;u.call(this,e=e||{}),this.stream=function(e){return n=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,t=this._config.chunkSize;return t?(e=n.substring(0,t),n=n.substring(t)):(e=n,n=""),this._finished=!n,this.parseChunk(e)}}}function f(e){u.call(this,e=e||{});var n=[],t=!0,r=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===n.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),n.length?this.parseChunk(n.shift()):t=!0},this._streamData=b(function(e){try{n.push("string"==typeof e?e:e.toString(this._config.encoding)),t&&(t=!1,this._checkIsFinished(),this.parseChunk(n.shift()))}catch(r){this._streamError(r)}},this),this._streamError=b(function(e){this._streamCleanUp(),this._sendError(e)},this),this._streamEnd=b(function(){this._streamCleanUp(),r=!0,this._streamData("")},this),this._streamCleanUp=b(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function m(e){var n,t,r,i=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)(e[-+]?\d+)?\s*$/,o=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,a=this,u=0,c=0,d=!1,l=!1,f=[],m={data:[],errors:[],meta:{}};if(I(e.step)){var y=e.step;e.step=function(n){if(m=n,b())_();else{if(_(),0===m.data.length)return;u+=n.data.length,e.preview&&u>e.preview?t.abort():(m.data=m.data[0],y(m,a))}}}function g(n){return"greedy"===e.skipEmptyLines?""===n.join("").trim():1===n.length&&0===n[0].length}function _(){if(m&&r&&(q("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+s.DefaultDelimiter+"'"),r=!1),e.skipEmptyLines)for(var n=0;n<m.data.length;n++)g(m.data[n])&&m.data.splice(n--,1);return b()&&function(){if(m){if(Array.isArray(m.data[0])){for(var n=0;b()&&n<m.data.length;n++)m.data[n].forEach(t);m.data.splice(0,1)}else m.data.forEach(t)}function t(n,t){I(e.transformHeader)&&(n=e.transformHeader(n,t)),f.push(n)}}(),function(){if(!m||!e.header&&!e.dynamicTyping&&!e.transform)return m;function n(n,t){var r,i=e.header?{}:[];for(r=0;r<n.length;r++){var o=r,s=n[r];e.header&&(o=r>=f.length?"__parsed_extra":f[r]),e.transform&&(s=e.transform(s,o)),s=$(o,s),"__parsed_extra"===o?(i[o]=i[o]||[],i[o].push(s)):i[o]=s}return e.header&&(r>f.length?q("FieldMismatch","TooManyFields","Too many fields: expected "+f.length+" fields but parsed "+r,c+t):r<f.length&&q("FieldMismatch","TooFewFields","Too few fields: expected "+f.length+" fields but parsed "+r,c+t)),i}var t=1;return!m.data.length||Array.isArray(m.data[0])?(m.data=m.data.map(n),t=m.data.length):m.data=n(m.data,0),e.header&&m.meta&&(m.meta.fields=f),c+=t,m}()}function b(){return e.header&&0===f.length}function $(n,t){return e.dynamicTypingFunction&&void 0===e.dynamicTyping[n]&&(e.dynamicTyping[n]=e.dynamicTypingFunction(n)),!0===(e.dynamicTyping[n]||e.dynamicTyping)?"true"===t||"TRUE"===t||"false"!==t&&"FALSE"!==t&&(!function(e){if(i.test(e)){var n=parseFloat(e);if(-9007199254740992<n&&n<9007199254740992)return!0}return!1}(t)?o.test(t)?new Date(t):""===t?null:t:parseFloat(t)):t}function q(e,n,t,r){var i={type:e,code:n,message:t};void 0!==r&&(i.row=r),m.errors.push(i)}this.parse=function(i,o,a){var u=e.quoteChar||'"';if(e.newline||(e.newline=function(e,n){e=e.substring(0,1048576);var t=RegExp(p(n)+"([^]*?)"+p(n),"gm"),r=(e=e.replace(t,"")).split("\r"),i=e.split("\n"),o=1<i.length&&i[0].length<r[0].length;if(1===r.length||o)return"\n";for(var s=0,a=0;a<r.length;a++)"\n"===r[a][0]&&s++;return s>=r.length/2?"\r\n":"\r"}(i,u)),r=!1,e.delimiter)I(e.delimiter)&&(e.delimiter=e.delimiter(i),m.meta.delimiter=e.delimiter);else{var c=function(n,t,r,i,o){var a,u,c,d;o=o||[",","	","|",";",s.RECORD_SEP,s.UNIT_SEP];for(var l=0;l<o.length;l++){var f=o[l],m=0,p=0,y=0;c=void 0;for(var _=new h({comments:i,delimiter:f,newline:t,preview:10}).parse(n),v=0;v<_.data.length;v++)if(r&&g(_.data[v]))y++;else{var b=_.data[v].length;p+=b,void 0!==c?0<b&&(m+=Math.abs(b-c),c=b):c=b}0<_.data.length&&(p/=_.data.length-y),(void 0===u||m<=u)&&(void 0===d||d<p)&&1.99<p&&(u=m,a=f,d=p)}return{successful:!!(e.delimiter=a),bestDelimiter:a}}(i,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);c.successful?e.delimiter=c.bestDelimiter:(r=!0,e.delimiter=s.DefaultDelimiter),m.meta.delimiter=e.delimiter}var l=v(e);return e.preview&&e.header&&l.preview++,n=i,m=(t=new h(l)).parse(n,o,a),_(),d?{meta:{paused:!0}}:m||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,t.abort(),n=I(e.chunk)?"":n.substring(t.getCharIndex())},this.resume=function(){a.streamer._halted?(d=!1,a.streamer.parseChunk(n,!0)):setTimeout(a.resume,3)},this.aborted=function(){return l},this.abort=function(){l=!0,t.abort(),m.meta.aborted=!0,I(e.complete)&&e.complete(m),n=""}}function p(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function h(e){var n,t=(e=e||{}).delimiter,r=e.newline,i=e.comments,o=e.step,a=e.preview,u=e.fastMode,c=n=void 0===e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(c=e.escapeChar),("string"!=typeof t||-1<s.BAD_DELIMITERS.indexOf(t))&&(t=","),i===t)throw Error("Comment character same as delimiter");!0===i?i="#":("string"!=typeof i||-1<s.BAD_DELIMITERS.indexOf(i))&&(i=!1),"\n"!==r&&"\r"!==r&&"\r\n"!==r&&(r="\n");var d=0,l=!1;this.parse=function(e,s,f){if("string"!=typeof e)throw Error("Input must be a string");var m=e.length,h=t.length,y=r.length,g=i.length,_=I(o),v=[],b=[],$=[],q=d=0;if(!e)return D();if(u||!1!==u&&-1===e.indexOf(n)){for(var S=e.split(r),w=0;w<S.length;w++){if(d+=($=S[w]).length,w!==S.length-1)d+=r.length;else if(f)break;if(!i||$.substring(0,g)!==i){if(_){if(v=[],R($.split(t)),U(),l)return D()}else R($.split(t));if(a&&a<=w)return v=v.slice(0,a),D(!0)}}return D()}for(var x=e.indexOf(t,d),O=e.indexOf(r,d),j=RegExp(p(c)+p(n),"g"),k=e.indexOf(n,d);;)if(e[d]!==n){if(i&&0===$.length&&e.substring(d,d+g)===i){if(-1===O)return D();d=O+y,O=e.indexOf(r,d),x=e.indexOf(t,d)}else{if(-1!==x&&(x<O||-1===O)){if(!(x<k)){$.push(e.substring(d,x)),d=x+h,x=e.indexOf(t,d);continue}var A=L(x,k,O);if(A&&void 0!==A.nextDelim){x=A.nextDelim,k=A.quoteSearch,$.push(e.substring(d,x)),d=x+h,x=e.indexOf(t,d);continue}}if(-1===O)break;if($.push(e.substring(d,O)),E(O+y),_&&(U(),l))return D();if(a&&v.length>=a)return D(!0)}}else for(k=d,d++;;){if(-1===(k=e.indexOf(n,k+1)))return f||b.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:v.length,index:d}),Z();if(k===m-1)return Z(e.substring(d,k).replace(j,n));if(n!==c||e[k+1]!==c){if(n===c||0===k||e[k-1]!==c){-1!==x&&x<k+1&&(x=e.indexOf(t,k+1)),-1!==O&&O<k+1&&(O=e.indexOf(r,k+1));var P=T(-1===O?x:Math.min(x,O));if(e[k+1+P]===t){$.push(e.substring(d,k).replace(j,n)),e[d=k+1+P+h]!==n&&(k=e.indexOf(n,d)),x=e.indexOf(t,d),O=e.indexOf(r,d);break}var C=T(O);if(e.substring(k+1+C,k+1+C+y)===r){if($.push(e.substring(d,k).replace(j,n)),E(k+1+C+y),x=e.indexOf(t,d),k=e.indexOf(n,d),_&&(U(),l))return D();if(a&&v.length>=a)return D(!0);break}b.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:v.length,index:d}),k++}}else k++}return Z();function R(e){v.push(e),q=d}function T(n){var t=0;if(-1!==n){var r=e.substring(k+1,n);r&&""===r.trim()&&(t=r.length)}return t}function Z(n){return f||(void 0===n&&(n=e.substring(d)),$.push(n),d=m,R($),_&&U()),D()}function E(n){d=n,R($),$=[],O=e.indexOf(r,d)}function D(e){return{data:v,errors:b,meta:{delimiter:t,linebreak:r,aborted:l,truncated:!!e,cursor:q+(s||0)}}}function U(){o(D()),v=[],b=[]}function L(r,i,o){var s={nextDelim:void 0,quoteSearch:void 0},a=e.indexOf(n,i+1);if(i<r&&r<a&&(a<o||-1===o)){var u=e.indexOf(t,a);if(-1===u)return s;a<u&&(a=e.indexOf(n,a+1)),s=L(u,a,o)}else s={nextDelim:r,quoteSearch:i};return s}},this.abort=function(){l=!0},this.getCharIndex=function(){return d}}function y(e){var n=e.data,t=i[n.workerId],r=!1;if(n.error)t.userError(n.error,n.file);else if(n.results&&n.results.data){var o={abort:function(){r=!0,g(n.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:_,resume:_};if(I(t.userStep)){for(var s=0;s<n.results.data.length&&(t.userStep({data:n.results.data[s],errors:n.results.errors,meta:n.results.meta},o),!r);s++);delete n.results}else I(t.userChunk)&&(t.userChunk(n.results,o,n.file),delete n.results)}n.finished&&!r&&g(n.workerId,n.results)}function g(e,n){var t=i[e];I(t.userComplete)&&t.userComplete(n),t.terminate(),delete i[e]}function _(){throw Error("Not implemented.")}function v(e){if("object"!=typeof e||null===e)return e;var n=Array.isArray(e)?[]:{};for(var t in e)n[t]=v(e[t]);return n}function b(e,n){return function(){e.apply(n,arguments)}}function I(e){return"function"==typeof e}return r&&(n.onmessage=function(e){var t=e.data;if(void 0===s.WORKER_ID&&t&&(s.WORKER_ID=t.workerId),"string"==typeof t.input)n.postMessage({workerId:s.WORKER_ID,results:s.parse(t.input,t.config),finished:!0});else if(n.File&&t.input instanceof File||t.input instanceof Object){var r=s.parse(t.input,t.config);r&&n.postMessage({workerId:s.WORKER_ID,results:r,finished:!0})}}),(c.prototype=Object.create(u.prototype)).constructor=c,(d.prototype=Object.create(u.prototype)).constructor=d,(l.prototype=Object.create(l.prototype)).constructor=l,(f.prototype=Object.create(u.prototype)).constructor=f,s},void 0!==(i=o.apply(n,[]))&&(e.exports=i)},36864:function(e,n,t){"use strict";function r(){return(r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}t.d(n,{Z:function(){return r}})}},function(e){e.O(0,[3662,2283,212,8890,619,1100,4135,5020,6043,1564,4244,3911,3776,2329,778,4046,1023,4253,3148,8062,7328,4061,6344,8476,7725,8033,26,339,9774,2888,179],function(){return e(e.s=61400)}),_N_E=e.O()}]);