(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5868],{75420:function(e,t,r){"use strict";r.d(t,{r:function(){return s}});var n=r(95103),i=r(85893),s=function(e){var t=e.errors,r=e.name,s=e.onChange,o=e.options,c=e.register;return(0,i.jsx)(n.Z,{errors:t,name:r,onChange:s,options:o,register:c})};s.defaultProps={name:"status"}},3896:function(e,t,r){"use strict";r.d(t,{X:function(){return d}});var n,i,s=r(71383),o=r(16835),c=r(59499),u=r(67294),a=r(6812),l=r(50319),f=r(75063),p=r(55863);function d(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage",n=(0,p.q)().user,i=(0,u.useState)(function(){try{switch(r){case"network":return t;case"sessionStorage":return JSON.parse(window.sessionStorage.getItem(e))||t}}catch(n){return t}}),s=i[0],f=i[1],d=function(t){try{var i=t instanceof Function?t(s):t;switch(f(i),r){case"network":O({variables:{accountUserId:null==n?void 0:n.accountUserId,filters:(0,c.Z)({},e,i)}});break;case"sessionStorage":window.sessionStorage.setItem(e,JSON.stringify(i))}}catch(o){}};(0,a.a)(b,{variables:{accountUserId:null==n?void 0:n.accountUserId},skip:"network"!==r,onCompleted:function(r){var n=r.accountUser;n&&f(n.filters[e]||t)}});var y=(0,l.D)(j),O=(0,o.Z)(y,1)[0];return[s,d]}var b=(0,f.Ps)(n||(n=(0,s.Z)(["\n  query GetAccountUserFilters($accountUserId: Int!) {\n    accountUser: Account_User_by_pk(id: $accountUserId) {\n      filters\n    }\n  }\n"]))),j=(0,f.Ps)(i||(i=(0,s.Z)(["\n  mutation SetAccountUserFilters($accountUserId: Int!, $filters: jsonb) {\n    update_Account_User_by_pk(pk_columns: { id: $accountUserId }, _append: { filters: $filters }) {\n      id\n    }\n  }\n"])))},12964:function(e,t,r){"use strict";r.d(t,{J:function(){return _}});var n=r(59499),i=r(16835),s=r(4730),o=r(11163),c=r(67294),u=r(9270),a=r(62140),l=r(42283),f=r(76600),p=r(58965),d=r(49501),b=r(75903),j=r(77439),y=r(92264),O=r(3896),h=r(85893);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var v=function(e){var t=e.initialValues,r=e.renderFilters,n=e.setFilters,s=e.lastQuery,o=e.filters,m=(0,O.X)("form_data_".concat(t.filterType),t),v=(0,i.Z)(m,2),w=v[0],P=v[1],x=(0,l.cI)({defaultValues:w||t}),_=x.control,Z=x.errors,S=x.handleSubmit,k=x.register,F=x.reset,C=x.watch,E=x.setValue,I=C(),D=g(g({},I),{},{filterType:t.filterType});(0,c.useEffect)(function(){F(D)},[F]),(0,c.useEffect)(function(){P(D)},[o]);var U=function(e){var r=e.query;if(r!==s){var i={q:"%".concat(r,"%")||0},o=/^\d+$/.test(r);"id"in t&&(i.id=o?Number(r):null),"meta"in t&&(i.meta=o?{invoiceNumbers:[r]}:null),"jobNumber"in t&&(i.jobNumber=o?String(r):null,i.invoiceNumber=o?Number(r):null),n(function(e){return g(g({},e),i)})}},N=function(e){Object.keys(t).map(function(e){return E(e,null)}),n(t),F(t),U("")};return(0,h.jsx)(f.Z,{handleSubmit:S(U),children:(0,h.jsxs)(p.Z,{title:"Filters",children:[(0,h.jsxs)(u.Z,{children:[(0,h.jsx)(a.Z,{sm:12,lg:12,children:(0,h.jsx)(d.Z,{label:"",children:(0,h.jsx)(b.Z,{errors:Z,label:"Search",name:"email",placeholder:"Search...",prependSearchIcon:!0,register:k,type:"search"})})}),(0,h.jsx)(a.Z,{sm:12,lg:12,children:r({control:_,errors:Z,initialValues:t,register:k,setFilters:n,watch:C,setValue:E,reset:F})})]}),(0,h.jsx)(y.H,{content:"Search",context:"secondary",handleClick:U,type:"submit",children:(0,h.jsx)(j.Z,{content:"Clear",context:"danger",onClick:N,size:"sm"})})]})})},w=["FiltersComp","initialFilters","TableComp"];function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var _=function(e){var t=e.FiltersComp,r=e.initialFilters,n=e.TableComp,l=(0,s.Z)(e,w),f=(0,O.X)("form_data_".concat(r.filterType),r),p=(0,i.Z)(f,2),d=p[0],b=p[1],j=(0,c.useState)(d||r),y=j[0],m=j[1],g=(0,o.useRouter)().query.show;return(0,c.useEffect)(function(){b(y)},[y,b]),(0,h.jsx)(u.Z,{children:(0,h.jsxs)(a.Z,{sm:12,lg:12,children:[(0,h.jsx)(v,{initialValues:r,renderFilters:function(e){return(0,h.jsx)(t,x(x(x({},e),l),{},{show:g}))},setFilters:m,filters:y}),(0,h.jsx)(n,x({filters:y,initialFilters:r},l))]})})}},16467:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return O}});var n=r(19076),i=r(12964),s=r(99229),o=r(59499),c=r(75420),u=[{text:"Type",value:""},{text:"Document",value:"document"},{text:"Image",value:"image"},{text:"Video",value:"video"}],a=r(9270),l=r(62140),f=r(85893);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){(0,o.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var b=function(e){e.control;var t=e.errors,r=e.register,n=e.setFilters;return(0,f.jsx)(a.Z,{children:(0,f.jsx)(l.Z,{md:6,children:(0,f.jsx)(c.r,{errors:t,name:"type",onChange:function(e){return n(function(t){return d(d({},t),{},{type:e.target.value||null})})},options:u,register:r})})})},j={q:null,type:null,filterType:"media_table"},y=function(){return(0,f.jsx)(i.J,{carousel:!1,details:!0,listView:!0,showActionButtons:!1,showEntityColumn:!0,FiltersComp:b,initialFilters:j,TableComp:s.G})},O=function(){return(0,f.jsx)(n.Z,{pageHeading:{heading:"Media"},View:(0,f.jsx)(y,{})})}},87422:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/media",function(){return r(16467)}])}},function(e){e.O(0,[3662,2283,212,8890,619,1100,1336,6043,1564,5370,3776,6540,2797,653,1207,3309,9229,9774,2888,179],function(){return e(e.s=87422)}),_N_E=e.O()}]);