(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6872],{26143:function(e,n,t){"use strict";t.d(n,{C:function(){return q}});var i=t(67294),r=t(93946),o=t(25464),a=t(18972),s=t(57976),c=t(14218),l=t(95429),d=t(91988),u=t(70983),m=t(46761),p=t(91682),f=t(39702),h=t(36804),y=t(51797),v=t(53630),x=t(50748),g=t(23132),b=t(88127),j=t(52186),Z=t(59301),w=t(26447),P=t(15861),I=t(85893),$={add:(0,I.jsx)(c.Z,{}),archive:(0,I.jsx)(l.Z,{}),avatar:(0,I.jsx)(d.Z,{}),check:(0,I.jsx)(u.Z,{}),delete:(0,I.jsx)(m.Z,{}),description:(0,I.jsx)(p.Z,{}),download:(0,I.jsx)(f.Z,{}),info:(0,I.jsx)(h.Z,{}),edit:(0,I.jsx)(y.Z,{}),location:(0,I.jsx)(v.Z,{}),unarchive:(0,I.jsx)(x.Z,{}),uploadFile:(0,I.jsx)(g.Z,{}),receipt:(0,I.jsx)(b.Z,{}),visibility:(0,I.jsx)(j.Z,{})},_={default:(0,I.jsx)(s.Z,{}),defaultHoriz:(0,I.jsx)(Z.Z,{}),description:(0,I.jsx)(p.Z,{})},q=function(e){var n=e.actionsData,t=e.icon,s=e.row,c=e.disabled,l=(0,i.useState)(null),d=l[0],u=l[1],m=function(e){e.stopPropagation(),u(e.currentTarget)},p=function(){u(null)};return(0,I.jsxs)("div",{children:[(0,I.jsx)(r.Z,{sx:{":hover":{backgroundColor:"#DDDDDD"}},disabled:c,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:m,children:_[t]}),(0,I.jsx)(o.Z,{id:"simple-menu",anchorEl:d,keepMounted:!0,open:Boolean(d),onClose:p,PaperProps:{sx:{borderRadius:2}},children:n(s).map(function(e,n){return(0,I.jsx)(a.Z,{disabled:e.disabled,onClick:function(n){e.onClick(n),p()},sx:{pl:3,pr:4},children:(0,I.jsxs)(w.Z,{direction:"row",alignItems:"center",spacing:2,children:[(null==$?void 0:$[e.icon])||null,(0,I.jsx)(P.Z,{children:e.tooltip})]})},n)})})]})};q.defaultProps={actionsData:function(){return[{disabled:!1,onClick:function(){},icon:"edit",tooltip:"Edit"}]},icon:"default",disabled:!1}},18574:function(e,n,t){"use strict";t.d(n,{F:function(){return q}});var i=t(59499),r=t(10166),o=t(50135),a=t(98456),s=t(16143),c=t(80482),l=t(23776),d=t(27812),u=t(4730),m=t(74061),p=t(6498),f=t(61730),h=t(75438),y=t(15861),v=t(67294),x=t(85893),g=["children"];function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function j(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach(function(n){(0,i.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Z=(0,v.createContext)({}),w=(0,v.forwardRef)(function(e,n){var t=(0,v.useContext)(Z);return(0,x.jsx)("div",j(j({ref:n},e),t))}),P=(0,v.forwardRef)(function(e,n){var t=e.children,i=(0,u.Z)(e,g),r=[];t.forEach(function(e){r.push(e),r.push.apply(r,(0,d.Z)(e.children||[]))});var o,a,s=(0,p.u)(),c=(0,f.Z)(s.breakpoints.up("sm"),{noSsr:!0}),l=r.length,h=c?36:48,y=function(e){return e.hasOwnProperty("group")?48:h},b=(a=(0,v.useRef)(null),(0,v.useEffect)(function(){null!=a.current&&a.current.resetAfterIndex(0,!0)},[l]),a);return(0,x.jsx)("div",{ref:n,children:(0,x.jsx)(Z.Provider,{value:i,children:(0,x.jsx)(m.S_,{itemData:r,height:(l>8?8*h:r.map(y).reduce(function(e,n){return e+n},0))+16,width:"100%",ref:b,outerElementType:w,innerElementType:"ul",itemSize:function(e){return y(r[e])},overscanCount:5,itemCount:l,children:I})})})});function I(e){var n=e.data,t=e.index,i=e.style,r=n[t],o=j(j({},i),{},{top:i.top+8});return r.hasOwnProperty("group")?(0,x.jsx)(h.Z,{component:"div",style:o,children:r.group},r.key):(0,x.jsx)(y.Z,j(j({component:"li"},r[0]),{},{noWrap:!0,style:o,children:r[1].label}))}function $(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?$(Object(t),!0).forEach(function(n){(0,i.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):$(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var q=function(e){var n=e.label,t=e.loading,i=e.placeholder,r=e.error,s=e.helperText,c=e.inputProps;return(0,x.jsx)(C,_(_({},e),{},{disableListWrap:!0,PopperComponent:O,ListboxComponent:P,renderInput:function(e){return(0,x.jsx)(o.Z,_(_(_({},e),c),{},{error:r,helperText:s,label:n,placeholder:i,color:"secondary",variant:"standard",InputProps:_(_(_({},e.InputProps),(null==c?void 0:c.InputProps)||{}),{},{endAdornment:(0,x.jsxs)(x.Fragment,{children:[t?(0,x.jsx)(a.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},renderOption:function(e,n,t){return[e,n,t.index]},renderGroup:function(e){return e}}))};q.defaultProps={value:null,onChange:function(){},label:"",loading:!1,error:!1,onOpen:function(){},options:[],inputProps:{},withoutSelectIcon:!1};var O=(0,r.Z)(s.Z)((0,i.Z)({zIndex:"12000 !important"},"& .".concat(c.Z.listbox),{boxSizing:"border-box","& ul":{padding:0,margin:0}})),C=(0,r.Z)(l.Z)(function(e){return{"& .MuiAutocomplete-root":{cursor:"pointer"},"& .MuiAutocomplete-popper":{zIndex:"12000 "},"& .MuiAutocomplete-endAdornment":{"& .MuiButtonBase-root.MuiIconButton-root.MuiAutocomplete-popupIndicator":{"& .MuiSvgIcon-root":_({},e.withoutSelectIcon&&{display:"none"})}}}})},73073:function(e,n,t){"use strict";t.d(n,{G:function(){return R}});var i=t(59499),r=t(6812),o=t(12603),a=t(32836),s=t(4788),c=t(94784),l=t(85011),d=t(40826),u=t(85893),m=function(e,n){var t=function(){return(0,u.jsx)(d.Z,{context:"success",icon:"check",size:"sm",title:"Yes"})},i=function(){return(0,u.jsx)(d.Z,{context:"warning",icon:"times",size:"sm",title:"No"})},r=function(){return(0,u.jsx)(d.Z,{context:"dark",icon:"minus",size:"sm",title:"Unavailable"})};return"image"===e?null!=n&&n.thumbnails&&null!=n&&n.thumbnails.length?t:i:r},p=t(42846),f=t(72936),h=t(21023),y=t(5616),v=t(86532),x=t(38895),g=t(15861),b=t(22797),j=t(26447),Z=t(11057),w=t(58886),P=t(90948),I=t(70872),$=t(67294),_=t(77314),q=t(42850);function O(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}var C=(0,q.bH)(_.ZP),S=function(e){var n=e.images,t=e.showPagination,r=e.height,o=(0,$.useState)(0),a=o[0],s=o[1],c=function(e){s(e)};return(0,u.jsxs)(j.Z,{width:"100%",alignItems:"center",children:[(0,u.jsx)(C,{index:a,onChangeIndex:c,enableMouseEvents:!0,interval:1e4,children:n.map(function(e){return(0,u.jsx)(y.Z,{component:"img",sx:{height:r,display:"block",overflow:"hidden",width:"100%",objectFit:"cover"},src:e.filename,alt:e.caption},e.caption)})}),t&&n.length>1&&(0,u.jsx)(D,{page:a+1,count:n.length,onChange:function(e,n){return c(n-1)},variant:"outlined",shape:"rounded",renderItem:function(e){return(0,u.jsx)(w.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?O(Object(t),!0).forEach(function(n){(0,i.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({slots:{previous:function(){return"Previous"},next:function(){return"Next"}}},e))}})]})};S.defaultProps={images:[],showPagination:!0};var D=(0,P.ZP)(I.Z)(function(e){e.hidePrevButton,e.hideNextButton;var n,t=e.theme;return n={},(0,i.Z)(n,"&.MuiPagination-root",{alignSelf:"center",marginTop:"16px"}),(0,i.Z)(n,"& .MuiPaginationItem-root",{fontWeight:600,margin:0,borderRadius:0}),(0,i.Z)(n,"& .MuiPagination-ul > li:last-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"0 5px 5px 0"}),(0,i.Z)(n,"& .MuiPagination-ul > li:first-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"5px 0 0 5px"}),(0,i.Z)(n,"& button.Mui-selected",{color:t.palette.white.main,backgroundColor:t.palette.secondary.main}),n}),k=t(27434),M=t(26143),A=t(9164),E=t(58095);function T(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function N(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?T(Object(t),!0).forEach(function(n){(0,i.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var R=function(e){var n=e.carousel,t=e.category,i=e.data,d=e.entity,w=e.entityId,P=e.filters,I=e.listView,$=e.mediaMeta,_=e.onMediaAdd,q=e.onMediaRemove,O=e.showActionButtons,C=e.showEntityColumn,D=e.showItemActions,T=e.title,R=e.type,G=e.expanded,F=e.onChangeExpanded,L=e.hideExpandIcon,U=e.mediaFormProps,B=e.offCanvasProps,z=e.onlySingleMedia,W=(0,p.x)({filters:P}),H=W.initialData,Y=W.ref,J=(0,f.x)(),Q=J.hasRole,V=J.user,X=(0,E.a)(),K=(0,r.a)(o.t,{variables:N(N({},H),{},{entity:d,entityId:w,category:t,adminId:V.adminId,meta:$})}),ee=K.data,en=(ee=void 0===ee?{items:[],meta:{aggregate:{totalCount:0}}}:ee).items,et=ee.meta,ei=K.loading,er=K.refetch,eo=function(e){X.close(),i.length||er();var n=e.map(function(e){return N(N({},e),{},{link:"".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(e.filename)})});_&&_(n)},ea=function(e){X.close(),i.length||er(),q&&q(e)},es=function(e){e.stopPropagation(),X.show(N({content:(0,u.jsx)(l.z,N({accept:"image/*",adminId:V.adminId,category:t,entity:d,entityId:w,expiryShow:!1,mediaMeta:$,multiple:!0,onSuccess:eo,type:"image"},U)),title:"Upload Photos"},B))},ec=function(e){e.stopPropagation(),X.show(N({content:(0,u.jsx)(l.z,N({accept:".pdf, .doc, .docx, .xlsx",adminId:V.adminId,category:t,entity:d,entityId:w,expiryShow:!1,mediaMeta:$,onSuccess:eo,type:"document"},U)),title:"Upload Documents"},B))},el=function(e){X.show({content:(0,u.jsx)(s.d,{mediaId:e.data.id,onSuccess:ea}),submit:!1,title:"Delete Media"})},ed=function(e){X.show({content:(0,u.jsx)(c.z,{media:e.data,toggleShow:X.close}),title:"Media Details",width:"50%"})},eu=function(e){return[{context:"primary",icon:"info",onClick:function(n){return ed(e)},tooltip:"Details"},{context:"danger",icon:"delete",onClick:function(n){return el(e)},tooltip:"Delete"}]},em=[{field:"file",headerName:"File",flex:1,sortable:!1,renderCell:function(e){var n=e.row,t=e.value;return(0,u.jsx)(A.r,{color:"secondary",onClick:function(e){e.preventDefault(),window.open("".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(n.filename))},children:t})}},{field:"visibility",headerName:"Visible to",flex:1,sortable:!1},{hide:!C,field:"entity",headerName:"Entity",flex:1,sortable:!1},{field:"authority",headerName:"",width:50,sortable:!1,renderCell:function(e){var n=e.value;return(0,u.jsx)(u.Fragment,{children:(null==n?void 0:n.adminOnly)&&(0,u.jsx)(h.Z,{title:"Admin user only",children:(0,u.jsx)(y.Z,{component:"img",alt:"Admin Only",src:"/messaging/admin-only.svg",sx:{height:"24px"}})})})}},{field:"uploaded",headerName:"Uploaded by",flex:1,sortable:!1},{hide:!I,field:"thumbnails",headerName:"Thumbnails",flex:1,sortable:!1,renderCell:function(e){var n=e.value;return"function"==typeof n?n():n}},{hide:!D,field:"actions",headerName:"",width:50,sortable:!1,renderCell:function(e){var n=e.row;return Q("admin")?(0,u.jsx)(M.C,{actionsData:eu,row:n}):V.id===n.userId?(0,u.jsx)(M.C,{actionsData:eu,row:n}):null}}],ep=[],ef=en.filter(function(e){var n=e.item;return(null==n?void 0:n.visibility)&&Q(null==n?void 0:n.visibility)}).map(function(e){var n=e.entity,t=e.entityId,i=e.id,r=e.item,o=r.caption,a=r.filename,s=r.meta,c=r.name,l=r.type,d=r.user,u=r.visibility;return{data:r,id:i,userId:null==d?void 0:d.id,filename:a,visibility:u.join(", "),file:o||c||a,entity:n&&"".concat(n,"#").concat(t),authority:s,uploaded:"".concat(null==d?void 0:d.nameFirst," ").concat(null==d?void 0:d.nameLast),thumbnails:m(l,s),actions:""}}),eh=(en.filter(function(e){var n=e.item;return(null==n?void 0:n.visibility)&&Q(null==n?void 0:n.visibility)}).forEach(function(e){var n=e.item,t=n.caption,i=n.filename;"image"===n.type&&ep.push({caption:t,filename:"".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(i)})}),ep),ey=eh.length;return(0,u.jsxs)(v.Z,{expanded:G,onChange:F,children:[(0,u.jsx)(x.Z,N(N({},L?{}:{expandIcon:(0,u.jsx)(k.Z,{})}),{},{children:(0,u.jsx)(g.Z,{variant:"h6",children:T})})),(0,u.jsxs)(b.Z,{children:[n&&ey>0&&(0,u.jsx)(S,{height:"200px",images:eh}),(0,u.jsx)(a.i,{columns:em,rows:ef,loading:ei,meta:et,ref:Y,refetch:er,columnVisibilityModel:{entity:C,thumbnails:I,actions:D}}),O&&!(z&&ef.length>0)&&(0,u.jsxs)(j.Z,{direction:"row",justifyContent:"center",spacing:2,mt:2,children:[(!R||"document"===R)&&(0,u.jsx)(Z.Z,{variant:"contained",color:"secondary",onClick:ec,children:"Add Document"}),(!R||"image"===R||"avatar"===R)&&(0,u.jsxs)(Z.Z,{variant:"contained",color:"secondary",onClick:es,children:["Add ",R?"".concat(R.charAt(0).toUpperCase()).concat(R.slice(1)):"Image"]})]})]})]})};R.defaultProps={carousel:!0,data:[],filters:{},listView:!1,mediaMeta:null,showActionButtons:!0,showEntityColumn:!1,showItemActions:!0,title:"Media",type:null,onChangeExpanded:function(){},mediaFormProps:{},offCanvasProps:{},category:"media",onlySingleMedia:!1}},77010:function(e,n,t){"use strict";t.d(n,{E:function(){return h}});var i=t(59499),r=t(94054),o=t(26447),a=t(40476),s=t(79717),c=t(50480),l=t(36872),d=t(15861),u=t(56815),m=t(85893);function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach(function(n){(0,i.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var h=function(e){var n=e.label,t=e.options,i=e.error,p=e.helperText,h=e.stackProps,v=e.formControlProps,x=e.labelLeft,g=function(e){var n=e.children;return(0,m.jsx)(m.Fragment,{children:n})};return(0,m.jsxs)(r.Z,f(f({sx:{m:3},error:i,variant:"standard"},void 0===v?{}:v),{},{children:[(0,m.jsxs)(o.Z,f(f({},x&&y),{},{children:[n&&(0,m.jsx)(a.Z,{id:"radio-group",color:"secondary",children:n}),(0,m.jsx)(s.Z,f(f({},e),{},{"aria-labelledby":"radio-group",children:(0,m.jsx)(o.Z,f(f({},void 0===h?{}:h),{},{children:t.map(function(e){var n=e.value,t=e.label,i=e.icon,r=e.ParentComponent;return(0,m.jsx)(void 0===r?g:r,{children:(0,m.jsx)(c.Z,{value:n,control:(0,m.jsx)(l.Z,{color:"secondary"}),label:(0,m.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:1,children:[i,(0,m.jsx)(d.Z,{children:t})]})})})})}))}))]})),(0,m.jsx)(u.Z,{children:p})]}))};h.defaultProps={options:[],error:!1,helperText:"",stackProps:{},formControlProps:{},labelLeft:!1};var y={direction:"row",alignItems:"center",flexWrap:"wrap",spacing:1}},53254:function(e,n,t){"use strict";t.d(n,{U:function(){return x}});var i=t(84059),r=t(26447),o=t(86532),a=t(38895),s=t(22797),c=t(5616),l=t(15861),d=t(11057),u=t(27434),m=t(39702),p=t(94568),f=t(67294),h=t(85893),y=function(e){var n=e.id,t=e.value,y=e.isExpandedByDefault,x=e.collapsible,g=(0,p.a)(),b=(0,f.useState)(y),j=b[0],Z=b[1],w=function(){return Z(function(e){return!e})},P=function(e){e.stopPropagation();var t=document.querySelector("#qr-".concat(n," > canvas")).toDataURL(),i=document.createElement("a");i.href=t,i.download="".concat(n,".png"),document.body.appendChild(i),i.click(),document.body.removeChild(i)},I=(0,f.useMemo)(function(){var e={Main:r.Z,Header:r.Z,Body:r.Z};return x&&(e={Main:o.Z,Header:a.Z,Body:s.Z}),e},[x]);return(0,h.jsx)(c.Z,{children:(0,h.jsxs)(I.Main,{expanded:j,onChange:w,children:[(0,h.jsx)(I.Header,{expandIcon:(0,h.jsx)(u.Z,{}),children:(0,h.jsxs)(r.Z,{width:"100%",direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,h.jsx)(l.Z,{variant:"h6",children:"QR Code"}),(0,h.jsx)(d.Z,{disabled:g,disableMinWidth:!0,size:"small",color:"info",variant:"contained",onClick:P,sx:v.downloadButton,children:(0,h.jsx)(m.Z,{sx:v.downloadIcon})})]})}),(0,h.jsx)(I.Body,{sx:v.body,children:(0,h.jsx)(r.Z,{id:"qr-".concat(n),alignItems:"center",children:(0,h.jsx)(i.Qd,{bgColor:"#ffffff",fgColor:"#000000",value:t,level:"H",size:256})})})]})})},v={downloadIcon:{height:"17px",width:"17px"},downloadButton:{mr:2},body:{marginTop:"20px"}};y.defaultProps={id:"new-qr-code",isExpandedByDefault:!1,collapsible:!0};var x=y},76301:function(e,n,t){"use strict";t.d(n,{Ak:function(){return F},Cj:function(){return Q},K4:function(){return ei},Qn:function(){return R},RJ:function(){return J},SW:function(){return N},T_:function(){return W},UH:function(){return T},UM:function(){return en},Ve:function(){return V},_d:function(){return U},_f:function(){return et},by:function(){return H},cz:function(){return M},he:function(){return G},j$:function(){return L},kB:function(){return K},kU:function(){return X},kx:function(){return B},nD:function(){return E},nP:function(){return eo},pY:function(){return er},qd:function(){return A},t1:function(){return z},yR:function(){return Y},zR:function(){return ee}});var i,r,o,a,s,c,l,d,u,m,p,f,h,y,v,x,g,b,j,Z,w,P,I,$,_,q,O,C,S,D=t(71383),k=t(75063),M=(0,k.Ps)(i||(i=(0,D.Z)(["\n  query GetAddressForSelect($q: String, $entity: String!, $entityId: Int!) {\n    items: Address(\n      where: {\n        Address_Entities: { entity: { _eq: $entity }, entityId: { _eq: $entityId } }\n        _or: [\n          { addressLine1: { _eq: $q } }\n          { addressLine2: { _eq: $q } }\n          { addressLine3: { _eq: $q } }\n          { county: { _eq: $q } }\n          { postCode: { _eq: $q } }\n          { city: { _eq: $q } }\n        ]\n      }\n    ) {\n      label: addressLine1\n      value: id\n      id\n      name\n      addressLine1\n      addressLine2\n      addressLine3\n      postCode\n      county\n      country: Country {\n        name\n      }\n      city\n      Address_Entities {\n        invoice\n      }\n    }\n  }\n"]))),A=(0,k.Ps)(r||(r=(0,D.Z)(["\n  query GetAccountsForSelect($q: String, $type: String, $limit: Int, $offset: Int) {\n    items: Account(\n      where: { name: { _ilike: $q }, type: { _eq: $type } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]))),E=(0,k.Ps)(o||(o=(0,D.Z)(['\n  query GetTaxonomy($q: String, $id: Int) {\n    items: Taxonomy(\n      where: { type: { _eq: "assetCategory" }, status: { _eq: "active" } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      options: Taxonomies(\n        where: {\n          type: { _eq: "assetCategory" }\n          name: { _ilike: $q }\n          id: { _eq: $id }\n          status: { _eq: "active" }\n        }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']))),T=(0,k.Ps)(a||(a=(0,D.Z)(["\n  query GetAssetsForSelect($locationId: Int, $q: String, $categoryId: Int, $bookable: String) {\n    items: Asset(\n      where: {\n        categoryId: { _eq: $categoryId }\n        locationId: { _eq: $locationId }\n        name: { _ilike: $q }\n        bookable: { _eq: $bookable }\n      }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n      parent: ParentAsset {\n        id\n        name\n      }\n      media: Media {\n        id\n        item: Medium {\n          id\n          name\n          filename\n          meta\n          category\n          type\n        }\n      }\n    }\n  }\n"]))),N=(0,k.Ps)(s||(s=(0,D.Z)(['\n  query GetCustomersForSelect($q: String, $limit: Int, $offset: Int) {\n    items: Account(\n      where: { name: { _ilike: $q }, type: { _eq: "customer" } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      admin: Admins {\n        id: adminId\n      }\n      label: name\n      spendThreshold: meta(path: "$.finance.spendThreshold")\n      serviceRateLabour: meta(path: "$.finance.serviceRateLabour")\n      serviceRateExpenses: meta(path: "$.finance.serviceRateExpenses")\n      value: id\n    }\n  }\n']))),R=(0,k.Ps)(c||(c=(0,D.Z)(["\n  query GetJobsForSelect($_q: Int, $locationId: Int) {\n    items: Job(\n      where: {\n        Location: { id: { _eq: $locationId } }\n        _or: [{ id: { _eq: $_q } }, { Invoices: { id: { _eq: $_q } } }]\n      }\n      order_by: { title: asc }\n    ) {\n      label: label\n      value: id\n      number\n      createdAt\n      description\n      status\n      timingStart\n      title\n      type\n      Location {\n        name\n      }\n      Taxonomy {\n        Taxonomy {\n          shortJobDescription: name\n        }\n      }\n    }\n  }\n"]))),G=(0,k.Ps)(l||(l=(0,D.Z)(['\n  query GetManagersForSelect($userId: Int, $accountId: Int!, $q: String) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          role: { _in: ["owner", "manager"] }\n          status: { _eq: "active" }\n          Account: { id: { _eq: $accountId } }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n        id: { _neq: $userId }\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n']))),F=(0,k.Ps)(d||(d=(0,D.Z)(['\n  query GetManagersForSelect(\n    $userId: Int\n    $accountId: Int!\n    $q: String\n    $invoiceThreshold: numeric\n    $quoteThreshold: numeric\n  ) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          role: { _in: ["owner", "manager"] }\n          status: { _eq: "active" }\n          Account: { id: { _eq: $accountId } }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n        id: { _neq: $userId }\n        _and: [\n          {\n            _or: [\n              { invoiceThreshold: { _gt: $invoiceThreshold } }\n              { invoiceThreshold: { _is_null: true } }\n            ]\n          }\n          {\n            _or: [\n              { quoteThreshold: { _gt: $quoteThreshold } }\n              { quoteThreshold: { _is_null: true } }\n            ]\n          }\n        ]\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n']))),L=(0,k.Ps)(u||(u=(0,D.Z)(["\n  query GetPostCodeAreaForSelect($countryId: Int, $q: String) {\n    items: PostcodeArea(\n      where: { name: { _ilike: $q }, countryId: { _eq: $countryId } }\n      order_by: { name: asc }\n    ) {\n      area\n      label: name\n      value: id\n    }\n  }\n"]))),U=(0,k.Ps)(m||(m=(0,D.Z)(['\n  query GetPropertiesForSelect($where: Location_bool_exp, $limit: Int, $offset: Int) {\n    items: Location(where: $where, order_by: { name: asc }, limit: $limit, offset: $offset) {\n      label: name\n      value: id\n      access\n      permitsRequired\n      registeredAddress: Addresses(\n        where: { entity: { _eq: "Location" }, registered: { _eq: true } }\n      ) {\n        address: Address {\n          id\n          addressLine1\n          addressLine2\n          addressLine3\n          county\n          country: Country {\n            name\n          }\n          postCode\n          city\n        }\n      }\n    }\n  }\n']))),B=(0,k.Ps)(p||(p=(0,D.Z)(['\n  query GetServicesForSelect($q: String, $limit: Int, $offset: Int) {\n    items: Service(\n      where: { name: { _ilike: $q }, status: { _eq: "active" } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n']))),z=(0,k.Ps)(f||(f=(0,D.Z)(["\n  query GetSlasForSelect($q: String, $adminId: Int, $type: String) {\n    items: SLA(\n      where: { name: { _ilike: $q }, type: { _eq: $type }, adminId: { _eq: $adminId } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]))),W=(0,k.Ps)(h||(h=(0,D.Z)(["\n  query GetSlasForSelectNew($where: SLA_bool_exp, $limit: Int, $offset: Int) {\n    items: SLA(where: $where, order_by: { name: asc }, limit: $limit, offset: $offset) {\n      label: name\n      value: id\n    }\n  }\n"]))),H=(0,k.Ps)(y||(y=(0,D.Z)(["\n  query GetSuppliersForSelect($where: Account_bool_exp, $limit: Int, $offset: Int) {\n    items: Account(where: $where, limit: $limit, offset: $offset, order_by: { name: asc }) {\n      label: name\n      value: id\n    }\n  }\n"]))),Y=(0,k.Ps)(v||(v=(0,D.Z)(['\n  query GetUsersForSelect($accountId: Int, $q: String, $limit: Int, $offset: Int) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          accountId: { _eq: $accountId }\n          isContact: { _eq: true }\n          status: { _eq: "active" }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      order_by: { nameFirst: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      label: fullName\n      value: id\n      email\n      phone\n    }\n  }\n']))),J=(0,k.Ps)(x||(x=(0,D.Z)(['\n  query GetUsersForSelect($q: String) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n      email\n      phone\n    }\n  }\n']))),Q=(0,k.Ps)(g||(g=(0,D.Z)(["\n  query GetTaxonomyGroupForSelect($q: String, $type: String!) {\n    items: Taxonomy(\n      where: { isGroup: { _eq: true }, name: { _ilike: $q }, type: { _eq: $type } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]))),V=(0,k.Ps)(b||(b=(0,D.Z)(['\n  query GetTaxonomy($q: String) {\n    items: Taxonomy(where: { type: { _eq: "expenseCategoryGroup" } }, order_by: { name: asc }) {\n      label: name\n      options: Taxonomies(\n        where: { type: { _eq: "expenseCategory" }, name: { _ilike: $q } }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']))),X=(0,k.Ps)(j||(j=(0,D.Z)(['\n  query GetCompliancesForSelect($q: String, $locationId: Int) {\n    items: Taxonomy(where: { type: { _eq: "complianceCategory" } }, order_by: { name: asc }) {\n      label: name\n      options: Compliances(\n        where: {\n          name: { _ilike: $q }\n          Compliance_Entities: { Location: { id: { _eq: $locationId } } }\n        }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']))),K=(0,k.Ps)(Z||(Z=(0,D.Z)(["\n  query GetUserRole($userId: Int!, $accountId: Int!) {\n    accountUsers: Account_User(\n      where: { userId: { _eq: $userId }, accountId: { _eq: $accountId } }\n    ) {\n      role\n    }\n  }\n"]))),ee=(0,k.Ps)(w||(w=(0,D.Z)(["\n  query GetSublocationsForSelect($locationId: Int!, $q: String, $limit: Int, $offset: Int) {\n    items: Sublocation(\n      where: { name: { _ilike: $q }, locationId: { _eq: $locationId }, active: { _eq: true } }\n      limit: $limit\n      offset: $offset\n      order_by: { createdAt: desc }\n    ) {\n      value: id\n      label: name\n    }\n  }\n"]))),en=(0,k.Ps)(P||(P=(0,D.Z)(['\n  query GetTaxonomy($q: String, $id: Int, $limit: Int, $offset: Int) {\n    items: Taxonomy(\n      where: {\n        id: { _eq: $id }\n        type: { _eq: "assetCategory" }\n        isGroup: { _eq: false }\n        status: { _eq: "active" }\n        name: { _ilike: $q }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n']))),et=(0,k.Ps)(I||(I=(0,D.Z)(["\n  query GetTaxonomyForSelect(\n    $where: Taxonomy_bool_exp\n    $limit: Int\n    $offset: Int\n    $orderBy: Taxonomy_order_by!\n  ) {\n    items: Taxonomy(where: $where, limit: $limit, offset: $offset, order_by: [$orderBy]) {\n      value: id\n      label: name\n    }\n  }\n"])));(0,k.Ps)($||($=(0,D.Z)(['\n  query GetTagsForTask($q: String!, $limit: Int = 50, $offset: Int = 0) {\n    items: Taxonomy(\n      where: { name: { _ilike: $q }, status: { _eq: "active" }, type: { _eq: "taskTags" } }\n      limit: $limit\n      offset: $offset\n      order_by: { id: desc }\n    ) {\n      value: id\n      label: name\n    }\n  }\n']))),(0,k.Ps)(_||(_=(0,D.Z)(['\n  query GetTagsForEntity(\n    $entityId: Int\n    $entity: String!\n    $q: String!\n    $limit: Int = 50\n    $offset: Int = 0\n  ) {\n    tags: Taxonomy(\n      where: {\n        name: { _ilike: $q }\n        status: { _eq: "active" }\n        type: { _eq: "taskTags" }\n        _not: { Taxonomy_Entities: { entity: { _eq: $entity }, entityId: { _eq: $entityId } } }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { id: desc }\n    ) {\n      id\n      name\n      meta\n    }\n  }\n']))),(0,k.Ps)(q||(q=(0,D.Z)(['\n  query GetEntityTags($entityId: Int!, $entity: String!) {\n    tags: Taxonomy_Entity(\n      where: {\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n        Taxonomy: { status: { _eq: "active" }, type: { _eq: "taskTags" } }\n      }\n      order_by: { id: desc }\n    ) {\n      id\n      tag: Taxonomy {\n        id\n        name\n        meta\n      }\n    }\n  }\n'])));var ei=(0,k.Ps)(O||(O=(0,D.Z)(["\n  query GetCustomerManagers($accountId: Int, $q: String, $limit: Int, $offset: Int) {\n    items: User(\n      where: { Account_Users: { accountId: { _eq: $accountId } }, fullName: { _ilike: $q } }\n      order_by: { fullName: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n"]))),er=(0,k.Ps)(C||(C=(0,D.Z)(["\n  query GetServiceSchedulesForSelect(\n    $q: String\n    $serviceId: Int\n    $entity: service_schedule_entity\n    $entityId: Int\n    $limit: Int = 50\n    $offset: Int = 0\n  ) {\n    items: ServiceSchedule(\n      where: {\n        name: { _ilike: $q }\n        serviceId: { _eq: $serviceId }\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]))),eo=(0,k.Ps)(S||(S=(0,D.Z)(['\n  query GetPropertyById($id: Int!) {\n    item: Location_by_pk(id: $id) {\n      label: name\n      value: id\n      access\n      registeredAddress: Addresses(\n        where: { entity: { _eq: "Location" }, registered: { _eq: true } }\n      ) {\n        address: Address {\n          id\n          addressLine1\n          addressLine2\n          addressLine3\n          county\n          country: Country {\n            name\n          }\n          postCode\n          city\n        }\n      }\n    }\n  }\n'])))},32836:function(e,n,t){"use strict";t.d(n,{i:function(){return I}});var i=t(59499),r=t(67294),o=t(11163),a=t(83148),s=t(26447),c=t(15861),l=t(90948),d=t(5616),u=t(41796),m=t(87361),p=t(42096),f=t(87043),h=t(61730),y=t(58886),v=t(70872),x=t(85893);function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach(function(n){(0,i.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var j=function(e){var n=e.currentPage,t=e.totalCount,i=e.pageSize,r=e.onPageChange,o=(0,h.Z)("(max-width:400px)"),a=(0,h.Z)("(max-width:500px)");return(0,x.jsx)(Z,{mb:2,page:n,count:Math.ceil(t/i),onChange:function(e,n){return r(n)},variant:"outlined",shape:"rounded",size:o?"small":"medium",hidePrevButton:1===n,hideNextButton:n===Math.ceil(t/i),siblingCount:a?0:1,renderItem:function(e){return(0,x.jsx)(y.Z,b({slots:{previous:function(){return"Previous"},next:function(){return"Next"}}},e))}})};j.defaultProps={currentPage:1,totalCount:0,pageSize:50,onPageChange:function(){}};var Z=(0,l.ZP)(v.Z)(function(e){var n,t=e.hidePrevButton,r=e.hideNextButton,o=e.theme;return n={},(0,i.Z)(n,"&.MuiPagination-root",{alignSelf:"center",marginTop:"16px"}),(0,i.Z)(n,"& .MuiPaginationItem-root",{fontWeight:600,margin:0,borderRadius:0}),(0,i.Z)(n,"& .MuiPagination-ul > li:last-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"0 5px 5px 0"}),(0,i.Z)(n,"& .MuiPagination-ul > li:first-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"5px 0 0 5px"}),(0,i.Z)(n,"& button.Mui-selected",b(b({color:o.palette.white.main,backgroundColor:o.palette.secondary.main},r?{borderRadius:"0 5px 5px 0"}:{}),t?{borderRadius:"5px 0 0 5px"}:{})),n});function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function P(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach(function(n){(0,i.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var I=(0,r.forwardRef)(function(e,n){var t=e.columns,i=e.history,a=e.initialSort,l=e.meta,d=e.refetch,u=e.paginationSize,h=e.containerHeight,y=e.noResultsMessage,v=e.autoHeight,g=(0,o.useRouter)(),b=g.query,Z=void 0===b?{}:b,w=(0,r.useState)(parseInt(null==Z?void 0:Z.page,10)||1),I=w[0],q=w[1],O=(0,r.useState)(u||f.C1.paginationSize),C=O[0],S=O[1];a||(a={item:"createdAt",order:"desc"});var D=(0,r.useState)({item:a.item,order:a.order}),k=D[0],M=D[1],A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=g.query,t=void 0===n?{}:n;if(e>1?t.page=e:delete t.page,!(Object.keys(t).length>0))return{};var i=Object.keys(t).map(function(n){return"page"===n?"".concat(n,"=").concat(e):"".concat(n,"=").concat(t[n])}).join("&");return"?".concat(i)},E=function(){M({item:a.item,order:a.order}),q(1);var e=A();g.push(e),S(u||f.C1.paginationSize)};(0,r.useImperativeHandle)(n,function(){return{currentPage:I,pageSize:C,sort:k,resetPagination:function(){E()}}});var T=function(e){var n=A(e);i&&g.push(n),q(e),!i&&d&&d()},N=function(e){e&&e.field&&e.sort?(M({item:t.find(function(n){return n.field===e.field}).sortName||e.field||e.item||a.item,order:e.sort||e.order||a.order}),d&&d()):(M({item:a.item,order:a.order}),d&&d())};return(0,x.jsxs)($,{containerHeight:h,children:[(0,x.jsx)(_,P({hideFooter:!0,disableColumnMenu:!0,disableSelectionOnClick:!0,autoHeight:v,sortingMode:"server",onSortModelChange:function(e){return N(e[0])},columns:t,pageSize:C,slots:{columnSortedAscendingIcon:function(){return(0,x.jsx)(m.Z,{})},columnSortedDescendingIcon:function(){return(0,x.jsx)(p.Z,{})},columnUnsortedIcon:function(){return(0,x.jsxs)(s.Z,{alignItems:"center",sx:{width:"33px"},children:[(0,x.jsx)(m.Z,{sx:{marginBottom:"-15px"}}),(0,x.jsx)(p.Z,{})]})},noResultsOverlay:function(){return(0,x.jsx)(s.Z,{height:"100%",alignItems:"center",justifyContent:"center",spacing:1,p:1,children:(0,x.jsx)(c.Z,{children:y})})},noRowsOverlay:function(){return(0,x.jsx)(s.Z,{height:"100%",alignItems:"center",justifyContent:"center",spacing:1,p:1,children:(0,x.jsx)(c.Z,{children:y})})}}},e)),l&&Math.ceil(l.aggregate.totalCount/C)>1&&(0,x.jsx)(j,{currentPage:I,totalCount:l.aggregate.totalCount,pageSize:C,onPageChange:T})]})});I.defaultProps={columns:[],history:!1,loading:!1,rows:[],noResultsMessage:"There are no results.",autoHeight:!0};var $=(0,l.ZP)(d.Z)(function(e){return{height:e.containerHeight,display:"flex",flexDirection:"column"}}),_=(0,l.ZP)(a.s)(function(e){var n,t=e.theme,r=e.hideHeader,o=(e.rows,e.loading,e.rowHeight),a=e.isPdf;return n={"--DataGrid-overlayHeight":"40px"},(0,i.Z)(n,"&.MuiDataGrid-root",P({color:t.palette.black.main,border:"none"},a&&{"@media print":{display:"block"}})),(0,i.Z)(n,"& .MuiDataGrid-main",P({},a&&{"@media print":{overflow:"visible !important"}})),(0,i.Z)(n,"& .MuiDataGrid-columnHeaders",P(P({},r&&{display:"none"}),{},{"& .MuiDataGrid-iconButtonContainer":{visibility:"visible","& .MuiButtonBase-root.MuiIconButton-root":{backgroundColor:"inherit",color:t.palette.black.main,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.1)"}}}})),(0,i.Z)(n,"& .MuiDataGrid-virtualScroller",P(P({},r&&{marginTop:"0 !important"}),a&&{"@media print":{overflow:"visible !important"}})),(0,i.Z)(n,"& .MuiDataGrid-iconSeparator",{opacity:0}),(0,i.Z)(n,"& .MuiDataGrid-columnHeaderTitle",{fontWeight:700}),(0,i.Z)(n,"& .MuiButtonBase-root.MuiDataGrid-columnHeaderTitle",{fontWeight:700}),(0,i.Z)(n,"& .MuiDataGrid-virtualScrollerContent",P({},a&&{height:"initial !important",minHeight:"initial !important"})),(0,i.Z)(n,"& .MuiDataGrid-virtualScrollerRenderZone",P({},a&&{position:"relative"})),(0,i.Z)(n,"& .MuiDataGrid-overlayWrapper",(0,i.Z)({},"& .MuiCircularProgress-root",{color:t.palette.secondary.main})),(0,i.Z)(n,"& .MuiDataGrid-row",P({},a&&{minHeight:"".concat(o,"cm !important"),maxHeight:"".concat(o,"cm !important")})),(0,i.Z)(n,"& .MuiDataGrid-row > .MuiDataGrid-cell",P({},a&&{minHeight:"".concat(o,"cm !important"),maxHeight:"".concat(o,"cm !important")})),(0,i.Z)(n,"& .MuiDataGrid-row.even",{backgroundColor:t.palette.muiLightGray.main,"&:hover, &.Mui-hovered":{backgroundColor:(0,u.Fq)(t.palette.muiLightGray.main,.3),"@media (hover: none)":{backgroundColor:"transparent"}},"&.Mui-selected":{backgroundColor:(0,u.Fq)(t.palette.muiLightGray.main,.3+t.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:(0,u.Fq)(t.palette.muiLightGray.main,.3+t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,u.Fq)(t.palette.muiLightGray.main,.3+t.palette.action.selectedOpacity)}}}}),n})},48829:function(e,n,t){"use strict";t.d(n,{S:function(){return i}});var i=function(e,n){var t=document.createElement("a");"string"==typeof t.download?(document.body.appendChild(t),t.download=n,t.href=e,t.click(),document.body.removeChild(t)):location.replace(e)}},11275:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return eu}});var i=t(27812),r=t(11163),o=t.n(r),a=t(6812),s=t(23391),c=t(26447),l=t(98456),d=t(86886),u=t(5616),m=t(16835),p=t(86532),f=t(38895),h=t(15861),y=t(11057),v=t(22797),x=t(51797),g=t(30381),b=t.n(g),j=t(27434),Z=t(58095),w=t(25248),P=t(23949),I=t(85893),$=function(e){var n=e.assetId,t=e.name,i=e.description,r=e.parentAsset,o=e.customer,a=e.location,s=e.sublocation,l=e.category,g=e.createdAt,$=e.status,_=e.categoryQuestions,q=e.categoryAnswers,O=e.assetAdditional,C=e.editable,S=e.expanded,D=e.onChangeExpanded,k=(0,Z.a)(),M=function(e){e.stopPropagation(),k.show({content:(0,I.jsx)(w.R,{assetId:n,offCanvas:k}),title:"Edit Asset",submit:!0})};return(0,I.jsx)(u.Z,{children:(0,I.jsxs)(p.Z,{expanded:S,onChange:D,children:[(0,I.jsx)(f.Z,{expandIcon:(0,I.jsx)(j.Z,{}),children:(0,I.jsxs)(c.Z,{width:"100%",direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,I.jsx)(h.Z,{variant:"h6",children:"Details"}),C&&(0,I.jsx)(y.Z,{disableMinWidth:!0,size:"small",color:"secondary",variant:"contained",onClick:M,sx:{mr:2},children:(0,I.jsx)(x.Z,{sx:{height:"17px",width:"17px"}})})]})}),(0,I.jsx)(v.Z,{children:(0,I.jsxs)(d.ZP,{container:!0,rowSpacing:2,children:[(0,I.jsxs)(d.ZP,{container:!0,item:!0,xs:6,rowSpacing:1,columnSpacing:1,children:[(0,I.jsxs)(d.ZP,{item:!0,xs:12,children:[(0,I.jsx)(h.Z,{variant:"subtitle2",children:"Name"}),(0,I.jsx)(h.Z,{children:t})]}),(0,I.jsxs)(d.ZP,{item:!0,xs:12,children:[(0,I.jsx)(h.Z,{variant:"subtitle2",children:"Description"}),(0,I.jsx)(h.Z,{children:i})]}),(0,I.jsxs)(d.ZP,{item:!0,xs:12,children:[(0,I.jsx)(h.Z,{variant:"subtitle2",children:"Parent asset"}),(0,I.jsx)(h.Z,{children:r})]}),(0,I.jsxs)(d.ZP,{item:!0,xs:12,children:[(0,I.jsx)(h.Z,{variant:"subtitle2",children:"Customer"}),(0,I.jsx)(h.Z,{children:o})]}),(0,I.jsxs)(d.ZP,{item:!0,xs:12,sx:{maxWidth:"85%!important"},children:[(0,I.jsx)(h.Z,{variant:"subtitle2",children:"Location"}),(0,I.jsx)(h.Z,{children:a})]}),(0,I.jsxs)(d.ZP,{item:!0,xs:12,children:[(0,I.jsx)(h.Z,{variant:"subtitle2",children:"Sublocation"}),(0,I.jsx)(h.Z,{children:s})]}),(0,I.jsxs)(d.ZP,{item:!0,xs:12,children:[(0,I.jsx)(h.Z,{variant:"subtitle2",children:"Category"}),(0,I.jsx)(h.Z,{children:l})]}),(0,I.jsxs)(d.ZP,{item:!0,xs:12,children:[(0,I.jsx)(h.Z,{variant:"subtitle2",children:"Type"}),(0,I.jsx)(h.Z,{children:r?"Child":"Parent"})]}),(0,I.jsxs)(d.ZP,{item:!0,xs:12,children:[(0,I.jsx)(h.Z,{variant:"subtitle2",children:"Date created"}),(0,I.jsx)(h.Z,{children:b()(g).format("YYYY-MM-DD")})]}),(0,I.jsxs)(d.ZP,{item:!0,xs:12,children:[(0,I.jsx)(h.Z,{variant:"subtitle2",children:"Status"}),(0,I.jsx)(h.Z,{children:$})]}),_.map(function(e,n){var t,i,r=q[e.name];return Array.isArray(r)&&(r=r.filter(function(e){return e}).join(", ")),(null===(t=e.meta)||void 0===t?void 0:t.input)==="datepicker"&&(r=b()(r).format("Do MMM YYYY")),(0,I.jsxs)(d.ZP,{item:!0,xs:12,children:[(0,I.jsx)(h.Z,{variant:"subtitle2",children:null===(i=e.meta)||void 0===i?void 0:i.label}),(0,I.jsx)(h.Z,{children:r})]},"".concat(e.name,"-").concat(n))})]}),(0,I.jsx)(d.ZP,{container:!0,item:!0,xs:6,children:(0,I.jsx)(c.Z,{spacing:1,mt:1,children:O?Object.entries(O).map(function(e){var n,t,i,r,o=(0,m.Z)(e,2),a=o[0],s=o[1];return(0,I.jsxs)(u.Z,{children:[(0,I.jsx)(h.Z,{variant:"subtitle2",children:null!==(n=null===(t=P.W[a])||void 0===t?void 0:t.label)&&void 0!==n?n:"No label"}),(0,I.jsxs)(c.Z,{direction:"row",alignItems:"center",children:[null!==(i=null===(r=P.W[a])||void 0===r?void 0:r.icon)&&void 0!==i?i:null,(0,I.jsx)(h.Z,{children:null!=s?s:"-"})]})]})}):null})})]})})]})})};$.defaultProps={assetId:null,name:"-",description:"-",parentAsset:!1,customer:"-",location:"-",sublocation:"-",category:"-",createdAt:new Date,status:"active",categoryQuestions:[],categoryAnswers:{},editable:!1,expanded:!1,onChangeExpanded:function(){}};var _=t(73073),q=t(59499),O=t(57460),C=t.n(O),S=t(32836),D=t(42846),k=t(72936),M=t(825),A=t(55863),E=t(41749),T=t(9164),N=t(26143),R=t(73359),G=t(48829),F=t(67294),L=t(59922);function U(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function B(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?U(Object(t),!0).forEach(function(n){(0,q.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):U(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var z=function(e){var n,t,i,r=e.assetId,d=e.editable,x=e.expanded,g=e.onChangeExpanded,Z=e.asset,w=(0,A.q)(),P=(0,k.x)(),$=P.user,_=P.hasRole,q=(0,L.useMainContext)().setPredefinedAssetForWorkOrder,O=_("admin"),U=_("supplier"),z=_("tenant"),W=null===(n=w.admin.jobSetting)||void 0===n?void 0:n.jobNumberPrefix,H=null===(t=w.admin.jobSetting)||void 0===t?void 0:t.jobNumberSuffix,Y=(0,F.useState)(!1),J=Y[0],Q=Y[1],V=(0,D.x)({filters:{}}),X=V.ref,K=V.initialData,ee=(0,a.a)(s.zu,{variables:B(B({},K),{},{assetId:null==Z?void 0:Z.id})}),en=ee.data,et=(en=void 0===en?{jobs:[],meta:{aggregate:{totalCount:0}}}:en).jobs,ei=en.meta,er=ee.loading,eo=ee.refetch,ea=(0,R.t)(s.zu,{fetchPolicy:"no-cache",variables:{assetId:r,orderBy:K.orderBy,offset:0,limit:(null==ei?void 0:null===(i=ei.aggregate)||void 0===i?void 0:i.totalCount)||150},onCompleted:function(e){var n=e.jobs;try{var t=C().unparse(el(n,!0)),i="data:application/octet-stream,"+encodeURIComponent(t);(0,G.S)(i,"asset-".concat(r,"_jobs.csv"))}finally{Q(!1)}}}),es=(0,m.Z)(ea,1)[0],ec=function(e){var n=[];return d&&n.push({context:"secondary",icon:"edit",onClick:function(n){return o().push("/dashboard/issues/manage?id=".concat(e.number).concat("quote"===e.type?"&quoted=1":""))},tooltip:"Edit"}),n.push({context:"secondary",icon:"info",onClick:function(n){return o().push("/dashboard/issues/view?id=".concat(e.number))},tooltip:"Info"}),n},el=function(e,n){return e.map(function(e){var t,i,r,o,a,s,c,l,d,u,m,p,f,h,y,v,x=e.manager?e.manager.fullName:"Unassigned",g=e.scheduledAt?b()(e.scheduledAt).format("YYYY-MM-DD"):b()(e.timingStart).format("YYYY-MM-DD"),j=n&&(null==e?void 0:e.supplierOffers.length)>0?null==e?void 0:null===(t=e.supplierOffers[0].supplier)||void 0===t?void 0:t.name:null==e?void 0:e.supplierOffers;return B(B({},!n&&{id:e.id}),{},{type:e.type,number:e.number,invoiceNumber:null===(i=e.invoices)||void 0===i?void 0:null===(r=i[0])||void 0===r?void 0:r.invoiceNumber,creator:null===(o=e.timings)||void 0===o?void 0:null===(a=o[0])||void 0===a?void 0:null===(s=a.user)||void 0===s?void 0:s.fullName,propertyId:null===(c=e.location)||void 0===c?void 0:c.id,managerId:null===(l=e.manager)||void 0===l?void 0:l.id,customerId:null===(d=e.customer)||void 0===d?void 0:d.id,priority:(null===(u=e.sla)||void 0===u?void 0:u.name)||"-",supplierId:e.supplier?e.supplier.id:"",service:(null===(m=e.service)||void 0===m?void 0:m.name)||"-",description:(null===(p=e.shortJobDesc)||void 0===p?void 0:null===(f=p[0])||void 0===f?void 0:f.taxonomy.name)||"-",manager:x,location:(null===(h=e.location)||void 0===h?void 0:h.name)||"-",customer:(null===(y=e.customer)||void 0===y?void 0:y.name)||"-",supplier:e.supplier?e.supplier.name:"-",supplierUser:e.supplierUser?e.supplierUser.fullName:"-",scheduleDate:g,date:b()(e.createdAt).format("YYYY-MM-DD"),status:null!=e&&e.job?null===(v=e.job)||void 0===v?void 0:v.status:e.status,offerTo:O?j:""})})},ed=function(e){e.stopPropagation(),Q(!0),es()},eu=function(e){e.stopPropagation();var n={customer:Z.customer,location:Z.location,sublocation:Z.sublocation,category:Z.category,asset:{id:Z.id,name:Z.name},assetCategory:Z.category,customerUser:_("admin")?{id:Z.location.customerUser.id,name:"".concat(Z.location.customerUser.nameFirst," ").concat(Z.location.customerUser.nameLast)}:{id:$.id,name:"".concat($.nameFirst," ").concat($.nameLast)}};q(n),o().push("/dashboard/issues/manage")};return(0,I.jsx)(u.Z,{children:(0,I.jsxs)(p.Z,{expanded:x,onChange:g,sx:{maxHeight:"calc(100vh - 32px)",overflow:"scroll"},children:[(0,I.jsx)(f.Z,{expandIcon:(0,I.jsx)(j.Z,{}),children:(0,I.jsxs)(c.Z,{width:"100%",direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,I.jsx)(h.Z,{variant:"h6",children:"Work Orders"}),(0,I.jsxs)(c.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[_(["admin","customer"])&&(0,I.jsx)(y.Z,{color:"secondary",variant:"contained",sx:{width:"150px",marginRight:"15px",height:"30px!important"},onClick:eu,children:"Create work order"}),(0,I.jsx)(y.Z,{disableMinWidth:!0,disabled:J,size:"small",color:"success",variant:"contained",onClick:ed,sx:{mr:2},children:J?(0,I.jsx)(l.Z,{size:20,color:"secondary"}):"CSV"})]})]})}),(0,I.jsx)(v.Z,{children:(0,I.jsx)(S.i,{autoHeight:!1,loading:er,ref:X,columns:[{minWidth:60,field:"id",headerName:"Job ID",renderCell:function(e){var n=e.row;return(0,I.jsx)(M.D,{id:n.id,number:n.number,openCanvas:!0,type:n.type,numberPrefix:W,numberSuffix:H})}},{minWidth:60,field:"invoiceNumber",headerName:"Invoice ID",renderCell:function(e){return e.row.invoiceNumber},sortable:!1},{maxWidth:80,field:"priority",headerName:"Priority",sortName:'{"SLA": {"name": "ORDER"}}'},{minWidth:200,field:"service",headerName:"Service",sortName:'{"Service": {"name": "ORDER"}}'},{minWidth:80,field:"type",headerName:"Type",sortable:!1},{minWidth:200,flex:1,field:"description",headerName:"Description",sortable:!1},{minWidth:130,flex:1,field:"manager",headerName:"Assigned to",sortName:'{"Manager": {"nameFirst": "ORDER"}}',renderCell:function(e){var n=e.row;return(0,I.jsx)(T.r,{color:"secondary",href:"/dashboard/users/view?id=".concat(n.managerId),children:n.manager})}},{minWidth:200,flex:1,field:"location",headerName:O?"Customer":"Location",sortName:'{"Customer": {"name": "ORDER"}}',renderCell:function(e){var n=e.row;return(0,I.jsxs)(c.Z,{children:[O&&(0,I.jsx)(T.r,{color:"secondary",href:"/dashboard/customers/view?id=".concat(n.customerId),children:n.customer}),(0,I.jsx)(T.r,{noWrap:U||z,color:"secondary",href:"/dashboard/properties/view?id=".concat(n.propertyId),children:n.location})]})}},{minWidth:140,flex:1,field:"supplier",headerName:"Supplier",sortName:'{"Supplier": {"name": "ORDER"}}',renderCell:function(e){var n=e.row;return(0,I.jsx)(T.r,{color:"secondary",href:"/dashboard/suppliers/view?id=".concat(n.supplierId),children:n.supplier})}},{flex:1,minWidth:120,field:"supplierUser",headerName:"Assigned to",sortName:'{"SupplierUser": {"nameFirst": "ORDER"}}'},{minWidth:160,field:"scheduleDate",headerName:"Scheduled",sortable:!1},{minWidth:120,flex:1,field:"date",headerName:"Created",sortName:"createdAt"},{minWidth:120,flex:1,field:"status",headerName:"Status",renderCell:function(e){var n,t,i=e.row;return(0,I.jsxs)(c.Z,{children:[(0,I.jsx)(u.Z,{children:(0,I.jsx)(E.B,{value:i.status})}),O&&"offered"===i.status&&i.offerTo&&i.offerTo.length>0&&(0,I.jsx)(T.r,{color:"secondary",href:"/dashboard/suppliers/view?id=".concat(null===(n=i.offerTo[0].supplier)||void 0===n?void 0:n.id),children:null===(t=i.offerTo[0].supplier)||void 0===t?void 0:t.name})]})}},{width:50,field:"actions",headerName:"",sortable:!1,renderCell:function(e){var n=e.row;return(0,I.jsx)(N.C,{actionsData:ec,row:n})}}],rows:el(et,!1),meta:ei,refetch:eo,columnVisibilityModel:{priority:O,manager:O,supplier:O,supplierUser:U}})})]})})};z.defaultProps={editable:!1,expanded:!1,onChangeExpanded:function(){}};var W=t(78566),H=t.n(W),Y=t(39702),J=t(94568),Q=function(e){var n=e.id,t=e.value,i=e.expanded,r=e.onChangeExpanded,o=(0,J.a)(),a=function(e){e.stopPropagation();var t=document.querySelector("#barcode-".concat(n," > svg")).outerHTML,i=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),r=URL.createObjectURL(i),o=document.createElement("a");o.href=r,o.download="".concat(n,".svg"),document.body.appendChild(o),o.click(),document.body.removeChild(o)};return(0,I.jsx)(u.Z,{children:(0,I.jsxs)(p.Z,{expanded:i,onChange:r,children:[(0,I.jsx)(f.Z,{expandIcon:(0,I.jsx)(j.Z,{}),children:(0,I.jsxs)(c.Z,{width:"100%",direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,I.jsx)(h.Z,{variant:"h6",children:"Barcode"}),(0,I.jsx)(y.Z,{disabled:o,disableMinWidth:!0,size:"small",color:"info",variant:"contained",onClick:a,sx:{mr:2},children:(0,I.jsx)(Y.Z,{sx:{height:"17px",width:"17px"}})})]})}),(0,I.jsx)(v.Z,{children:(0,I.jsx)(c.Z,{id:"barcode-".concat(n),alignItems:"center",children:(0,I.jsx)(H(),{value:"".concat(t)})})})]})})};Q.defaultProps={expanded:!1,onChangeExpanded:function(){},id:"asset",value:""};var V=t(87043),X=t(45697),K=t.n(X),ee=t(53630),en=function(e){var n=e.filename,t=e.initialCoordinates,i=e.color,r=e.editable,o=e.handleChangeCoordinates,a=(0,F.useRef)(null),s=(0,F.useRef)(null),c=(0,F.useState)(t),l=c[0],d=c[1];(0,F.useEffect)(function(){d(t)},[t]);var m=function(e){if(r){var n=a.current,t=n.clientHeight,i=n.clientWidth,c=s.current,l=c.clientHeight,u=c.clientWidth,m={x:(e.nativeEvent.offsetX-i/2)*100/u,y:(e.nativeEvent.offsetY-t)*100/l};d(m),o(m)}};return(0,I.jsx)(u.Z,{sx:{position:"relative"},children:n&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(u.Z,{ref:s,component:"img",src:n,sx:{width:"100%"},onClick:m}),(0,I.jsx)(ee.Z,{ref:a,color:i,sx:{position:"absolute",width:"8%",height:"auto",top:"".concat(l.y,"%"),left:"".concat(l.x,"%")}})]})})};en.defaultProps={initialCoordinates:{x:0,y:0},color:"warning",editable:!1,handleChangeCoordinates:function(){}};var et=t(85011),ei=t(50319);function er(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function eo(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?er(Object(t),!0).forEach(function(n){(0,q.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):er(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ea=function(e){var n,t,i,r,o,l=e.assetId,d=e.asset,g=e.markerColor,b=e.editable,w=e.expanded,P=e.onChangeExpanded,$=(0,Z.a)(),_=(0,k.x)().user,q=(0,F.useState)(null),O=q[0],C=q[1],S=(0,a.a)(s.Jt,{variables:{adminId:_.adminId,entityId:l,entity:"Asset",category:"assetFloorplan",type:"image"}}),D=S.data,M=(D=void 0===D?{items:[]}:D).items,A=S.refetch,E=(0,ei.D)(s.Wx),T=(0,m.Z)(E,1)[0],N=function(e){e.stopPropagation(),$.show({content:(0,I.jsx)(et.z,{accept:"image/*",adminId:_.adminId,category:"assetFloorplan",entity:"Asset",entityId:l,expiryShow:!1,mediaMeta:null,multiple:!1,showAdminOnly:!1,onSuccess:function(){$.close(),A()},type:"image"}),title:"Upload floorplan image"})},R=function(e){O&&clearTimeout(O),C(setTimeout(function(){var n=eo(eo({},d.meta),{},{coordinates:e});T({variables:{id:l,changes:{meta:n}}})},1e3))},G="".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(null==M?void 0:null===(n=M[0])||void 0===n?void 0:null===(t=n.item)||void 0===t?void 0:t.filename);return(0,I.jsx)(u.Z,{children:(0,I.jsxs)(p.Z,{expanded:w,onChange:P,children:[(0,I.jsx)(f.Z,{expandIcon:(0,I.jsx)(j.Z,{}),children:(0,I.jsxs)(c.Z,{width:"100%",direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,I.jsx)(h.Z,{variant:"h6",children:"Place asset on floorplan"}),b&&(0,I.jsx)(y.Z,{disableMinWidth:!0,size:"small",color:"secondary",variant:"contained",onClick:N,sx:{mr:2},children:(0,I.jsx)(x.Z,{sx:{height:"17px",width:"17px"}})})]})}),(0,I.jsx)(v.Z,{children:(0,I.jsx)(c.Z,{alignItems:"center",children:null!=M&&null!==(i=M[0])&&void 0!==i&&null!==(r=i.item)&&void 0!==r&&r.filename?(0,I.jsx)(en,{editable:b,filename:G,initialCoordinates:null===(o=d.meta)||void 0===o?void 0:o.coordinates,markerColor:g,handleChangeCoordinates:R}):(0,I.jsx)(h.Z,{color:"muiGray.main",children:"No image available"})})})]})})};ea.defaultProps={asset:{},editable:!1,expanded:!1,onChangeExpanded:function(){}},ea.defaultProps={assetId:K().number.isRequired,asset:K().shape({meta:K().shape({coordinates:K().shape({x:K().number.isRequired,y:K().number.isRequired}).isRequired}).isRequired}).isRequired,markerColor:K().string,editable:K().bool,expanded:K().bool,onChangeExpanded:K().func};var es=t(53254),ec=function(e){var n,t,r,m,p,f,h,y,v=e.id,x=e.editable,g=e.showMediaButtons,b=(0,F.useState)(["asset-details","asset-qr-code","asset-bar-code","asset-floorplan","asset-media","asset-work-orders"]),j=b[0],Z=b[1],w=(0,a.a)(s.yC,{variables:{id:v}}),P=w.loading,q=w.data,O=(q=void 0===q?{asset:{}}:q).asset;if(!P&&!(null!=O&&O.id))return o().push("/404"),null;var C=function(e){return function(n,t){t?Z(function(n){return[].concat((0,i.Z)(n),[e])}):Z(function(n){return n.filter(function(n){return n!==e})})}},S="".concat(V.C1.portalUrl,"/dashboard/assets/view?id=").concat(v),D=(null===(n=O.category)||void 0===n?void 0:n.childs)||[],k=(null===(t=O.meta)||void 0===t?void 0:t.categoryQuestions)||{};return P?(0,I.jsx)(c.Z,{height:"100%",justifyContent:"center",alignItems:"center",children:(0,I.jsx)(l.Z,{color:"secondary"})}):(0,I.jsxs)(d.ZP,{container:!0,spacing:4,children:[(0,I.jsx)(d.ZP,{item:!0,xs:12,md:6,lg2:3,children:(0,I.jsxs)(c.Z,{spacing:2,children:[(0,I.jsx)($,{editable:x,expanded:j.includes("asset-details"),onChangeExpanded:C("asset-details"),assetId:O.id,name:O.name,description:O.description,parentAsset:null===(r=O.parentAsset)||void 0===r?void 0:r.name,customer:null===(m=O.customer)||void 0===m?void 0:m.name,location:null===(p=O.location)||void 0===p?void 0:p.name,sublocation:null===(f=O.sublocation)||void 0===f?void 0:f.name,category:null===(h=O.category)||void 0===h?void 0:h.name,createdAt:O.createdAt,status:O.status,categoryQuestions:D,categoryAnswers:k,assetAdditional:null==O?void 0:null===(y=O.meta)||void 0===y?void 0:y.assetAdditional}),(0,I.jsx)(es.U,{isExpandedByDefault:j.includes("asset-qr-code"),id:"asset-qrcode-".concat(v),value:S}),(0,I.jsx)(Q,{expanded:j.includes("asset-bar-code"),onChangeExpanded:C("asset-bar-code"),id:"asset-barcode-".concat(v),value:v})]})}),(0,I.jsx)(d.ZP,{item:!0,xs:12,md:6,lg2:4,children:(0,I.jsxs)(c.Z,{spacing:2,children:[(0,I.jsx)(ea,{editable:x,expanded:j.includes("asset-floorplan"),onChangeExpanded:C("asset-floorplan"),assetId:v,asset:O}),(0,I.jsx)(u.Z,{children:(0,I.jsx)(_.G,{showActionButtons:g,expanded:j.includes("asset-media"),onChangeExpanded:C("asset-media"),details:!0,entity:"Asset",category:null,entityId:parseInt(v)})})]})}),(0,I.jsx)(d.ZP,{item:!0,xs:12,md:6,lg2:5,children:(0,I.jsx)(z,{editable:x,expanded:j.includes("asset-work-orders"),onChangeExpanded:C("asset-work-orders"),assetId:v,asset:O})})]})};ec.defaultProps={showMediaButtons:!0};var el=t(38033),ed=function(){var e,n,t=(0,k.x)(),i=t.user,a=t.hasRole,s=(0,r.useRouter)().query,c=(0,A.q)(),l=null==c?void 0:null===(e=c.admin)||void 0===e?void 0:null===(n=e.modules)||void 0===n?void 0:n.assets,d=a("admin"),u=a("tenant");return i?l?(0,I.jsx)(ec,{id:s.id,editable:d,showMediaButtons:!u}):(o().push("/404"),null):(o().push("/account/sign-in"),null)},eu=ed;ed.getLayout=function(e){return(0,I.jsx)(el.Z,{children:e})}},38727:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/assets/view",function(){return t(11275)}])}},function(e){e.O(0,[3662,2283,212,8890,619,1100,1336,4135,5020,6043,1564,4244,5370,3911,3776,6540,2329,778,4046,1023,4253,3148,2797,653,8062,1207,7328,4061,597,2747,2719,7725,8033,9229,5248,9774,2888,179],function(){return e(e.s=38727)}),_N_E=e.O()}]);