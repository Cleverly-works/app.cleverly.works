(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8734],{13575:function(e,t,n){"use strict";n.d(t,{r:function(){return c}});var o=n(22091).ZP.getAllTimezones(),r=Object.keys(o).map(function(e){return o[e]}),c=function(){return r.map(function(e){return{label:"".concat(e.name," ").concat(e.utcOffsetStr),value:e.name}})}},53141:function(e,t,n){"use strict";n.d(t,{y:function(){return T}});var o,r,c=n(59499),i=n(68956),a=n(26186),s=n(16551),u=n(77439),l=n(58965),d=n(16540),m=n(50029),f=n(16835),p=n(64687),v=n.n(p),b=n(50319),j=n(71383),h=n(75063),g=(0,h.Ps)(o||(o=(0,j.Z)(["\n  mutation AddBankAccount($objects: [BankAccount_insert_input!]!) {\n    insert_BankAccount(objects: $objects) {\n      returning {\n        id\n        stripeId\n        accountNumber\n        routingNumber\n        bic\n        iban\n        status\n        createdAt\n      }\n    }\n  }\n"]))),x=(0,h.Ps)(r||(r=(0,j.Z)(["\n  mutation UpdateBankAccount($id: Int!, $changes: BankAccount_set_input) {\n    update_BankAccount_by_pk(pk_columns: { id: $id }, _set: $changes) {\n      id\n    }\n  }\n"]))),y=n(42283),Z=n(79665),O=n(76600),w=n(49501),S=n(55563),I=n(58594),P=n(74231),k=(0,P.Ry)().shape({bank:(0,P.Z_)().required(),accountNumber:(0,P.Z_)().required(),bic:(0,P.Z_)().required(),iban:(0,P.Z_)().required(),routingNumber:(0,P.Z_)().required()}),_=n(85893);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach(function(t){(0,c.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var A=function(e){var t,n=e.accountId,o=e.data,r=e.refetch,c=e.toggleShow,i=(0,y.cI)({defaultValues:o,resolver:(0,Z.S)(k)}),a=i.errors,s=i.handleSubmit,u=i.register,l=(0,b.D)(g,{onCompleted:function(){r()}}),d=(0,f.Z)(l,1)[0],p=(0,b.D)(x,{onCompleted:function(){r()}}),j=(0,f.Z)(p,1)[0],h=(t=(0,m.Z)(v().mark(function e(t){var r;return v().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=C({},t)).stripeId="ba_42g2s45sh46jl46h",r.accountId=n,r.status="active",r.countryId=1,r.currencyId=1,r.meta={showInInvoice:Boolean(r.showInInvoice)},delete r.showInInvoice,!(null!=o&&o.id)){e.next=12;break}j({variables:{id:o.id,changes:r}}),e.next=14;break;case 12:return e.next=14,d({variables:{objects:[r]}});case 14:c();case 15:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),P={errors:a,register:u};return(0,_.jsxs)(O.Z,{id:"offCanvasForm",handleSubmit:s(h),children:[(0,_.jsx)(w.Z,{label:"Bank name",children:(0,_.jsx)(S.Z,C(C({},P),{},{name:"bank"}))}),(0,_.jsx)(w.Z,{label:"Account number",children:(0,_.jsx)(S.Z,C(C({},P),{},{name:"accountNumber"}))}),(0,_.jsx)(w.Z,{label:"Routing number",children:(0,_.jsx)(S.Z,C(C({},P),{},{name:"routingNumber"}))}),(0,_.jsx)(w.Z,{label:"BIC",children:(0,_.jsx)(S.Z,C(C({},P),{},{name:"bic"}))}),(0,_.jsx)(w.Z,{label:"IBAN",children:(0,_.jsx)(S.Z,C(C({},P),{},{name:"iban"}))}),(0,_.jsx)(I.Z,C(C({},P),{},{data:[{id:"1",label:"Show in invoice",value:"true"}],name:"showInInvoice"}))]})},E=n(58095);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}var T=function(e){var t=e.accountId,n=e.data,o=e.edit,r=e.refetch,m=(0,E.a)(),f=[{hidden:!0},{text:"Bank"},{text:"Account number"},{text:"Routing"},{text:"BIC"},{text:"IBAN"},{text:"Stripe ID",hidden:!0},{text:"Date Added"},{formatter:function(e){return!0===e.row.showInInvoice?"True":"False"},text:"Show In Invoice"},{formatter:i.Z,formatterData:[{context:"secondary",icon:["fas","edit"],onClick:function(e,t){return b(e,t)},tooltip:"Edit"}],text:"Actions"}],p=function(e){var t,n;return{id:e.id,bank:null==e?void 0:e.bank,accountNumber:null==e?void 0:e.accountNumber,routingNumber:null==e?void 0:e.routingNumber,bic:null==e?void 0:e.bic,iban:null==e?void 0:e.iban,stripeId:e.stripeId,date:(0,a.Z)(e.createdAt),showInInvoice:null!==(t=e.meta)&&void 0!==t&&!!t.showInInvoice&&(null===(n=e.meta)||void 0===n?void 0:n.showInInvoice),actions:""}},v=function(e){e.stopPropagation(),m.show({content:(0,_.jsx)(A,{accountId:t,refetch:r,toggleShow:m.close}),title:"Add Bank Account"})},b=function(e,n){e.stopPropagation(),m.show({content:(0,_.jsx)(A,{accountId:t,data:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach(function(t){(0,c.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n)||{},refetch:r,toggleShow:m.close}),title:"Add Bank Account"})},j=function(){return(0,_.jsx)(s.Z,{children:(0,_.jsx)(u.Z,{context:"secondary",content:"Add",onClick:v,size:"sm"})})};return(0,_.jsx)(l.Z,{open:!0,title:"Bank Accounts",toolbar:o&&(0,_.jsx)(j,{}),children:(0,_.jsx)(d.Z,{columns:f,rows:n.map(function(e){return p(e)})})})};T.defaultProps={data:[],edit:!0}},3654:function(e,t,n){"use strict";n.d(t,{i:function(){return j}});var o=n(50029),r=n(16835),c=n(64687),i=n.n(c),a=n(93645),s=n(50319),u=n(69496),l=n(77439),d=n(27812),m=n(59499);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,m.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=function(e,t){var n=Object.values(e.integration.google).filter(function(e){return e.profile.email!==t});return Object.assign({},e,{integration:p(p({},e.integration),{},{google:(0,d.Z)(n)})})},b=n(85893),j=function(e){var t,n,c=e.credentials,d=c.id,m=c.type,f=e.isLoggedIn,p=e.refetch,j=e.meta,h=e.email,g=(0,s.D)(u.a8,{onCompleted:p}),x=(0,r.Z)(g,1)[0],y=(0,s.D)(u.$E,{onCompleted:p}),Z=(0,r.Z)(y,1)[0],O=(0,s.D)(u.uz,{onCompleted:p}),w=(0,r.Z)(O,1)[0],S=(t=(0,o.Z)(i().mark(function e(t){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.code){e.next=8;break}if("admin"!==m){e.next=6;break}return e.next=4,x({variables:{code:t.code,id:d,type:m}});case 4:e.next=8;break;case 6:return e.next=8,x({variables:{code:t.code,id:d,type:m}});case 8:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),I=(n=(0,o.Z)(i().mark(function e(){var t;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=v(j,h),e.t0=m,e.next="admin"===e.t0?4:"user"===e.t0?7:10;break;case 4:return e.next=6,Z({variables:{accountId:d,set:{meta:t}}});case 6:case 9:case 10:return e.abrupt("break",11);case 7:return e.next=9,w({variables:{userId:d,meta:t}});case 11:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),P=function(e){};return f?(0,b.jsx)(a.GoogleLogout,{clientId:"69900974658-9rikek80a7b20gcigfeo3fv0r3qilqtp.apps.googleusercontent.com",onLogoutSuccess:I,onFailure:P,render:function(e){return(0,b.jsx)(l.Z,{context:"secondary",content:"Sign Out",onClick:e.onClick,size:"sm"})}}):(0,b.jsx)(a.GoogleLogin,{accessType:"offline",prompt:"select_account",clientId:"69900974658-9rikek80a7b20gcigfeo3fv0r3qilqtp.apps.googleusercontent.com",isSignedIn:!0,onSuccess:S,onFailure:S,render:function(e){return(0,b.jsx)(l.Z,{context:"secondary",content:"Sign In",onClick:e.onClick,size:"sm"})},responseType:"code",scope:"https://mail.google.com"})}},74122:function(e,t,n){"use strict";n.d(t,{e:function(){return f}});var o=n(50029),r=n(16835),c=n(64687),i=n.n(c),a=n(50319),s=n(69496),u=n(77439),l=n(85893),d=function(e){var t=e.signOutHandler;return(0,l.jsx)(u.Z,{context:"secondary",content:"Sign Out",onClick:t,size:"sm"})},m=function(e){var t=e.handleLogin;return(0,l.jsx)(u.Z,{context:"secondary",content:"Sign In",onClick:t,size:"sm"})},f=function(e){var t,n,c=e.credentials,u=c.id,f=c.type,p=e.isLoggedIn,v=e.refetch,b=e.email,j=(0,a.D)(s.r1),h=(0,r.Z)(j,1)[0],g=(0,a.D)(s.MT,{onCompleted:v}),x=(0,r.Z)(g,1)[0],y=(t=(0,o.Z)(i().mark(function e(){var t,n,o,r,c;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){var t=e.url,n=e.title,o=e.w,r=e.h,c=void 0!==window.screenLeft?window.screenLeft:window.screenX,i=void 0!==window.screenTop?window.screenTop:window.screenY,a=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,s=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,u=a/window.screen.availWidth,l=(a-o)/2/u+c,d=(s-r)/2/u+i,m=window.open(t,n,"\n\n        width=".concat(o/u,",\n        height=").concat(r/u,",\n        top=").concat(d,",\n        left=").concat(l,"\n        "));window.focus&&m.focus()},e.next=3,h({variables:{id:u,type:f}});case 3:if(!(n=e.sent).error){e.next=8;break}return e.abrupt("return",console.error("Error:",n.error));case 8:(c=(null==n?void 0:null===(o=n.data)||void 0===o?void 0:o.genenrateMSURL).url)&&t({url:c,title:"microsoft",h:690,w:650});case 10:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),Z=(n=(0,o.Z)(i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x({variables:{id:u,type:f,email:b}});case 2:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return p?(0,l.jsx)(d,{signOutHandler:Z}):(0,l.jsx)(m,{handleLogin:y})}},8846:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return t_}});var o,r,c,i,a,s,u,l,d,m,f,p=n(6812),v=n(71383),b=n(75063),j=(0,b.Ps)(o||(o=(0,v.Z)(["\n  mutation UpdateAccount($accountId: Int!, $account: Account_set_input) {\n    update_Account_by_pk(pk_columns: { id: $accountId }, _set: $account) {\n      id\n    }\n  }\n"]))),h=(0,b.Ps)(r||(r=(0,v.Z)(['\n  query GetFinanceSetting($id: Int!) {\n    account: Account_by_pk(id: $id) {\n      addresses: Addresses(where: { entity: { _eq: "Account" } }) {\n        id\n        registered\n        operating\n        trading\n        invoice\n        status\n        createdAt\n        address: Address {\n          id\n          name\n          addressLine1\n          addressLine2\n          addressLine3\n          city\n          county\n          geo\n          postCode\n          country: Country {\n            id\n            name\n          }\n        }\n      }\n      id\n      media: Media(\n        where: { entity: { _eq: "Account" }, Medium: { category: { _eq: "emailLogo" } } }\n        limit: 1\n        order_by: { createdAt: desc }\n      ) {\n        id\n        item: Medium {\n          id\n          filename\n        }\n      }\n      bankAccounts: BankAccounts {\n        id\n        bank\n        stripeId\n        accountNumber\n        routingNumber\n        bic\n        iban\n        status\n        default\n        createdAt\n        meta\n      }\n      meta\n    }\n  }\n']))),g=n(16551),x=n(77439),y=n(9270),Z=n(62140),O=n(58965),w=n(16387),S=n(19056),I=n(53141),P=n(9205),k=n(10367),_=n(34953),D=n(51466),C=n(65414),A=n(74122),E=n(3654),N=n(11163),T=n(5616),z=n(40755),$=n(85893),q=function(e){var t=e.credentials.id,n=e.isLoggedIn,o=e.refetch,r=(0,N.useRouter)().query,c=(0,z.BR)({adminId:t,xeroClientId:r.clientId||null,onSaveXeroTokenCallback:function(e){return o()}}),i=c.tokenStatus,a=c.onCallRefreshToken,s=c.onCallAuthorize,u=function(){(0,z.bE)(t,{auth_status:"disconnected",token:null},!0),o()};if(!n)return(0,$.jsx)(x.Z,{context:"secondary",content:"Sign In",onClick:function(){return s()},size:"sm"});var l="expired"===i?a:s;return(0,$.jsxs)(T.Z,{sx:{display:"flex",flexDirection:"row"},children:[(0,$.jsx)(x.Z,{context:"secondary",content:"authorized"!==i?"Token Expired. Click to refresh":"Connected",disabled:"authorized"===i,onClick:function(){return l()},size:"sm",style:{marginRight:"10px"}}),(0,$.jsx)(x.Z,{context:"secondary",content:"Sign Out",onClick:u,size:"sm"})]})},L=n(67294),R=n(78289),B=n(59499),M=n(16835),F=n(76600),H=n(49501),V=n(55563),U=n(50319),G=(0,b.Ps)(c||(c=(0,v.Z)(["\n  mutation SetSageUrl($accountId: Int!, $meta: jsonb!) {\n    update_Account_by_pk(pk_columns: { id: $accountId }, _set: { meta: $meta }) {\n      id\n    }\n  }\n"]))),Q=n(42283),W=n(79665),X=n(74231);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach(function(t){(0,B.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var K=function(e){var t,n=e.account,o=e.onSuccess,r=(0,L.useState)(""),c=r[0],i=r[1],a=(0,Q.cI)({defaultValues:{url:null===(t=n.meta)||void 0===t?void 0:t.sageUrl},resolver:(0,W.S)((0,X.Ry)().shape({url:(0,X.Z_)().url().required()}))}),s=a.control,u=a.errors,l=a.handleSubmit,d=a.register,m=(0,U.D)(G,{onCompleted:o,onError:function(e){i(e.message)}}),f=(0,M.Z)(m,1)[0],p=function(e){var t=e.url,o=Y({},n.meta)||{};o.sageUrl=t||"",f({variables:{accountId:n.id,meta:o}})};return(0,$.jsxs)(F.Z,{handleSubmit:l(p),children:[(0,$.jsx)(H.Z,{label:"Sage Url",children:(0,$.jsx)(V.Z,Y(Y({},{control:s,errors:u,register:d}),{},{name:"url"}))}),(0,$.jsx)(D.Z,{context:"danger",children:c})]})},ee=function(e){var t=e.account,n=e.refetch,o=function(){r.close(),n()},r=(0,L.useContext)(R.Z),c=function(e){r.show({content:(0,$.jsx)(K,{account:t,onSuccess:o}),submit:!0,title:"Sage Middleware URL"})};return(0,$.jsx)(x.Z,{context:"secondary",content:"Settings",onClick:c,size:"sm"})},et=n(45697),en=n(69496);function eo(e){var t,n,o,r,c,i,a,s,u,l=(0,p.a)(en.nE,{variables:{id:e}}),d=l.loading,m=l.data,f=l.refetch,v=null==m?void 0:null===(t=m.account)||void 0===t?void 0:t.meta,b={google:[],microsoft:[],sage:!1,xero:{clientId:null,auth_status:"unauthenticated",companyId:null,token:null}};return d||(b={google:(null==v?void 0:null===(n=v.integration)||void 0===n?void 0:null===(o=n.google)||void 0===o?void 0:o.length)>0&&Object.values(null==v?void 0:null===(r=v.integration)||void 0===r?void 0:r.google)||[],microsoft:(null==v?void 0:null===(c=v.integration)||void 0===c?void 0:null===(i=c.microsoft)||void 0===i?void 0:i.length)>0&&Object.values(null==v?void 0:null===(a=v.integration)||void 0===a?void 0:a.microsoft)||[],xero:(null==v?void 0:null===(s=v.integration)||void 0===s?void 0:s.xero)||{authorization_code:null,auth_status:"unauthenticated",companyId:null,token:null},sage:!!(null!=v&&null!==(u=v.modules)&&void 0!==u&&u.sageIntegration&&v.modules.sageIntegration.length>0)}),{loading:d,integration:b,refetch:f}}eo.propTypes={accountId:et.number.isRequired};var er=n(94568),ec=function(e){var t,n=e.account,o=e.user,r=eo(n.id),c=r.integration,i=r.refetch,a=(0,er.s)();return(0,$.jsxs)(O.Z,{fitParentHeight:!0,open:!0,title:"Integrations",children:[(0,$.jsxs)(y.Z,{align:"center",children:[(0,$.jsx)(Z.Z,{md:2,children:(0,$.jsx)(_.Z,{alt:"Microsoft Outlook",src:"/static/logo/Microsoft_Outlook-Logo.svg"})}),(0,$.jsxs)(Z.Z,{md:6,children:[(0,$.jsx)(D.Z,{content:"Microsoft Outlook"}),(0,$.jsx)(D.Z,{content:"Add new account integrate with your corporate Outlook mail",size:"sm"})]}),(0,$.jsx)(Z.Z,{md:4,children:(0,$.jsx)(A.e,{credentials:{id:n.id,type:"admin"},isLoggedIn:!1,refetch:i})})]}),(0,$.jsxs)(y.Z,{align:"center",children:[(0,$.jsx)(Z.Z,{md:2,children:(0,$.jsx)(_.Z,{alt:"Gmail",src:"/static/logo/Gmail-logo.svg"})}),(0,$.jsxs)(Z.Z,{md:6,children:[(0,$.jsx)(D.Z,{content:"Gmail"}),(0,$.jsx)(D.Z,{content:"Add new account integrate with your corporate Gmail ",size:"sm"})]}),(0,$.jsx)(Z.Z,{md:4,children:(0,$.jsx)(E.i,{credentials:{id:n.id,type:"admin"},isLoggedIn:!1,refetch:i,meta:n.meta})})]}),!a&&(0,$.jsxs)(y.Z,{align:"center",children:[(0,$.jsx)(Z.Z,{md:2,style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,$.jsx)(_.Z,{style:{width:"50%",height:"50%"},alt:"Xero",src:"/static/logo/xero-logo.png"})}),(0,$.jsxs)(Z.Z,{md:6,children:[(0,$.jsx)(D.Z,{content:"Xero"}),(0,$.jsx)(D.Z,{content:"Add new account integrate with your corporate Xero ",size:"sm"})]}),(0,$.jsx)(Z.Z,{md:4,children:(0,$.jsx)(q,{credentials:{id:o.id,type:"admin"},isLoggedIn:!!(null!==(t=(0,z.RM)(o.id))&&void 0!==t&&t.companyId),refetch:i})})]}),c.microsoft.map(function(e){var t=e.profile,o=t.name,r=t.email,c=t.picture;return(0,$.jsxs)(ei,{align:"center",children:[(0,$.jsx)(Z.Z,{md:2,style:{display:"flex",justifyContent:"center"},children:c?(0,$.jsx)(C.Z,{context:"primary",size:"sm",src:c}):(0,$.jsx)(C.Z,{context:"primary",size:"sm",content:o})}),(0,$.jsxs)(Z.Z,{md:6,children:[(0,$.jsx)(D.Z,{content:r}),(0,$.jsx)(D.Z,{content:o,size:"sm"})]}),(0,$.jsx)(Z.Z,{md:4,children:(0,$.jsx)(A.e,{credentials:{id:n.id,type:"admin"},isLoggedIn:!0,refetch:i,email:r})})]})}),c.google.map(function(e){var t=e.profile,o=t.name,r=t.email,c=t.picture;return(0,$.jsxs)(ei,{children:[(0,$.jsx)(Z.Z,{md:2,style:{display:"flex",justifyContent:"center"},children:c?(0,$.jsx)(C.Z,{context:"primary",size:"sm",src:c}):(0,$.jsx)(C.Z,{context:"primary",size:"sm",content:o})}),(0,$.jsxs)(Z.Z,{md:6,children:[(0,$.jsx)(D.Z,{content:r}),(0,$.jsx)(D.Z,{content:o,size:"sm"})]}),(0,$.jsx)(Z.Z,{md:4,children:(0,$.jsx)(E.i,{credentials:{id:n.id,type:"admin"},isLoggedIn:!0,refetch:i,meta:n.meta,email:r})})]})}),c.sage&&(0,$.jsxs)(y.Z,{align:"center",children:[(0,$.jsx)(Z.Z,{md:2,children:(0,$.jsx)(_.Z,{alt:"Sage",src:"/static/logo/Sage-Logo.svg"})}),(0,$.jsxs)(Z.Z,{md:6,children:[(0,$.jsx)(D.Z,{content:"Sage"}),(0,$.jsx)(D.Z,{content:"Set your sage-middle ware URL",size:"sm"})]}),(0,$.jsx)(Z.Z,{md:4,children:(0,$.jsx)(ee,{account:n,refetch:i})})]})]})},ei=(0,k.ZP)(y.Z).withConfig({displayName:"admin__StyledRowList",componentId:"sc-741lta-0"})(["margin-bottom:7px;"]),ea=(0,b.Ps)(i||(i=(0,v.Z)(["\n  mutation UpdateAccount($accountId: Int!, $account: Account_set_input) {\n    update_Account_by_pk(pk_columns: { id: $accountId }, _set: $account) {\n      id\n    }\n  }\n"]))),es=n(68956),eu=n(74297),el=n(16540),ed=n(50029),em=n(64687),ef=n.n(em),ep=(0,X.Ry)().shape({from:(0,X.Z_)().required().matches("^([0-1][0-9]|[2][0-3]):([0-5][0-9])$"),to:(0,X.Z_)().required().matches("^([0-1][0-9]|[2][0-3]):([0-5][0-9])$")});function ev(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function eb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ev(Object(n),!0).forEach(function(t){(0,B.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ev(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ej=function(e){e.accountId;var t=e.defaultValues,n=e.onSubmit;e.refetch;var o,r=(0,Q.cI)({defaultValues:eb({},t),resolver:(0,W.S)(ep)}),c=r.control,i=r.errors,a=r.handleSubmit,s=r.register,u=(o=(0,ed.Z)(ef().mark(function e(o){var r,c;return ef().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c=eb({id:t.id},o)||{},n(c);case 3:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)}),l={control:c,errors:i,register:s};return(0,$.jsxs)(F.Z,{id:"offCanvasForm",handleSubmit:a(u),children:[(0,$.jsx)(H.Z,{label:"Name",children:(0,$.jsx)(V.Z,eb(eb({},l),{},{name:"name",readOnly:!0}))}),(0,$.jsx)(H.Z,{label:"From",children:(0,$.jsx)(V.Z,eb(eb({},l),{},{name:"from"}))}),(0,$.jsx)(H.Z,{label:"To",children:(0,$.jsx)(V.Z,eb(eb({},l),{},{name:"to"}))})]})},eh=n(58095);function eg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function ex(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eg(Object(n),!0).forEach(function(t){(0,B.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eg(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ey=function(e){var t,n=e.accountId,o=e.meta,r=e.refetch,c=(0,eh.a)(),i=(null==o?void 0:o.timeSegment)||[{id:1,name:"Normal",from:"08:00",to:"18:00"},{id:2,name:"OOH",from:"18:00",to:"22:00"},{id:3,name:"Premium",from:"22:00",to:"08:00"}],a=(0,U.D)(ea,{onCompleted:function(){r&&r(),c.close()}}),s=(0,M.Z)(a,1)[0],u=function(e){var t=ex({},e)||{};c.show({content:(0,$.jsx)(ej,{accountId:n,defaultValues:t,onSubmit:l,refetch:r}),title:"Edit Time Segment"})},l=function(e){var t={};t.meta=ex({},o)||{};var r=i.map(function(t){return t.id===e.id?e:ex({},t)});t.meta.timeSegment=r,s({variables:{accountId:n,account:t}})},d=[{hidden:!0},{text:"Name"},{text:"From"},{text:"To"},{formatter:es.Z,formatterData:[{context:"secondary",icon:["fas","edit"],onClick:(t={editClick:function(e,t){return u(t)}}).editClick,tooltip:"Edit"}],text:"Actions"}];return(0,$.jsx)(O.Z,{open:!0,title:"Time Segments",children:(0,$.jsx)(el.Z,{columns:d,rows:i.map(function(e){return{id:e.id,name:(0,eu.Z)(e.name),from:e.from,to:e.to,actions:""}})})})},eZ=n(86036),eO=n(15214),ew=(0,b.Ps)(a||(a=(0,v.Z)(["\n  mutation UpdateAccount($accountId: Int!, $account: Account_set_input) {\n    update_Account_by_pk(pk_columns: { id: $accountId }, _set: $account) {\n      id\n    }\n  }\n"]))),eS=n(84043),eI=n(13575),eP=(0,X.Ry)().shape({timeZone:(0,X.Ry)().shape({label:(0,X.Z_)().required(),value:(0,X.Z_)().required()})});function ek(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function e_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ek(Object(n),!0).forEach(function(t){(0,B.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ek(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eD=function(e){var t,n=e.account,o=e.onSubmit,r=null==n?void 0:null===(t=n.meta)||void 0===t?void 0:t.timeZone,c={};c.timeZone=r||{value:"Europe/London",label:"Europe/London +00:00"};var i,a=(0,Q.cI)({defaultValues:c,resolver:(0,W.S)(eP)}),s=a.control,u=a.errors,l=a.handleSubmit,d=a.register,m=(0,U.D)(ew,{onCompleted:function(e){o()}}),f=(0,M.Z)(m,1)[0],p=(i=(0,ed.Z)(ef().mark(function e(t){var o;return ef().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(o=e_({},n.meta)||{}).timeZone=e_({},t.timeZone),f({variables:{accountId:n.id,account:{meta:o}}});case 3:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)});return(0,$.jsx)(F.Z,{id:"offCanvasForm",handleSubmit:l(p),children:(0,$.jsx)(eS.Z,e_(e_({options:(0,eI.r)()},{control:s,errors:u,register:d}),{},{name:"timeZone"}))})},eC=function(e){var t,n,o=e.account,r=e.refetch,c=(0,eh.a)(),i=null==o?void 0:null===(t=o.meta)||void 0===t?void 0:null===(n=t.timeZone)||void 0===n?void 0:n.label,a=function(e){c.close(),r()},s=function(e){e.stopPropagation(),c.show({content:(0,$.jsx)(eD,{account:o,onSubmit:a}),title:"Set Time Zone"})},u=function(){return(0,$.jsx)(g.Z,{children:(0,$.jsx)(x.Z,{context:"secondary",content:i?"Edit":"Add",onClick:s,size:"sm"})})};return(0,$.jsxs)(O.Z,{open:!0,toolbar:(0,$.jsx)(u,{}),title:"Set Time Zone",children:[i&&(0,$.jsx)(eZ.Z,{content:"Time Zone:",text:i}),!i&&(0,$.jsx)(eO.Z,{content:"You should set your time zone"})]})},eA=(0,b.Ps)(s||(s=(0,v.Z)(['\n  query GetInvoiceStart($id: Int!) {\n    account: Account_by_pk(id: $id) {\n      id\n      meta\n      invoiceStart\n      media: Media(\n        where: { entity: { _eq: "Account" }, Medium: { category: { _eq: "invoiceLogo" } } }\n        limit: 1\n        order_by: { createdAt: desc }\n      ) {\n        id\n        item: Medium {\n          id\n          filename\n        }\n      }\n    }\n  }\n']))),eE=(0,b.Ps)(u||(u=(0,v.Z)(["\n  mutation UpdateAccount($accountId: Int!, $account: Account_set_input) {\n    update_Account_by_pk(pk_columns: { id: $accountId }, _set: $account) {\n      id\n    }\n  }\n"]))),eN=n(55377),eT=n(55843),ez=n(85011),e$=(0,X.Ry)().shape({invoiceStart:(0,X.Rx)().when("$hasInvoiceStart",{is:!0,then:(0,X.Rx)().positive("Must be more than 0").integer("Must be more than 0")}),contactPhoneNumber:(0,X.Z_)().required(),invoiceDueDate:(0,X.Rx)().required()});function eq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function eL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eq(Object(n),!0).forEach(function(t){(0,B.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eq(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eR=function(e){var t,n=e.account,o=e.accountId,r=e.refetch,c=(0,eh.a)(),i=!!n.invoiceStart,a=(0,Q.cI)({defaultValues:eL(eL({},n.meta.finance),{},{invoiceStart:n.invoiceStart||1}),context:{hasInvoiceStart:i},resolver:(0,W.S)(e$)}),s=a.errors,u=a.handleSubmit,l=a.register,d=(0,U.D)(eE,{onCompleted:function(e){r(),c.close()}}),m=(0,M.Z)(d,1)[0],f={errors:s,register:l},p=function(e){var t=eL({},n.meta)||{};t.finance=eL(eL({},t.finance),{},{contactPhoneNumber:e.contactPhoneNumber,invoiceDueDate:e.invoiceDueDate}),m({variables:{accountId:o,account:{meta:t,invoiceStart:e.invoiceStart}}})};return(0,$.jsxs)(F.Z,{id:"offCanvasForm",handleSubmit:u(p),children:[(0,$.jsx)(V.Z,eL(eL({},f),{},{name:"checkInvoiceStart",value:!0,type:"hidden"})),!i&&(0,$.jsxs)(H.Z,{label:"Invoice Start #",children:[(0,$.jsx)(V.Z,eL(eL({},f),{},{name:"invoiceStart"})),(null===(t=s.invoiceStart)||void 0===t?void 0:t.message)||""]}),(0,$.jsx)(H.Z,{label:"Contact Phone Number",children:(0,$.jsx)(V.Z,eL(eL({},f),{},{name:"contactPhoneNumber"}))}),(0,$.jsx)(H.Z,{label:"Invoice Due Date",children:(0,$.jsx)(V.Z,eL(eL({},f),{},{name:"invoiceDueDate"}))})]})},eB=n(72936),eM=function(){var e,t,n,o,r=(0,eh.a)(),c=(0,eB.x)().user,i=(0,p.a)(eA,{skip:!c.accountId,variables:{id:c.accountId}}),a=i.data,s=(a=void 0===a?{account:[]}:a).account,u=i.loading,l=i.refetch,d=s.invoiceStart,m=null===(e=s.meta)||void 0===e?void 0:null===(t=e.finance)||void 0===t?void 0:t.contactPhoneNumber,f=null===(n=s.meta)||void 0===n?void 0:null===(o=n.finance)||void 0===o?void 0:o.invoiceDueDate,v=function(e){e.stopPropagation(),r.show({content:(0,$.jsx)(eR,{accountId:c.accountId,account:s,refetch:l}),title:"Invoice Settings"})},b=function(e){l(),r.close()},j=function(){r.show({content:(0,$.jsx)(ez.z,{accept:"image/*",category:"invoiceLogo",entity:"Account",entityId:c.accountId,expiryShow:!1,onSuccess:b,type:"image"}),title:"Invoice logo"})},h=function(){return(0,$.jsx)(x.Z,{content:"Edit",context:"secondary",onClick:v,size:"sm"})};return!u&&(0,$.jsxs)(O.Z,{fitParentHeight:!0,open:!0,title:"Invoice Settings",toolbar:(0,$.jsx)(h,{}),children:[!!d&&(0,$.jsx)(eO.Z,{context:"success",content:"An invoice start has already been locked in so cannot be edited"}),(0,$.jsx)(eZ.Z,{content:"Invoice start #",text:d||1}),(0,$.jsx)(eZ.Z,{content:"Contact Phone Number",text:m||"-"}),(0,$.jsx)(eZ.Z,{content:"Invoice Due Date",text:f||"-"}),(0,$.jsx)(eN.Z,{}),(0,$.jsx)(D.Z,{children:"Invoice logo"}),s.media&&s.media[0]&&(0,$.jsx)(_.Z,{alt:"Invoice logo",src:"".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(s.media[0].item.filename),width:200}),(0,$.jsx)(eT.Z,{marginTop:"sm"}),(0,$.jsx)(x.Z,{context:"secondary",content:"Manage logo",onClick:j,size:"sm"})]})},eF=(0,X.Ry)().shape({contactEmail:(0,X.Z_)().email().required(),replyToEmail:(0,X.Z_)().email().required(),replyToName:(0,X.Z_)().required(),contactAddress:(0,X.Z_)().required()});function eH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function eV(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eH(Object(n),!0).forEach(function(t){(0,B.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eH(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eU=function(e){var t,n,o=e.account,r=e.accountId,c=e.handleSuccess,i=null==o?void 0:null===(t=o.meta)||void 0===t?void 0:t.emailSettings,a=(0,Q.cI)({defaultValues:eV({},i),resolver:(0,W.S)(eF)}),s=a.control,u=a.errors,l=a.handleSubmit,d={control:s,errors:u,register:a.register},m=(0,U.D)(j,{onCompleted:function(){c()}}),f=(0,M.Z)(m,1)[0],p=(n=(0,ed.Z)(ef().mark(function e(t){var n;return ef().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(n=eV({},o.meta)||{}).emailSettings=eV({},t),f({variables:{accountId:r,account:{meta:n}}});case 3:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)});return(0,$.jsxs)(F.Z,{id:"offCanvasForm",handleSubmit:l(p),children:[(0,$.jsx)(H.Z,{label:"Contact Email",children:(0,$.jsx)(V.Z,eV(eV({},d),{},{name:"contactEmail"}))}),(0,$.jsx)(H.Z,{label:"Reply To Email",children:(0,$.jsx)(V.Z,eV(eV({},d),{},{name:"replyToEmail"}))}),(0,$.jsx)(H.Z,{label:"Reply To Name",children:(0,$.jsx)(V.Z,eV(eV({},d),{},{name:"replyToName"}))}),(0,$.jsx)(H.Z,{label:"Contact Address",children:(0,$.jsx)(V.Z,eV(eV({},d),{},{name:"contactAddress"}))})]})},eG=function(e){var t,n,o,r,c,i,a,s=e.account,u=e.accountId,l=e.refetch,d=null==s?void 0:null===(t=s.meta)||void 0===t?void 0:t.emailSettings,m=(0,eh.a)(),f=function(e){e.stopPropagation(),m.show({content:(0,$.jsx)(eU,{account:s,accountId:u,handleSuccess:p}),title:"Email Settings"})},p=function(e){l(),m.close()},v=function(){m.show({content:(0,$.jsx)(ez.z,{accept:"image/*",category:"emailLogo",entity:"Account",entityId:u,expiryShow:!1,onSuccess:p,type:"image"}),title:"Invoice logo"})},b=function(){return(0,$.jsx)(x.Z,{content:"Edit",context:"secondary",onClick:f,size:"sm"})};return(0,$.jsxs)(O.Z,{fitParentHeight:!0,open:!0,title:"Email Settings",toolbar:(0,$.jsx)(b,{}),children:[(0,$.jsx)(eZ.Z,{content:"Contact Email",text:null!==(n=null==d?void 0:d.contactEmail)&&void 0!==n?n:"-"}),(0,$.jsx)(eZ.Z,{content:"Reply To Email",text:null!==(o=null==d?void 0:d.replyToEmail)&&void 0!==o?o:"-"}),(0,$.jsx)(eZ.Z,{content:"Reply To Name",text:null!==(r=null==d?void 0:d.replyToName)&&void 0!==r?r:"-"}),(0,$.jsx)(eZ.Z,{content:"Contact Address",text:null!==(c=null==d?void 0:d.contactAddress)&&void 0!==c?c:"-"}),(0,$.jsx)(eN.Z,{}),(0,$.jsx)(D.Z,{children:"Email Logo"}),(0,$.jsx)(eZ.Z,{content:"Important!",text:"To use the uploaded email logo, please open the relevant emails on the Events page and click the Submit button."}),(0,$.jsx)(_.Z,{alt:"Email Logo",src:"".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(null===(i=s.media[0])||void 0===i?void 0:null===(a=i.item)||void 0===a?void 0:a.filename),onError:function(e){return e.target.src="https://i.ibb.co/JdhCmnT/Cleverly-logo-black.png"},width:200}),(0,$.jsx)(eT.Z,{marginTop:"sm"}),(0,$.jsx)(x.Z,{context:"secondary",content:"Manage logo",onClick:v,size:"sm"})]})},eQ=(0,b.Ps)(l||(l=(0,v.Z)(['\n  query GetInvoiceStart($id: Int!) {\n    account: Account_by_pk(id: $id) {\n      id\n      meta\n      media: Media(\n        where: {\n          entity: { _eq: "Account" }\n          Medium: { category: { _in: ["themeLogo", "themeFavicon"] } }\n        }\n        order_by: { createdAt: desc }\n      ) {\n        id\n        item: Medium {\n          id\n          filename\n          category\n        }\n      }\n    }\n  }\n']))),eW=(0,b.Ps)(d||(d=(0,v.Z)(["\n  mutation UpdateAccount($accountId: Int!, $account: Account_set_input) {\n    update_Account_by_pk(pk_columns: { id: $accountId }, _set: $account) {\n      id\n      meta\n    }\n  }\n"]))),eX=n(55863),eJ=n(6167),eY=[{title:"Navbar",value:"NAVBAR",items:[{title:"Background",value:"background"},{title:"Top border",value:"borderTopColor"},{title:"Active colour",value:"colourActive"},{title:"Caret hover colour",value:"caretColourHover"},{title:"Dropdown active",value:"dropdownActive"},{title:"Dropdown background",value:"dropdownBackground"},{title:"Dropdown hover background",value:"dropdownBackgroundHover"},{title:"Dropdown colour",value:"dropdownColour"},{title:"Dropdown hover colour",value:"dropdownColourHover"},{title:"Overlay background",value:"backgroundOverlay"},{title:"Toggler",value:"colourToggler"},{title:"Link color",value:"colourDefault"},{title:"Desktop link color",value:"colourDefaultDesktop"},{title:"List item background",value:"backgroundHoverListItem"}]}],eK=k.ZP.div.withConfig({displayName:"helpers__StyledField",componentId:"sc-1w9z8m8-0"})(["align-items:center;display:flex;margin-top:3px;margin-bottom:5px;"]),e0=k.ZP.div.withConfig({displayName:"helpers__StyledColour",componentId:"sc-1w9z8m8-1"})(["background-color:",";border:1px solid #ddd;height:1rem;margin-right:0.25rem;width:1rem;"],function(e){return e.color}),e1=n(27812),e6=n(82492),e5=n.n(e6),e2=n(55651),e3=n(16765),e9=n(62675),e4=n(33006);function e8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function e7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e8(Object(n),!0).forEach(function(t){(0,B.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e8(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var te=function(e){var t,n,o,r=e.account,c=e.handleSuccess,i=(0,eJ.Z)(),a=i.theme,s=i.setTheme,u=(0,e9.Z)(),l=u.config,d=u.setConfig,m=(0,U.D)(eW,{onCompleted:function(){},update:function(e,t){var n=e7(e7({},t.data.update_Account_by_pk),{},{media:(0,e1.Z)(r.media)}),o={id:r.id};e.writeQuery({query:eQ,variables:o,data:{account:n}})}}),f=(0,M.Z)(m,1)[0],p={pageTitle:null==r?void 0:null===(t=r.meta)||void 0===t?void 0:null===(n=t.config)||void 0===n?void 0:null===(o=n.Brand)||void 0===o?void 0:o.name};eY.forEach(function(e){p[e.value]={},e.items.forEach(function(t){p[e.value][t.value]=(0,e3.Vi)(a[e.value][t.value]).toHex()})});var v,b=(0,Q.cI)({defaultValues:e7({},p)}),j=b.control,h=b.errors,g=b.setValue,x=b.handleSubmit,w=b.register,S=b.watch,I=(v=(0,ed.Z)(ef().mark(function e(t){var n,o;return ef().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=e7({},null==r?void 0:r.meta)||{}).themeSettings=e7({},t),(o=e7({},null==n?void 0:n.config)).Brand=e7({},null==o?void 0:o.Brand),o.Brand.name=t.pageTitle,n.config=o,s(e7({},t)),e.next=9,f({variables:{accountId:r.id,account:{meta:n}}});case 9:d(e7({},e5()(l,o))),c();case 11:case"end":return e.stop()}},e)})),function(e){return v.apply(this,arguments)}),P={control:j,errors:h,register:w};return(0,$.jsxs)(F.Z,{id:"offCanvasForm",handleSubmit:x(I),children:[(0,$.jsx)(H.Z,{label:"Page Title",children:(0,$.jsx)(V.Z,e7(e7({},P),{},{name:"pageTitle",placeholder:"Page Title"}))}),eY.map(function(e){return(0,$.jsxs)("div",{children:[(0,$.jsx)(e4.Z,{tag:"h3",content:e.title}),(0,$.jsx)("div",{children:e.items.map(function(t){var n=e.value+"."+t.value,o=(0,e3.Vi)(S(n)).toHex(),r=(0,$.jsxs)(eK,{children:[(0,$.jsx)(e0,{color:o})," ",t.title]});return(0,$.jsxs)(O.Z,{context:"white",title:r,children:[(0,$.jsx)(y.Z,{children:(0,$.jsx)(Z.Z,{md:3,children:(0,$.jsx)(V.Z,e7(e7({},P),{},{name:n}))})}),(0,$.jsx)(eT.Z,{}),(0,$.jsx)(e2.gW,{color:o,onChange:function(e){return g(n,e)}})]})})}),(0,$.jsx)(eT.Z,{})]})})]})},tt=function(){var e=(0,eB.x)().user,t=(0,eJ.Z)().theme,n=(0,eh.a)(),o=(0,eX.q)().refetchSettings,r=(0,p.a)(eQ,{variables:{id:e.accountId}}),c=r.data,i=(c=void 0===c?{account:[]}:c).account,a=r.loading,s=r.refetch,u=function(){o(),s(),n.close()},l=function(){n.show({content:(0,$.jsx)(ez.z,{accept:"image/*",category:"themeLogo",entity:"Account",entityId:e.accountId,expiryShow:!1,onSuccess:u,type:"image"}),title:"Theme logo"})},d=function(){n.show({content:(0,$.jsx)(ez.z,{accept:"image/*",category:"themeFavicon",entity:"Account",entityId:e.accountId,expiryShow:!1,onSuccess:u,type:"image"}),title:"Theme favicon"})},m=function(e){e.stopPropagation(),n.show({content:(0,$.jsx)(te,{account:i,handleSuccess:n.close}),title:"Theme"})},f=function(){return(0,$.jsx)(x.Z,{content:"Edit",context:"secondary",onClick:m,size:"sm"})},v=function(){var e,t,n,o=null==i?void 0:null===(e=i.meta)||void 0===e?void 0:null===(t=e.config)||void 0===t?void 0:null===(n=t.Brand)||void 0===n?void 0:n.name,r="black";return o&&""!==o||(o="No Title",r="initial"),(0,$.jsx)(D.Z,{content:o,context:r,tag:"h6"})},b="",j="";if((null==i?void 0:null===(h=i.media)||void 0===h?void 0:h.length)>0){var h,g,y,Z,w,S,I,P=(null==i?void 0:null===(S=i.media[0])||void 0===S?void 0:null===(I=S.item)||void 0===I?void 0:I.category)==="themeFavicon";b=!!P&&(null==i?void 0:i.media[0]),j=!P&&(null==i?void 0:i.media[0]),b?j=null==i?void 0:i.media.find(function(e){return"themeLogo"===e.item.category}):b=null==i?void 0:i.media.find(function(e){return"themeFavicon"===e.item.category})}return!a&&(0,$.jsxs)(O.Z,{fitParentHeight:!0,open:!0,title:"Theme Settings",toolbar:(0,$.jsx)(f,{}),children:[(0,$.jsx)(H.Z,{label:"Page Title",children:(0,$.jsx)(v,{})}),eY.map(function(e){return(0,$.jsxs)("div",{children:[(0,$.jsxs)(D.Z,{children:[e.title," "]}),(0,$.jsx)("div",{children:e.items.map(function(n){return(0,$.jsxs)(eK,{children:[(0,$.jsx)(e0,{color:t[e.value][n.value]})," ",n.title]},n.value)})}),(0,$.jsx)(eT.Z,{})]},e.value)}),(0,$.jsx)(D.Z,{children:"Theme logo"}),i.media[0]&&(0,$.jsx)(tn,{children:(0,$.jsx)(_.Z,{alt:"Theme logo",src:"".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(null===(g=j)||void 0===g?void 0:null===(y=g.item)||void 0===y?void 0:y.filename),onError:function(e){return e.target.src="/static/logo/icon-white.png"},width:200})}),(0,$.jsx)(eT.Z,{marginTop:"sm"}),(0,$.jsx)(x.Z,{context:"secondary",content:"Manage logo",onClick:l,size:"sm"}),(0,$.jsx)(eT.Z,{marginTop:"sm"}),(0,$.jsx)(D.Z,{children:"Theme favicon"}),i.media[0]&&(0,$.jsxs)(to,{children:[(0,$.jsx)(_.Z,{alt:"Theme logo",src:"/static/favicon/tab.svg",width:"100%"}),(0,$.jsx)(_.Z,{className:"favicon",alt:"Theme favicon",src:"".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(null===(Z=b)||void 0===Z?void 0:null===(w=Z.item)||void 0===w?void 0:w.filename),onError:function(e){return e.target.src="/static/favicon/CleverlyLogoBlack.png"},width:30})]}),(0,$.jsx)(eT.Z,{marginTop:"sm"}),(0,$.jsx)(x.Z,{context:"secondary",content:"Manage favicon",onClick:d,size:"sm"}),(0,$.jsx)(eT.Z,{marginTop:"sm"})]})},tn=k.ZP.div.withConfig({displayName:"module__StyledContainer",componentId:"sc-brc5wo-0"})(["background-color:rgb(0,55,83);"]),to=k.ZP.div.withConfig({displayName:"module__StyledFavContainer",componentId:"sc-brc5wo-1"})(["position:relative;.favicon{position:absolute;top:20%;left:23%;}"]),tr=(0,b.Ps)(m||(m=(0,v.Z)(["\n  query GetJobSetting($id: Int!) {\n    account: Account_by_pk(id: $id) {\n      id\n      meta\n      jobNumberStart\n      jobNumberPointer\n    }\n  }\n"]))),tc=(0,b.Ps)(f||(f=(0,v.Z)(["\n  mutation UpdateAccount($accountId: Int!, $account: Account_set_input) {\n    update_Account_by_pk(pk_columns: { id: $accountId }, _set: $account) {\n      id\n    }\n  }\n"]))),ti=(0,X.Ry)().shape({jobNumberStart:(0,X.Rx)().when("$checkJobNumberStart",{is:!0,then:(0,X.Rx)().positive("Must be more than 0").integer("Must be more than 0")}),jobNumberPrefix:(0,X.Z_)(),jobNumberSuffix:(0,X.Z_)()});function ta(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function ts(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ta(Object(n),!0).forEach(function(t){(0,B.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ta(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tu=function(e){var t,n,o,r,c,i=e.account,a=e.accountId,s=e.refetch,u=!!i.jobNumberStart||!!i.jobNumberPointer,l=(0,L.useContext)(R.Z),d=(0,Q.cI)({defaultValues:{jobNumberStart:i.jobNumberStart||1,jobNumberPrefix:null===(t=i.meta)||void 0===t?void 0:null===(n=t.job)||void 0===n?void 0:n.jobNumberPrefix,jobNumberSuffix:null===(o=i.meta)||void 0===o?void 0:null===(r=o.job)||void 0===r?void 0:r.jobNumberSuffix},context:{checkJobNumberStart:!u},resolver:(0,W.S)(ti)}),m=d.errors,f=d.handleSubmit,p=d.register,v=(0,U.D)(tc,{onCompleted:function(e){s(),l.close()}}),b=(0,M.Z)(v,1)[0],j={errors:m,register:p},h=function(e){return e.replace(/\s+|\u02DC|\u00A0 /g,"")},g=function(e){var t=ts({},i.meta)||{},n=e.jobNumberSuffix,o=e.jobNumberPrefix;n&&(e.jobNumberSuffix=h(n)),o&&(e.jobNumberPrefix=h(o)),t.job=ts(ts({},t.job),{},{jobNumberSuffix:e.jobNumberSuffix,jobNumberPrefix:e.jobNumberPrefix}),b({variables:{accountId:a,account:{meta:t,jobNumberStart:e.jobNumberStart}}})};return(0,$.jsxs)(F.Z,{id:"offCanvasForm",handleSubmit:f(g),children:[!u&&(0,$.jsxs)(H.Z,{label:"Start works orders and quotes from number",children:[(0,$.jsx)(V.Z,ts(ts({},j),{},{name:"jobNumberStart"})),(null===(c=m.jobNumberStart)||void 0===c?void 0:c.message)||""]}),(0,$.jsx)(H.Z,{label:"Prefix",children:(0,$.jsx)(V.Z,ts(ts({},j),{},{name:"jobNumberPrefix"}))}),(0,$.jsx)(H.Z,{label:"Suffix",children:(0,$.jsx)(V.Z,ts(ts({},j),{},{name:"jobNumberSuffix"}))})]})},tl=function(){var e,t,n,o,r=(0,eh.a)(),c=(0,eB.x)().user,i=(0,p.a)(tr,{variables:{id:c.accountId}}),a=i.data,s=(a=void 0===a?{account:[]}:a).account,u=i.loading,l=i.refetch,d=s.jobNumberStart,m=null===(e=s.meta)||void 0===e?void 0:null===(t=e.job)||void 0===t?void 0:t.jobNumberPrefix,f=null===(n=s.meta)||void 0===n?void 0:null===(o=n.job)||void 0===o?void 0:o.jobNumberSuffix,v=function(e){e.stopPropagation(),r.show({content:(0,$.jsx)(tu,{accountId:c.accountId,account:s,refetch:l}),title:"Job and Quote settings"})},b=function(){return(0,$.jsx)(x.Z,{content:"Edit",context:"secondary",onClick:v,size:"sm"})};return!u&&(0,$.jsxs)(O.Z,{fitParentHeight:!0,open:!0,title:"Job and Quote settings",toolbar:(0,$.jsx)(b,{}),children:[!!d&&(0,$.jsx)(eO.Z,{context:"success",content:"The primary work order and quote numbering has been set and cannot be changed."}),(0,$.jsx)(eZ.Z,{content:"Start works orders and quotes from number:",text:d||1}),(0,$.jsx)(eZ.Z,{content:"Prefix:",text:m||"-"}),(0,$.jsx)(eZ.Z,{content:"Suffix:",text:f||"-"})]})},td=n(6710),tm=(0,X.Ry)().shape({terms:(0,X.Z_)().required()});function tf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function tp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tf(Object(n),!0).forEach(function(t){(0,B.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tf(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tv=function(e){var t,n,o=e.account,r=e.accountId,c=e.handleSuccess,i=null==o?void 0:null===(t=o.meta)||void 0===t?void 0:t.quote,a=(0,Q.cI)({defaultValues:tp({},i),resolver:(0,W.S)(tm)}),s=a.control,u=a.errors,l=a.handleSubmit,d=a.register,m=(0,U.D)(j,{onCompleted:function(){c()}}),f=(0,M.Z)(m,1)[0],p=(n=(0,ed.Z)(ef().mark(function e(t){var n;return ef().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(n=tp({},o.meta)||{}).quote=tp({},t),f({variables:{accountId:r,account:{meta:n}}});case 3:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)});return(0,$.jsx)(F.Z,{id:"offCanvasForm",handleSubmit:l(p),children:(0,$.jsx)(H.Z,{label:"Quote Terms",children:(0,$.jsx)(td.Z,tp(tp({},{control:s,errors:u,register:d}),{},{name:"terms",rows:3}))})})},tb=function(e){var t,n,o=e.account,r=e.accountId,c=e.refetch,i=null==o?void 0:null===(t=o.meta)||void 0===t?void 0:null===(n=t.quote)||void 0===n?void 0:n.terms,a=(0,eh.a)(),s=function(e){e.stopPropagation(),a.show({content:(0,$.jsx)(tv,{account:o,accountId:r,handleSuccess:u}),title:"Quote Terms"})},u=function(e){c(),a.close()},l=function(){return(0,$.jsx)(x.Z,{content:"Edit",context:"secondary",onClick:s,size:"sm"})};return(0,$.jsx)(O.Z,{fitParentHeight:!0,open:!0,title:"Quote Terms",toolbar:(0,$.jsx)(l,{}),children:(0,$.jsx)(eZ.Z,{content:"Terms",text:null!=i?i:"-"})})},tj=(0,X.Ry)().shape({quote:(0,X.Rx)().required(),invoice:(0,X.Rx)().required()});function th(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function tg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?th(Object(n),!0).forEach(function(t){(0,B.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):th(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tx=function(e){var t,n,o=e.account,r=e.accountId,c=e.handleSuccess,i=null==o?void 0:null===(t=o.meta)||void 0===t?void 0:t.threshold,a=(0,Q.cI)({defaultValues:tg({},i),resolver:(0,W.S)(tj)}),s=a.control,u=a.errors,l=a.handleSubmit,d={control:s,errors:u,register:a.register},m=(0,U.D)(j,{onCompleted:function(){c()}}),f=(0,M.Z)(m,1)[0],p=(n=(0,ed.Z)(ef().mark(function e(t){var n;return ef().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(n=tg({},o.meta)||{}).threshold=tg({},t),f({variables:{accountId:r,account:{meta:n}}});case 3:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)});return(0,$.jsxs)(F.Z,{id:"offCanvasForm",handleSubmit:l(p),children:[(0,$.jsx)(H.Z,{label:"Invoice",children:(0,$.jsx)(V.Z,tg(tg({},d),{},{name:"invoice"}))}),(0,$.jsx)(H.Z,{label:"Quote",children:(0,$.jsx)(V.Z,tg(tg({},d),{},{name:"quote"}))})]})},ty=function(e){var t,n,o,r=e.account,c=e.accountId,i=e.refetch,a=null==r?void 0:null===(t=r.meta)||void 0===t?void 0:t.threshold,s=(0,eh.a)(),u=function(e){e.stopPropagation(),s.show({content:(0,$.jsx)(tx,{account:r,accountId:c,handleSuccess:l}),title:"Threshold Limit"})},l=function(e){i(),s.close()},d=function(){return(0,$.jsx)(x.Z,{content:"Edit",context:"secondary",onClick:u,size:"sm"})};return(0,$.jsxs)(O.Z,{fitParentHeight:!0,open:!0,title:"Threshold Limit",toolbar:(0,$.jsx)(d,{}),children:[(0,$.jsx)(eZ.Z,{content:"Invoice",text:null!==(n=null==a?void 0:a.invoice)&&void 0!==n?n:"-"}),(0,$.jsx)(eZ.Z,{content:"Quote",text:null!==(o=null==a?void 0:a.quote)&&void 0!==o?o:"-"})]})};function tZ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function tO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tZ(Object(n),!0).forEach(function(t){(0,B.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tZ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tw=function(e){var t,n=e.account,o=e.accountId,r=e.handleSuccess,c=e.supplierInstructions,i=(0,Q.cI)({defaultValues:{terms:c}}),a=i.control,s=i.errors,u=i.handleSubmit,l=i.register,d=(0,U.D)(j,{onCompleted:function(){r()}}),m=(0,M.Z)(d,1)[0],f=(t=(0,ed.Z)(ef().mark(function e(t){var r;return ef().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(r=tO({},n.meta)||{}).supplierInstructions=tO({},t),m({variables:{accountId:o,account:{meta:r}}});case 3:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)});return(0,$.jsx)(F.Z,{id:"offCanvasForm",handleSubmit:u(f),children:(0,$.jsx)(H.Z,{label:"Supplier instructions",children:(0,$.jsx)(td.Z,tO(tO({},{control:a,errors:s,register:l}),{},{name:"terms",rows:3}))})})},tS=function(e){var t,n,o=e.account,r=e.accountId,c=e.refetch,i=null==o?void 0:null===(t=o.meta)||void 0===t?void 0:null===(n=t.supplierInstructions)||void 0===n?void 0:n.terms,a=(0,eh.a)(),s=function(e){e.stopPropagation(),a.show({content:(0,$.jsx)(tw,{supplierInstructions:i,account:o,accountId:r,handleSuccess:u}),title:"Supplier instructions"})},u=function(e){c(),a.close()},l=function(){return(0,$.jsx)(x.Z,{content:"Edit",context:"secondary",onClick:s,size:"sm"})};return(0,$.jsx)(O.Z,{fitParentHeight:!0,open:!0,title:"Supplier instructions",toolbar:(0,$.jsx)(l,{}),children:(0,$.jsx)(eZ.Z,{content:"Supplier instructions",text:null!=i?i:"-"})})},tI=function(){var e=(0,eB.x)().user,t=(0,eh.a)(),n=(0,p.a)(h,{variables:{id:e.accountId}}),o=n.data,r=(o=void 0===o?{account:{}}:o).account,c=n.loading,i=n.refetch,a=(0,P.WE)(r,"registered"),s=r.bankAccounts,u=function(e){e&&i(),t.close()},l=function(n){n.stopPropagation(),t.show({content:(0,$.jsx)(S.H,{addressId:null==a?void 0:a.address.id,entity:"Account",entityId:null==e?void 0:e.accountId,id:(null==a?void 0:a.id)||null,onSubmit:u,type:"registered"}),submit:!1,title:"Manage addresses"})},d=function(){return(0,$.jsx)(g.Z,{children:(0,$.jsx)(x.Z,{context:"secondary",content:"Add address",onClick:l,size:"sm"})})};return!c&&(0,$.jsxs)(y.Z,{children:[(0,$.jsxs)(Z.Z,{md:6,children:[(0,$.jsx)(eM,{}),(0,$.jsx)(tl,{}),(0,$.jsx)(tt,{}),!a&&(0,$.jsx)(O.Z,{toolbar:(0,$.jsx)(d,{}),button:"Add address",handleClick:l,open:!0,title:"Address"}),a&&(0,$.jsx)(w.f,{address:a.address,entity:"Account",entityId:r.id,id:a.id,refetch:i,title:"Registered Address",type:"registered",edit:!0}),(0,$.jsx)(ec,{user:e,account:r})]}),(0,$.jsxs)(Z.Z,{md:6,children:[(0,$.jsx)(I.y,{edit:!0,accountId:r.id,data:s,refetch:i}),(0,$.jsx)(ey,{edit:!0,accountId:r.id,meta:r.meta,refetch:i}),(0,$.jsx)(eC,{account:r,refetch:i}),(0,$.jsx)(eG,{account:r,accountId:r.id,refetch:i}),(0,$.jsx)(tb,{account:r,accountId:r.id,refetch:i}),(0,$.jsx)(tS,{account:r,accountId:r.id,refetch:i}),(0,$.jsx)(ty,{account:r,accountId:r.id,refetch:i})]})]})},tP=n(38033),tk=function(){return(0,$.jsx)(tI,{})};tk.getLayout=function(e){return(0,$.jsx)(tP.Z,{children:e})};var t_=tk},8119:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/settings/settings",function(){return n(8846)}])}},function(e){e.O(0,[3662,367,2283,212,8890,619,1100,1336,4135,5020,6043,1564,4244,5370,3911,3776,6540,2329,4046,4253,2797,9241,653,1207,9781,1940,7725,8033,9229,4195,9774,2888,179],function(){return e(e.s=8119)}),_N_E=e.O()}]);