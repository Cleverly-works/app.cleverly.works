(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[501],{75420:function(e,t,r){"use strict";r.d(t,{r:function(){return i}});var n=r(95103),s=r(85893),i=function(e){var t=e.errors,r=e.name,i=e.onChange,c=e.options,o=e.register;return(0,s.jsx)(n.Z,{errors:t,name:r,onChange:i,options:c,register:o})};i.defaultProps={name:"status"}},3896:function(e,t,r){"use strict";r.d(t,{X:function(){return b}});var n,s,i=r(71383),c=r(16835),o=r(59499),u=r(67294),a=r(6812),l=r(50319),f=r(75063),p=r(55863);function b(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage",n=(0,p.q)().user,s=(0,u.useState)(function(){try{switch(r){case"network":return t;case"sessionStorage":return JSON.parse(window.sessionStorage.getItem(e))||t}}catch(n){return t}}),i=s[0],f=s[1],b=function(t){try{var s=t instanceof Function?t(i):t;switch(f(s),r){case"network":y({variables:{accountUserId:null==n?void 0:n.accountUserId,filters:(0,o.Z)({},e,s)}});break;case"sessionStorage":window.sessionStorage.setItem(e,JSON.stringify(s))}}catch(c){}};(0,a.a)(d,{variables:{accountUserId:null==n?void 0:n.accountUserId},skip:"network"!==r,onCompleted:function(r){var n=r.accountUser;n&&f(n.filters[e]||t)}});var O=(0,l.D)(j),y=(0,c.Z)(O,1)[0];return[i,b]}var d=(0,f.Ps)(n||(n=(0,i.Z)(["\n  query GetAccountUserFilters($accountUserId: Int!) {\n    accountUser: Account_User_by_pk(id: $accountUserId) {\n      filters\n    }\n  }\n"]))),j=(0,f.Ps)(s||(s=(0,i.Z)(["\n  mutation SetAccountUserFilters($accountUserId: Int!, $filters: jsonb) {\n    update_Account_User_by_pk(pk_columns: { id: $accountUserId }, _append: { filters: $filters }) {\n      id\n    }\n  }\n"])))},12964:function(e,t,r){"use strict";r.d(t,{J:function(){return x}});var n=r(59499),s=r(16835),i=r(4730),c=r(11163),o=r(67294),u=r(9270),a=r(62140),l=r(42283),f=r(76600),p=r(58965),b=r(49501),d=r(75903),j=r(77439),O=r(92264),y=r(3896),h=r(85893);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var v=function(e){var t=e.initialValues,r=e.renderFilters,n=e.setFilters,i=e.lastQuery,c=e.filters,g=(0,y.X)("form_data_".concat(t.filterType),t),v=(0,s.Z)(g,2),w=v[0],P=v[1],_=(0,l.cI)({defaultValues:w||t}),x=_.control,Z=_.errors,S=_.handleSubmit,k=_.register,F=_.reset,C=_.watch,U=_.setValue,E=C(),I=m(m({},E),{},{filterType:t.filterType});(0,o.useEffect)(function(){F(I)},[F]),(0,o.useEffect)(function(){P(I)},[c]);var D=function(e){var r=e.query;if(r!==i){var s={q:"%".concat(r,"%")||0},c=/^\d+$/.test(r);"id"in t&&(s.id=c?Number(r):null),"meta"in t&&(s.meta=c?{invoiceNumbers:[r]}:null),"jobNumber"in t&&(s.jobNumber=c?String(r):null,s.invoiceNumber=c?Number(r):null),n(function(e){return m(m({},e),s)})}},N=function(e){Object.keys(t).map(function(e){return U(e,null)}),n(t),F(t),D("")};return(0,h.jsx)(f.Z,{handleSubmit:S(D),children:(0,h.jsxs)(p.Z,{title:"Filters",children:[(0,h.jsxs)(u.Z,{children:[(0,h.jsx)(a.Z,{sm:12,lg:12,children:(0,h.jsx)(b.Z,{label:"",children:(0,h.jsx)(d.Z,{errors:Z,label:"Search",name:"email",placeholder:"Search...",prependSearchIcon:!0,register:k,type:"search"})})}),(0,h.jsx)(a.Z,{sm:12,lg:12,children:r({control:x,errors:Z,initialValues:t,register:k,setFilters:n,watch:C,setValue:U,reset:F})})]}),(0,h.jsx)(O.H,{content:"Search",context:"secondary",handleClick:D,type:"submit",children:(0,h.jsx)(j.Z,{content:"Clear",context:"danger",onClick:N,size:"sm"})})]})})},w=["FiltersComp","initialFilters","TableComp"];function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var x=function(e){var t=e.FiltersComp,r=e.initialFilters,n=e.TableComp,l=(0,i.Z)(e,w),f=(0,y.X)("form_data_".concat(r.filterType),r),p=(0,s.Z)(f,2),b=p[0],d=p[1],j=(0,o.useState)(b||r),O=j[0],g=j[1],m=(0,c.useRouter)().query.show;return(0,o.useEffect)(function(){d(O)},[O,d]),(0,h.jsx)(u.Z,{children:(0,h.jsxs)(a.Z,{sm:12,lg:12,children:[(0,h.jsx)(v,{initialValues:r,renderFilters:function(e){return(0,h.jsx)(t,_(_(_({},e),l),{},{show:m}))},setFilters:g,filters:O}),(0,h.jsx)(n,_({filters:O,initialFilters:r},l))]})})}},14739:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var n=r(19076),s=r(12964),i=r(39259),c=r(59499),o=r(9270),u=r(62140),a=r(75420),l=r(62929),f=r(26380),p=r(85893);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,c.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var j=function(e){var t=e.errors,r=e.register,n=e.setFilters,s={errors:t,register:r};return(0,p.jsxs)(o.Z,{children:[(0,p.jsx)(u.Z,{md:6,children:(0,p.jsx)(a.r,d(d({},s),{},{onChange:function(e){return n(function(t){return d(d({},t),{},{status:e.target.value||null})})},options:f.bg}))}),(0,p.jsx)(u.Z,{md:6,children:(0,p.jsx)(a.r,d(d({},s),{},{name:"accountType",onChange:function(e){return n(function(t){return d(d({},t),{},{accountType:e.target.value||null})})},options:l.l}))})]})},O={accountType:null,q:null,status:"active",filterType:"users_table"},y=function(){return(0,p.jsx)(s.J,{FiltersComp:j,initialFilters:O,TableComp:i.P})},h=function(){return(0,p.jsx)(n.Z,{pageHeading:{heading:"Users"},View:(0,p.jsx)(y,{})})}},48045:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/users",function(){return r(14739)}])}},function(e){e.O(0,[3662,2283,212,8890,619,1100,1336,4135,6043,1564,5370,3776,6540,2329,778,1023,3148,2797,653,1207,6344,5038,9229,8403,9774,2888,179],function(){return e(e.s=48045)}),_N_E=e.O()}]);