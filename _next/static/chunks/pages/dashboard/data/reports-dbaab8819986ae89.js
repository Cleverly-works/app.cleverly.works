(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1004],{26143:function(e,n,t){"use strict";t.d(n,{C:function(){return T}});var a=t(67294),r=t(93946),o=t(25464),i=t(18972),l=t(57976),s=t(14218),c=t(95429),u=t(91988),d=t(70983),p=t(46761),m=t(91682),v=t(39702),f=t(36804),b=t(51797),y=t(53630),h=t(50748),g=t(23132),j=t(88127),x=t(52186),w=t(59301),S=t(26447),C=t(15861),I=t(85893),O={add:(0,I.jsx)(s.Z,{}),archive:(0,I.jsx)(c.Z,{}),avatar:(0,I.jsx)(u.Z,{}),check:(0,I.jsx)(d.Z,{}),delete:(0,I.jsx)(p.Z,{}),description:(0,I.jsx)(m.Z,{}),download:(0,I.jsx)(v.Z,{}),info:(0,I.jsx)(f.Z,{}),edit:(0,I.jsx)(b.Z,{}),location:(0,I.jsx)(y.Z,{}),unarchive:(0,I.jsx)(h.Z,{}),uploadFile:(0,I.jsx)(g.Z,{}),receipt:(0,I.jsx)(j.Z,{}),visibility:(0,I.jsx)(x.Z,{})},Z={default:(0,I.jsx)(l.Z,{}),defaultHoriz:(0,I.jsx)(w.Z,{}),description:(0,I.jsx)(m.Z,{})},T=function(e){var n=e.actionsData,t=e.icon,l=e.row,s=e.disabled,c=(0,a.useState)(null),u=c[0],d=c[1],p=function(e){e.stopPropagation(),d(e.currentTarget)},m=function(){d(null)};return(0,I.jsxs)("div",{children:[(0,I.jsx)(r.Z,{sx:{":hover":{backgroundColor:"#DDDDDD"}},disabled:s,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:p,children:Z[t]}),(0,I.jsx)(o.Z,{id:"simple-menu",anchorEl:u,keepMounted:!0,open:Boolean(u),onClose:m,PaperProps:{sx:{borderRadius:2}},children:n(l).map(function(e,n){return(0,I.jsx)(i.Z,{disabled:e.disabled,onClick:function(n){e.onClick(n),m()},sx:{pl:3,pr:4},children:(0,I.jsxs)(S.Z,{direction:"row",alignItems:"center",spacing:2,children:[(null==O?void 0:O[e.icon])||null,(0,I.jsx)(C.Z,{children:e.tooltip})]})},n)})})]})};T.defaultProps={actionsData:function(){return[{disabled:!1,onClick:function(){},icon:"edit",tooltip:"Edit"}]},icon:"default",disabled:!1}},18574:function(e,n,t){"use strict";t.d(n,{F:function(){return T}});var a=t(59499),r=t(10166),o=t(50135),i=t(98456),l=t(16143),s=t(80482),c=t(23776),u=t(27812),d=t(4730),p=t(74061),m=t(6498),v=t(61730),f=t(75438),b=t(15861),y=t(67294),h=t(85893),g=["children"];function j(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function x(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?j(Object(t),!0).forEach(function(n){(0,a.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var w=(0,y.createContext)({}),S=(0,y.forwardRef)(function(e,n){var t=(0,y.useContext)(w);return(0,h.jsx)("div",x(x({ref:n},e),t))}),C=(0,y.forwardRef)(function(e,n){var t=e.children,a=(0,d.Z)(e,g),r=[];t.forEach(function(e){r.push(e),r.push.apply(r,(0,u.Z)(e.children||[]))});var o,i,l=(0,m.u)(),s=(0,v.Z)(l.breakpoints.up("sm"),{noSsr:!0}),c=r.length,f=s?36:48,b=function(e){return e.hasOwnProperty("group")?48:f},j=(i=(0,y.useRef)(null),(0,y.useEffect)(function(){null!=i.current&&i.current.resetAfterIndex(0,!0)},[c]),i);return(0,h.jsx)("div",{ref:n,children:(0,h.jsx)(w.Provider,{value:a,children:(0,h.jsx)(p.S_,{itemData:r,height:(c>8?8*f:r.map(b).reduce(function(e,n){return e+n},0))+16,width:"100%",ref:j,outerElementType:S,innerElementType:"ul",itemSize:function(e){return b(r[e])},overscanCount:5,itemCount:c,children:I})})})});function I(e){var n=e.data,t=e.index,a=e.style,r=n[t],o=x(x({},a),{},{top:a.top+8});return r.hasOwnProperty("group")?(0,h.jsx)(f.Z,{component:"div",style:o,children:r.group},r.key):(0,h.jsx)(b.Z,x(x({component:"li"},r[0]),{},{noWrap:!0,style:o,children:r[1].label}))}function O(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function Z(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?O(Object(t),!0).forEach(function(n){(0,a.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var T=function(e){var n=e.label,t=e.loading,a=e.placeholder,r=e.error,l=e.helperText,s=e.inputProps;return(0,h.jsx)(q,Z(Z({},e),{},{disableListWrap:!0,PopperComponent:k,ListboxComponent:C,renderInput:function(e){return(0,h.jsx)(o.Z,Z(Z(Z({},e),s),{},{error:r,helperText:l,label:n,placeholder:a,color:"secondary",variant:"standard",InputProps:Z(Z(Z({},e.InputProps),(null==s?void 0:s.InputProps)||{}),{},{endAdornment:(0,h.jsxs)(h.Fragment,{children:[t?(0,h.jsx)(i.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},renderOption:function(e,n,t){return[e,n,t.index]},renderGroup:function(e){return e}}))};T.defaultProps={value:null,onChange:function(){},label:"",loading:!1,error:!1,onOpen:function(){},options:[],inputProps:{},withoutSelectIcon:!1};var k=(0,r.Z)(l.Z)((0,a.Z)({zIndex:"12000 !important"},"& .".concat(s.Z.listbox),{boxSizing:"border-box","& ul":{padding:0,margin:0}})),q=(0,r.Z)(c.Z)(function(e){return{"& .MuiAutocomplete-root":{cursor:"pointer"},"& .MuiAutocomplete-popper":{zIndex:"12000 "},"& .MuiAutocomplete-endAdornment":{"& .MuiButtonBase-root.MuiIconButton-root.MuiAutocomplete-popupIndicator":{"& .MuiSvgIcon-root":Z({},e.withoutSelectIcon&&{display:"none"})}}}})},6911:function(e,n,t){"use strict";t.d(n,{q:function(){return v}});var a=t(59499),r=t(4730),o=t(23776),i=t(87918),l=t(50135),s=t(98456),c=t(67294),u=t(85893),d=["loading","setSearch","textFieldProps"];function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach(function(n){(0,a.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var v=function(e){var n=e.loading,t=e.setSearch,a=e.textFieldProps,p=(0,r.Z)(e,d),v=(0,c.useState)(""),f=v[0],b=v[1];return(0,c.useEffect)(function(){var e=setTimeout(function(){t(f)},500);return function(){return clearTimeout(e)}},[f,t]),(0,u.jsx)(o.Z,m(m({},p),{},{loading:n,onInputChange:function(e,n){b(n)},getOptionLabel:function(e){return e.label},renderTags:function(e,n){return e.map(function(e,t){return(0,u.jsx)(i.Z,m({size:"small",label:e.label},n({index:t})))})},renderInput:function(e){return(0,u.jsx)(l.Z,m(m(m({},e),a),{},{InputProps:m(m(m({},e.InputProps),a.InputProps||{}),{},{endAdornment:(0,u.jsxs)(u.Fragment,{children:[n?(0,u.jsx)(s.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))}}))};v.defaultProps={color:"secondary",onChange:function(){},options:[],onOpen:function(){},setSearch:function(){},textFieldProps:{}}},34197:function(e,n,t){"use strict";t.d(n,{E:function(){return a}});var a=function(e,n){if(Array.isArray(n)){var t,a=null;return n.forEach(function(n){var t,r=null==e?void 0:null===(t=e.timings)||void 0===t?void 0:t.find(function(e){return e.status===n});a=(null==r?void 0:r.createdAt)||a}),a}var r=null==e?void 0:null===(t=e.timings)||void 0===t?void 0:t.find(function(e){return e.status===n});return(null==r?void 0:r.createdAt)||null}},50558:function(e,n,t){"use strict";t.d(n,{il:function(){return o},j$:function(){return a},wo:function(){return r}});var a=function(e,n){if(Array.isArray(n)){var t,a,r=null;return n.forEach(function(n){var t,a,o=null===(t=e.timings)||void 0===t?void 0:t.find(function(e){return e.status===n});r=(null==o?void 0:null===(a=o.user)||void 0===a?void 0:a.fullName)||r}),r}var o=null===(t=e.timings)||void 0===t?void 0:t.find(function(e){return e.status===n});return(null==o?void 0:null===(a=o.user)||void 0===a?void 0:a.fullName)||null},r=function(e,n){if(Array.isArray(n)){var t,a=null;return n.forEach(function(n){var t,r=null===(t=e.timings)||void 0===t?void 0:t.find(function(e){return e.status===n});a=(null==r?void 0:r.id)||a}),a}var r=null===(t=e.timings)||void 0===t?void 0:t.find(function(e){return e.status===n});return(null==r?void 0:r.id)||null},o=function(e,n){return!e||e>n}},33816:function(e,n,t){"use strict";t.d(n,{By:function(){return p},Rm:function(){return u},WG:function(){return d},bK:function(){return m}});var a,r,o,i,l,s=t(71383),c=t(75063),u=(0,c.Ps)(a||(a=(0,s.Z)(['\n  query getInvoices($jobId: Int!, $locationId: Int!) {\n    invoices: Invoice(\n      where: {\n        _or: [\n          { _and: [{ Job: { id: { _eq: $jobId } } }, { entity: { _eq: "Job" } }] }\n          {\n            _and: [\n              { entity: { _eq: "Location" } }\n              { entityId: { _eq: $locationId } }\n              { AccountEntry: { jobId: { _eq: $jobId } } }\n            ]\n          }\n        ]\n      }\n    ) {\n      id\n      accountEntry: AccountEntry {\n        id\n        paymentStatus\n        meta\n        dueDate\n      }\n      items\n      status\n      createdAt\n      rebate\n      meta\n      totals\n      invoiceType\n      invoiceNumber\n      invoiceDate\n      expenses\n      entityId\n      entity\n      configs\n      amounts\n      addendum\n      addresses\n      adminId\n      reconciledAmount: AccountEntry {\n        reconciliations: InvoiceReconciliations_aggregate {\n          aggregate {\n            sum {\n              amount\n            }\n          }\n        }\n      }\n    }\n    meta: Invoice_aggregate(\n      where: {\n        _or: [\n          { _and: [{ Job: { id: { _eq: $jobId } } }, { AccountEntry: { jobId: { _eq: $jobId } } }] }\n          {\n            _and: [\n              { entity: { _eq: "Location" } }\n              { entityId: { _eq: $locationId } }\n              { AccountEntry: { jobId: { _eq: $jobId } } }\n            ]\n          }\n        ]\n        invoiceType: { _in: ["ProformaInvoiceCustomer", "ProformaInvoiceSupplier"] }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n'])));(0,c.Ps)(r||(r=(0,s.Z)(['\n  query getInvoices($id: Int!) {\n    invoice: Invoice_by_pk(id: $id) {\n      id\n      accountEntry: AccountEntry {\n        id\n        paymentStatus\n      }\n      items\n      status\n      createdAt\n      rebate\n      meta\n      totals\n      invoiceType\n      invoiceNumber\n      invoiceDate\n      expenses\n      entityId\n      configs\n      amounts\n      addendum\n      addresses\n      adminId\n      amountPaid: AccountEntry {\n        reconciliations: InvoiceReconciliations_aggregate(\n          where: { creditEntity: { _eq: "PaymentReceipt" } }\n        ) {\n          aggregate {\n            sum {\n              amount\n            }\n          }\n        }\n      }\n      amountDeducted: AccountEntry {\n        reconciliations: InvoiceReconciliations_aggregate(\n          where: { creditEntity: { _eq: "CreditNote" } }\n        ) {\n          aggregate {\n            sum {\n              amount\n            }\n          }\n        }\n      }\n      reconciledAmount: AccountEntry {\n        reconciliations: InvoiceReconciliations_aggregate {\n          aggregate {\n            sum {\n              amount\n            }\n          }\n        }\n      }\n    }\n  }\n'])));var d=(0,c.Ps)(o||(o=(0,s.Z)(['\n  query getInvoiceForPdf($id: Int!) {\n    invoice: Invoice_by_pk(id: $id) {\n      id\n      entityId\n      invoiceType\n      accountEntry: AccountEntry {\n        id\n        meta\n      }\n      amountPaid: AccountEntry {\n        reconciliations: InvoiceReconciliations_aggregate(\n          where: { creditEntity: { _eq: "PaymentReceipt" } }\n        ) {\n          aggregate {\n            sum {\n              amount\n            }\n          }\n        }\n      }\n      amountDeducted: AccountEntry {\n        reconciliations: InvoiceReconciliations_aggregate(\n          where: { creditEntity: { _eq: "CreditNote" } }\n        ) {\n          aggregate {\n            sum {\n              amount\n            }\n          }\n        }\n      }\n      reconciledAmount: AccountEntry {\n        reconciliations: InvoiceReconciliations_aggregate {\n          aggregate {\n            sum {\n              amount\n            }\n          }\n        }\n      }\n    }\n  }\n']))),p=(0,c.Ps)(i||(i=(0,s.Z)(['\n  query getInvoiceForPdfByType($jobId: Int!, $invoiceType: String!) {\n    invoices: Invoice(\n      where: { entityId: { _eq: $jobId }, invoiceType: { _eq: $invoiceType } }\n      order_by: { createdAt: desc }\n    ) {\n      id\n      invoiceType\n      accountEntry: AccountEntry {\n        id\n        meta\n      }\n      amountPaid: AccountEntry {\n        reconciliations: InvoiceReconciliations_aggregate(\n          where: { creditEntity: { _eq: "PaymentReceipt" } }\n        ) {\n          aggregate {\n            sum {\n              amount\n            }\n          }\n        }\n      }\n      amountDeducted: AccountEntry {\n        reconciliations: InvoiceReconciliations_aggregate(\n          where: { creditEntity: { _eq: "CreditNote" } }\n        ) {\n          aggregate {\n            sum {\n              amount\n            }\n          }\n        }\n      }\n      reconciledAmount: AccountEntry {\n        reconciliations: InvoiceReconciliations_aggregate {\n          aggregate {\n            sum {\n              amount\n            }\n          }\n        }\n      }\n    }\n  }\n']))),m=(0,c.Ps)(l||(l=(0,s.Z)(["\n  mutation CreateProformaInvoice(\n    $jobId: Int!\n    $invoiceType: String!\n    $dueDate: timestamptz!\n    $description: String\n    $items: [jsonb]\n  ) {\n    createProformaInvoice(\n      jobId: $jobId\n      invoiceType: $invoiceType\n      description: $description\n      dueDate: $dueDate\n      items: $items\n    ) {\n      data\n      success\n    }\n  }\n"])))},76301:function(e,n,t){"use strict";t.d(n,{Ak:function(){return Y},Cj:function(){return G},K4:function(){return ea},Qn:function(){return M},RJ:function(){return Q},SW:function(){return $},T_:function(){return H},UH:function(){return N},UM:function(){return en},Ve:function(){return W},_d:function(){return z},_f:function(){return et},by:function(){return B},cz:function(){return _},he:function(){return R},j$:function(){return F},kB:function(){return K},kU:function(){return X},kx:function(){return V},nD:function(){return L},nP:function(){return eo},pY:function(){return er},qd:function(){return E},t1:function(){return U},yR:function(){return J},zR:function(){return ee}});var a,r,o,i,l,s,c,u,d,p,m,v,f,b,y,h,g,j,x,w,S,C,I,O,Z,T,k,q,P,A=t(71383),D=t(75063),_=(0,D.Ps)(a||(a=(0,A.Z)(["\n  query GetAddressForSelect($q: String, $entity: String!, $entityId: Int!) {\n    items: Address(\n      where: {\n        Address_Entities: { entity: { _eq: $entity }, entityId: { _eq: $entityId } }\n        _or: [\n          { addressLine1: { _eq: $q } }\n          { addressLine2: { _eq: $q } }\n          { addressLine3: { _eq: $q } }\n          { county: { _eq: $q } }\n          { postCode: { _eq: $q } }\n          { city: { _eq: $q } }\n        ]\n      }\n    ) {\n      label: addressLine1\n      value: id\n      id\n      name\n      addressLine1\n      addressLine2\n      addressLine3\n      postCode\n      county\n      country: Country {\n        name\n      }\n      city\n      Address_Entities {\n        invoice\n      }\n    }\n  }\n"]))),E=(0,D.Ps)(r||(r=(0,A.Z)(["\n  query GetAccountsForSelect($q: String, $type: String, $limit: Int, $offset: Int) {\n    items: Account(\n      where: { name: { _ilike: $q }, type: { _eq: $type } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]))),L=(0,D.Ps)(o||(o=(0,A.Z)(['\n  query GetTaxonomy($q: String, $id: Int) {\n    items: Taxonomy(\n      where: { type: { _eq: "assetCategory" }, status: { _eq: "active" } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      options: Taxonomies(\n        where: {\n          type: { _eq: "assetCategory" }\n          name: { _ilike: $q }\n          id: { _eq: $id }\n          status: { _eq: "active" }\n        }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']))),N=(0,D.Ps)(i||(i=(0,A.Z)(["\n  query GetAssetsForSelect($locationId: Int, $q: String, $categoryId: Int, $bookable: String) {\n    items: Asset(\n      where: {\n        categoryId: { _eq: $categoryId }\n        locationId: { _eq: $locationId }\n        name: { _ilike: $q }\n        bookable: { _eq: $bookable }\n      }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n      parent: ParentAsset {\n        id\n        name\n      }\n      media: Media {\n        id\n        item: Medium {\n          id\n          name\n          filename\n          meta\n          category\n          type\n        }\n      }\n    }\n  }\n"]))),$=(0,D.Ps)(l||(l=(0,A.Z)(['\n  query GetCustomersForSelect($q: String, $limit: Int, $offset: Int) {\n    items: Account(\n      where: { name: { _ilike: $q }, type: { _eq: "customer" } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      admin: Admins {\n        id: adminId\n      }\n      label: name\n      spendThreshold: meta(path: "$.finance.spendThreshold")\n      serviceRateLabour: meta(path: "$.finance.serviceRateLabour")\n      serviceRateExpenses: meta(path: "$.finance.serviceRateExpenses")\n      value: id\n    }\n  }\n']))),M=(0,D.Ps)(s||(s=(0,A.Z)(["\n  query GetJobsForSelect($_q: Int, $locationId: Int) {\n    items: Job(\n      where: {\n        Location: { id: { _eq: $locationId } }\n        _or: [{ id: { _eq: $_q } }, { Invoices: { id: { _eq: $_q } } }]\n      }\n      order_by: { title: asc }\n    ) {\n      label: label\n      value: id\n      number\n      createdAt\n      description\n      status\n      timingStart\n      title\n      type\n      Location {\n        name\n      }\n      Taxonomy {\n        Taxonomy {\n          shortJobDescription: name\n        }\n      }\n    }\n  }\n"]))),R=(0,D.Ps)(c||(c=(0,A.Z)(['\n  query GetManagersForSelect($userId: Int, $accountId: Int!, $q: String) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          role: { _in: ["owner", "manager"] }\n          status: { _eq: "active" }\n          Account: { id: { _eq: $accountId } }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n        id: { _neq: $userId }\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n']))),Y=(0,D.Ps)(u||(u=(0,A.Z)(['\n  query GetManagersForSelect(\n    $userId: Int\n    $accountId: Int!\n    $q: String\n    $invoiceThreshold: numeric\n    $quoteThreshold: numeric\n  ) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          role: { _in: ["owner", "manager"] }\n          status: { _eq: "active" }\n          Account: { id: { _eq: $accountId } }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n        id: { _neq: $userId }\n        _and: [\n          {\n            _or: [\n              { invoiceThreshold: { _gt: $invoiceThreshold } }\n              { invoiceThreshold: { _is_null: true } }\n            ]\n          }\n          {\n            _or: [\n              { quoteThreshold: { _gt: $quoteThreshold } }\n              { quoteThreshold: { _is_null: true } }\n            ]\n          }\n        ]\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n']))),F=(0,D.Ps)(d||(d=(0,A.Z)(["\n  query GetPostCodeAreaForSelect($countryId: Int, $q: String) {\n    items: PostcodeArea(\n      where: { name: { _ilike: $q }, countryId: { _eq: $countryId } }\n      order_by: { name: asc }\n    ) {\n      area\n      label: name\n      value: id\n    }\n  }\n"]))),z=(0,D.Ps)(p||(p=(0,A.Z)(['\n  query GetPropertiesForSelect($where: Location_bool_exp, $limit: Int, $offset: Int) {\n    items: Location(where: $where, order_by: { name: asc }, limit: $limit, offset: $offset) {\n      label: name\n      value: id\n      access\n      permitsRequired\n      registeredAddress: Addresses(\n        where: { entity: { _eq: "Location" }, registered: { _eq: true } }\n      ) {\n        address: Address {\n          id\n          addressLine1\n          addressLine2\n          addressLine3\n          county\n          country: Country {\n            name\n          }\n          postCode\n          city\n        }\n      }\n    }\n  }\n']))),V=(0,D.Ps)(m||(m=(0,A.Z)(['\n  query GetServicesForSelect($q: String, $limit: Int, $offset: Int) {\n    items: Service(\n      where: { name: { _ilike: $q }, status: { _eq: "active" } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n']))),U=(0,D.Ps)(v||(v=(0,A.Z)(["\n  query GetSlasForSelect($q: String, $adminId: Int, $type: String) {\n    items: SLA(\n      where: { name: { _ilike: $q }, type: { _eq: $type }, adminId: { _eq: $adminId } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]))),H=(0,D.Ps)(f||(f=(0,A.Z)(["\n  query GetSlasForSelectNew($where: SLA_bool_exp, $limit: Int, $offset: Int) {\n    items: SLA(where: $where, order_by: { name: asc }, limit: $limit, offset: $offset) {\n      label: name\n      value: id\n    }\n  }\n"]))),B=(0,D.Ps)(b||(b=(0,A.Z)(["\n  query GetSuppliersForSelect($where: Account_bool_exp, $limit: Int, $offset: Int) {\n    items: Account(where: $where, limit: $limit, offset: $offset, order_by: { name: asc }) {\n      label: name\n      value: id\n    }\n  }\n"]))),J=(0,D.Ps)(y||(y=(0,A.Z)(['\n  query GetUsersForSelect($accountId: Int, $q: String, $limit: Int, $offset: Int) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          accountId: { _eq: $accountId }\n          isContact: { _eq: true }\n          status: { _eq: "active" }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      order_by: { nameFirst: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      label: fullName\n      value: id\n      email\n      phone\n    }\n  }\n']))),Q=(0,D.Ps)(h||(h=(0,A.Z)(['\n  query GetUsersForSelect($q: String) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n      email\n      phone\n    }\n  }\n']))),G=(0,D.Ps)(g||(g=(0,A.Z)(["\n  query GetTaxonomyGroupForSelect($q: String, $type: String!) {\n    items: Taxonomy(\n      where: { isGroup: { _eq: true }, name: { _ilike: $q }, type: { _eq: $type } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]))),W=(0,D.Ps)(j||(j=(0,A.Z)(['\n  query GetTaxonomy($q: String) {\n    items: Taxonomy(where: { type: { _eq: "expenseCategoryGroup" } }, order_by: { name: asc }) {\n      label: name\n      options: Taxonomies(\n        where: { type: { _eq: "expenseCategory" }, name: { _ilike: $q } }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']))),X=(0,D.Ps)(x||(x=(0,A.Z)(['\n  query GetCompliancesForSelect($q: String, $locationId: Int) {\n    items: Taxonomy(where: { type: { _eq: "complianceCategory" } }, order_by: { name: asc }) {\n      label: name\n      options: Compliances(\n        where: {\n          name: { _ilike: $q }\n          Compliance_Entities: { Location: { id: { _eq: $locationId } } }\n        }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']))),K=(0,D.Ps)(w||(w=(0,A.Z)(["\n  query GetUserRole($userId: Int!, $accountId: Int!) {\n    accountUsers: Account_User(\n      where: { userId: { _eq: $userId }, accountId: { _eq: $accountId } }\n    ) {\n      role\n    }\n  }\n"]))),ee=(0,D.Ps)(S||(S=(0,A.Z)(["\n  query GetSublocationsForSelect($locationId: Int!, $q: String, $limit: Int, $offset: Int) {\n    items: Sublocation(\n      where: { name: { _ilike: $q }, locationId: { _eq: $locationId }, active: { _eq: true } }\n      limit: $limit\n      offset: $offset\n      order_by: { createdAt: desc }\n    ) {\n      value: id\n      label: name\n    }\n  }\n"]))),en=(0,D.Ps)(C||(C=(0,A.Z)(['\n  query GetTaxonomy($q: String, $id: Int, $limit: Int, $offset: Int) {\n    items: Taxonomy(\n      where: {\n        id: { _eq: $id }\n        type: { _eq: "assetCategory" }\n        isGroup: { _eq: false }\n        status: { _eq: "active" }\n        name: { _ilike: $q }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n']))),et=(0,D.Ps)(I||(I=(0,A.Z)(["\n  query GetTaxonomyForSelect(\n    $where: Taxonomy_bool_exp\n    $limit: Int\n    $offset: Int\n    $orderBy: Taxonomy_order_by!\n  ) {\n    items: Taxonomy(where: $where, limit: $limit, offset: $offset, order_by: [$orderBy]) {\n      value: id\n      label: name\n    }\n  }\n"])));(0,D.Ps)(O||(O=(0,A.Z)(['\n  query GetTagsForTask($q: String!, $limit: Int = 50, $offset: Int = 0) {\n    items: Taxonomy(\n      where: { name: { _ilike: $q }, status: { _eq: "active" }, type: { _eq: "taskTags" } }\n      limit: $limit\n      offset: $offset\n      order_by: { id: desc }\n    ) {\n      value: id\n      label: name\n    }\n  }\n']))),(0,D.Ps)(Z||(Z=(0,A.Z)(['\n  query GetTagsForEntity(\n    $entityId: Int\n    $entity: String!\n    $q: String!\n    $limit: Int = 50\n    $offset: Int = 0\n  ) {\n    tags: Taxonomy(\n      where: {\n        name: { _ilike: $q }\n        status: { _eq: "active" }\n        type: { _eq: "taskTags" }\n        _not: { Taxonomy_Entities: { entity: { _eq: $entity }, entityId: { _eq: $entityId } } }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { id: desc }\n    ) {\n      id\n      name\n      meta\n    }\n  }\n']))),(0,D.Ps)(T||(T=(0,A.Z)(['\n  query GetEntityTags($entityId: Int!, $entity: String!) {\n    tags: Taxonomy_Entity(\n      where: {\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n        Taxonomy: { status: { _eq: "active" }, type: { _eq: "taskTags" } }\n      }\n      order_by: { id: desc }\n    ) {\n      id\n      tag: Taxonomy {\n        id\n        name\n        meta\n      }\n    }\n  }\n'])));var ea=(0,D.Ps)(k||(k=(0,A.Z)(["\n  query GetCustomerManagers($accountId: Int, $q: String, $limit: Int, $offset: Int) {\n    items: User(\n      where: { Account_Users: { accountId: { _eq: $accountId } }, fullName: { _ilike: $q } }\n      order_by: { fullName: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n"]))),er=(0,D.Ps)(q||(q=(0,A.Z)(["\n  query GetServiceSchedulesForSelect(\n    $q: String\n    $serviceId: Int\n    $entity: service_schedule_entity\n    $entityId: Int\n    $limit: Int = 50\n    $offset: Int = 0\n  ) {\n    items: ServiceSchedule(\n      where: {\n        name: { _ilike: $q }\n        serviceId: { _eq: $serviceId }\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]))),eo=(0,D.Ps)(P||(P=(0,A.Z)(['\n  query GetPropertyById($id: Int!) {\n    item: Location_by_pk(id: $id) {\n      label: name\n      value: id\n      access\n      registeredAddress: Addresses(\n        where: { entity: { _eq: "Location" }, registered: { _eq: true } }\n      ) {\n        address: Address {\n          id\n          addressLine1\n          addressLine2\n          addressLine3\n          county\n          country: Country {\n            name\n          }\n          postCode\n          city\n        }\n      }\n    }\n  }\n'])))},33234:function(e,n,t){"use strict";t.d(n,{_Z:function(){return m}});var a,r,o,i=t(71383),l=t(50029),s=t(64687),c=t.n(s),u=t(75063),d=t(60036),p=t(94568),m=(o=(0,l.Z)(c().mark(function e(n){var t,a,r,o,i,l,s,u;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=n.client,a=n.jobId,r=n.type,o=n.getUrl,i=n.preview,l="",e.t0=r,e.next="supplier"===e.t0?5:"customerVat"===e.t0?7:9;break;case 5:return l=f,e.abrupt("break",10);case 7:return l=v,e.abrupt("break",10);case 9:return e.abrupt("return");case 10:return(0,p.a)()||o||(s=window.open("/download","_blank")),u="",e.next=14,t.mutate({mutation:l,variables:{jobId:a,preview:i}}).then(function(e){var n,t,a,r,i,l=e.data.invoice.key;o?u="".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(l):(null===(n=s)||void 0===n||null===(t=n.location)||void 0===t||t.assign("".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(l)),null!==(a=window)&&void 0!==a&&null!==(r=a.Capacitor)&&void 0!==r&&null!==(i=r.Plugins)&&void 0!==i&&i.Browser&&window.Capacitor.Plugins.Browser.open({url:"".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(l)}))}).catch(function(e){(0,d.Tb)({message:e,section:"fetch"})});case 14:return e.abrupt("return",u);case 15:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)}),v=(0,u.Ps)(a||(a=(0,i.Z)(["\n  mutation CreateCustomerInvoicePdf($jobId: Int!, $preview: Boolean) {\n    invoice: createCustomerInvoicePdf(jobId: $jobId, preview: $preview) {\n      success\n      key\n    }\n  }\n"]))),f=(0,u.Ps)(r||(r=(0,i.Z)(["\n  mutation CreateSupplierInvoicePdf($jobId: Int!, $preview: Boolean) {\n    invoice: createSupplierInvoicePdf(jobId: $jobId, preview: $preview) {\n      success\n      key\n    }\n  }\n"])))},10693:function(e,n,t){"use strict";t.d(n,{e:function(){return f}});var a,r=t(50029),o=t(64687),i=t.n(o),l=t(26186),s=t(9205),c=t(34197),u=t(50558),d=t(33366),p=t(60036),m=t(94568),v=t(48764).Buffer,f=(a=(0,r.Z)(i().mark(function e(n){var t,a,r,o,f,b,y,h,g,j,x,w,S,C,I,O,Z,T,k,q,P,A,D,_,E,L,N,$,M,R;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return P=n.adminId,A=n.job,_=void 0===(D=n.openReport)||D,E=function(){return A.media.filter(function(e){var n;return"image"===e.item.type&&!(null!==(n=e.item.meta)&&void 0!==n&&n.adminOnly)}).map(function(e){var n,t;if(null!==(n=e.item)&&void 0!==n&&null!==(t=n.meta)&&void 0!==t&&t.thumbnails){var a=e.item.meta.thumbnails.find(function(e){return"small"===e.name});if(a)return{filename:a.relativePath}}return{filename:e.item.filename}})},L=(0,s.WE)(A.location,"registered"),N=d.hD.find(function(e){var n;return e.value===(null===(n=A.report)||void 0===n?void 0:n.completion)}),$={job:{assets:A.assets,address:null==L?void 0:L.address,sublocation:A.sublocation,contractor:null===(t=A.supplier)||void 0===t?void 0:t.name,completedAt:"incorrect"===A.timingStatus?A.correctEnd:(0,l.Z)((0,c.E)(A,"completed")),customer:null===(a=A.customer)||void 0===a?void 0:a.name,description:v.from(A.description).toString("base64"),expenses:null===(r=A.expenses)||void 0===r?void 0:r.map(function(e){return e.description}),further:(null==N?void 0:N.text)||null,id:A.id,notes:null!==(o=A.report)&&void 0!==o&&o.notes?v.from(null==A?void 0:null===(f=A.report)||void 0===f?void 0:f.notes).toString("base64"):"",number:A.number,raisedBy:(0,u.j$)(A,"pending"),reference:A.reference,service:null===(b=A.service)||void 0===b?void 0:b.name,dateStart:"incorrect"===A.timingStatus?A.correctStart:(0,c.E)(A,"inProgress"),dateEnd:"incorrect"===A.timingStatus?A.correctEnd:(0,c.E)(A,"completed"),priority:null===(y=A.sla)||void 0===y?void 0:y.name,passFailStatus:null===(h=A.report)||void 0===h?void 0:h.passFailStatus,customerSignature:null!==(g=A.report)&&void 0!==g&&null!==(j=g.meta)&&void 0!==j&&j.customerSignatureName?{name:null===(x=A.report)||void 0===x?void 0:x.meta.customerSignatureName,data:null===(w=A.report)||void 0===w?void 0:w.meta.customerSignatureTime}:null,supplierSignature:null!==(S=A.report)&&void 0!==S&&null!==(C=S.meta)&&void 0!==C&&C.supplierSignatureName?{name:null===(I=A.report)||void 0===I?void 0:I.meta.supplierSignatureName,data:null===(O=A.report)||void 0===O?void 0:O.meta.supplierSignatureTime}:null,recommendations:null!==(Z=A.report)&&void 0!==Z&&Z.recommendations?v.from(null===(T=A.report)||void 0===T?void 0:T.recommendations).toString("base64"):""},jobReportId:null!==(k=null===(q=A.report)||void 0===q?void 0:q.id)&&void 0!==k?k:null,adminId:P,media:E()},!(0,m.a)()&&_&&(M=window.open("/download","_blank")),e.next=8,window.fetch("".concat("https://aws.cleverly.works","/pdf/job-report/create"),{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify($)}).then(function(e){return e.json()}).then(function(e){if(_){var n,t,a,r,o;null===(n=M)||void 0===n||null===(t=n.location)||void 0===t||t.assign("".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(e.key)),null!==(a=window)&&void 0!==a&&null!==(r=a.Capacitor)&&void 0!==r&&null!==(o=r.Plugins)&&void 0!==o&&o.Browser&&window.Capacitor.Plugins.Browser.open({url:"".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(e.key)})}return{blob:e,link:"".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(e.key)}}).catch(function(e){(0,p.Tb)({message:e,section:"fetch"})});case 8:return R=e.sent,e.abrupt("return",R);case 10:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)})},46718:function(e,n,t){"use strict";t.d(n,{$:function(){return c}});var a,r=t(50029),o=t(64687),i=t.n(o),l=t(94568),s=t(60036),c=(a=(0,r.Z)(i().mark(function e(n){var t;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,l.a)()||(t=window.open("/download","_blank")),e.next=3,window.fetch("".concat("https://aws.cleverly.works","/pdf/invoice/ppmNew/create"),{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){var n,a,r,o,i;null===(n=t)||void 0===n||null===(a=n.location)||void 0===a||a.assign("".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(e.key)),null!==(r=window)&&void 0!==r&&null!==(o=r.Capacitor)&&void 0!==o&&null!==(i=o.Plugins)&&void 0!==i&&i.Browser&&window.Capacitor.Plugins.Browser.open({url:"".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(e.key)})}).catch(function(e){(0,s.Tb)({message:e,section:"fetch"})});case 3:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)})},19149:function(e,n,t){"use strict";t.d(n,{u:function(){return p}});var a=t(59499),r=t(50029),o=t(64687),i=t.n(o),l=t(60036),s=t(94568);function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach(function(n){(0,a.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var d,p=(d=(0,r.Z)(i().mark(function e(n){var t,a,r,o,c,d,p,m,v,f,b,y,h,g,j,x;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h=n.meta,g=n.invoice,j=u(u({},h),{},{title:"Proforma Invoice",amountPaid:null==g?void 0:null===(t=g.amountPaid)||void 0===t?void 0:null===(a=t.reconciliations)||void 0===a?void 0:null===(r=a.aggregate)||void 0===r?void 0:null===(o=r.sum)||void 0===o?void 0:o.amount,amountDeducted:null==g?void 0:null===(c=g.amountDeducted)||void 0===c?void 0:null===(d=c.reconciliations)||void 0===d?void 0:null===(p=d.aggregate)||void 0===p?void 0:null===(m=p.sum)||void 0===m?void 0:m.amount,reconciledAmount:null==g?void 0:null===(v=g.reconciledAmount)||void 0===v?void 0:null===(f=v.reconciliations)||void 0===f?void 0:null===(b=f.aggregate)||void 0===b?void 0:null===(y=b.sum)||void 0===y?void 0:y.amount}),(0,s.a)()||(x=window.open("/download","_blank")),e.next=5,window.fetch("".concat("https://aws.cleverly.works","/pdf/invoice/proforma/create"),{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(j)}).then(function(e){return e.json()}).then(function(e){var n,t,a,r,o;null===(n=x)||void 0===n||null===(t=n.location)||void 0===t||t.assign("".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(e.key)),null!==(a=window)&&void 0!==a&&null!==(r=a.Capacitor)&&void 0!==r&&null!==(o=r.Plugins)&&void 0!==o&&o.Browser&&window.Capacitor.Plugins.Browser.open({url:"".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(e.key)})}).catch(function(e){(0,l.Tb)({message:e,section:"fetch"})});case 5:case"end":return e.stop()}},e)})),function(e){return d.apply(this,arguments)})},51555:function(e,n,t){"use strict";t.d(n,{L:function(){return h},g:function(){return y}});var a,r,o,i,l=t(71383),s=t(50029),c=t(64687),u=t.n(c),d=t(9205),p=t(94568),m=t(60036),v=t(75063),f=t(48764).Buffer,b=(r=(0,s.Z)(u().mark(function e(n,t){var a,r,o,i,l,s,c,p,m,v,b;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=[],c=[],p=null,p=t?n.quotations.find(function(e){return e.id===t}):n.quotations.find(function(e){return"supplierQuoteSent"===e.status})){e.next=6;break}return e.abrupt("return",null);case 6:return p.lineItems.forEach(function(e){var n={name:e.description,price:e.total,vatRate:.2,qty:e.qty,unit:e.qtyUnit,rate:e.unitRate};"Materials"===e.type?c.push(n):"Labour"===e.type&&s.push(n)}),m=(0,d.WE)(null==n?void 0:n.location,"registered"),v=(null===(a=p.meta)||void 0===a?void 0:a.terms)||(null==n?void 0:null===(r=n.admin)||void 0===r?void 0:null===(o=r.meta)||void 0===o?void 0:null===(i=o.quote)||void 0===i?void 0:i.terms)||"",b={id:p.id,job:{currency:"\xa3",customerName:null===(l=n.customer)||void 0===l?void 0:l.name,startDate:p.startDate,description:f.from(n.description).toString("base64"),duration:p.totalDuration?1===p.totalDuration?"".concat(p.totalDuration," ").concat(p.totalDurationUnit):"".concat(p.totalDuration," ").concat(p.totalDurationUnit,"s"):"-",number:n.number,reference:(null==n?void 0:n.reference)||"",labour:s,materials:c,methodStatement:p.methodStatement,propertyAddress:null==m?void 0:m.address,sublocation:n.sublocation,terms:f.from(v).toString("base64")}},e.abrupt("return",b);case 11:case"end":return e.stop()}},e)})),function(e,n){return r.apply(this,arguments)}),y=(o=(0,s.Z)(u().mark(function e(n){var t,a,r,o,i,l,s,c,d,v,f=arguments;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>1&&void 0!==f[1]?f[1]:null,a=f.length>2?f[2]:void 0,e.prev=2,(0,p.a)()||(s=window.open("/download","_blank")),e.next=6,h(n,t,a);case 6:if(c=e.sent){e.next=9;break}throw Error("Failed to download quote");case 9:null!==(r=s)&&void 0!==r&&r.location&&(null===(d=s)||void 0===d||null===(v=d.location)||void 0===v||v.assign(c)),null!==(o=window)&&void 0!==o&&null!==(i=o.Capacitor)&&void 0!==i&&null!==(l=i.Plugins)&&void 0!==l&&l.Browser&&window.Capacitor.Plugins.Browser.open({url:c}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),(0,m.Tb)({message:e.t0,section:"fetch"});case 16:case"end":return e.stop()}},e,null,[[2,13]])})),function(e){return o.apply(this,arguments)}),h=(i=(0,s.Z)(u().mark(function e(n){var t,a,r,o,i,l,s,c,d=arguments;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>1&&void 0!==d[1]?d[1]:null,a=d.length>2?d[2]:void 0,e.next=4,b(n,t);case 4:if(!(r=e.sent)){e.next=15;break}return e.next=8,a.mutate({mutation:g,variables:{data:r}});case 8:if(s=(l=(i=void 0===(i=e.sent.data)?{pdfQuoteCreate:{}}:i).pdfQuoteCreate).success,c=l.key,s){e.next=14;break}throw Error("Failed to create PDF");case 14:return e.abrupt("return","".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(c));case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}),g=(0,v.Ps)(a||(a=(0,l.Z)(["\n  mutation PDFQuoteCreate($data: jsonb!) {\n    pdfQuoteCreate(data: $data) {\n      success\n      key\n    }\n  }\n"])))},42846:function(e,n,t){"use strict";t.d(n,{x:function(){return u}});var a=t(59499),r=t(67294),o=t(96486),i=t(87043),l=function(e){try{return JSON.parse(e)}catch(n){return!1}};function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach(function(n){(0,a.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var u=function(e){var n,t,s,u,d,p,m,v,f,b,y,h=e.filters,g=e.newFilters,j=e.initialSort,x=(0,r.useRef)(),w=(0,r.useState)({}),S=w[0],C=w[1],I=(0,r.useState)({}),O=I[0],Z=I[1],T=j||{item:"createdAt",order:"desc"},k=(0,a.Z)({},(null===(n=x.current)||void 0===n?void 0:n.sort.item)||T.item,T.inneritem?(0,a.Z)({},T.inneritem,(null===(t=x.current)||void 0===t?void 0:t.sort.order)||T.order):(null===(s=x.current)||void 0===s?void 0:s.sort.order)||T.order);return(0,r.useEffect)(function(){var e=!(0,o.isEqual)(S,h),n=!(0,o.isEqual)(O,g);if(e&&(C(h),null==x||null===(a=x.current)||void 0===a||a.resetPagination()),n&&(Z(g),null==x||null===(r=x.current)||void 0===r||r.resetPagination()),null!=x&&null!==(t=x.current)&&void 0!==t&&t.setSort&&!(e||n)){var t,a,r,i,l,s,c,u,d,p,m,v=null!==(i=x.current)&&void 0!==i&&null!==(l=i.sort)&&void 0!==l&&l.item&&null!==(s=x.current)&&void 0!==s&&null!==(c=s.sort)&&void 0!==c&&c.order?{item:null===(u=x.current)||void 0===u?void 0:null===(d=u.sort)||void 0===d?void 0:d.item,order:null===(p=x.current)||void 0===p?void 0:null===(m=p.sort)||void 0===m?void 0:m.order}:k;x.current.setSort(v)}},[h,g]),{initialData:c(c({},h),{},{newFilters:(null==g?void 0:g.length)>0?g:void 0,limit:(null===(u=x.current)||void 0===u?void 0:u.pageSize)==="Infinity"?null:parseInt(null===(d=x.current)||void 0===d?void 0:d.pageSize,10)||i.C1.paginationSize,offset:((null===(p=x.current)||void 0===p?void 0:p.currentPage)-1||0)*((null===(m=x.current)||void 0===m?void 0:m.pageSize)||i.C1.paginationSize),orderBy:l(null===(v=x.current)||void 0===v?void 0:null===(f=v.sort)||void 0===f?void 0:null===(b=f.item)||void 0===b?void 0:b.replace(/ORDER/i,null===(y=x.current)||void 0===y?void 0:y.sort.order))||k}),initialSort:j,ref:x}}},48829:function(e,n,t){"use strict";t.d(n,{S:function(){return a}});var a=function(e,n){var t=document.createElement("a");"string"==typeof t.download?(document.body.appendChild(t),t.download=n,t.href=e,t.click(),document.body.removeChild(t)):location.replace(e)}},3896:function(e,n,t){"use strict";t.d(n,{X:function(){return m}});var a,r,o=t(71383),i=t(16835),l=t(59499),s=t(67294),c=t(6812),u=t(50319),d=t(75063),p=t(55863);function m(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage",a=(0,p.q)().user,r=(0,s.useState)(function(){try{switch(t){case"network":return n;case"sessionStorage":return JSON.parse(window.sessionStorage.getItem(e))||n}}catch(a){return n}}),o=r[0],d=r[1],m=function(n){try{var r=n instanceof Function?n(o):n;switch(d(r),t){case"network":y({variables:{accountUserId:null==a?void 0:a.accountUserId,filters:(0,l.Z)({},e,r)}});break;case"sessionStorage":window.sessionStorage.setItem(e,JSON.stringify(r))}}catch(i){}};(0,c.a)(v,{variables:{accountUserId:null==a?void 0:a.accountUserId},skip:"network"!==t,onCompleted:function(t){var a=t.accountUser;a&&d(a.filters[e]||n)}});var b=(0,u.D)(f),y=(0,i.Z)(b,1)[0];return[o,m]}var v=(0,d.Ps)(a||(a=(0,o.Z)(["\n  query GetAccountUserFilters($accountUserId: Int!) {\n    accountUser: Account_User_by_pk(id: $accountUserId) {\n      filters\n    }\n  }\n"]))),f=(0,d.Ps)(r||(r=(0,o.Z)(["\n  mutation SetAccountUserFilters($accountUserId: Int!, $filters: jsonb) {\n    update_Account_User_by_pk(pk_columns: { id: $accountUserId }, _append: { filters: $filters }) {\n      id\n    }\n  }\n"])))},58681:function(e,n,t){"use strict";t.d(n,{SR:function(){return i},Tq:function(){return l},YK:function(){return o},cJ:function(){return r},pX:function(){return a}});var a=["customerVat","supplier"],r=["ProformaInvoiceCustomer","ProformaInvoiceSupplier"],o=["customerPpmInvoice","supplierPpmInvoice"],i={customer:["customerVat","ProformaInvoiceCustomer","customerPpmInvoice"],supplier:["supplier","ProformaInvoiceSupplier","supplierPpmInvoice"]},l={customerVat:"Customer VAT Invoice",supplier:"Supplier Invoice",ProformaInvoiceCustomer:"Customer ad-hoc Invoice",ProformaInvoiceSupplier:"Supplier ad-hoc Invoice",customerPpmInvoice:"PPM Customer Invoice",supplierPpmInvoice:"PPM Supplier Invoice"}},49616:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return t_}});var a,r,o,i,l,s,c,u,d,p,m,v,f=t(67294),b=t(11163),y=t.n(b),h=t(73987),g=t(55863),j=t(38033),x=t(16835),w=t(27812),S=t(59499),C=t(50029),I=t(64687),O=t.n(I),Z=t(66252),T=t(6812),k=t(71383),q=t(75063),P=(0,q.Ps)(a||(a=(0,k.Z)(["\n  query getAutocompleteFields {\n    items: Service {\n      value: id\n      label: name\n    }\n  }\n"]))),A=(0,q.Ps)(r||(r=(0,k.Z)(["\n  query getAutocompleteFields {\n    items: Location {\n      value: id\n      label: name\n    }\n  }\n"]))),D=(0,q.Ps)(o||(o=(0,k.Z)(["\n  query getAddressFields {\n    items: Address {\n      id\n      name\n      addressLine: addressLine1\n      city\n    }\n  }\n"]))),_=(0,q.Ps)(i||(i=(0,k.Z)(["\n  query getAutocompleteFields($locationId: Int!) {\n    items: Sublocation(where: { locationId: { _eq: $locationId }, active: { _eq: true } }) {\n      value: id\n      label: name\n    }\n  }\n"]))),E=(0,q.Ps)(l||(l=(0,k.Z)(['\n  query getAutocompleteFields {\n    items: Account(where: { type: { _eq: "customer" } }) {\n      value: id\n      label: name\n    }\n  }\n']))),L=(0,q.Ps)(s||(s=(0,k.Z)(["\n  query GetPostcodeAreas {\n    items: PostcodeArea {\n      id\n      area\n      label: name\n      status\n      country: Country {\n        id\n        name\n        code\n        __typename\n      }\n      __typename\n    }\n  }\n"]))),N=(0,q.Ps)(c||(c=(0,k.Z)(['\n  query getAutocompleteFields {\n    items: Account(where: { type: { _eq: "supplier" } }) {\n      value: id\n      label: name\n    }\n  }\n']))),$=(0,q.Ps)(u||(u=(0,k.Z)(["\n  query getUserMeta($userId: Int!) {\n    user: Account(where: { id: { _eq: $userId } }) {\n      meta\n    }\n  }\n"]))),M=(0,q.Ps)(d||(d=(0,k.Z)(["\n  mutation saveUserReport($userId: Int!, $updatedMeta: jsonb!) {\n    update_Account_by_pk(pk_columns: { id: $userId }, _set: { meta: $updatedMeta }) {\n      id\n    }\n  }\n"]))),R=(0,q.Ps)(p||(p=(0,k.Z)(["\n  query getFinancialReport(\n    $adminId: Int!\n    $limit: Int\n    $offset: Int\n    $filters: jsonb\n    $columns: jsonb\n    $orderBy: jsonb\n    $requestWithoutMeta: Boolean\n  ) {\n    getFinancialReport(\n      adminId: $adminId\n      limit: $limit\n      offset: $offset\n      columns: $columns\n      filters: $filters\n      orderBy: $orderBy\n      requestWithoutMeta: $requestWithoutMeta\n    ) {\n      financialReport\n      meta\n    }\n  }\n"]))),Y=(0,q.Ps)(m||(m=(0,k.Z)(['\n  query GetJob($id: Int!) {\n    job: Job_by_pk(id: $id) {\n      id\n      number\n      adminId\n      description\n      admin: Admin {\n        id\n        name\n        meta\n        bankAccounts: BankAccounts {\n          id\n          bank\n          stripeId\n          accountNumber\n          routingNumber\n          bic\n          iban\n          status\n          default\n          createdAt\n          meta\n        }\n        addresses: Addresses {\n          id\n          registered\n          operating\n          trading\n          invoice\n          status\n          createdAt\n          address: Address {\n            id\n            name\n            addressLine1\n            addressLine2\n            addressLine3\n            city\n            county\n            geo\n            postCode\n            country: Country {\n              id\n              name\n            }\n          }\n        }\n      }\n      customer: Customer {\n        id\n        name\n        status\n        type\n        updatedAt\n        website\n        clientType\n        managerId\n        vatId\n        meta\n        addresses: Addresses(where: { entity: { _eq: "Account" } }) {\n          ...AddressEntityFields\n          address: Address {\n            ...AddressFields\n            country: Country {\n              id\n              name\n            }\n          }\n        }\n        media: Media {\n          id\n          medium: Medium {\n            id\n            category\n            filename\n            meta\n            type\n          }\n        }\n      }\n      sublocation: Sublocation {\n        id\n        name\n      }\n      location: Location {\n        id\n        access\n        createdAt\n        name\n        contactUserId\n        addresses: Addresses(where: { entity: { _eq: "Location" } }) {\n          ...AddressEntityFields\n          address: Address {\n            ...AddressFields\n            countryId\n            country: Country {\n              id\n              name\n              code\n            }\n          }\n        }\n        slas: SLAs(where: { entity: { _eq: "Location" } }) {\n          id\n          entity\n          entityId\n          onSite\n          onSiteUnit\n          jobReport\n          jobReportUnit\n          completion\n          completionUnit\n          notes\n          inUse\n          normalRate\n          oohRate\n          premiumRate\n          minimumInterval\n          minimumLength\n          slaId\n          sla: SLA {\n            id\n            name\n            notes\n            normalRate\n            oohRate\n            premiumRate\n            onSite\n            onSiteUnit\n            jobReport\n            jobReportUnit\n            completion\n            completionUnit\n            minimumInterval\n            minimumLength\n          }\n        }\n        services: Services(where: { entity: { _eq: "Location" } }) {\n          id\n          dayRate\n          dayRateOOH\n          dayRatePremium\n          hourRate\n          hourRateOOH\n          hourRatePremium\n          meta\n          minimumInterval\n          minimumLength\n          callOutHourRate\n          callOutHourRateOOH\n          callOutHourRatePremium\n          notes\n          delivery\n          createdAt\n          updatedAt\n          entity\n          entityId\n          serviceId\n        }\n      }\n      quotations: SupplierQuotes(\n        where: { status: { _neq: "cancelled" } }\n        order_by: { quoteNumber: asc }\n      ) {\n        id\n        createdAt\n        jobId\n        methodStatement\n        notes\n        quoteNumber\n        startDate\n        rebate\n        recommended\n        status\n        totalDuration\n        totalDurationUnit\n        meta\n        updatedAt\n        siteVisitAt\n        type\n        lineItems: SupplierQuoteLineItems {\n          id\n          description\n          item\n          qty\n          qtyUnit\n          quoteId\n          supplierTotal\n          total\n          type\n          unitRate\n        }\n        supplier: Supplier {\n          id\n          companyNumber\n          createdAt\n          name\n          status\n          type\n          updatedAt\n          website\n          clientType\n          managerId\n          vatId\n          meta\n          accountUsers: Account_Users {\n            user: User {\n              id\n              fullName\n              nameFirst\n              nameLast\n              phone\n              email\n              devices: UserDevices(where: { status: { _eq: "active" } }) {\n                id\n                playerId\n              }\n            }\n          }\n          media: Media {\n            id\n            medium: Medium {\n              id\n              category\n              filename\n              meta\n              type\n            }\n          }\n          manager: Manager {\n            id\n            fullName\n          }\n        }\n        media: Media(where: { entity: { _eq: "Quotation" } }) {\n          id\n        }\n      }\n      timings: JobTimings(order_by: { id: desc }) {\n        id\n        status\n        notes\n        meta\n        quoteId\n        createdAt\n        user: User {\n          id\n          fullName\n        }\n      }\n    }\n  }\n\n  fragment AddressFields on Address {\n    id\n    invoicingEntity\n    name\n    addressLine1\n    addressLine2\n    addressLine3\n    postCode\n    city\n    county\n    geo\n    createdAt\n    meta\n  }\n\n  fragment AddressEntityFields on Address_Entity {\n    id\n    entity\n    entityId\n    status\n    registered\n    operating\n    trading\n    invoice\n    createdAt\n  }\n']))),F=(0,q.Ps)(v||(v=(0,k.Z)(['\n  query GetJob($id: Int!) {\n    job: Job_by_pk(id: $id) {\n      id\n      number\n      adminId\n      reference\n      description\n      timingStatus\n      correctStart\n      correctEnd\n      assets: Assets {\n        id\n        status\n        asset: Asset {\n          id\n          name\n        }\n      }\n      media: Media {\n        id\n        item: Medium {\n          id\n          name\n          type\n          filename\n          category\n          meta\n        }\n      }\n      location: Location {\n        id\n        access\n        createdAt\n        name\n        contactUserId\n        addresses: Addresses(where: { entity: { _eq: "Location" } }) {\n          ...AddressEntityFields\n          address: Address {\n            ...AddressFields\n            countryId\n            country: Country {\n              id\n              name\n              code\n            }\n          }\n        }\n        slas: SLAs(where: { entity: { _eq: "Location" } }) {\n          id\n          entity\n          entityId\n          onSite\n          onSiteUnit\n          jobReport\n          jobReportUnit\n          completion\n          completionUnit\n          notes\n          inUse\n          normalRate\n          oohRate\n          premiumRate\n          minimumInterval\n          minimumLength\n          slaId\n          sla: SLA {\n            id\n            name\n            notes\n            normalRate\n            oohRate\n            premiumRate\n            onSite\n            onSiteUnit\n            jobReport\n            jobReportUnit\n            completion\n            completionUnit\n            minimumInterval\n            minimumLength\n          }\n        }\n        services: Services(where: { entity: { _eq: "Location" } }) {\n          id\n          dayRate\n          dayRateOOH\n          dayRatePremium\n          hourRate\n          hourRateOOH\n          hourRatePremium\n          meta\n          minimumInterval\n          minimumLength\n          callOutHourRate\n          callOutHourRateOOH\n          callOutHourRatePremium\n          notes\n          delivery\n          createdAt\n          updatedAt\n          entity\n          entityId\n          serviceId\n        }\n      }\n      report: JobReport {\n        id\n        completion\n        meta\n        notes\n        timing\n        passFailStatus\n        recommendations\n        comments\n        createdAt\n        updatedAt\n      }\n\n      sublocation: Sublocation {\n        id\n        name\n      }\n\n      supplier: Supplier {\n        id\n        name\n      }\n      customer: Customer {\n        id\n        name\n      }\n      expenses: Expenses {\n        id\n        amount\n        description\n        markup\n        total\n        unit\n        vat\n        paid\n      }\n\n      service: Service {\n        id\n        name\n      }\n      sla: SLA {\n        id\n        name\n      }\n\n      timings: JobTimings(order_by: { id: desc }) {\n        id\n        status\n        notes\n        meta\n        quoteId\n        createdAt\n        user: User {\n          id\n          fullName\n        }\n      }\n    }\n  }\n\n  fragment AddressFields on Address {\n    id\n    invoicingEntity\n    name\n    addressLine1\n    addressLine2\n    addressLine3\n    postCode\n    city\n    county\n    geo\n    createdAt\n    meta\n  }\n\n  fragment AddressEntityFields on Address_Entity {\n    id\n    entity\n    entityId\n    status\n    registered\n    operating\n    trading\n    invoice\n    createdAt\n  }\n']))),z=t(4730),V=t(87043),U=t(83148),H=t(86886),B=t(5616),J=t(15861),Q=t(26447),G=t(10367),W=t(85893),X=["title","entityName","toolbar","customFilter","columns","history","initialSort","loading","meta","refetch","rowClick","rows"];function K(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}var ee=(0,G.ZP)(H.ZP).withConfig({displayName:"materialTable__GridContainer",componentId:"sc-vikqyq-0"})(["background:transparent;height:calc(100vh - 32px);"]),en=(0,G.ZP)(H.ZP).withConfig({displayName:"materialTable__GridTitleSection",componentId:"sc-vikqyq-1"})(["background:transparent;width:100%;margin-bottom:16px !important;"]),et=G.ZP.img.withConfig({displayName:"materialTable__StyledIcon",componentId:"sc-vikqyq-2"})(["width:64px;height:64px;margin:8px;"]),ea=(0,G.ZP)(H.ZP).withConfig({displayName:"materialTable__GridTable",componentId:"sc-vikqyq-3"})(["border:1px solid #e0e0e0;border-radius:4px;border-top:none;box-shadow:0px 0px 2px 1px rgba(0,0,0,0.1);width:100%;height:calc(100vh - 100px);.MuiDataGrid-columnHeaderTitle{font-family:'Nunito-Regular';font-weight:700;}.GridTableContainer{height:calc(100vh - 154px);}"]),er=(0,G.ZP)(B.Z).withConfig({displayName:"materialTable__TitleSection",componentId:"sc-vikqyq-4"})(["display:flex;justify-content:space-between;align-items:center;padding:0 1rem;width:100%;"]),eo=(0,f.forwardRef)(function(e,n){var t,a,r,o,i=e.title,l=e.entityName,s=e.toolbar,c=e.customFilter,u=e.columns,d=e.history,p=e.initialSort,m=e.loading,v=e.meta,y=e.refetch,h=e.rowClick,g=e.rows,j=(0,z.Z)(e,X),x=(0,b.useRouter)(),C=x.query,I=void 0===C?{}:C,O=(0,f.useState)(parseInt(null==I?void 0:I.page,10)||1),Z=O[0],T=O[1],k=(0,f.useState)(V.C1.paginationSize),q=k[0],P=k[1];p||(p={item:"createdAt",order:"desc"});var A=(0,f.useState)({item:p.item,order:p.order}),D=A[0],_=A[1],E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=x.query,t=void 0===n?{}:n;if(e>1?t.page=e:delete t.page,!(Object.keys(t).length>0))return{};var a=Object.keys(t).map(function(n){return"page"===n?"".concat(n,"=").concat(e):"".concat(n,"=").concat(t[n])}).join("&");return"?".concat(a)},L=function(){_({item:p.item,order:p.order}),T(1);var e=E();x.push(e),P(V.C1.paginationSize)};(0,f.useImperativeHandle)(n,function(){return{currentPage:Z,pageSize:q,sort:D,setSort:function(e){_(e)},resetPagination:function(){L()}}});var N=function(e){var n=E(e);d&&x.push(n),T(e),!d&&y&&y()},$=function(e){P(e),T(1),y&&y()},M=function(e){e&&(e.field&&e.sort||e.item&&e.order)?(_({item:e.field||e.item||p.item,order:e.sort||e.order||p.order}),y&&y()):(_({item:p.item,order:p.order}),y&&y())},R=u.reduce(function(e,n){return n.customSortable?[].concat((0,w.Z)(e),[{label:n.headerName,value:n.field}]):e},[]);return(0,W.jsxs)(ee,{container:!0,children:[(0,W.jsx)(en,{item:!0,children:(0,W.jsxs)(er,{children:[(0,W.jsxs)(B.Z,{children:[(0,W.jsx)(J.Z,{variant:"h5",children:i}),(0,W.jsxs)(J.Z,{children:[l||"Results"," total: ",(null==v?void 0:null===(t=v.aggregate)||void 0===t?void 0:t.totalCount)||0]})]}),!!s&&s({entityName:l||"Results",columns:u,page:Z-1,handlePageChange:N,pageSize:q,handlePageSizeChange:$,totalCount:(null==v?void 0:null===(a=v.aggregate)||void 0===a?void 0:a.totalCount)||0,fieldsToSort:R,sort:D,handleSort:M})]})}),(0,W.jsxs)(ea,{withCustomFilter:!!c,item:!0,children:[!!c&&(0,W.jsx)(H.ZP,{item:!0,xs:12,sx:{borderBottom:"1px solid #E0E0E0"},children:(0,W.jsx)(c,{page:Z-1,handlePageChange:N,pageSize:q,handlePageSizeChange:$,totalCount:(null==v?void 0:null===(r=v.aggregate)||void 0===r?void 0:r.totalCount)||0,fieldsToSort:R,sort:D,handleSort:M})}),(0,W.jsx)(B.Z,{className:"GridTableContainer",children:(0,W.jsx)(U.s,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?K(Object(t),!0).forEach(function(n){(0,S.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):K(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({hideFooter:!!c,disableColumnMenu:!!c,columns:u,loading:m,rows:g,page:c?void 0:Z-1,pageSize:c?void 0:q,rowCount:(null==v?void 0:null===(o=v.aggregate)||void 0===o?void 0:o.totalCount)||0,pagination:!c,disableSelectionOnClick:!0,onCellClick:h,onPageChange:function(e){return N(e+1)},onPageSizeChange:function(e){return $(e)},sortingMode:"server",onSortModelChange:function(e){return M(e[0])},slots:{noRowsOverlay:function(){return(0,W.jsxs)(Q.Z,{height:"100%",alignItems:"center",justifyContent:"center",children:[(0,W.jsx)(et,{src:"/static/icons/search-failed.svg"}),(0,W.jsx)(J.Z,{variant:"h5",children:"There are no results matching your criteria. Please edit your conditions and retry."})]})},noResultsOverlay:function(){return(0,W.jsxs)(Q.Z,{height:"100%",alignItems:"center",justifyContent:"center",children:[(0,W.jsx)(et,{src:"/static/icons/search-failed.svg"}),(0,W.jsx)(J.Z,{variant:"h5",children:"There are no results matching your criteria. Please edit your conditions and retry."})]})}}},j))})]})]})});eo.defaultProps={columns:[],history:!0,loading:!0,paginationSize:!1,rows:[]};var ei=t(93946),el=t(36125),es=t(99178),ec=t(87918),eu=t(63205),ed=t(74975),ep=t(71381),em=t(54559),ev=t(25213),ef=t(73752),eb=t(39646),ey={SELECT:"select",MULTI_SELECT:"multipleSelect",DATE:"date",TEXT:"text",LOCATION:"location",SEARCH:"search",SEARCH_V2:"search_v2"},eh={FULL:"full",SHORT:"short"},eg=t(874),ej=t(65077),ex=t(24617),ew=t(40535),eS=t(19791),eC={workOrdersServiceLine:"workOrdersServiceLine",locations:"locations",sublocations:"sublocations",customers:"customers",suppliers:"suppliers",coverageAreas:"coverageAreas",address:"address",customerManager:"customerManager"},eI={regular:[{label:"is equal to",value:"equalTo"},{label:"is not equal",value:"notEqual"},{label:"is greater than",value:"greaterThan"},{label:"is greater than or equal to",value:"greaterThanOrEqualTo"},{label:"is less than",value:"lessThan"},{label:"is less or equal",value:"lessThanOrEqualTo"},{label:"is between",value:"isBetween"}],date:[{label:"is equal to",value:"equalTo"},{label:"is not equal",value:"notEqual"},{label:"is greater than",value:"greaterThan"},{label:"is greater than or equal to",value:"greaterThanOrEqualTo"},{label:"is less than",value:"lessThan"},{label:"is less or equal",value:"lessThanOrEqualTo"},{label:"is between",value:"isBetween"},{label:"today",value:"today"},{label:"last 7 days",value:"last7Days"},{label:"next 7 days",value:"next7Days"},{label:"in this month",value:"thisMonth"},{label:"last month",value:"lastMonth"},{label:"next month",value:"nextMonth"},{label:"in last 30 days",value:"last30Days"},{label:"in last 90 days",value:"last90Days"},{label:"in last Year",value:"lastYear"},{label:"year to date",value:"yearToDate"}],multiSelect:[{label:"Raised",value:"raised"},{label:"Offered",value:"offered"},{label:"Accepted",value:"accepted"},{label:"In progress",value:"inProgress"},{label:"Completed",value:"completed"},{label:"Report sent",value:"reportSent"},{label:"Invoice sent",value:"invoiceSent"},{label:"Customer paid",value:"customerPaid"},{label:"Supplier paid",value:"supplierPaid"},{label:"Closed",value:"closed"}]},eO=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},n=e.user;return[{label:"Work orders",name:"workOrders",icon:(0,W.jsx)(ev.Z,{size:20,opacity:"42%"}),text:"Find jobs where…",filters:[{label:"Job number",name:"jobNumber",icon:(0,W.jsx)(ev.Z,{size:12,opacity:"42%"}),type:ey.SELECT,subType:eh.FULL,options:eI.regular},{label:"Type",name:"jobType",icon:(0,W.jsx)(ev.Z,{size:12,opacity:"42%"}),type:ey.MULTI_SELECT,subType:eh.SHORT,options:[{label:"Reactive",value:"reactive"},{label:"Planned Maintenance",value:"ppm"}],placeHolder:"Choose type"},{label:"Charging method",name:"jobChargingMethod",icon:(0,W.jsx)(ev.Z,{size:12,opacity:"42%"}),type:ey.MULTI_SELECT,subType:eh.SHORT,options:[{label:"Fixed price",value:"fixed"},{label:"Time & Materials",value:"time-materials"}],placeHolder:"Choose Charging method"},{label:"Status",name:"jobStatus",icon:(0,W.jsx)(ev.Z,{size:12,opacity:"42%"}),type:ey.MULTI_SELECT,options:eI.multiSelect,placeHolder:"Choose status"},{label:"Service line",name:"jobServiceId",icon:(0,W.jsx)(ev.Z,{size:12,opacity:"42%"}),type:ey.SEARCH,queryType:eC.workOrdersServiceLine,placeHolder:"Choose service line"},{label:"Job total",name:"jobTotal",icon:(0,W.jsx)(eS.Z,{fontSize:"12",opacity:"42%"}),type:ey.SELECT,subType:eh.FULL,options:eI.regular},{label:"Due from customer",name:"dueFromCustomer",icon:(0,W.jsx)(eS.Z,{fontSize:"12",opacity:"42%"}),type:ey.SELECT,subType:eh.FULL,options:eI.regular},{label:"Supplier amount",name:"supplierAmount",icon:(0,W.jsx)(eS.Z,{fontSize:"12",opacity:"42%"}),type:ey.SELECT,subType:eh.FULL,options:eI.regular},{label:"Expenses amount (Supplier)",name:"jobExpensesSupplier",icon:(0,W.jsx)(eS.Z,{fontSize:"12",opacity:"42%"}),type:ey.SELECT,subType:eh.FULL,options:eI.regular},{label:"Expenses amount (Customer)",name:"jobExpensesCustomer",icon:(0,W.jsx)(eS.Z,{fontSize:"12",opacity:"42%"}),type:ey.SELECT,subType:eh.FULL,options:eI.regular},{label:"Hourly rate",name:"jobHourlyRate",icon:(0,W.jsx)(eS.Z,{fontSize:"12",opacity:"42%"}),type:ey.SELECT,subType:eh.FULL,options:eI.regular},{label:"Job date",name:"jobDate",icon:(0,W.jsx)(ex.Z,{fontSize:"12",opacity:"42%"}),type:ey.DATE,options:eI.date},{label:"Paid date",name:"jobPaidDate",icon:(0,W.jsx)(ex.Z,{fontSize:"12",opacity:"42%"}),type:ey.DATE,options:eI.date},{label:"Invoiced date",name:"jobInvoicedDate",icon:(0,W.jsx)(ex.Z,{fontSize:"12",opacity:"42%"}),type:ey.DATE,options:eI.date},{label:"Completed date",name:"jobCompletedDate",icon:(0,W.jsx)(ex.Z,{fontSize:"12",opacity:"42%"}),type:ey.DATE,options:eI.date},{label:"Closed date",name:"jobClosedDate",icon:(0,W.jsx)(ex.Z,{fontSize:"12",opacity:"42%"}),type:ey.DATE,options:eI.date},{label:"Customers",name:"customerId",placeHolder:"Choose customer",icon:(0,W.jsx)(ef.Z,{size:12,opacity:"42%"}),type:ey.SEARCH,queryType:eC.customers},{label:"Suppliers",name:"supplierId",placeHolder:"Choose supplier",icon:(0,W.jsx)(eb.Z,{size:12,opacity:"42%"}),type:ey.SEARCH,queryType:eC.suppliers},{label:"Locations",name:"locationId",icon:(0,W.jsx)(eg.Z,{fontSize:"12",opacity:"42%"}),type:ey.LOCATION},{label:"Account Manager",name:"customerManagerId",icon:(0,W.jsx)(ev.Z,{size:12,opacity:"42%"}),type:ey.SEARCH_V2,queryType:eC.customerManager,placeHolder:"Select account manager",variables:{accountId:n.accountId},multiple:!0},{label:"SLA Breached(On site time)",name:"slaBreachedOnSiteTime",icon:(0,W.jsx)(ex.Z,{fontSize:"12",opacity:"42%"}),type:ey.SELECT,subType:eh.SHORT,options:[{label:"Yes",value:"true"},{label:"No",value:"false"}]},{label:"SLA Breached(Report submission time)",name:"slaBreachedReportSubmissionTime",icon:(0,W.jsx)(ex.Z,{fontSize:"12",opacity:"42%"}),type:ey.SELECT,subType:eh.SHORT,options:[{label:"Yes",value:"true"},{label:"No",value:"false"}]}]},{label:"Quotes",name:"quotes",text:"Find quotes where…",icon:(0,W.jsx)(ej.Z,{size:20,opacity:"42%"}),filters:[{label:"Quote number",name:"quoteNumber",icon:(0,W.jsx)(ej.Z,{fontSize:"12",opacity:"42%"}),type:ey.SELECT,subType:eh.FULL,options:eI.regular},{label:"Status",name:"quoteStatus",placeHolder:"Choose quote status",icon:(0,W.jsx)(ej.Z,{fontSize:"12",opacity:"42%"}),type:ey.MULTI_SELECT,options:[{label:"Raised",value:"raised"},{label:"New quote",value:"quoteNew"},{label:"Sent to supplier",value:"quoteOffered"},{label:"Sent to customer",value:"quoteSent"},{label:"Accepted",value:"quoteAccepted"},{label:"Rejected",value:"quoteRejected"},{label:"Closed",value:"quoteClosed"}]},{label:"Description",name:"quoteDescription",icon:(0,W.jsx)(ej.Z,{fontSize:"12",opacity:"42%"}),type:ey.TEXT},{label:"Quote value",name:"quoteValue",icon:(0,W.jsx)(eS.Z,{fontSize:"12",opacity:"42%"}),type:ey.SELECT,subType:eh.FULL,options:eI.regular},{label:"Quote date",name:"quoteDate",icon:(0,W.jsx)(ex.Z,{fontSize:"12",opacity:"42%"}),type:ey.DATE,options:eI.date},{label:"Quote due date",name:"quoteDueDate",icon:(0,W.jsx)(ex.Z,{fontSize:"12",opacity:"42%"}),type:ey.DATE,options:eI.date},{label:"Closed date",name:"quoteClosedDate",icon:(0,W.jsx)(ex.Z,{fontSize:"12",opacity:"42%"}),type:ey.DATE,options:eI.date},{label:"Customers",name:"customerId",placeHolder:"Choose customer",icon:(0,W.jsx)(ef.Z,{size:12,opacity:"42%"}),type:ey.SEARCH,subType:eh.FULL,queryType:eC.customers},{label:"Suppliers",name:"supplierId",placeHolder:"Choose supplier",icon:(0,W.jsx)(eb.Z,{size:12,opacity:"42%"}),type:ey.SEARCH,queryType:eC.suppliers},{label:"Locations",name:"locationId",icon:(0,W.jsx)(eg.Z,{fontSize:"12",opacity:"42%"}),type:ey.LOCATION},{label:"Account Manager",name:"customerManagerId",icon:(0,W.jsx)(ev.Z,{size:12,opacity:"42%"}),type:ey.SEARCH_V2,queryType:eC.customerManager,placeHolder:"Select account manager",variables:{accountId:n.accountId},multiple:!0},{label:"SLA Breached",name:"slaBreachedQuote",icon:(0,W.jsx)(ex.Z,{fontSize:"12",opacity:"42%"}),type:ey.SELECT,subType:eh.SHORT,options:[{label:"Yes",value:"true"},{label:"No",value:"false"}]}]},{label:"Invoices",name:"invoices",text:"Find invoices where…",icon:(0,W.jsx)(ew.Z,{size:20,opacity:"42%"}),filters:[{label:"Invoice number",name:"invoiceNumber",icon:(0,W.jsx)(ew.Z,{fontSize:"12",opacity:"42%"}),type:ey.SELECT,options:eI.regular,subType:eh.FULL},{label:"Invoice status",name:"invoiceStatus",icon:(0,W.jsx)(ew.Z,{fontSize:"12",opacity:"42%"}),type:ey.MULTI_SELECT,options:[{label:"Paid",value:"paid"},{label:"Partially paid",value:"partial"},{label:"Unpaid",value:"unpaid"}],placeHolder:"Choose invoice status"},{label:"Type",name:"invoiceType",icon:(0,W.jsx)(ew.Z,{fontSize:"12",opacity:"42%"}),type:ey.MULTI_SELECT,subType:eh.SHORT,placeHolder:"Choose type",options:[{label:"Invoice",value:["customerVat","supplier"]},{label:"Ad-hoc invoice",value:["ProformaInvoiceCustomer","ProformaInvoiceSupplier"]},{label:"PM invoice",value:["customerPpmInvoice","supplierPpmInvoice"]}]},{label:"Days outstanding",name:"outstandingDays",icon:(0,W.jsx)(ex.Z,{fontSize:"12",opacity:"42%"}),type:ey.SELECT,subType:eh.SHORT,options:[{label:"All outstanding invoices",value:"0"},{label:"1-30",value:"1-30"},{label:"31-60",value:"31-60"},{label:"61-90",value:"61-90"},{label:">90",value:"90"}]},{label:"Job date",name:"invoiceDate",icon:(0,W.jsx)(ex.Z,{fontSize:"12",opacity:"42%"}),type:ey.DATE,options:eI.date},{label:"Paid date",name:"invoicePaidDate",icon:(0,W.jsx)(ex.Z,{fontSize:"12",opacity:"42%"}),type:ey.DATE,options:eI.date},{label:"Invoiced date",name:"invoiceInvoicedDate",icon:(0,W.jsx)(ex.Z,{fontSize:"12",opacity:"42%"}),type:ey.DATE,options:eI.date},{label:"Completed date",name:"invoiceCompletedDate",icon:(0,W.jsx)(ex.Z,{fontSize:"12",opacity:"42%"}),type:ey.DATE,options:eI.date},{label:"Closed date",name:"invoiceClosedDate",icon:(0,W.jsx)(ex.Z,{fontSize:"12",opacity:"42%"}),type:ey.DATE,options:eI.date},{label:"Customers",name:"customerId",placeHolder:"Choose customer",icon:(0,W.jsx)(ef.Z,{size:12,opacity:"42%"}),type:ey.SEARCH,queryType:eC.customers},{label:"Suppliers",name:"supplierId",placeHolder:"Choose supplier",icon:(0,W.jsx)(eb.Z,{size:12,opacity:"42%"}),type:ey.SEARCH,queryType:eC.suppliers},{label:"Location",name:"locationId",icon:(0,W.jsx)(eg.Z,{fontSize:"12",opacity:"42%"}),type:ey.LOCATION},{label:"Account Manager",name:"customerManagerId",icon:(0,W.jsx)(ev.Z,{size:12,opacity:"42%"}),type:ey.SEARCH_V2,queryType:eC.customerManager,placeHolder:"Select account manager",variables:{accountId:n.accountId},multiple:!0}]},{label:"Customers",name:"customers",text:"Find customers where…",icon:(0,W.jsx)(ef.Z,{size:20,opacity:"42%"}),filters:[{label:"Number of jobs",name:"numberOfJobs",icon:(0,W.jsx)(ev.Z,{size:12,opacity:"42%"}),type:ey.SELECT,subType:eh.FULL,options:eI.regular},{label:"Number of quotes",name:"numberOfQuotes",icon:(0,W.jsx)(ej.Z,{fontSize:"12",opacity:"42%"}),type:ey.SELECT,subType:eh.FULL,options:eI.regular},{label:"Number of invoices",name:"numberOfInvoices",icon:(0,W.jsx)(ew.Z,{fontSize:"12",opacity:"42%"}),type:ey.SELECT,subType:eh.FULL,options:eI.regular},{label:"Number of locations",name:"numberOfLocations",icon:(0,W.jsx)(ev.Z,{size:12,opacity:"42%"}),type:ey.SELECT,subType:eh.FULL,options:eI.regular},{label:"Number of users",name:"numberOfUsers",icon:(0,W.jsx)(ev.Z,{size:12,opacity:"42%"}),type:ey.SELECT,subType:eh.FULL,options:eI.regular},{label:"Job status",name:"jobStatus",icon:(0,W.jsx)(ev.Z,{size:12,opacity:"42%"}),type:ey.MULTI_SELECT,subType:eh.FULL,options:eI.multiSelect,placeHolder:"Choose job status"},{label:"Job type",name:"jobType",icon:(0,W.jsx)(ev.Z,{size:12,opacity:"42%"}),type:ey.MULTI_SELECT,subType:eh.SHORT,options:[{label:"Reactive",value:"reactive"},{label:"Planned Maintenance",value:"plannedMaintenance"}],placeHolder:"Choose job type"},{label:"Quote status",name:"quoteStatus",placeHolder:"Choose quote status",icon:(0,W.jsx)(ev.Z,{size:12,opacity:"42%"}),type:ey.MULTI_SELECT,subType:eh.SHORT,options:[{label:"New quote",value:"newQuote"},{label:"Sent to supplier",value:"sentToSupplier"},{label:"Sent to customer",value:"sentToCustomer"},{label:"Accepted",value:"accepted"},{label:"Rejected",value:"rejected"},{label:"Closed",value:"closed"}]},{label:"Invoice status",name:"invoiceStatus",icon:(0,W.jsx)(ev.Z,{size:12,opacity:"42%"}),type:ey.MULTI_SELECT,subType:eh.SHORT,options:[{label:"paid",value:"paid"},{label:"partially paid",value:"partiallyPaid"},{label:"unpaid",value:"unpaid"}],placeHolder:"Choose invoice status"},{label:"Total spend",name:"totalSpend",icon:(0,W.jsx)(eS.Z,{fontSize:"12",opacity:"42%"}),type:ey.SELECT,subType:eh.FULL,options:eI.regular},{label:"Date account created",name:"dateAccountCreated",icon:(0,W.jsx)(ex.Z,{fontSize:"12",opacity:"42%"}),type:ey.DATE,options:eI.date},{label:"Last job",name:"lastJobs",icon:(0,W.jsx)(ex.Z,{fontSize:"12",opacity:"42%"}),type:ey.DATE,options:eI.date},{label:"Last quotes",name:"lastQuotes",icon:(0,W.jsx)(ej.Z,{fontSize:"12",opacity:"42%"}),type:ey.DATE,options:eI.date},{label:"Invoice address",name:"invoiceAddressId",icon:(0,W.jsx)(eg.Z,{fontSize:"12",opacity:"42%"}),type:ey.SEARCH,queryType:eC.address,placeHolder:"Choose Invoice address"},{label:"Account Manager",name:"customerManagerId",icon:(0,W.jsx)(ev.Z,{size:12,opacity:"42%"}),type:ey.SEARCH_V2,queryType:eC.customerManager,placeHolder:"Select account manager",variables:{accountId:n.accountId},multiple:!0}]},{label:"Suppliers",name:"suppliers",text:"Find suppliers where…",icon:(0,W.jsx)(eb.Z,{size:20,opacity:"42%"}),filters:[{label:"Number of jobs",name:"numberOfJobs",icon:(0,W.jsx)(ev.Z,{size:12,opacity:"42%"}),type:ey.SELECT,subType:eh.FULL,options:eI.regular},{label:"Number of quotes",name:"numberOfQuotes",icon:(0,W.jsx)(ej.Z,{fontSize:"12",opacity:"42%"}),type:ey.SELECT,subType:eh.FULL,options:eI.regular},{label:"Number  of invoices",name:"numberOfInvoices",icon:(0,W.jsx)(ew.Z,{fontSize:"12",opacity:"42%"}),type:ey.SELECT,subType:eh.FULL,options:eI.regular},{label:"Number of users",name:"numberOfUsers",icon:(0,W.jsx)(ef.Z,{size:12,opacity:"42%"}),type:ey.SELECT,subType:eh.FULL,options:eI.regular},{label:"Job status",name:"jobStatus",icon:(0,W.jsx)(ev.Z,{size:12,opacity:"42%"}),type:ey.MULTI_SELECT,subType:eh.FULL,options:eI.multiSelect,placeHolder:"Choose job status"},{label:"Job type",name:"jobType",icon:(0,W.jsx)(ev.Z,{size:12,opacity:"42%"}),type:ey.MULTI_SELECT,subType:eh.SHORT,placeHolder:"Choose job type",options:[{label:"Reactive",value:"reactive"},{label:"Planned Maintenance",value:"plannedMaintenance"}]},{label:"Service line",name:"jobServiceId",icon:(0,W.jsx)(ev.Z,{size:12,opacity:"42%"}),type:ey.SEARCH,queryType:eC.workOrdersServiceLine,placeHolder:"Choose service line"},{label:"Quote status",name:"quoteStatus",icon:(0,W.jsx)(ej.Z,{fontSize:"12",opacity:"42%"}),type:ey.MULTI_SELECT,subType:eh.SHORT,options:[{label:"New quote",value:"newQuote"},{label:"Sent to supplier",value:"sentToSupplier"},{label:"Sent to customer",value:"sentToCustomer"},{label:"Accepted",value:"accepted"},{label:"Rejected",value:"rejected"},{label:"Closed",value:"closed"}],placeHolder:"Choose quote status"},{label:"Invoice status",name:"invoiceStatus",icon:(0,W.jsx)(ew.Z,{fontSize:"12",opacity:"42%"}),type:ey.MULTI_SELECT,options:[{label:"paid",value:"paid"},{label:"Partially paid",value:"partial"},{label:"Unpaid",value:"unpaid"}],placeHolder:"Choose invoice status"},{label:"Date account created",name:"dateAccountCreated",icon:(0,W.jsx)(ex.Z,{fontSize:"12",opacity:"42%"}),type:ey.DATE,options:eI.date},{label:"Last job",name:"lastJobs",icon:(0,W.jsx)(ex.Z,{fontSize:"12",opacity:"42%"}),type:ey.DATE,options:eI.date},{label:"Last quotes",name:"lastQuotes",icon:(0,W.jsx)(ex.Z,{fontSize:"12",opacity:"42%"}),type:ey.DATE,options:eI.date},{label:"Coverage areas",name:"coverageAreasId",icon:(0,W.jsx)(eg.Z,{fontSize:"12",opacity:"42%"}),type:ey.SEARCH,queryType:eC.coverageAreas,placeHolder:"Choose Coverage areas"},{label:"Operating address",name:"operatingAddressId",icon:(0,W.jsx)(eg.Z,{fontSize:"12",opacity:"42%"}),type:ey.SEARCH,queryType:eC.address,placeHolder:"Choose Operating address"},{label:"Registered address",name:"registeredAddressId",icon:(0,W.jsx)(eg.Z,{fontSize:"12",opacity:"42%"}),type:ey.SEARCH,queryType:eC.address,placeHolder:"Choose Registered address"}]}]},eZ={workOrders:{check:!1,jobNumber:{check:!1,operation:"equalTo",value:""},jobType:{check:!1,operation:"inTo",value:["reactive"]},jobChargingMethod:{check:!1,value:[]},jobStatus:{check:!1,value:[{label:"Select",value:""}]},jobServiceId:{check:!1,value:""},jobTotal:{check:!1,value:""},dueFromCustomer:{check:!1,value:""},supplierAmount:{check:!1,value:""},jobExpensesSupplier:{check:!1,value:""},jobExpensesCustomer:{check:!1,value:""},jobHourlyRate:{check:!1,value:""},jobDate:{check:!1,operation:"equalTo",value:null,secondValue:null},jobPaidDate:{check:!1,operation:"equalTo",value:[{}],secondValue:[{}]},jobInvoicedDate:{check:!1,operation:"equalTo",value:[{}],secondValue:[{}]},jobCompletedDate:{check:!1,operation:"equalTo",value:[{}],secondValue:[{}]},jobClosedDate:{check:!1,operation:"equalTo",value:[{}],secondValue:[{}]},customerId:{check:!1,value:""},supplierId:{check:!1,value:""},locationId:{check:!1,location:{}},customerManagerId:{check:!1,value:null},slaBreachedOnSiteTime:{check:!1,value:""},slaBreachedReportSubmissionTime:{check:!1,value:""}},quotes:{check:!1,quoteNumber:{check:!1,operation:"equalTo",value:""},quoteStatus:{check:!1,value:[{label:"Select",value:""}]},quoteDescription:{check:!1,value:""},quoteValue:{check:!1,operation:"equalTo",value:""},quoteDate:{check:!1,operation:"equalTo",value:[{}],secondValue:[{}]},quoteDueDate:{check:!1,operation:"equalTo",value:"2024-01-17",secondValue:[{}]},quoteClosedDate:{check:!1,operation:"equalTo",value:[{}],secondValue:[{}]},customerId:{check:!1,value:""},supplierId:{check:!1,value:""},locationId:{check:!1,location:{}},customerManagerId:{check:!1,value:null},slaBreachedQuote:{check:!1,value:""}},invoices:{check:!1,invoiceNumber:{check:!1,operation:"",value:""},invoiceStatus:{check:!1,value:[]},invoiceType:{check:!1,value:""},outstandingDays:{check:!1,value:""},invoiceDate:{check:!1,operation:"",value:[{}],secondValue:[{}]},invoicePaidDate:{check:!1,operation:"",value:[{}],secondValue:[{}]},invoiceInvoicedDate:{check:!1,operation:"",value:[{}],secondValue:[{}]},invoiceCompletedDate:{check:!1,operation:"",value:[{}],secondValue:[{}]},invoiceClosedDate:{check:!1,operation:"",value:[{}],secondValue:[{}]},customerId:{check:!1,value:""},supplierId:{check:!1,value:""},locationId:{check:!1,location:{}},customerManagerId:{check:!1,value:null}},customers:{numberOfJobs:{check:!1,operation:"",value:""},numberOfQuotes:{check:!1,operation:"",value:""},numberOfInvoices:{check:!1,operation:"",value:""},numberOfLocations:{check:!1,operation:"",value:""},numberOfUsers:{check:!1,operation:"",value:""},jobStatus:{check:!1,value:[{label:"Select",value:""}]},jobType:{check:!1,value:"reactive"},quoteStatus:{check:!1,value:""},invoiceStatus:{check:!1,value:"paid"},totalSpend:{check:!1,operation:"",value:""},dateAccountCreated:{check:!1,operation:"",value:[{}],secondValue:[{}]},lastJobs:{check:!1,operation:"",value:[{}],secondValue:[{}]},lastQuotes:{check:!1,operation:[{}],value:[{}]},locationId:{check:!1,location:{}},invoiceAddressId:{check:!1,1:{location:""}},customerManagerId:{check:!1,value:null}},suppliers:{numberOfJobs:{check:!1,operation:"is equal to",value:""},numberOfQuotes:{check:!1,operation:"is equal to",value:""},numberOfInvoices:{check:!1,operation:"is equal to",value:""},numberOfUsers:{check:!1,operation:"is equal to",value:""},jobStatus:{check:!1,value:[{label:"Select",value:""}]},jobType:{check:!1,value:"reactive"},jobServiceId:{check:!1,value:""},quoteStatus:{check:!1,value:"newQuote"},invoiceStatus:{check:!1,value:""},dateAccountCreated:{check:!1,operation:"i",value:[{}],secondValue:[{}]},lastJobs:{check:!1,operation:"",value:[{}],secondValue:[{}]},lastQuotes:{check:!1,operation:"",value:[{}],secondValue:[{}]},coverageAreasId:{check:!1,value:""},operatingAddressId:{check:!1,value:""},registeredAddressId:{check:!1,value:""}}},eT=function(e,n){var t,a=eO();return(null==a?void 0:null===(t=a.find(function(e){return e.name===n}))||void 0===t?void 0:t.filters.find(function(n){return n.name===e}))||e},ek=function(e){e.filtersToRender;var n=e.filter,t=eT(n.filterName,n.category),a=t.label,r="",o=!1;switch(t.type){case ey.SELECT:if(t.subType&&t.subType===eh.SHORT){if("isBetween"===n.operation){r={from:n.value,to:n.secondValue};break}r=t.options.find(function(e){return e.value===n.value}).label;break}r=n.value,"isBetween"===n.operation&&(r={from:n.value,to:n.secondValue});break;case ey.MULTI_SELECT:var i=[],l=n.value.reduce(function(e,n){return"string"==typeof n?[].concat((0,w.Z)(e),[n]):Array.isArray(n)?[].concat((0,w.Z)(e),(0,w.Z)(n)):[].concat((0,w.Z)(e),[n])},[]);t.options.forEach(function(e){var n;"string"==typeof e.value&&l.includes(e.value)&&i.push(e.label),Array.isArray(e.value)&&null!==(n=e.value)&&void 0!==n&&n.some(function(e){return l.includes(e)})&&i.push(e.label)}),r=i.join(", ");break;case ey.DATE:n.secondValue||(r=new Date(n.value)),n.secondValue&&(r={from:new Date(n.value),to:new Date(n.secondValue)}),o=!0;break;case ey.TEXT:r=n.value;break;case ey.SEARCH:r=n.label;break;case ey.SEARCH_V2:r=Array.isArray(n.value)?n.value.map(function(e){return e.label}).join(", "):n.value;break;case ey.LOCATION:if(r=n.locationName,n.operation="equalTo",n.location){r=n.location.map(function(e){var n=e.locationName;return e.subLocationName&&(n="".concat(e.locationName," in sub location: ").concat(e.subLocationName)),n}).join(" and ");break}n.locationName&&n.subLocationName&&(r="".concat(n.locationName," in sub location: ").concat(n.subLocationName));break;default:r=n.value}switch(n.operation){case"inTo":return"".concat(a," in ").concat(r);case"equalTo":if(o)return"".concat(a," is ").concat((0,ed.Z)(r,"dd-LL-yyyy"));return"".concat(a," = ").concat(r);case"notEqual":if(o)return"".concat(a," is not ").concat((0,ed.Z)(r,"dd-LL-yyyy"));return"".concat(a," ≠ ").concat(r);case"greaterThan":if(o)return"".concat(a," is after ").concat((0,ed.Z)(r,"dd-LL-yyyy"));return"".concat(a," > ").concat(r);case"lessThan":if(o)return"".concat(a," is before ").concat((0,ed.Z)(r,"dd-LL-yyyy"));return"".concat(a," < ").concat(r);case"lessThanOrEqualTo":if(o)return"".concat(a," is before or equal to ").concat((0,ed.Z)(r,"dd-LL-yyyy"));return"".concat(a," <= ").concat(r);case"greaterThanOrEqualTo":if(o)return"".concat(a," is after or equal to ").concat((0,ed.Z)(r,"dd-LL-yyyy"));return"".concat(a," >= ").concat(r);case"contains":return"".concat(a," like '").concat(r,"'");case"notContains":return"".concat(a," not like '").concat(r,"'");case"isBetween":if((0,ep.Z)(r.from)&&(0,ep.Z)(r.to))return"".concat(a," is between ").concat((0,ed.Z)(r.from,"dd-LL-yyyy")," and ").concat((0,ed.Z)(r.to,"dd-LL-yyyy"));return"".concat(a," is between ").concat(r.from," and ").concat(r.to);case"thisMonth":return"".concat(a," in ").concat((0,ed.Z)(new Date,"LLLL"));case"last30Days":return"".concat(a," from ").concat((0,ed.Z)((0,em.Z)(new Date,1),"dd-LL-yyyy")," to now");case"last90Days":return"".concat(a," from ").concat((0,ed.Z)((0,em.Z)(new Date,3),"dd-LL-yyyy")," to now");case"lastYear":return"".concat(a," from ").concat((0,ed.Z)((0,em.Z)(new Date,12),"dd-LL-yyyy")," to now");default:return"".concat(a," ").concat(n.operator," ").concat(r)}},eq=t(11082),eP=t(26186),eA=t(21023),eD=t(825),e_=t(41749),eE=t(26143);function eL(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function eN(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?eL(Object(t),!0).forEach(function(n){(0,S.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eL(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var e$=[{label:"Select...",value:"select"},{label:"is equal to",value:"equalTo"},{label:"is not equal",value:"notEqual"},{label:"is greater than",value:"greaterThan"},{label:"is greater or equal",value:"greaterThanOrEqualTo"},{label:"is less than",value:"lessThan"},{label:"is less or equal",value:"lessThanOrEqualTo"},{label:"is between",value:"isBetween"}],eM=[{label:"Select...",value:"select"},{label:"is later than",value:"greaterThan"},{label:"is earlier than",value:"lessThan"},{label:"is equal to",value:"equalTo"},{label:"is not equal",value:"notEqual"},{label:"is between",value:"isBetween"},{label:"today",value:"today"},{label:"last 7 days",value:"last7Days"},{label:"next 7 days",value:"next7Days"},{label:"this month",value:"thisMonth"},{label:"next month",value:"nextMonth"},{label:"in last 30 days",value:"last30Days"},{label:"in last 90 days",value:"last90Days"},{label:"in last Year",value:"lastYear"}],eR=function(e){var n=e.formatAsPrice,t=e.row,a=e.value,r=e.field,o=e.multiple&&t.invoiceCount>1?"Multiple":a;return"jobStatus"===r?(0,W.jsx)(B.Z,{m:1,children:(0,W.jsx)(e_.B,{value:a})}):(0,W.jsx)(B.Z,{m:1,children:(0,W.jsx)(eA.Z,{title:n?(0,eq.Z)(o):o,children:(0,W.jsx)(J.Z,{sx:{textAlign:"left"},children:n?(0,eq.Z)(o):o})})})},eY=[{group:"workOrders",label:"Job number",value:"workOrdersJobNumber",type:"inputSelector",availableOptions:e$},{group:"workOrders",label:"Type",value:"workOrdersType",type:"checkList",availableOptions:[{label:"Select...",value:"select"},{label:"Reactive",value:"reactive"},{label:"Planned Maintenance",value:"ppm"},{label:"Quote",value:"quote"}]},{group:"workOrders",label:"Charging method",value:"jobChargingMethod",type:"checkList",availableOptions:[{label:"Select...",value:"select"},{label:"Fixed price",value:"fixed"},{label:"Time & materials",value:"time-materials"},{label:"Call out rate",value:"callOutRate"}]},{group:"workOrders",label:"Status",value:"workOrdersStatus",type:"checkList",availableOptions:[{label:"Select...",value:"select"},{label:"Raised",value:"raised"},{label:"Offered",value:"offered"},{label:"Accepted",value:"accepted"},{label:"In progress",value:"inProgress"},{label:"Completed",value:"completed"},{label:"Report sent",value:"reportSent"},{label:"Invoice sent",value:"invoiceSent"},{label:"Customer paid",value:"customerPaid"},{label:"Supplier paid",value:"supplierPaid"},{label:"Closed",value:"closed"}]},{group:"workOrders",label:"Service line",value:"workOrdersServiceLine",type:"autoComplete",availableOptions:[{label:"Select...",value:"select"}]},{group:"invoices",label:"Invoice number",value:"invoiceNumber",type:"inputSelector",availableOptions:e$},{group:"invoices",label:"Invoice type",value:"invoiceType",type:"checkList",availableOptions:[{label:"Select...",value:"select"},{label:"Customer Invoice",value:"customerVat"},{label:"Ad-hoc customer invoice",value:"ProformaInvoiceCustomer"},{label:"PM customer invoice",value:"customerPpmInvoice"},{label:"Supplier Invoice",value:"supplier"},{label:"Ad-hoc supplier invoice",value:"ProformaInvoiceSupplier"},{label:"PM supplier invoice",value:"supplierPpmInvoice"}]},{group:"invoices",label:"Invoice status",value:"invoiceStatus",type:"checkList",availableOptions:[{label:"Select...",value:"select"},{label:"Paid",value:"paid"},{label:"Partially paid",value:"partial"},{label:"Unpaid",value:"unpaid"}]},{group:"invoices",label:"Days Outstanding",value:"outstandingdays",type:"checkList",availableOptions:[{label:"Select...",value:"select"},{label:"1 - 30",value:"1-30"},{label:"31 - 60",value:"31-60"},{label:"> 90",value:"90-"}]},{group:"quotes",label:"Status",value:"quotesStatus",type:"checkList",availableOptions:[{label:"Select...",value:"select"},{label:"Raised",value:"raised"},{label:"New quote",value:"quoteNew"},{label:"Sent to supplier",value:"quoteOffered"},{label:"Sent to customer",value:"quoteSent"},{label:"Accepted",value:"quoteAccepted"},{label:"Rejected",value:"quoteRejected"},{label:"Closed",value:"quoteClosed"}]},{group:"quotes",label:"Description",value:"quotesDescription",type:"input"},{group:"values",label:"Job total",value:"valuesJobTotal",type:"inputSelector",availableOptions:e$},{group:"values",label:"Due from customer",value:"valuesDueFromCustomer",type:"inputSelector",availableOptions:e$},{group:"values",label:"Quote value",value:"valuesQuoteValue",type:"inputSelector",availableOptions:e$},{group:"values",label:"Supplier amount",value:"valuesSupplierAmount",type:"inputSelector",availableOptions:e$},{group:"values",label:"Expenses amount",value:"valuesExpensesAmount",type:"inputSelector",availableOptions:e$},{group:"values",label:"Hourly rate",value:"valuesHourlyRate",type:"inputSelector",availableOptions:e$},{group:"dates",label:"Job date",value:"datesJobDate",type:"dateSelector",availableOptions:eM},{group:"dates",label:"Paid date",value:"datesPaidDate",type:"dateSelector",availableOptions:eM},{group:"dates",label:"Invoiced date",value:"datesInvoicedDate",type:"dateSelector",availableOptions:eM},{group:"dates",label:"Completed date",value:"datesCompletedDate",type:"dateSelector",availableOptions:eM},{group:"dates",label:"Closed date",value:"datesClosedDate",type:"dateSelector",availableOptions:eM},{group:"locations",label:"Locations",value:"locations",type:"autoComplete",availableOptions:[{label:"Select...",value:"select"}],childrens:[{group:"sublocations",label:"Sublocations",value:"sublocations",type:"autoComplete",availableOptions:[{label:"Select...",value:"select"}]}]},{group:"customers",label:"Customers",value:"customers",type:"autoComplete",availableOptions:[{label:"Select...",value:"select"}]},{group:"suppliers",label:"Suppliers",value:"suppliers",type:"autoComplete",availableOptions:[{label:"Select...",value:"select"}]}],eF=[{key:"jobNumber",name:"Job ID",width:90},{key:"jobType",name:"Job type",width:50},{key:"customerName",name:"Customer",width:150},{key:"supplierName",name:"Supplier",width:150},{key:"locationName",name:"Location",width:200},{key:"jobStatus",name:"Status",width:150},{key:"jobTotal",name:"Job total",width:120},{key:"supplierAmount",name:"Supplier total",width:150},{key:"jobServiceName",name:"Service line",width:170},{key:"jobDate",name:"Job date",width:150},{key:"jobDescription",name:"Job description",width:300}],ez=function(e){var n=e.columnsToDisplay,t=e.numberPrefix,a=e.numberSuffix,r=e.downloadJobInvoice,o=(e.downloadJobReport,e.downloadJobQuote),i=e.downloadReport,l=[{field:"jobNumber",align:"left",headerAlign:"left",headerName:"Job ID",width:90,renderCell:function(e){var n=e.row;return(0,W.jsx)(B.Z,{children:(0,W.jsx)(eD.D,{id:n.jobId,number:n.jobNumber,numberPrefix:t,numberSuffix:a,openCanvas:!0,type:n.jobType})})}},{field:"jobType",headerAlign:"left",headerName:"Job type",width:50,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"invoiceNumber",headerAlign:"left",headerName:"Invoice number",width:150,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t,multiple:!0})}},{field:"invoiceType",headerAlign:"left",headerName:"Invoice type",width:150,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t,multiple:!0})}},{field:"invoiceStatus",headerAlign:"left",headerName:"Invoice status",width:150,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t,multiple:!0})}},{field:"invoiceAmount",headerAlign:"left",headerName:"Invoice amount",width:150,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t,formatAsPrice:!0,multiple:!0})}},{field:"outstandingDays",headerAlign:"left",headerName:"Outstanding days",width:170,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t,multiple:!0})}},{field:"customerName",headerAlign:"left",headerName:"Customer",width:150,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"customerManagerName",headerAlign:"left",headerName:"Account Manager",width:150,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"supplierName",headerAlign:"left",headerName:"Supplier",width:150,align:"left",renderCell:function(e){var n=e.row,t=e.value;if(!t)return(0,W.jsx)(B.Z,{mx:1,children:(0,W.jsx)(J.Z,{children:"-"})});var a=t.split("//");return(0,W.jsx)(eR,{row:n,value:a})}},{field:"locationName",headerAlign:"left",headerName:"Location",width:200,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"addressMainName",headerAlign:"left",headerName:"Address",width:200,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"addressMainPostCode",headerAlign:"left",headerName:"Post code",width:200,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"addressInvoiceName",headerAlign:"left",headerName:"Invoice address",width:200,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"sublocationName",headerAlign:"left",headerName:"Sublocation",width:200,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"jobPriority",headerAlign:"left",headerName:"Priority",width:170,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"jobStatus",headerAlign:"left",headerName:"Status",width:150,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t,field:"jobStatus"})}},{field:"jobTotal",headerAlign:"left",headerName:"Job total",width:120,align:"right",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,formatAsPrice:!0,value:t})}},{field:"dueFromCustomer",headerAlign:"left",headerName:"Due from customer",width:120,align:"right",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,formatAsPrice:!0,value:t})}},{field:"outstandingAmount",headerAlign:"left",headerName:"Outstanding amount",width:170,align:"right",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,formatAsPrice:!0,value:t,multiple:!0})}},{field:"jobNetRevenue",headerAlign:"left",headerName:"Net revenue",width:150,align:"right",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,formatAsPrice:!0,value:t})}},{field:"supplierAmount",headerAlign:"left",headerName:"Supplier total",width:150,align:"right",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,formatAsPrice:!0,value:t})}},{field:"jobExpensesCustomer",headerAlign:"left",headerName:"Expenses (Customer)",width:170,align:"right",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,formatAsPrice:!0,value:t})}},{field:"jobExpensesSupplier",headerAlign:"left",headerName:"Expenses (Supplier)",width:150,align:"right",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,formatAsPrice:!0,value:t})}},{field:"jobServiceName",headerAlign:"left",headerName:"Service line",width:170,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"jobDate",headerAlign:"left",headerName:"Job date",align:"left",width:150,renderCell:function(e){e.row;var n=e.value;return n&&(0,eP.Z)(n)}},{field:"jobReference",headerAlign:"left",headerName:"Customer reference",align:"left",width:150,renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"jobTime",headerAlign:"left",headerName:"Job time",align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"jobDuration",headerAlign:"left",headerName:"Job duration",width:130,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"jobDescription",headerAlign:"left",headerName:"Job description",width:300,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"jobShortDescription",headerAlign:"left",headerName:"Issue reported",width:200,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"jobSource",headerAlign:"left",headerName:"Source",align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"jobCostCategory",headerAlign:"left",headerName:"Cost category",width:130,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"adminUser",headerAlign:"left",headerName:"Assigned to (Admin)",align:"left",width:150,renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"customerUser",headerAlign:"left",headerName:"Assigned to (Customer)",width:150,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"supplierUser",headerAlign:"left",headerName:"Assigned to (Supplier)",width:150,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"jobCreatedAtDate",align:"left",headerAlign:"left",width:150,headerName:"Job created",valueFormatter:function(e){var n=e.value;return n&&(0,eP.Z)(n)}},{field:"jobCreatedBy",headerAlign:"left",headerName:"Created by",width:150,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"jobPaidDate",align:"left",headerAlign:"left",width:150,headerName:"Paid date",valueFormatter:function(e){var n=e.value;return n&&(0,eP.Z)(n)}},{field:"jobCompletedDate",align:"left",headerAlign:"left",headerName:"Completed date",width:150,valueFormatter:function(e){var n=e.value;return n&&(0,eP.Z)(n)}},{field:"jobInvoicedDate",align:"left",headerAlign:"left",headerName:"Invoice date",width:150,valueFormatter:function(e){var n=e.value;return n&&(0,eP.Z)(n)}},{field:"jobClosedDate",align:"left",headerAlign:"left",headerName:"Closed date",width:150,valueFormatter:function(e){var n=e.value;return n&&(0,eP.Z)(n)}},{field:"quoteDate",align:"left",headerAlign:"left",headerName:"Quote date",width:150,valueFormatter:function(e){var n=e.value;return n&&(0,eP.Z)(n)}},{field:"jobQuoteRange",headerAlign:"left",headerName:"Quote range",align:"left",width:170,renderCell:function(e){var n=e.value;return n&&n.low&&n.high?(0,W.jsxs)(B.Z,{width:"100%",children:[(0,W.jsxs)(B.Z,{display:"flex",width:"100%",justifyContent:"space-between",children:[(0,W.jsx)(J.Z,{children:"From:"}),(0,W.jsx)(J.Z,{children:(0,eq.Z)(n.low)})]}),(0,W.jsxs)(B.Z,{display:"flex",width:"100%",justifyContent:"space-between",children:[(0,W.jsx)(J.Z,{children:"To:"}),(0,W.jsx)(J.Z,{children:(0,eq.Z)(n.high)})]})]}):(0,W.jsx)(B.Z,{mx:1,children:(0,W.jsx)(J.Z,{children:"-"})})}},{field:"numberOfJobs",headerAlign:"left",headerName:"Number of jobs",width:50,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"numberOfQuotes",headerAlign:"left",headerName:"Number of quotes",width:50,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"numberOfInvoices",headerAlign:"left",headerName:"Number of invoices",width:50,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"numberOfLocations",headerAlign:"left",headerName:"Number of locations",width:50,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"numberOfUsers",headerAlign:"left",headerName:"Number of users",width:50,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"quoteDueDate",align:"left",headerAlign:"left",headerName:"Quote due date",width:150,valueFormatter:function(e){var n=e.value;return n&&(0,eP.Z)(n)}},{field:"coverageAreas",headerAlign:"left",headerName:"Coverage areas",width:50,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"operatingAddress",headerAlign:"left",headerName:"Operating address",width:120,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"registeredAddress",headerAlign:"left",headerName:"Registered address",width:50,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"invoiceAddress",headerAlign:"left",headerName:"Invoices address",width:50,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t})}},{field:"totalSpend",headerAlign:"left",headerName:"Total spend",width:90,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t,formatAsPrice:!0})}},{field:"totalRevenues",headerAlign:"left",headerName:"Total Revenues",width:90,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t,formatAsPrice:!0})}},{field:"slaBreached",headerAlign:"left",headerName:"SLA breached",width:50,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,W.jsx)(eR,{row:n,value:t?"Yes":"No"})}},{field:"jobReport",align:"center",headerAlign:"center",headerName:"Job report",width:50,hide:!0,sortable:!1,renderCell:function(e){var n,t=e.row;if(t)return(0,W.jsx)(ei.Z,{disabled:!(null!==(n=t.jobReport)&&void 0!==n&&n.completion),onClick:function(){var e;return i(null===(e=t.jobReport)||void 0===e?void 0:e.jobId)},children:(0,W.jsx)(ej.Z,{})})}},{field:"jobQuote",align:"center",headerAlign:"center",headerName:"Quote",width:50,hide:!0,sortable:!1,renderCell:function(e){var n,t=e.row;if(t)return(0,W.jsx)(ei.Z,{disabled:!(null!==(n=t.jobQuote)&&void 0!==n&&n.id),onClick:function(){var e,n;return o(null===(e=t.jobQuote)||void 0===e?void 0:e.jobId,null===(n=t.jobQuote)||void 0===n?void 0:n.id)},children:(0,W.jsx)(ej.Z,{})})}},{field:"invoiceCustomer",align:"center",headerAlign:"center",headerName:"Invoice(Customer)",width:50,hide:!0,sortable:!1,renderCell:function(e){var n,t=e.row;if(t)return(0,W.jsx)(ei.Z,{disabled:!(null!==(n=t.invoiceCustomer)&&void 0!==n&&n.id),onClick:function(){var e;r(null===(e=t.invoiceCustomer)||void 0===e?void 0:e.id)},children:(0,W.jsx)(ew.Z,{})})}},{field:"invoiceSupplier",align:"center",headerAlign:"center",headerName:"Invoice(Supplier)",width:50,hide:!0,sortable:!1,renderCell:function(e){var n,t=e.row;if(t)return(0,W.jsx)(ei.Z,{disabled:!(null!==(n=t.invoiceSupplier)&&void 0!==n&&n.id),onClick:function(){var e;r(null===(e=t.invoiceSupplier)||void 0===e?void 0:e.id)},children:(0,W.jsx)(ew.Z,{})})}},{field:"proformaInvoiceCustomer",align:"center",headerAlign:"center",headerName:"Ad-hoc invoice (Customer)",width:50,hide:!0,sortable:!1,renderCell:function(e){var n,t,a,o,i=e.row;if(!((null===(n=i.proformaInvoiceCustomer)||void 0===n?void 0:null===(t=n.invoices)||void 0===t?void 0:t.length)>1))return(0,W.jsx)(ei.Z,{disabled:!(null!==(a=i.proformaInvoiceCustomer)&&void 0!==a&&null!==(o=a.invoices)&&void 0!==o&&o.length),onClick:function(){var e,n,t;r(null===(e=i.proformaInvoiceCustomer)||void 0===e?void 0:null===(n=e.invoices)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.id)},children:(0,W.jsx)(ew.Z,{})});var l=function(e){var n,t;return null===(n=e.proformaInvoiceCustomer)||void 0===n?void 0:null===(t=n.invoices)||void 0===t?void 0:t.map(function(e){return{context:"secondary",icon:"description",onClick:function(n){return r(null==e?void 0:e.id)},tooltip:"Ad-hoc invoice (Customer) - ".concat(e.invoiceNumber)}})};return(0,W.jsx)(eE.C,{icon:"description",row:i,actionsData:l})}},{field:"proformaInvoiceSupplier",align:"center",headerAlign:"center",headerName:"Ad-hoc invoice (Supplier)",width:50,hide:!0,sortable:!1,renderCell:function(e){var n,t,a,o,i=e.row;if(!((null===(n=i.proformaInvoiceSupplier)||void 0===n?void 0:null===(t=n.invoices)||void 0===t?void 0:t.length)>1))return(0,W.jsx)(ei.Z,{disabled:!(null!==(a=i.proformaInvoiceSupplier)&&void 0!==a&&null!==(o=a.invoices)&&void 0!==o&&o.length),onClick:function(){var e,n,t;r(null===(e=i.proformaInvoiceSupplier)||void 0===e?void 0:null===(n=e.invoices)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.id)},children:(0,W.jsx)(ew.Z,{})});var l=function(e){var n,t;return null===(n=e.proformaInvoiceSupplier)||void 0===n?void 0:null===(t=n.invoices)||void 0===t?void 0:t.map(function(e){return{context:"secondary",icon:"description",onClick:function(n){return r(null==e?void 0:e.id)},tooltip:"Ad-hoc invoice (Supplier) - ".concat(e.invoiceNumber)}})};return(0,W.jsx)(eE.C,{icon:"description",row:i,actionsData:l})}}];return{columns:n.map(function(e){var n=e.key,t=e.width;return eN(eN({},l.find(function(e){return e.field===n})),{},{width:t})}),fullColumnList:l}},eV=(0,G.ZP)(ec.Z).withConfig({displayName:"filterChipsListBlock__StyledFirstChip",componentId:"sc-9oxhg0-0"})(["border:none;background:transparent !important;margin:5px 5px;padding:0.8vmin 0.5vmin;color:"," !important;.MuiChip-icon{color:"," !important;}"],function(e){return e.theme.COLOUR.muiInfo},function(e){return e.theme.COLOUR.muiInfo}),eU=function(e){var n=e.selectedFilters,t=e.onCallAddFilter,a=e.onDelete;return(0,W.jsxs)(B.Z,{sx:{overflowY:"scroll",display:"flex",alignItems:"center",flexWrap:"nowrap",height:"100%"},children:[t?n&&n.length?(0,W.jsx)(eV,{icon:(0,W.jsx)(eu.Z,{}),className:"responsive-fontSize",label:"Add more filters",onClick:t}):(0,W.jsx)(eV,{icon:(0,W.jsx)(eu.Z,{}),className:"responsive-fontSize",label:"Add filter",onClick:t}):null,null==n?void 0:n.map(function(e,n){return(0,W.jsx)(ec.Z,{className:"responsive-fontSize",sx:{margin:"5px 5px",padding:"0.8vmin 0.5vmin"},label:ek({filtersToRender:eY,filter:e}),onDelete:a?function(){return a(e)}:null},n)})]})},eH=t(77533),eB=t(10155),eJ=t(11057),eQ=t(42283),eG=t(86532),eW=t(38895),eX=t(22797),eK=t(23508),e0=t(69368),e1=t(50135),e2=t(94054),e3=t(18360),e4=t(18972),e5=function(e){var n,t=e.parentName,a=e.label,r=void 0===a?"Select...":a,o=e.secondLabel,i=void 0===o?"Type value":o,l=e.type,s=e.options,c=void 0===s?[]:s,u=e.expanded,d=(0,eQ.Gc)(),p=l===eh.SHORT?"".concat(t,".value"):"".concat(t,".operation"),m=l===eh.SHORT?"".concat(t,".operation"):"",v="".concat(t,".value"),b="".concat(t,".secondValue");d.register(p),l===eh.SHORT&&d.register(m);var y=d.watch(p),h=d.watch(v),g=d.watch(b),j=f.useState("isBetween"===d.getValues(p)?"isBetween":"default"),w=(0,x.Z)(j,2),S=w[0],C=w[1],I=function(e){"isBetween"===e?C("isBetween"):C("default")};(0,f.useEffect)(function(){if(y&&t.includes("outstandingDays"))switch(y){case 1:d.setValue(v,c[1].value);break;case 31:d.setValue(v,c[2].value);break;case 61:d.setValue(v,c[3].value)}},[y,d,c,t,v]),(0,f.useEffect)(function(){!y&&(d.setValue(p,c[0].value),t.includes("outstandingDays")&&d.setValue(m,"greaterThanOrEqualTo")),u||(d.setValue(p,c[0].value),d.setValue(v,"",{shouldDirty:!0}),d.setValue(b,""),C("default"))},[u,p,m,y,d,c,t,b,v]);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(e2.Z,{variant:"standard",sx:{minWidth:"35%"},children:(0,W.jsx)(eQ.Qr,{control:d.control,name:p,label:r,render:function(e){return(0,W.jsx)(e3.Z,{required:u,color:"secondary",value:y||c[0].value,placeHolder:r,onChange:function(n){t.includes("outstandingDays")&&("0"===n.target.value||"90"===n.target.value?d.setValue(m,"greaterThanOrEqualTo"):d.setValue(m,"isBetween")),I(n.target.value),e.onChange(n.target.value)},children:c.map(function(e,n){return(0,W.jsx)(e4.Z,{value:e.value,children:e.label},p+n)})})}})}),l===eh.FULL&&(0,W.jsx)(e2.Z,{variant:"standard",sx:{minWidth:"55%"},children:(n="isBetween"===S?"isBetween":"default","isBetween"===n?(0,W.jsxs)(Q.Z,{direction:"row",width:"100%",spacing:2,alignItems:"baseline",children:[(0,W.jsx)(eQ.Qr,{name:v,control:d.control,render:function(e){return(0,W.jsx)(e1.Z,{required:u,value:e.value,defaultValue:h,onChange:function(n){e.onChange(n.target.value)},color:"secondary",placeholder:i,variant:"standard"})}}),(0,W.jsx)(eQ.Qr,{name:b,control:d.control,render:function(e){return(0,W.jsx)(e1.Z,{required:u,value:e.value,defaultValue:g,onChange:function(n){e.onChange(n.target.value)},color:"secondary",placeholder:i,variant:"standard"})}})]}):(0,W.jsx)(eQ.Qr,{name:v,control:d.control,render:function(e){return(0,W.jsx)(e1.Z,{required:u,value:e.value,onChange:function(n){e.onChange(n.target.value)},color:"secondary",placeholder:i,variant:"standard"})}}))})]})},e6=t(33754);function e7(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function e9(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?e7(Object(t),!0).forEach(function(n){(0,S.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):e7(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var e8=(0,G.ZP)(e6.M).withConfig({displayName:"DataSelector__CustomizedDatePicker",componentId:"sc-18w44av-0"})(["& .MuiInputBase-input{font-size:11px;}"]),ne=function(e){var n,t=e.parentName,a=e.label,r=void 0===a?"Some text":a,o=e.expanded,i=e.options,l=(0,eQ.Gc)(),s="".concat(t,".operation"),c="".concat(t,".value"),u="".concat(t,".secondValue"),d="".concat(t,".label"),p=l.watch(s),m=l.watch(d),v=f.useState(p||"default"),b=(0,x.Z)(v,2),y=b[0],h=b[1],g=function(e){h(e.target.value)};return(0,f.useEffect)(function(){if(m)switch(m){case"today":l.setValue(s,"today"),h("today");break;case"last7Days":l.setValue(s,"last7Days"),h("last7Days");break;case"next7Days":l.setValue(s,"next7Days"),h("next7Days");break;case"lastMonth":l.setValue(s,"lastMonth"),h("lastMonth");break;case"nextMonth":l.setValue(s,"nextMonth"),h("nextMonth");break;case"thisMonth":l.setValue(s,"thisMonth"),h("thisMonth");break;case"last30Days":l.setValue(s,"last30Days"),h("last30Days");break;case"last90Days":l.setValue(s,"last90Days"),h("last90Days");break;case"lastYear":l.setValue(s,"lastYear"),h("lastYear");break;case"yearToDate":l.setValue(s,"yearToDate"),h("yearToDate")}},[]),(0,f.useEffect)(function(){o||(l.setValue(s,i[0].value),l.setValue(c,null),l.setValue(u,null),h("default"))},[o,s,l,i,u,c]),(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(e2.Z,{variant:"standard",sx:{minWidth:"35%"},children:(0,W.jsx)(eQ.Qr,{control:l.control,name:s,defaultValue:i[0].value,render:function(e){return(0,W.jsx)(e3.Z,{required:o,value:e.value,defaultValue:i[0].value,onChange:function(n){g(n),e.onChange(n.target.value)},label:r,color:"secondary",children:i.map(function(e){return(0,W.jsx)(e4.Z,{value:e.value,children:e.label})})})}})}),(0,W.jsx)(e2.Z,{variant:"standard",sx:{minWidth:"55%"},children:["today","last7Days","next7Days","lastMonth","nextMonth","thisMonth","last30Days","last90Days","lastYear","yearToDate"].includes(y)||!y?null:"isBetween"===y?(0,W.jsxs)(Q.Z,{direction:"row",width:"100%",spacing:2,alignItems:"baseline",children:[(0,W.jsx)(eQ.Qr,{name:c,control:l.control,render:function(e){return(0,W.jsx)(e8,{required:o,inputFormat:"DD-MM-yyyy",orientation:"portrait",defaultValue:[{}],onChange:function(n){e.onChange(n)},renderInput:function(e){return(0,W.jsx)(e1.Z,e9(e9({},e),{},{required:o,variant:"standard",label:"From",size:"small",color:"secondary",sx:{width:"50%"}}))},value:e.value})}}),(0,W.jsx)(eQ.Qr,{name:u,control:l.control,render:function(e){return(0,W.jsx)(e8,{required:o,inputFormat:"DD-MM-yyyy",orientation:"portrait",defaultValue:null,onChange:function(n){e.onChange(n)},renderInput:function(e){return(0,W.jsx)(e1.Z,e9(e9({},e),{},{defaultValue:null,required:o,variant:"standard",label:"To",size:"small",color:"secondary",sx:{width:"50%"}}))},value:e.value})}})]}):(0,W.jsx)(eQ.Qr,{name:c,control:l.control,render:function(e){return(0,W.jsx)(e6.M,{inputFormat:"DD-MM-yyyy",onChange:function(n){e.onChange(n)},renderInput:function(e){return(0,W.jsx)(e1.Z,e9(e9({},e),{},{defaultValue:[{}],variant:"standard",size:"small",color:"secondary",required:o}))},value:e.value})}})})]})},nn=t(47312),nt=t(59334),na={PaperProps:{style:{maxHeight:135,width:250,fontsize:3}}},nr=function(e){var n=e.parentName,t=e.expanded,a=(e.label,e.filterItem,e.options),r=e.placeHolder,o=(0,eQ.Gc)(),i="".concat(n,".value");return(0,f.useEffect)(function(){t||o.setValue(i,[])},[t,o,i]),(0,W.jsx)(e2.Z,{variant:"standard",sx:{minWidth:"80%"},children:(0,W.jsx)(eQ.Qr,{control:o.control,name:i,defaultValue:[],render:function(e){return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(nn.Z,{children:r}),(0,W.jsx)(e3.Z,{required:t,multiple:!0,color:"secondary",value:e.value,onChange:function(n){var t=n.target.value;e.onChange("string"==typeof t?t.split(","):t)},sx:{minWidth:"100%"},renderValue:function(e){return e.map(function(e){var n;return null===(n=a.find(function(n){return Array.isArray(n.value)&&Array.isArray(e)?n.value.every(function(n){return e.includes(n)}):e===n.value}))||void 0===n?void 0:n.label}).join(", ")},MenuProps:na,children:a.map(function(n){return(0,W.jsxs)(e4.Z,{value:n.value,sx:{height:30},children:[(0,W.jsx)(e0.Z,{color:"secondary",checked:e.value.indexOf(n.value)>-1,size:"small"}),(0,W.jsx)(nt.Z,{primary:n.label})]},n.value)})})]})}})})},no=function(e){var n=e.parentName,t=e.label,a=e.expanded,r=(0,eQ.Gc)();r.register("".concat(n,".operation")),r.setValue("".concat(n,".operation"),"contains");var o="".concat(n,".value");return(0,f.useEffect)(function(){a||r.setValue(o,"")},[a,r,o]),(0,W.jsx)(W.Fragment,{children:(0,W.jsx)(e2.Z,{variant:"standard",sx:{minWidth:"100%"},children:(0,W.jsx)(eQ.Qr,{name:o,control:r.control,render:function(e){return(0,W.jsx)(e1.Z,{required:a,color:"secondary",placeholder:t,value:e.value,onChange:function(n){return e.onChange(n.target.value)},variant:"standard"})}})})})},ni=t(68309),nl=t(18574);function ns(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function nc(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ns(Object(t),!0).forEach(function(n){(0,S.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ns(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var nu={workOrdersServiceLine:P,locations:A,sublocations:_,customers:E,suppliers:N,coverageAreas:L,address:D},nd=function(e){var n=e.parentName,t=e.name,a=e.handler,r=void 0===a?function(){}:a,o=e.queryType,i=void 0===o?"locations":o,l=e.multiple,s=void 0!==l&&l,c=e.location,u=e.subLocation,d=e.label,p=e.expanded,m=e.hidden,v=(0,eQ.Gc)(),b=(0,f.useState)([{label:"Select...",value:null}]),y=b[0],h=b[1],g=n?"".concat(n,".value"):t,j=v.watch(g),x=(0,T.a)(nu[i],{variables:{locationId:null==c?void 0:c.value},onCompleted:function(e){if("address"===i){h(e.items.map(function(e,n){return{id:n,label:e.name?e.name+", "+e.addressLine:e.addressLine||e.city,value:e.id}}));return}if("coverageAreas"===i){h(e.items.map(function(e,n){return{id:n,label:"".concat(e.area,"-").concat(e.label),value:e.id}}));return}var n=e.items.map(function(e,n){return nc({id:n},e)});h(n)}}).loading;return(0,f.useEffect)(function(){if(c){var e=y.find(function(e){return e.value===u.value});e&&v.setValue(g,e)}if(null!=j&&j.locationName){var n=y.find(function(e){return e.value===j.value});n&&v.setValue(g,n)}if("number"==typeof j){var t=y.find(function(e){return e.value===j});v.setValue(g,t)}},[j,g,v,c,y,null==u?void 0:u.value]),(0,f.useEffect)(function(){p||v.setValue(g,"")},[g,p,v]),(0,W.jsx)(e2.Z,{variant:"standard",sx:{width:"100%"},children:(0,W.jsx)(eQ.Qr,{control:v.control,name:g,render:function(e){return(0,W.jsx)(nl.F,nc(nc({multiple:!!s,required:p,hidden:m,InputProps:{style:{fontSize:"30 !important"}}},e),{},{loading:x,size:"medium",label:d,className:"responsive-fontSize",onChange:function(n,t){r(t),e.onChange(t)},options:y}))}})})},np=function e(n){var t=n.parentName,a=n.expanded,r=n.index,o=void 0===r?0:r,i=(0,eQ.Gc)(),l=f.useState(""),s=(0,x.Z)(l,2),c=s[0],u=s[1],d=f.useState(!1),p=(0,x.Z)(d,2),m=p[0],v=p[1],b=f.useState(""),y=(0,x.Z)(b,2),h=y[0],g=y[1],j="".concat(t,".location.").concat(o),w="".concat(t,".sublocation.").concat(o),S=i.watch(j),C=i.watch(w),I=i.watch("".concat(t,".location.").concat(o+1)),O=function(e){u(e)};return(0,f.useEffect)(function(){S&&(u(S),I&&v(!0)),C&&g(C)},[S,I,C]),(0,f.useEffect)(function(){a||(i.setValue(j,""),u(""),v(!1))},[a,j,i]),(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)(B.Z,{sx:{minWidth:"100%",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[(0,W.jsx)(nd,{label:"Choose location",name:j,handler:O,queryType:"locations",expanded:a}),(0,W.jsx)(nd,{label:"Choose sublocation",name:w,queryType:"sublocations",selectorType:"multiple",location:c,subLocation:h}),m&&a?(0,W.jsx)(e,{expanded:a,parentName:t,index:++o}):(0,W.jsx)(eA.Z,{title:"Add Location",placement:"top",children:(0,W.jsx)(ni.Z,{color:"secondary",fontSize:"medium",sx:{cursor:"pointer"},onClick:function(){return v(!0)}})})]})})},nm=t(6911),nv=t(76301);function nf(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function nb(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nf(Object(t),!0).forEach(function(n){(0,S.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nf(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ny={customerManager:nv.K4},nh=function(e){var n=e.parentName,t=e.queryType,a=e.multiple,r=void 0!==a&&a,o=e.label,i=e.variables,l=e.expanded,s=(0,eQ.Gc)(),c=(0,f.useState)([{label:"Select...",value:null}]),u=c[0],d=c[1],p=(0,f.useState)(""),m=p[0],v=p[1],b="".concat(n,".value"),y=(0,T.a)(ny[void 0===t?"customerManager":t],{variables:nb(nb({},i),{},{q:""!==m?"%".concat(m,"%"):null}),onCompleted:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{items:[]};d(e.items)}}).loading;return(0,f.useEffect)(function(){l||s.setValue(b,"")},[b,l,s]),(0,W.jsx)(eQ.Qr,{control:s.control,name:b,render:function(e){var n=e.value,t=e.onChange;return(0,W.jsx)(nm.q,{multiple:r,value:r?n||[]:n,onChange:function(e,n){return t(n)},loading:y,options:u,setSearch:v,color:"secondary",textFieldProps:{color:"secondary",variant:"standard",label:o},sx:{width:"100%"},renderOption:function(e,n,t){var a=t.selected;return(0,f.createElement)("li",nb(nb({},e),{},{key:n.value}),(0,W.jsx)(e0.Z,{color:"secondary",style:{marginRight:8},checked:a}),n.label)}})}})},ng=G.ZP.div.withConfig({displayName:"RuleFilter__Wrapper",componentId:"sc-o9jo5c-0"})(["width:100%;display:flex;align-items:center;gap:0.2rem;margin:0;padding:0;"]),nj=(0,G.ZP)(eG.Z).withConfig({displayName:"RuleFilter__InnerStyledAccordion",componentId:"sc-o9jo5c-1"})(["width:100%;border-radius:0;box-shadow:none !important;min-height:30px;.Mui-expanded{display:flex;justify-content:start;}.MuiAccordionSummary-root{display:flex;min-height:35px;}.MuiAccordionSummary-content{display:flex;align-items:center;gap:0.2rem !important;margin:0 !important;}.MuiAccordionDetails-root{display:flex;align-items:center;padding:0 5px;}"]),nx=function(e){var n=e.categoryName,t=e.label,a=e.selectType,r=e.subType,o=void 0===r?eh.SHORT:r,i=e.options,l=e.icon,s=e.queryType,c=e.categoryCheckName,u=e.filterName,d=e.placeHolder,p=e.variables,m=e.multiple,v=(0,eQ.Gc)(),b="".concat(n,".").concat(u||t).replaceAll(" ",""),y="".concat(b,".check");v.register(y);var h=v.watch(y),g=v.watch(c);return(0,f.useEffect)(function(){g||v.setValue(y,!!g,{shouldDirty:!0})},[g,y,v]),(0,W.jsxs)(ng,{children:[(0,W.jsx)(eQ.Qr,{control:v.control,name:y,render:function(e){return(0,W.jsx)(e0.Z,{checked:!!h,onChange:function(n){e.onChange(n.target.checked)},color:"secondary",size:"small",sx:{padding:"7px 9px 0px 9px",alignSelf:"start"}})}}),(0,W.jsxs)(nj,{expanded:h,children:[(0,W.jsxs)(eW.Z,{sx:{display:"flex",alignItems:"center",padding:0,margin:0},children:[(0,W.jsx)(Q.Z,{sx:{minWidth:15},justifyContent:"center",children:l}),(0,W.jsx)(J.Z,{children:t})]}),(0,W.jsx)(eX.Z,{children:(0,W.jsx)(Q.Z,{direction:"row",alignItems:"baseline",width:"100%",spacing:4,minHeight:40,children:function(e){switch(e){case ey.SELECT:return(0,W.jsx)(e5,{parentName:b,label:"check",type:o,expanded:h,options:i});case ey.DATE:return(0,W.jsx)(ne,{label:"check",parentName:b,expanded:h,options:i});case ey.MULTI_SELECT:return(0,W.jsx)(nr,{label:"check",parentName:b,expanded:h,options:i,placeHolder:d});case ey.TEXT:return(0,W.jsx)(no,{label:"Type value",parentName:b,expanded:h});case ey.LOCATION:return(0,W.jsx)(np,{label:"check",expanded:h,parentName:b});case ey.SEARCH:return(0,W.jsx)(nd,{parentName:b,expanded:h,queryType:s,label:d});case ey.SEARCH_V2:return(0,W.jsx)(nh,{parentName:b,queryType:s,multiple:m,label:d,variables:p,expanded:h});default:return(0,W.jsx)(J.Z,{variant:"h5",children:"Incorrect DataReportsFilter Type"})}}(a)})})]})]})},nw=G.ZP.div.withConfig({displayName:"CategoryFilter__AccordionWrapper",componentId:"sc-1pl3ld3-0"})(["width:100%;"]),nS=(0,G.ZP)(eG.Z).withConfig({displayName:"CategoryFilter__StyledAccordion",componentId:"sc-1pl3ld3-1"})(["width:100%;border-radius:0;box-shadow:none !important;color:#000 !important;.Mui-expanded{}.MuiAccordionSummary-content{display:flex;align-items:center;gap:1rem;}"]),nC=function(e){var n=e.categoryLabel,t=e.text,a=e.icon,r=e.filters,o=e.name,i=(0,eQ.Gc)(),l=f.useState(!1),s=(0,x.Z)(l,2),c=s[0],u=s[1],d="".concat(o,".check");i.register(d);var p=!!i.watch(d);return(0,f.useEffect)(function(){var e=i.getValues(),n=e.invoices,t=e.customers,a=e.suppliers,r=e.quotes,l=e.workOrders;u("workOrders"===o&&(n.check||t.check||a.check)||"quotes"===o&&(n.check||t.check||a.check)||"invoices"===o&&(l.check||r.check||t.check||a.check)||"suppliers"===o&&(l.check||r.check||n.check)||"customers"===o&&(l.check||r.check||n.check))},[i,o]),(0,W.jsx)(nw,{children:(0,W.jsxs)(nS,{expanded:p,disabled:c,onChange:function(e,n){i.setValue(d,n,{shouldDirty:!0})},children:[(0,W.jsxs)(eW.Z,{expandIcon:(0,W.jsx)(eK.Z,{}),sx:{borderBottom:"2px rgba(0, 0, 0, 0.42) solid",paddingX:0},children:[(0,W.jsx)(Q.Z,{width:25,direction:"row",justifyContent:"justify-center",children:a}),(0,W.jsx)(J.Z,{sx:{fontWeight:"bold"},children:n})]}),(0,W.jsxs)(eX.Z,{children:[(0,W.jsx)(J.Z,{sx:{paddingLeft:"10px"},children:t}),r.map(function(e,n){return(0,W.jsx)(nx,{selectType:e.type,label:e.label,filterName:e.name,categoryName:o,categoryCheckName:d,icon:e.icon,options:e.options,subType:null==e?void 0:e.subType,queryType:null==e?void 0:e.queryType,placeHolder:null==e?void 0:e.placeHolder,variables:null==e?void 0:e.variables,multiple:null==e?void 0:e.multiple},n)})]})]})})},nI=t(3896),nO=t(86831),nZ=t(30381),nT=t.n(nZ),nk=t(96486);function nq(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function nP(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nq(Object(t),!0).forEach(function(n){(0,S.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nq(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var nA=function(e){var n={};for(var t in e){var a=t.charAt(0).toLowerCase()+t.slice(1);for(var r in e[t]){var o=e[t][r];if(null!=o&&o.check){var i=[];void 0===n[a]&&(n[a]={});var l={operation:o.operation?null==o?void 0:o.operation:"equalTo",value:null==o?void 0:o.value,label:null==o?void 0:o.label};switch(o.secondValue&&(l.secondValue=o.secondValue),null==o?void 0:o.value){case"1-30":l.operation="isBetween",l.value=1,l.secondValue=30;break;case"31-60":l.operation="isBetween",l.value=31,l.secondValue=60;break;case"61-90":l.operation="isBetween",l.value=61,l.secondValue=90;break;case">90":l.operation="greaterThan",l.value=90}switch(null==o?void 0:o.operation){case"today":l.operation="equalTo",l.value=nT()().format("YYYY-MM-DD"),l.label="today";break;case"last7Days":l.operation="isBetween",l.value=nT()().subtract(7,"days").format("YYYY-MM-DD"),l.secondValue=nT()().format("YYYY-MM-DD"),l.label="last7Days";break;case"next7Days":l.operation="isBetween",l.value=nT()().format("YYYY-MM-DD"),l.secondValue=nT()().add(7,"days").format("YYYY-MM-DD"),l.label="next7Days";break;case"lastMonth":l.operation="isBetween",l.value=nT()().subtract(1,"month").startOf("month").format("YYYY-MM-DD"),l.secondValue=nT()().subtract(1,"month").endOf("month").format("YYYY-MM-DD"),l.label="lastMonth";break;case"nextMonth":l.operation="isBetween",l.value=nT()().format("YYYY-MM-DD"),l.secondValue=nT()().add(1,"month").format("YYYY-MM-DD"),l.label="nextMonth";break;case"thisMonth":l.operation="isBetween",l.value=nT()().startOf("month").format("YYYY-MM-DD"),l.secondValue=nT()().endOf("month").format("YYYY-MM-DD"),l.label="thisMonth";break;case"last30Days":l.operation="isBetween",l.value=nT()().subtract(30,"days").format("YYYY-MM-DD"),l.secondValue=nT()().format("YYYY-MM-DD"),l.label="last30Days";break;case"last90Days":l.operation="isBetween",l.value=nT()().subtract(90,"days").format("YYYY-MM-DD"),l.secondValue=nT()().format("YYYY-MM-DD"),l.label="last90Days";break;case"lastYear":l.operation="isBetween",l.value=nT()().subtract(1,"years").format("YYYY-MM-DD"),l.secondValue=nT()().format("YYYY-MM-DD"),l.label="lastYear";break;case"yearToDate":l.operation="isBetween",l.value=nT()().startOf("year").format("YYYY-MM-DD"),l.secondValue=nT()().format("YYYY-MM-DD"),l.label="yearToDate"}if(("coverageAreas"===r||"object"===(0,nO.Z)(null==o?void 0:o.value))&&(null!=o&&null!==(c=o.value)&&void 0!==c&&c._d?(l.value=nT()(null==o?void 0:o.value).format("YYYY-MM-DD"),null!=o&&o.secondValue&&(l.secondValue=nT()(null==o?void 0:o.secondValue).format("YYYY-MM-DD"))):(l.operation="equalTo",l.value=null==o?void 0:o.value.value,l.label=null==o?void 0:null===(u=o.value)||void 0===u?void 0:u.label,Array.isArray(o.value)&&(l.operation="inTo",l.value=null==o?void 0:o.value))),null!=o&&o.location)for(var s in o.location){var c,u,d,p,m,v,f,b,y,h={};"check"!==s&&(h.operation="equalTo",h.value=null==o?void 0:null===(d=o.location[s])||void 0===d?void 0:d.value,h.locationName=null===(p=o.location[s])||void 0===p?void 0:p.label,h.label=null===(m=o.location[s])||void 0===m?void 0:m.label,null!==(v=o.sublocation[s])&&void 0!==v&&v.value&&(h.secondOperation="equalTo",h.secondValue=null==o?void 0:null===(f=o.sublocation[s])||void 0===f?void 0:f.value,h.subLocationName=null==o?void 0:null===(b=o.sublocation[s])||void 0===b?void 0:b.label,h.secondLabel=null==o?void 0:null===(y=o.sublocation[s])||void 0===y?void 0:y.label)),i.push(h)}else i.push(l);n[a][r]=i}}}return n},nD=function(e){var n=e[0],t=JSON.parse(JSON.stringify(eZ));return 0===Object.keys(n).length?eZ:(Object.keys(n).forEach(function(e){Object.keys(n[e]).forEach(function(a){var r;n[e][a].length>1||null!==(r=n[e][a][0])&&void 0!==r&&r.locationName?(t[e][a].location=[],t[e][a].sublocation=[],n[e][a].forEach(function(r,o){t[e][a].location.push({locationName:n[e][a][o].locationName,value:n[e][a][o].value}),n[e][a][o].secondValue&&t[e][a].sublocation.push({locationName:n[e][a][o].subLocationName,value:n[e][a][o].secondValue})}),t[e][a].check=!0,t[e].check=!0):(t[e][a]=nP(nP({},n[e][a][0]),{},{check:!0}),t[e].check=!0)})}),t)},n_=function(e){var n=e[0];return Object.keys(n).reduce(function(e,t){return e.concat(Object.keys(n[t]).map(function(e){if(n[t][e].length>1){var a={category:t,filterName:e,location:[]};return n[t][e].forEach(function(r,o){var i,l,s,c;a.location.push({locationName:null===(i=n[t][e][o])||void 0===i?void 0:i.locationName,value:null===(l=n[t][e][o])||void 0===l?void 0:l.value,secondValue:null===(s=n[t][e][o])||void 0===s?void 0:s.secondValue,subLocationName:null===(c=n[t][e][o])||void 0===c?void 0:c.subLocationName})}),a}return nP({category:t,filterName:e},n[t][e][0])}))},[])},nE=function(e,n){var t=e.category,a=e.filterName,r=e.operation,o=e.value,i=n.map(function(e){var n=e[t];if(n){var i=nP({},n),l=i[a];if(l){var s={};"locationId"!==a&&(s=l.filter(function(e){return!(e.operation===r&&e.value===o)})),s.length>0?i[a]=s:delete i[a],Object.keys(i).length>0?(Object.isFrozen(e)&&(e=nP({},e)),e[t]=i):delete e[t]}}return e}).filter(function(e){return Object.keys(e).length>0});return 0===i.length?[{}]:i},nL=function(e){if(nk.isEmpty(e))return{};var n=Object.entries(Object.values(e)[0]).reduce(function(e,n){var t=(0,x.Z)(n,2),a=t[0],r=t[1],o={};switch(r[0].label){case"today":o.operation="equalTo",o.value=nT()().format("YYYY-MM-DD"),o.label="today";break;case"last7Days":o.operation="isBetween",o.value=nT()().subtract(7,"days").format("YYYY-MM-DD"),o.secondValue=nT()().format("YYYY-MM-DD"),o.label="last7Days";break;case"next7Days":o.operation="isBetween",o.value=nT()().format("YYYY-MM-DD"),o.secondValue=nT()().add(7,"days").format("YYYY-MM-DD"),o.label="next7Days";break;case"lastMonth":o.operation="isBetween",o.value=nT()().subtract(1,"month").startOf("month").format("YYYY-MM-DD"),o.secondValue=nT()().subtract(1,"month").endOf("month").format("YYYY-MM-DD"),o.label="lastMonth";break;case"nextMonth":o.operation="isBetween",o.value=nT()().format("YYYY-MM-DD"),o.secondValue=nT()().add(1,"month").format("YYYY-MM-DD"),o.label="nextMonth";break;case"thisMonth":o.operation="isBetween",o.value=nT()().startOf("month").format("YYYY-MM-DD"),o.secondValue=nT()().endOf("month").format("YYYY-MM-DD"),o.label="thisMonth";break;case"last30Days":o.operation="isBetween",o.value=nT()().subtract(30,"days").format("YYYY-MM-DD"),o.secondValue=nT()().format("YYYY-MM-DD"),o.label="last30Days";break;case"last90Days":o.operation="isBetween",o.value=nT()().subtract(90,"days").format("YYYY-MM-DD"),o.secondValue=nT()().format("YYYY-MM-DD"),o.label="last90Days";break;case"lastYear":o.operation="isBetween",o.value=nT()().subtract(1,"years").format("YYYY-MM-DD"),o.secondValue=nT()().format("YYYY-MM-DD"),o.label="lastYear";break;case"yearToDate":o.operation="isBetween",o.value=nT()().startOf("year").format("YYYY-MM-DD"),o.secondValue=nT()().format("YYYY-MM-DD"),o.label="yearToDate";break;default:o=r[0]}return nP(nP({},e),{},(0,S.Z)({},a,[o]))},{});return(0,S.Z)({},Object.keys(e)[0],n)},nN=t(72936);function n$(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function nM(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?n$(Object(t),!0).forEach(function(n){(0,S.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n$(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var nR=(0,G.ZP)(B.Z).withConfig({displayName:"DataReportsFilter__ModalRootBlock",componentId:"sc-ngrrx-0"})(["width:35vw;display:flex;flex-direction:column;align-items:center;.responsive-fontSize,li{input{font-size:0.7vmax !important;}font-size:0.7vmax !important;}.MuiSelect-select,.MuiInputBase-input{}.MuiAccordion-root{}.MuiButton-root{text-transform:none !important;}p,span,h1,h2,h3,h4,h5,h6,label,button,div{font-family:",";}.MuiInputLabel-root{font-size:0.7vmax !important;color:"," !important;}"],function(e){return e.theme.THEME_TYPOGRAPHY.newFont},function(e){return e.theme.THEME_TYPOGRAPHY.fontColour}),nY=G.ZP.form.withConfig({displayName:"DataReportsFilter__Form",componentId:"sc-ngrrx-1"})(["display:flex;flex-direction:column;align-items:center;width:100%;"]),nF=function(e){var n=e.label,t=e.name,a=void 0===t?"filter-modal":t,r=e.open,o=e.onClose,i=e.initialValues,l=e.onFilterApply,s=(e.onRemoveFilterItem,e.onFilterClear),c=(0,nN.x)().user,u=(0,nI.X)("form_data_data_reports",i),d=(0,x.Z)(u,2),p=(d[0],d[1]),m=f.useState(i),v=(0,x.Z)(m,2),b=v[0],y=v[1],h=(0,eQ.cI)({defaultValues:nD(b)}),g=function(){y([{}]),h.reset(b),s()},j=function(e){var n=nA(e);y([n]),p({filtersToRender:n,filterType:a}),l([n])},w=function(){var e=nA(h.getValues());p({filtersToRender:e,filterType:a}),o()};return(0,W.jsx)(eH.ZP,{open:r,anchor:"right",onClose:w,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,W.jsx)(nR,{p:2,children:(0,W.jsx)(eQ.RV,nM(nM({},h),{},{children:(0,W.jsxs)(nY,{onSubmit:h.handleSubmit(j),children:[(0,W.jsxs)(eB.Z,{disableGutters:!0,sx:{display:"flex",width:"100%",justifyContent:"space-between",marginBottom:2},children:[(0,W.jsx)(J.Z,{variant:"h5",children:n}),(0,W.jsxs)(B.Z,{sx:{width:"40%",display:"flex",justifyContent:"flex-end"},children:[(0,W.jsx)(eJ.Z,{className:"responsive-fontSize",color:"secondary",variant:"outlined",onClick:g,children:"Clear"}),(0,W.jsx)(eJ.Z,{sx:{ml:3},className:"responsive-fontSize",color:"secondary",variant:"contained",type:"submit",children:"Submit"})]})]}),eO({user:c}).map(function(e){return(0,W.jsx)(nC,{categoryLabel:e.label,icon:e.icon,filters:e.filters,text:e.text,name:e.name})})]})}))})})},nz=(0,G.ZP)(B.Z).withConfig({displayName:"navigation__NavigationBlock",componentId:"sc-ke0ccs-0"})(["display:flex;justify-content:space-between;align-items:center;padding:0 1rem;background-color:",";.filter-block{display:flex;width:50%;height:100%;}.pagination-block{display:flex;width:50%;height:100%;justify-content:flex-end;align-items:center;}"],function(e){return e.theme.COLOUR.muiLight}),nV=function(e){e.user;var n=e.page,t=e.handlePageChange,a=e.pageSize,r=e.handlePageSizeChange,o=e.totalCount,i=e.fieldsToSort,l=(e.sort,e.handleSort,e.initialFilters),s=e.updateFilters,c=e.onCallChangeColumnList,u=e.onFilterClear,d=e.updateFilterFromChips,p=(0,f.useState)(!1),m=p[0],v=p[1],b=function(e){r(e.target.value)},y=function(e){v(!1),s(e)},h=function(e){s(l.filter(function(n){return n.field!==e.field&&n.filterId!==e.filterId}))};return(0,W.jsxs)(B.Z,{children:[(0,W.jsxs)(nz,{children:[(0,W.jsx)(B.Z,{className:"filter-block",children:(0,W.jsx)(eU,{selectedFilters:n_(l),onCallAddFilter:function(){return v(!0)},onDelete:function(e){var n=nE(e,l);d(n)}})}),(0,W.jsxs)(B.Z,{className:"pagination-block",sx:{flexDirection:i.length?"column":"row"},children:[(0,W.jsx)(B.Z,{children:(0,W.jsx)(ei.Z,{size:"medium",variant:"outlined",sx:{minWidth:"auto",padding:"1px"},onClick:c,children:(0,W.jsx)(es.Z,{fontSize:"inherit"})})}),(0,W.jsx)(el.Z,{component:"div",count:o,page:n,onPageChange:function(e,n){t(n+1)},rowsPerPage:a,onRowsPerPageChange:b,showFirstButton:!0,showLastButton:!0})]})]}),(0,W.jsx)(nF,{label:"Filters",name:"reports-filter",open:m,onClose:function(){return v(!1)},initialValues:l||[{}],onFilterApply:y,onRemoveFilterItem:h,onFilterClear:u})]})},nU=t(72866),nH=t(57460),nB=t.n(nH),nJ=t(98456),nQ=t(48829),nG=t(64666),nW=t(37645),nX=t(6514),nK=t(58951),n0=t(79332),n1=t(67720),n2=t(31425),n3=t(41733),n4=t(66818),n5=(0,G.ZP)(B.Z).withConfig({displayName:"reportsActionsNavigation__ReportsNavigationBlock",componentId:"sc-1ep3gok-0"})(["display:flex;flex-direction:row;align-items:center;justify-content:flex-end;margin-right:5px;width:80%;height:100%;"]),n6=function(e){var n=e.entityName,t=e.preSavedReports,a=e.selectedFilters,r=e.selectedOrder,o=e.selectedColumns,i=e.onSelectReport,l=e.onSaveReport,s=e.onCallReportDelete,c=(0,f.useState)(""),u=c[0],d=c[1],p=(0,f.useState)(""),m=p[0],v=p[1],b=(0,f.useState)(!1),y=b[0],h=b[1],g=(0,f.useState)(!1),j=g[0],x=g[1],w=(0,f.useState)(null),S=w[0],C=w[1],I=function(e){d(e.name),i(e),Z()},O=function(){x(!j)},Z=function(){x(!1)},T=function(){h(!0)},k=function(){l(m),h(!1)},q=function(){s(S),C(null)};return(0,W.jsxs)(n5,{children:[t?(0,W.jsxs)(e2.Z,{size:"small",sx:{marginRight:2},children:[(0,W.jsx)(nn.Z,{className:"responsive-fontSize",id:"select-report-label",children:"Select Report"}),(0,W.jsx)(e3.Z,{sx:{minWidth:200},open:j,onClick:O,labelId:"select-report-label",variant:"standard",value:u,renderValue:function(e){return e},onClose:Z,children:t.map(function(e,n){return(0,W.jsxs)(e4.Z,{className:"responsive-fontSize",sx:{display:"flex",justifyContent:"space-between"},value:e.name,onClick:function(){I(e)},children:[(0,W.jsx)(J.Z,{children:e.name}),(0,W.jsx)(ei.Z,{tooltip:"Delete Report",onClick:function(n){n.stopPropagation(),C(e)},children:(0,W.jsx)(n3.Z,{})})]},n)})})]}):null,(0,W.jsx)(eJ.Z,{className:"responsive-fontSize",sx:{width:"max-content"},color:"secondary",variant:"outlined",onClick:T,startIcon:(0,W.jsx)(n4.Z,{}),children:"Save as Report"}),(0,W.jsxs)(nG.Z,{width:"30vw",open:y,onClose:function(){return h(!1)},children:[(0,W.jsx)(nW.Z,{children:"Save as a Report"}),(0,W.jsxs)(nX.Z,{children:[(0,W.jsx)(nK.Z,{children:"Report Name"}),(0,W.jsx)(n0.Z,{variant:"outlined",sx:{width:"100%"},value:m,onChange:function(e){return v(e.currentTarget.value)}}),(0,W.jsx)(n1.Z,{sx:{my:2}}),(0,W.jsxs)(nK.Z,{children:["Display the next fields for all ",n,":"]}),(0,W.jsx)(B.Z,{children:o.map(function(e,n){return(0,W.jsx)(ec.Z,{className:"responsive-fontSize",sx:{margin:"5px 5px",padding:"0.8vmin 0.5vmin"},label:e},n)})}),(0,W.jsx)(n1.Z,{sx:{my:2}}),(0,W.jsx)(nK.Z,{children:"Which meet the following Requirements:"}),(0,W.jsx)(eU,{selectedFilters:n_(a)}),(0,W.jsx)(n1.Z,{sx:{my:2}}),(0,W.jsx)(nK.Z,{children:"And has next Order:"}),(0,W.jsx)(B.Z,{children:(0,W.jsx)(ec.Z,{className:"responsive-fontSize",sx:{margin:"5px 5px",padding:"0.8vmin 0.5vmin"},label:"".concat(r.label," - ").concat(r.value)})})]}),(0,W.jsxs)(n2.Z,{children:[(0,W.jsx)(eJ.Z,{onClick:function(){return h(!1)},children:"Cancel"}),(0,W.jsx)(eJ.Z,{disabled:!m.length,onClick:k,children:"Save"})]})]}),(0,W.jsxs)(nG.Z,{width:"30vw",open:!!S,onClose:function(){return C(null)},children:[(0,W.jsxs)(nW.Z,{children:["Are you sure to delete ",S?S.name:"report","?"]}),(0,W.jsxs)(n2.Z,{children:[(0,W.jsx)(eJ.Z,{onClick:function(){return C(null)},children:"Cancel"}),(0,W.jsx)(eJ.Z,{onClick:q,children:"Delete"})]})]})]})},n7=t(64951),n9=t(94568);function n8(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function te(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?n8(Object(t),!0).forEach(function(n){(0,S.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n8(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var tn,tt=function(e){var n=e.columnsToDisplay,t=e.financialReport,a=e.getJobPrefix,r=e.numberPrefix,o=e.numberSuffix;return t.map(function(e){return n.reduce(function(n,t){var i=t.key,l=t.name;return"jobId"===i?n:"jobNumber"===i?te(te({},n),{},(0,S.Z)({},l||i,"".concat(a(e.jobType||null)," ").concat(r," ").concat(e.jobNumber," ").concat(o))):"jobDuration"===i?te(te({},n),{},(0,S.Z)({},l||i,e[i]||"less 1 minute")):isNaN(e[i])?"jobQuoteRange"===i?te(te({},n),{},{minimum_quotation:e.jobQuoteRange.low||"-",maximum_quotation:e.jobQuoteRange.high||"-"}):te(te({},n),{},(0,S.Z)({},l||i,e[i]||"-")):te(te({},n),{},(0,S.Z)({},l||i,e[i]||0))},{})})},ta=(tn=(0,C.Z)(O().mark(function e(n){var t;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.data,!(0,n9.a)()){e.next=3;break}throw Error("This feature is unavailable on mobile");case 3:return e.abrupt("return",window.fetch("".concat("https://aws.cleverly.works","/pdf/data/reports/create"),{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("bearerToken"))},body:JSON.stringify(t)}).then(function(){var e=(0,C.Z)(O().mark(function e(n){var t,a;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.ok){e.next=2;break}return e.abrupt("return",n);case 2:return e.next=4,n.json();case 4:throw Error(e.sent.error);case 7:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}()).then(function(){var e=(0,C.Z)(O().mark(function e(n){var t,a,r,o,i,l;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=window.open("/download","_blank"),e.next=3,n.blob();case 3:l=e.sent,null==i||null===(t=i.location)||void 0===t||t.assign(window.URL.createObjectURL(l)),null!==(a=window)&&void 0!==a&&null!==(r=a.Capacitor)&&void 0!==r&&null!==(o=r.Plugins)&&void 0!==o&&o.Browser&&window.Capacitor.Plugins.Browser.open({url:window.URL.createObjectURL(l)});case 6:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}},e)})),function(e){return tn.apply(this,arguments)});function tr(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function to(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?tr(Object(t),!0).forEach(function(n){(0,S.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tr(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ti=G.ZP.div.withConfig({displayName:"toolbar__StyledToolbar",componentId:"sc-1q7wwh6-0"})(["display:flex;flex-direction:row;align-items:center;justify-content:flex-end;.MuiButton-root{text-transform:none !important;}"]),tl=function(e){var n,t,a,r,o,i=e.columns,l=e.entityName,s=e.filters,c=e.filterVariable,u=e.columnsToDisplay,d=e.orderBy,p=e.sort,m=e.updateFilters,v=e.handleSort,b=e.handleSetColumns,y=e.setAlert,h=e.isLimitAlert,j=(0,g.q)(),x=(0,nN.x)().user,S=null===(n=j.admin)||void 0===n?void 0:null===(t=n.jobSetting)||void 0===t?void 0:t.jobNumberPrefix,I=null===(a=j.admin)||void 0===a?void 0:null===(r=a.jobSetting)||void 0===r?void 0:r.jobNumberSuffix,k=(0,Z.x)(),q=(0,f.useState)({}),P=q[0],A=q[1],D=(0,f.useState)(!1),_=D[0],E=D[1],L=(0,f.useState)(!1),N=L[0],Y=L[1],F=(0,T.a)($,{variables:{userId:x.accountId}}),z=F.data,V=F.loading,U=F.refetch;(0,f.useEffect)(function(){z&&!V&&A(z.user[0].meta)},[z,V]);var H,B,J,Q=(o=(0,C.Z)(O().mark(function e(n){var t;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:n,columns:u,filters:s,sort:p},e.next=3,k.mutate({mutation:M,variables:{userId:x.accountId,updatedMeta:to(to({},P),{},{reports:[].concat((0,w.Z)(P.reports||[]),[t])})}});case 3:U();case 4:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)}),G=(H=(0,C.Z)(O().mark(function e(n){var t;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(P.reports||[]).filter(function(e){return e.name!==n.name}),e.next=3,k.mutate({mutation:M,variables:{userId:x.accountId,updatedMeta:to(to({},P),{},{reports:t})}});case 3:U();case 4:case"end":return e.stop()}},e)})),function(e){return H.apply(this,arguments)}),X=function(e){b(e.columns),m(e.filters),v(e.sort)},K=(B=(0,C.Z)(O().mark(function e(n){var t,a,r,o,i,l;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.stopPropagation(),E(!0),!h){e.next=5;break}return e.abrupt("return",y({error:!0,message:"System exports are limited to 5,000 entries.\n          If you require a data export or transfer\n          that contains more than this, please contact your account manager."}));case 5:return e.next=7,k.query({query:R,variables:{adminId:x.accountId,filters:c[0],columns:u.filter(function(e){return!e.hide}).map(function(e){return e.key}),orderBy:d,limit:5e3,requestWithoutMeta:!0}});case 7:o=tt({columnsToDisplay:u,financialReport:(a=void 0===(a=e.sent.data)?{getFinancialReport:{financialReport:[]}}:a).getFinancialReport.financialReport,getJobPrefix:n7.y,numberPrefix:S,numberSuffix:I}),i=nB().unparse(o),l="data:application/octet-stream,"+encodeURIComponent(i),(0,nQ.S)(l,"FinancialData.csv"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),y({error:!0,message:e.t0.message});case 20:return e.prev=20,E(!1),e.finish(20);case 23:case"end":return e.stop()}},e,null,[[0,17,20,23]])})),function(e){return B.apply(this,arguments)}),ee=(J=(0,C.Z)(O().mark(function e(n){return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.stopPropagation(),Y(!0),!h){e.next=5;break}return e.abrupt("return",y({error:!0,message:"System exports are limited to 5,000 entries.\n          If you require a data export or transfer\n          that contains more than this, please contact your account manager."}));case 5:return e.next=7,ta({data:{filters:c[0],columns:u.filter(function(e){return!e.hide}),orderBy:d}});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),y({error:!0,message:e.t0.message});case 12:return e.prev=12,Y(!1),e.finish(12);case 15:case"end":return e.stop()}},e,null,[[0,9,12,15]])})),function(e){return J.apply(this,arguments)}),en={label:p.item,value:p.order},et=i.reduce(function(e,n){return(n.field===p.item&&(en={label:n.headerName,value:p.order}),null!=u&&u.find(function(e){var t=e.key;return n.field===t})&&"jobId"!==n.field)?[].concat((0,w.Z)(e),[n.headerName]):e},[]);return(0,W.jsxs)(ti,{children:[(0,W.jsx)(n6,{entityName:l,preSavedReports:P.reports,selectedFilters:s,selectedOrder:en,selectedColumns:et,onSelectReport:X,onSaveReport:Q,onCallReportDelete:G}),(0,W.jsx)(e2.Z,{fullWidth:!0,children:(0,W.jsx)(eJ.Z,{disabled:_,variant:"contained",color:"secondary",onClick:K,startIcon:!_&&(0,W.jsx)(nU.Z,{}),sx:{marginRight:"5px",width:"150px",height:"32px"},children:_?(0,W.jsx)(nJ.Z,{color:"secondary",size:25}):"Export to CSV"})}),(0,W.jsx)(e2.Z,{fullWidth:!0,children:(0,W.jsx)(eJ.Z,{disabled:N,variant:"contained",color:"secondary",onClick:ee,startIcon:!N&&(0,W.jsx)(nU.Z,{}),sx:{width:"150px",height:"32px"},children:N?(0,W.jsx)(nJ.Z,{color:"secondary",size:25}):"Export to PDF"})})]})},ts=t(90629),tc=t(23776),tu=t(39628),td=t(17171);function tp(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function tm(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?tp(Object(t),!0).forEach(function(n){(0,S.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tp(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var tv=(0,W.jsx)(tu.Z,{fontSize:"small"}),tf=(0,W.jsx)(td.Z,{fontSize:"small"}),tb=function(e){return(0,W.jsx)(ts.Z,tm(tm({elevation:8},e),{},{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"},sx:{"& .MuiAutocomplete-listbox":{height:"25vh"}}}))},ty=function(e){var n=e.open,t=e.selectedColumns,a=e.fullColumnList,r=e.onClose,o=e.onApplyColumnList,i=a.filter(function(e){return e.headerName&&e.headerName.length}),l=i.filter(function(e){return t.find(function(n){var t=n.key;return e.field===t})}).sort(function(e,n){var a=t.map(function(e){return e.key});return a.indexOf(e.field)-a.indexOf(n.field)}),s=(0,f.useState)(i),c=s[0],u=s[1],d=function(e,n){u(n)},p=function(){var e=c.map(function(e){return{key:e.field,name:e.headerName,width:e.width,hide:e.hide}});o((0,w.Z)(e))};return(0,W.jsxs)(nG.Z,{width:"50vw",open:n,onClose:r,children:[(0,W.jsx)(nW.Z,{children:"Column Selection"}),(0,W.jsxs)(nX.Z,{children:[(0,W.jsx)(nK.Z,{children:"Select the columns you would like to see in the table."}),(0,W.jsx)(n1.Z,{sx:{marginY:2}}),(0,W.jsx)(e2.Z,{fullWidth:!0,children:(0,W.jsx)(tc.Z,{multiple:!0,defaultValue:l,options:i,disableCloseOnSelect:!0,size:"small",color:"secondary",getOptionLabel:function(e){return e.headerName},renderTags:function(e,n){return e.map(function(e,t){var a=n({index:t});return(0,W.jsx)(ec.Z,tm(tm({},a),{},{size:"small",label:e.headerName}))})},onChange:d,renderOption:function(e,n,t){return(0,W.jsxs)(e4.Z,tm(tm({},e),{},{value:n.field,children:[(0,W.jsx)(e0.Z,{color:"secondary",icon:tv,checkedIcon:tf,style:{marginRight:8},checked:t.selected}),(0,W.jsx)(nt.Z,{children:n.headerName})]}))},PaperComponent:tb,renderInput:function(e){return(0,W.jsx)(e1.Z,tm(tm({},e),{},{color:"secondary",label:"Columns",placeholder:"Select..."}))}})})]}),(0,W.jsxs)(n2.Z,{children:[(0,W.jsx)(eJ.Z,{color:"danger",variant:"contained",onClick:r,children:"Cancel"}),(0,W.jsx)(eJ.Z,{color:"secondary",variant:"contained",onClick:p,children:"Apply"})]})]})},th=t(42846),tg=t(58681),tj=t(33816),tx=t(33234),tw=t(46718),tS=t(19149),tC=t(77651),tI=t(46901),tO=t(51555),tZ=t(10693);function tT(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function tk(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?tT(Object(t),!0).forEach(function(n){(0,S.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tT(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var tq=[{workOrders:{jobDate:[{operation:"equalTo",value:nT()().format("YYYY-MM-DD")}]}}],tP={item:"jobNumber",order:"desc"},tA=function(){var e,n,t,a,r,o,i,l=(0,nN.x)().user,s=(0,Z.x)(),c=(0,g.q)(),u=(0,f.useState)({error:!1,message:null}),d=u[0],p=u[1],m=null===(e=c.admin)||void 0===e?void 0:null===(n=e.jobSetting)||void 0===n?void 0:n.jobNumberPrefix,v=null===(t=c.admin)||void 0===t?void 0:null===(a=t.jobSetting)||void 0===a?void 0:a.jobNumberSuffix,b=(0,f.useState)(tq),y=b[0],h=b[1],j=(0,th.x)({newFilters:y,initialSort:tP}),S=j.initialData,I=j.ref,k=eF.map(function(e){return e.key}),q=(0,f.useState)(k),P=q[0],A=q[1],D=(0,f.useState)(eF),_=D[0],E=D[1],L=(0,f.useState)(!1),N=L[0],$=L[1],M=(0,f.useMemo)(function(){return nL(S.newFilters[0])},[S.newFilters]),z=(0,T.a)(R,{variables:tk(tk({adminId:l.accountId},S),{},{filters:M,columns:P})}),V=z.data,U=(V=void 0===V?{getFinancialReport:{financialReport:[],meta:{aggregate:{avg:{customer_amount:0,supplier_amount:0,job_expenses_customer:0,job_expenses_supplier:0},sum:{customer_amount:0,supplier_amount:0,job_expenses_customer:0,job_expenses_supplier:0},totalCount:0}}}}:V).getFinancialReport,H=U.financialReport,B=U.meta,J=z.loading,Q=z.refetch,G=(r=(0,C.Z)(O().mark(function e(n){var t,a,r,o;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.query({query:tj.WG,variables:{id:n}});case 3:if(null!=(o=e.sent.data.invoice)&&o.id){e.next=7;break}throw Error("Can`t find this invoice");case 7:tg.cJ.includes(o.invoiceType)&&(0,tS.u)({invoice:o,meta:null==o?void 0:null===(t=o.accountEntry)||void 0===t?void 0:t.meta}),tg.pX.includes(o.invoiceType)&&(0,tx._Z)({client:s,jobId:null==o?void 0:o.entityId,type:null==o?void 0:o.invoiceType}),tg.YK.includes(o.type)&&(0,tw.$)(null==o?void 0:null===(a=o.accountEntry)||void 0===a?void 0:a.meta),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),p({error:!0,message:e.t0.message});case 15:case"end":return e.stop()}},e,null,[[0,12]])})),function(e){return r.apply(this,arguments)}),X=(o=(0,C.Z)(O().mark(function e(n,t){var a,r;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.query({query:Y,variables:{id:n}});case 3:if(r=e.sent.data.job){e.next=7;break}throw Error("Fetching data error");case 7:return e.next=9,(0,tO.g)(r,t,s);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),p({error:!0,message:e.t0.message});case 14:case"end":return e.stop()}},e,null,[[0,11]])})),function(e,n){return o.apply(this,arguments)}),K=(i=(0,C.Z)(O().mark(function e(n){var t,a;return O().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.query({query:F,variables:{id:n}});case 3:if(a=e.sent.data.job){e.next=7;break}throw Error("Fetching data error");case 7:return e.next=9,(0,tZ.e)({job:a,adminId:a.adminId});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),p({error:!0,message:e.t0.message});case 14:case"end":return e.stop()}},e,null,[[0,11]])})),function(e){return i.apply(this,arguments)}),ee=function(e){h(e),Q()},en=function(e){h(e),Q()},et=function(e){var n=e&&e.length?e:eF;A(n.map(function(e){return e.key})),E(n),$(!1)},ea=function(){h([{}]),Q()},er=function(e){var n=e.oldIndex,t=e.targetIndex;E(function(e){var a=(0,w.Z)(e),r=a.splice(n,1),o=(0,x.Z)(r,1)[0];return a.splice(t,0,o),a})},ei=function(e){var n=e.colDef,t=e.width,a=n.field;E(function(e){return(0,w.Z)(e).map(function(e){return e.key!==a?e:tk(tk({},e),{},{width:t})})})},el=ez({columnsToDisplay:_,numberPrefix:m,numberSuffix:v,downloadJobInvoice:G,downloadJobQuote:X,downloadReport:K}),es=el.columns,ec=el.fullColumnList;return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(tC.Z,{open:null==d?void 0:d.error,autoHideDuration:6e3,onClose:function(){p({error:!1,message:null})},anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,W.jsx)(tI.Z,{onClose:function(){return p({error:!1,message:null})},severity:"error",variant:"filled",sx:{width:"500px"},children:(null==d?void 0:d.message)||"Oops some error occurred. Please try again later"})}),(0,W.jsx)(eo,{toolbar:function(e){return(0,W.jsx)(tl,tk(tk({},e),{},{columnsToDisplay:_,orderBy:S.orderBy,filters:[M],filterVariable:y,updateFilters:ee,handleSetColumns:et,setAlert:p,isLimitAlert:B.aggregate.totalCount>5e3}))},customFilter:function(e){return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(nV,tk(tk({},e),{},{user:l,initialFilters:[M],updateFilters:ee,onFilterClear:ea,updateFilterFromChips:en,onCallChangeColumnList:function(){return $(!0)}})),(0,W.jsx)(ty,{open:N,selectedColumns:_,fullColumnList:ec,onClose:function(){return $(!1)},onApplyColumnList:et})]})},title:"Reports",history:!0,columns:es,loading:J,initialSort:tP,meta:B,ref:I,refetch:Q,rows:H.map(function(e,n){return tk(tk({},e),{},{index:n,id:e.jobId,jobDuration:e.jobDuration||"less 1 minute"})}),getRowId:function(e){var n=e.jobId,t=e.invoiceType,a=e.index;return"".concat(n,"-").concat(a,"-").concat(t)},columnVisibilityModel:{jobId:!1},onColumnOrderChange:er,onColumnWidthChange:ei})]})},tD=function(){var e,n,t=(0,f.useContext)(h.Z).user,a=(0,g.q)();return t?null!=a&&null!==(e=a.admin)&&void 0!==e&&null!==(n=e.modules)&&void 0!==n&&n.dataReports?(0,W.jsx)(j.Z,{children:(0,W.jsx)(tA,{})}):(y().push("/404"),null):(y().push("/account/sign-in"),null)};tD.getLayout=function(e){return e};var t_=tD},53832:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/data/reports",function(){return t(49616)}])}},function(e){e.O(0,[3662,2283,212,8890,619,1100,4135,5020,6043,1564,4244,3911,3776,2329,778,4046,1023,4253,3148,8062,7328,4061,6075,731,7725,8033,9774,2888,179],function(){return e(e.s=53832)}),_N_E=e.O()}]);