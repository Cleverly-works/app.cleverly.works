(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6155],{52220:function(e,n,t){"use strict";t.d(n,{M:function(){return u}});var r=t(59499),a=t(4730),i=t(89345),o=t(99505),s=t(55843),d=t(85893),c=["control","errors","name","space"];function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var u=function(e){var n=e.control,t=e.errors,u=e.name,m=e.space,I=(0,a.Z)(e,c);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({control:n,errors:t,locale:i.Z,name:u},I)),m&&(0,d.jsx)(s.Z,{marginBottom:"sm"})]})};u.defaultProps={space:!0}},16726:function(e,n,t){"use strict";t.d(n,{m:function(){return g}});var r,a=t(67294),i=t(6812),o=t(71383),s=(0,t(75063).Ps)(r||(r=(0,o.Z)(["\n  query GetJobsByMonth(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    meta: getDashboard_Count_By_Month_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          count: count\n        }\n      }\n    }\n    jobsByMonth: getDashboard_Count_By_Month(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { strval_extra: asc }\n    ) {\n      count: count\n      month: strval_extra\n    }\n  }\n"]))),d=t(78840),c=t.n(d),l=t(75708),u=t.n(l),m=t(66878),I=t(74975),p=t(85893),g=(0,a.forwardRef)(function(e,n){var r,a,o,d,l=e.filters,g=e.removeChart,v=(0,i.a)(s,{variables:{adminId:l.adminId,customerId:l.customerId,endTime:l.endDate,isFixed:l.isFixed,isPlanned:l.isPlanned,locationId:l.locationId,managerId:l.managerId,postCodeAreaId:l.postCodeAreaId,serviceId:l.serviceId,slaId:l.slaId,startTime:l.startDate,supplierId:l.supplierId}}).data,$=(v=void 0===v?{meta:{},jobsByMonth:[]}:v).meta,y=v.jobsByMonth,f=function(e){e.reflow()};return t(18393)(c()),(0,p.jsx)(m.J,{name:"JobsByMonth",removeChart:g,title:"Total bookings by Month (".concat(null===(r=$.aggregate)||void 0===r?void 0:r.sum.count,")"),children:(0,p.jsx)(u(),{callback:f,constructorType:"chart",Highcharts:c(),options:{chart:{type:"column"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{min:0,title:{text:"Counts"}},tooltip:{headerFormat:'<span style="font-size:11px">{series.name}</span><br>',pointFormat:"{point.name}</span>: <b>{point.y}</b> "},series:[{name:"Month",data:(o=y,d=[],o.forEach(function(e){try{d.push({name:(0,I.Z)(new Date(e.month),"LLL yyyy"),y:e.count})}catch(n){}}),d),showInLegend:!1}]},ref:n})})})},52076:function(e,n,t){"use strict";t.d(n,{e:function(){return p}});var r,a=t(67294),i=t(6812),o=t(71383),s=(0,t(75063).Ps)(r||(r=(0,o.Z)(["\n  query GetJobsByStatus(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    jobsByStatus: getDashboard_Count_By_Status(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: {}\n    ) {\n      statusname: name\n      count: count\n    }\n    meta: getDashboard_Count_By_Status_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { count: desc }\n    ) {\n      aggregate {\n        sum {\n          count: count\n        }\n      }\n    }\n  }\n"]))),d=t(78840),c=t.n(d),l=t(75708),u=t.n(l),m=t(66878),I=t(85893),p=(0,a.forwardRef)(function(e,n){var r,a,o=e.filters,d=e.removeChart,l=(0,i.a)(s,{variables:{adminId:o.adminId,customerId:o.customerId,endTime:o.endDate,isFixed:o.isFixed,isPlanned:o.isPlanned,locationId:o.locationId,managerId:o.managerId,postCodeAreaId:o.postCodeAreaId,serviceId:o.serviceId,slaId:o.slaId,startTime:o.startDate,supplierId:o.supplierId}}).data,p=(l=void 0===l?{meta:{},jobsByStatus:[]}:l).meta,g=l.jobsByStatus,v=function(e){e.reflow()};return t(18393)(c()),g&&(0,I.jsx)(m.J,{name:"JobsByStatusPieChart",removeChart:d,title:"Total bookings by Status (".concat(null===(r=p.aggregate)||void 0===r?void 0:r.sum.count,")"),children:(0,I.jsx)(u(),{callback:v,constructorType:"chart",Highcharts:c(),options:{chart:{type:"pie"},title:{text:null},tooltip:{formatter:function(){return"<b>"+this.x+"</b><br/>"+this.series.name+": "+this.y}},series:[{data:g.map(function(e){return{name:e.statusname,y:e.count}}),showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:null}},ref:n})})})},66878:function(e,n,t){"use strict";t.d(n,{J:function(){return d}});var r=t(40826),a=t(55377),i=t(58965),o=t(10367),s=t(85893),d=function(e){var n=e.title,t=e.children,o=e.isTable,d=e.name,l=e.removeChart,u=function(e){e.stopPropagation(),l(e,d)},m=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Z,{context:"danger",icon:"trash",prefix:"fa",size:"sm",title:"Delete",onClick:u}),(0,s.jsx)(a.Z,{context:"darkGrey",vertical:!0}),(0,s.jsx)(r.Z,{className:"dragHandle",icon:"arrows-alt",prefix:"fa",size:"md",title:"Move",onClick:function(e){return e.stopPropagation()}})]});return(0,s.jsx)(i.Z,{context:"secondary",fitParentHeight:!0,open:!0,title:n,toolbar:m,loading:!0,children:(0,s.jsx)(c,{overflow:o,children:t})})},c=o.ZP.div.withConfig({displayName:"wrapper__StyledChildren",componentId:"sc-cfe7my-0"})(["height:100%;overflow-x:",";"],function(e){return e.overflow?"hidden":"unset"})},76301:function(e,n,t){"use strict";t.d(n,{Ak:function(){return J},Cj:function(){return Y},K4:function(){return er},Qn:function(){return k},RJ:function(){return V},SW:function(){return R},T_:function(){return G},UH:function(){return q},UM:function(){return en},Ve:function(){return U},_d:function(){return N},_f:function(){return et},by:function(){return W},cz:function(){return Z},he:function(){return z},j$:function(){return M},kB:function(){return K},kU:function(){return X},kx:function(){return E},nD:function(){return L},nP:function(){return ei},pY:function(){return ea},qd:function(){return B},t1:function(){return H},yR:function(){return Q},zR:function(){return ee}});var r,a,i,o,s,d,c,l,u,m,I,p,g,v,$,y,f,b,x,h,_,T,j,C,P,A,O,w,D,S=t(71383),F=t(75063),Z=(0,F.Ps)(r||(r=(0,S.Z)(["\n  query GetAddressForSelect($q: String, $entity: String!, $entityId: Int!) {\n    items: Address(\n      where: {\n        Address_Entities: { entity: { _eq: $entity }, entityId: { _eq: $entityId } }\n        _or: [\n          { addressLine1: { _eq: $q } }\n          { addressLine2: { _eq: $q } }\n          { addressLine3: { _eq: $q } }\n          { county: { _eq: $q } }\n          { postCode: { _eq: $q } }\n          { city: { _eq: $q } }\n        ]\n      }\n    ) {\n      label: addressLine1\n      value: id\n      id\n      name\n      addressLine1\n      addressLine2\n      addressLine3\n      postCode\n      county\n      country: Country {\n        name\n      }\n      city\n      Address_Entities {\n        invoice\n      }\n    }\n  }\n"]))),B=(0,F.Ps)(a||(a=(0,S.Z)(["\n  query GetAccountsForSelect($q: String, $type: String, $limit: Int, $offset: Int) {\n    items: Account(\n      where: { name: { _ilike: $q }, type: { _eq: $type } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]))),L=(0,F.Ps)(i||(i=(0,S.Z)(['\n  query GetTaxonomy($q: String, $id: Int) {\n    items: Taxonomy(\n      where: { type: { _eq: "assetCategory" }, status: { _eq: "active" } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      options: Taxonomies(\n        where: {\n          type: { _eq: "assetCategory" }\n          name: { _ilike: $q }\n          id: { _eq: $id }\n          status: { _eq: "active" }\n        }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']))),q=(0,F.Ps)(o||(o=(0,S.Z)(["\n  query GetAssetsForSelect($locationId: Int, $q: String, $categoryId: Int, $bookable: String) {\n    items: Asset(\n      where: {\n        categoryId: { _eq: $categoryId }\n        locationId: { _eq: $locationId }\n        name: { _ilike: $q }\n        bookable: { _eq: $bookable }\n      }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n      parent: ParentAsset {\n        id\n        name\n      }\n      media: Media {\n        id\n        item: Medium {\n          id\n          name\n          filename\n          meta\n          category\n          type\n        }\n      }\n    }\n  }\n"]))),R=(0,F.Ps)(s||(s=(0,S.Z)(['\n  query GetCustomersForSelect($q: String, $limit: Int, $offset: Int) {\n    items: Account(\n      where: { name: { _ilike: $q }, type: { _eq: "customer" } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      admin: Admins {\n        id: adminId\n      }\n      label: name\n      spendThreshold: meta(path: "$.finance.spendThreshold")\n      serviceRateLabour: meta(path: "$.finance.serviceRateLabour")\n      serviceRateExpenses: meta(path: "$.finance.serviceRateExpenses")\n      value: id\n    }\n  }\n']))),k=(0,F.Ps)(d||(d=(0,S.Z)(["\n  query GetJobsForSelect($_q: Int, $locationId: Int) {\n    items: Job(\n      where: {\n        Location: { id: { _eq: $locationId } }\n        _or: [{ id: { _eq: $_q } }, { Invoices: { id: { _eq: $_q } } }]\n      }\n      order_by: { title: asc }\n    ) {\n      label: label\n      value: id\n      number\n      createdAt\n      description\n      status\n      timingStart\n      title\n      type\n      Location {\n        name\n      }\n      Taxonomy {\n        Taxonomy {\n          shortJobDescription: name\n        }\n      }\n    }\n  }\n"]))),z=(0,F.Ps)(c||(c=(0,S.Z)(['\n  query GetManagersForSelect($userId: Int, $accountId: Int!, $q: String) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          role: { _in: ["owner", "manager"] }\n          status: { _eq: "active" }\n          Account: { id: { _eq: $accountId } }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n        id: { _neq: $userId }\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n']))),J=(0,F.Ps)(l||(l=(0,S.Z)(['\n  query GetManagersForSelect(\n    $userId: Int\n    $accountId: Int!\n    $q: String\n    $invoiceThreshold: numeric\n    $quoteThreshold: numeric\n  ) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          role: { _in: ["owner", "manager"] }\n          status: { _eq: "active" }\n          Account: { id: { _eq: $accountId } }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n        id: { _neq: $userId }\n        _and: [\n          {\n            _or: [\n              { invoiceThreshold: { _gt: $invoiceThreshold } }\n              { invoiceThreshold: { _is_null: true } }\n            ]\n          }\n          {\n            _or: [\n              { quoteThreshold: { _gt: $quoteThreshold } }\n              { quoteThreshold: { _is_null: true } }\n            ]\n          }\n        ]\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n']))),M=(0,F.Ps)(u||(u=(0,S.Z)(["\n  query GetPostCodeAreaForSelect($countryId: Int, $q: String) {\n    items: PostcodeArea(\n      where: { name: { _ilike: $q }, countryId: { _eq: $countryId } }\n      order_by: { name: asc }\n    ) {\n      area\n      label: name\n      value: id\n    }\n  }\n"]))),N=(0,F.Ps)(m||(m=(0,S.Z)(['\n  query GetPropertiesForSelect($where: Location_bool_exp, $limit: Int, $offset: Int) {\n    items: Location(where: $where, order_by: { name: asc }, limit: $limit, offset: $offset) {\n      label: name\n      value: id\n      access\n      permitsRequired\n      registeredAddress: Addresses(\n        where: { entity: { _eq: "Location" }, registered: { _eq: true } }\n      ) {\n        address: Address {\n          id\n          addressLine1\n          addressLine2\n          addressLine3\n          county\n          country: Country {\n            name\n          }\n          postCode\n          city\n        }\n      }\n    }\n  }\n']))),E=(0,F.Ps)(I||(I=(0,S.Z)(['\n  query GetServicesForSelect($q: String, $limit: Int, $offset: Int) {\n    items: Service(\n      where: { name: { _ilike: $q }, status: { _eq: "active" } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n']))),H=(0,F.Ps)(p||(p=(0,S.Z)(["\n  query GetSlasForSelect($q: String, $adminId: Int, $type: String) {\n    items: SLA(\n      where: { name: { _ilike: $q }, type: { _eq: $type }, adminId: { _eq: $adminId } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]))),G=(0,F.Ps)(g||(g=(0,S.Z)(["\n  query GetSlasForSelectNew($where: SLA_bool_exp, $limit: Int, $offset: Int) {\n    items: SLA(where: $where, order_by: { name: asc }, limit: $limit, offset: $offset) {\n      label: name\n      value: id\n    }\n  }\n"]))),W=(0,F.Ps)(v||(v=(0,S.Z)(["\n  query GetSuppliersForSelect($where: Account_bool_exp, $limit: Int, $offset: Int) {\n    items: Account(where: $where, limit: $limit, offset: $offset, order_by: { name: asc }) {\n      label: name\n      value: id\n    }\n  }\n"]))),Q=(0,F.Ps)($||($=(0,S.Z)(['\n  query GetUsersForSelect($accountId: Int, $q: String, $limit: Int, $offset: Int) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          accountId: { _eq: $accountId }\n          isContact: { _eq: true }\n          status: { _eq: "active" }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      order_by: { nameFirst: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      label: fullName\n      value: id\n      email\n      phone\n    }\n  }\n']))),V=(0,F.Ps)(y||(y=(0,S.Z)(['\n  query GetUsersForSelect($q: String) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n      email\n      phone\n    }\n  }\n']))),Y=(0,F.Ps)(f||(f=(0,S.Z)(["\n  query GetTaxonomyGroupForSelect($q: String, $type: String!) {\n    items: Taxonomy(\n      where: { isGroup: { _eq: true }, name: { _ilike: $q }, type: { _eq: $type } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]))),U=(0,F.Ps)(b||(b=(0,S.Z)(['\n  query GetTaxonomy($q: String) {\n    items: Taxonomy(where: { type: { _eq: "expenseCategoryGroup" } }, order_by: { name: asc }) {\n      label: name\n      options: Taxonomies(\n        where: { type: { _eq: "expenseCategory" }, name: { _ilike: $q } }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']))),X=(0,F.Ps)(x||(x=(0,S.Z)(['\n  query GetCompliancesForSelect($q: String, $locationId: Int) {\n    items: Taxonomy(where: { type: { _eq: "complianceCategory" } }, order_by: { name: asc }) {\n      label: name\n      options: Compliances(\n        where: {\n          name: { _ilike: $q }\n          Compliance_Entities: { Location: { id: { _eq: $locationId } } }\n        }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']))),K=(0,F.Ps)(h||(h=(0,S.Z)(["\n  query GetUserRole($userId: Int!, $accountId: Int!) {\n    accountUsers: Account_User(\n      where: { userId: { _eq: $userId }, accountId: { _eq: $accountId } }\n    ) {\n      role\n    }\n  }\n"]))),ee=(0,F.Ps)(_||(_=(0,S.Z)(["\n  query GetSublocationsForSelect($locationId: Int!, $q: String, $limit: Int, $offset: Int) {\n    items: Sublocation(\n      where: { name: { _ilike: $q }, locationId: { _eq: $locationId }, active: { _eq: true } }\n      limit: $limit\n      offset: $offset\n      order_by: { createdAt: desc }\n    ) {\n      value: id\n      label: name\n    }\n  }\n"]))),en=(0,F.Ps)(T||(T=(0,S.Z)(['\n  query GetTaxonomy($q: String, $id: Int, $limit: Int, $offset: Int) {\n    items: Taxonomy(\n      where: {\n        id: { _eq: $id }\n        type: { _eq: "assetCategory" }\n        isGroup: { _eq: false }\n        status: { _eq: "active" }\n        name: { _ilike: $q }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n']))),et=(0,F.Ps)(j||(j=(0,S.Z)(["\n  query GetTaxonomyForSelect(\n    $where: Taxonomy_bool_exp\n    $limit: Int\n    $offset: Int\n    $orderBy: Taxonomy_order_by!\n  ) {\n    items: Taxonomy(where: $where, limit: $limit, offset: $offset, order_by: [$orderBy]) {\n      value: id\n      label: name\n    }\n  }\n"])));(0,F.Ps)(C||(C=(0,S.Z)(['\n  query GetTagsForTask($q: String!, $limit: Int = 50, $offset: Int = 0) {\n    items: Taxonomy(\n      where: { name: { _ilike: $q }, status: { _eq: "active" }, type: { _eq: "taskTags" } }\n      limit: $limit\n      offset: $offset\n      order_by: { id: desc }\n    ) {\n      value: id\n      label: name\n    }\n  }\n']))),(0,F.Ps)(P||(P=(0,S.Z)(['\n  query GetTagsForEntity(\n    $entityId: Int\n    $entity: String!\n    $q: String!\n    $limit: Int = 50\n    $offset: Int = 0\n  ) {\n    tags: Taxonomy(\n      where: {\n        name: { _ilike: $q }\n        status: { _eq: "active" }\n        type: { _eq: "taskTags" }\n        _not: { Taxonomy_Entities: { entity: { _eq: $entity }, entityId: { _eq: $entityId } } }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { id: desc }\n    ) {\n      id\n      name\n      meta\n    }\n  }\n']))),(0,F.Ps)(A||(A=(0,S.Z)(['\n  query GetEntityTags($entityId: Int!, $entity: String!) {\n    tags: Taxonomy_Entity(\n      where: {\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n        Taxonomy: { status: { _eq: "active" }, type: { _eq: "taskTags" } }\n      }\n      order_by: { id: desc }\n    ) {\n      id\n      tag: Taxonomy {\n        id\n        name\n        meta\n      }\n    }\n  }\n'])));var er=(0,F.Ps)(O||(O=(0,S.Z)(["\n  query GetCustomerManagers($accountId: Int, $q: String, $limit: Int, $offset: Int) {\n    items: User(\n      where: { Account_Users: { accountId: { _eq: $accountId } }, fullName: { _ilike: $q } }\n      order_by: { fullName: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n"]))),ea=(0,F.Ps)(w||(w=(0,S.Z)(["\n  query GetServiceSchedulesForSelect(\n    $q: String\n    $serviceId: Int\n    $entity: service_schedule_entity\n    $entityId: Int\n    $limit: Int = 50\n    $offset: Int = 0\n  ) {\n    items: ServiceSchedule(\n      where: {\n        name: { _ilike: $q }\n        serviceId: { _eq: $serviceId }\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]))),ei=(0,F.Ps)(D||(D=(0,S.Z)(['\n  query GetPropertyById($id: Int!) {\n    item: Location_by_pk(id: $id) {\n      label: name\n      value: id\n      access\n      registeredAddress: Addresses(\n        where: { entity: { _eq: "Location" }, registered: { _eq: true } }\n      ) {\n        address: Address {\n          id\n          addressLine1\n          addressLine2\n          addressLine3\n          county\n          country: Country {\n            name\n          }\n          postCode\n          city\n        }\n      }\n    }\n  }\n'])))},67872:function(e,n,t){"use strict";t.d(n,{t:function(){return d}});var r=t(67294),a=t(11163),i=t(87043),o=t(16540),s=t(85893),d=(0,r.forwardRef)(function(e,n){var t=e.columns,d=e.history,c=e.initialSort,l=e.loading,u=e.meta,m=e.paginationSize,I=e.refetch,p=e.rowClick,g=e.rows,v=e.xeroPageSize,$=(0,a.useRouter)(),y=$.query,f=void 0===y?{}:y,b=(0,r.useState)(parseInt(null==f?void 0:f.page,10)||1),x=b[0],h=b[1],_=(0,r.useState)(v||i.C1.paginationSize),T=_[0],j=_[1];c||(c={item:"createdAt",order:"desc"});var C=(0,r.useState)({item:c.item,order:c.order}),P=C[0],A=C[1],O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=$.query,t=void 0===n?{}:n;if(e>1?t.page=e:delete t.page,!(Object.keys(t).length>0))return{};var r=Object.keys(t).map(function(n){return"page"===n?"".concat(n,"=").concat(e):"".concat(n,"=").concat(t[n])}).join("&");return"?".concat(r)},w=function(){A({item:c.item,order:c.order}),h(1);var e=O();$.push(e),j(v||i.C1.paginationSize)};(0,r.useImperativeHandle)(n,function(){return{currentPage:x,pageSize:T,sort:P,resetPagination:function(){w()}}});var D=function(e){var n=O(e);d&&$.push(n),h(e),!d&&I&&I()},S=function(e){e!==i.C1.paginationSize&&(j(e),I&&I())},F=function(e){var n;A({item:e.item,order:e.order}),I&&I()};return(0,s.jsx)(o.Z,{columns:t,loading:l,paginationSize:m,pagination:u&&!0,paginationProps:u&&{currentPage:x,onPageChange:D,onPageSizeChange:S,pageCount:Math.ceil(u.aggregate.totalCount/T),perPage:T},rowClick:p,rows:g,sort:P,setSort:F})});d.defaultProps={history:!0,loading:!0,paginationSize:!1}},42846:function(e,n,t){"use strict";t.d(n,{x:function(){return l}});var r=t(59499),a=t(67294),i=t(96486),o=t(87043),s=function(e){try{return JSON.parse(e)}catch(n){return!1}};function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var l=function(e){var n,t,d,l,u,m,I,p,g,v,$,y=e.filters,f=e.newFilters,b=e.initialSort,x=(0,a.useRef)(),h=(0,a.useState)({}),_=h[0],T=h[1],j=(0,a.useState)({}),C=j[0],P=j[1],A=b||{item:"createdAt",order:"desc"},O=(0,r.Z)({},(null===(n=x.current)||void 0===n?void 0:n.sort.item)||A.item,A.inneritem?(0,r.Z)({},A.inneritem,(null===(t=x.current)||void 0===t?void 0:t.sort.order)||A.order):(null===(d=x.current)||void 0===d?void 0:d.sort.order)||A.order);return(0,a.useEffect)(function(){var e=!(0,i.isEqual)(_,y),n=!(0,i.isEqual)(C,f);if(e&&(T(y),null==x||null===(r=x.current)||void 0===r||r.resetPagination()),n&&(P(f),null==x||null===(a=x.current)||void 0===a||a.resetPagination()),null!=x&&null!==(t=x.current)&&void 0!==t&&t.setSort&&!(e||n)){var t,r,a,o,s,d,c,l,u,m,I,p=null!==(o=x.current)&&void 0!==o&&null!==(s=o.sort)&&void 0!==s&&s.item&&null!==(d=x.current)&&void 0!==d&&null!==(c=d.sort)&&void 0!==c&&c.order?{item:null===(l=x.current)||void 0===l?void 0:null===(u=l.sort)||void 0===u?void 0:u.item,order:null===(m=x.current)||void 0===m?void 0:null===(I=m.sort)||void 0===I?void 0:I.order}:O;x.current.setSort(p)}},[y,f]),{initialData:c(c({},y),{},{newFilters:(null==f?void 0:f.length)>0?f:void 0,limit:(null===(l=x.current)||void 0===l?void 0:l.pageSize)==="Infinity"?null:parseInt(null===(u=x.current)||void 0===u?void 0:u.pageSize,10)||o.C1.paginationSize,offset:((null===(m=x.current)||void 0===m?void 0:m.currentPage)-1||0)*((null===(I=x.current)||void 0===I?void 0:I.pageSize)||o.C1.paginationSize),orderBy:s(null===(p=x.current)||void 0===p?void 0:null===(g=p.sort)||void 0===g?void 0:null===(v=g.item)||void 0===v?void 0:v.replace(/ORDER/i,null===($=x.current)||void 0===$?void 0:$.sort.order))||O}),initialSort:b,ref:x}}},48829:function(e,n,t){"use strict";t.d(n,{S:function(){return r}});var r=function(e,n){var t=document.createElement("a");"string"==typeof t.download?(document.body.appendChild(t),t.download=n,t.href=e,t.click(),document.body.removeChild(t)):location.replace(e)}},22227:function(e,n,t){"use strict";t.d(n,{l:function(){return r}});var r=function(e,n){var t=Math.pow(10,n);return Math.round(e*t)/t}},32879:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ic}});var r,a,i,o,s,d,c,l,u,m,I,p,g,v,$,y,f,b,x,h,_,T,j,C,P,A,O,w,D,S,F,Z,B,L,q,R,k,z,J,M,N,E,H,G,W,Q,V,Y,U,X,K,ee={};t.r(ee),t.d(ee,{asset:function(){return ey},coverage:function(){return ef},customer:function(){return eu},overview:function(){return em},property:function(){return e$},quote:function(){return eb},service:function(){return eI},sla:function(){return ep},status:function(){return eg},supplier:function(){return ev}});var en={};t.r(en),t.d(en,{AverageAllocationTime:function(){return eE},AverageDaysOutstandingChart:function(){return eV},AverageJobLengthChart:function(){return nH},AverageJobRevenueChart:function(){return n0},AverageProfitChart:function(){return n6},AverageQuoteValueChart:function(){return tn},AverageTimeToAcceptByMinuteChart:function(){return td},AverageTimeToAttendanceChart:function(){return tl},AverageTimeToSubmitJobReportChart:function(){return tm},AverageToCloseByHourChart:function(){return tf},AvgPriceChart:function(){return n3},CountByActiveAccountChart:function(){return tx},CountJobsEngagementRateChart:function(){return t_},CountOpenJobsByDateChart:function(){return tj},CustomerAndSupplierAmounts:function(){return tP},CustomerDebtTable:function(){return tE},DisputeRateChart:function(){return tG},JobSLAByMonth:function(){return t6},JobsByDayLineChart:function(){return tQ},JobsByMonth:function(){return tV.m},JobsByService:function(){return tU},JobsByStatusPieChart:function(){return t0.e},JobsFinancialByDayLineChart:function(){return t3},LateAttendanceBySupplierChart:function(){return eG},NewCustomerAccountsChart:function(){return t5},NewSupplierAccountsChart:function(){return ri},PercentageOfSpendByServiceLineTable:function(){return rl},PercentageOfWorkOrdersByServiceLineTable:function(){return rg},QuoteAcceptanceRateChart:function(){return rr},ReactiveAmountByMonth:function(){return r$},ReactiveBySLA:function(){return rf},SlaBreachCountChart:function(){return aH},SlaBreachPercentageChart:function(){return aX},SpendByCoverageAreaTable:function(){return rT},SpendFromNewCustomerAccountsChart:function(){return rC},SumQuoteAccepted:function(){return rA},SumQuoteSent:function(){return rw},SupplierDebtTable:function(){return rL},TopAssetTypesBySpendTable:function(){return rU},TopAssetsByNumberOfJobsTable:function(){return rJ},TopAssetsBySpendTable:function(){return rG},TopCustomersByNumberOfPropertiesTable:function(){return r3},TopCustomersByProfitChart:function(){return r6},TopPropertiesBySpendTable:function(){return r7},TopSuppliersByNumberOfJobsTable:function(){return aa},TopSuppliersByQuoteReturnTable:function(){return ac},TopSuppliersByTimeToSubmitJobReportTable:function(){return ap},TotalCostOfOwnershipChart:function(){return ab},TotalJobRevenueChart:function(){return ah},TotalQuoteInvoiceSent:function(){return aT},TotalQuoteReportSend:function(){return aC},TotalQuoteSentChart:function(){return aF},WorstCustomersByAgedReceivablesTable:function(){return aR},jobsBySLA:function(){return tK}});var et=t(11163),er=t.n(et),ea=t(19076),ei=t(10367),eo=t(9270),es=t(62140),ed=t(88826),ec=t(54542),el=t(97303),eu={lg:[{i:"CustomerDebtTable",x:0,y:0,w:12,h:3,minW:6,maxW:12,minH:1,maxH:3},{i:"ReactiveAmountByMonth",x:0,y:5,w:3,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"NewCustomerAccountsChart",x:3,y:8,w:3,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"SpendFromNewCustomerAccountsChart",x:6,y:8,w:3,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"WorstCustomersByAgedReceivablesTable",x:9,y:8,w:3,h:3,minW:2,maxW:12,minH:2,maxH:6}]},em={lg:[{i:"JobsByMonth",x:0,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"JobsFinancialByDayLineChart",x:4,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6}]},eI={lg:[{i:"AverageAllocationTime",x:0,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"JobsByService",x:4,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"PercentageOfWorkOrdersByServiceLineTable",x:8,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6}]},ep={lg:[{i:"jobsBySLA",x:0,y:0,w:4,h:3,minW:2,maxW:6,minH:2,maxH:6}]},eg={lg:[{i:"JobsByStatusPieChart",x:0,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6}]},ev={lg:[{i:"SupplierDebtTable",x:0,y:0,w:12,h:3,minW:6,maxW:12,minH:1,maxH:3},{i:"LateAttendanceBySupplierChart",x:0,y:4,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6}]},e$={lg:[{i:"TopPropertiesBySpendTable",x:0,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"TopCustomersByNumberOfPropertiesTable",x:4,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6}]},ey={lg:[{i:"TopAssetTypesBySpendTable",x:0,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"TopAssetsBySpendTable",x:4,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"TopAssetsByNumberOfJobsTable",x:0,y:4,w:12,h:3,minW:2,maxW:6,minH:2,maxH:6}]},ef={lg:[{i:"SpendByCoverageAreaTable",x:0,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6}]},eb={lg:[{i:"TotalQuotesSent",x:0,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"TotalQuotesReportSent",x:4,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"TotalQuoteIvoiceSent",x:8,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"SumQuoteSent",x:0,y:5,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6},{i:"SumQuoteAccepted",x:8,y:0,w:4,h:3,minW:2,maxW:12,minH:2,maxH:6}]},ex=t(50029),eh=t(59499),e_=t(64687),eT=t.n(e_),ej=t(67294),eC=t(96486),eP=t(69968),eA=t(78289),eO=t(77439),ew=t(77349),eD=[{label:"Last Day",value:"-1"},{label:"Last 7 Days",value:"-7"},{label:"Last 30 Days",value:"-30",default:!0},{label:"Last 90 Days",value:"-90"},{label:"Custom",value:"custom"}],eS=function(e){var n=new Date;return{startDate:(0,ew.Z)(n,e.value),endDate:n}},eF=function(e){var n=new Date;return{startDate:(0,ew.Z)(n,e),endDate:n,intervals:e}},eZ=t(6812),eB=t(71383),eL=t(75063),eq=(0,eL.Ps)(r||(r=(0,eB.Z)(["\n  query GetDashboard_AllocationTime_By_Service(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    allocationByService: getDashboard_AllocationTime_By_Service(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { value: desc }\n    ) {\n      serviceId: id\n      allocationInMinutes: value\n      serviceName: name\n    }\n    meta: getDashboard_AllocationTime_By_Service_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          value\n        }\n      }\n    }\n  }\n"]))),eR=t(78840),ek=t.n(eR),ez=t(75708),eJ=t.n(ez),eM=t(66878),eN=t(85893),eE=(0,ej.forwardRef)(function(e,n){var r,a,i,o=e.filters,s=e.removeChart,d=(0,eZ.a)(eq,{variables:{adminId:o.adminId,customerId:o.customerId,endTime:o.endDate,isFixed:o.isFixed,isPlanned:o.isPlanned,locationId:o.locationId,managerId:o.managerId,postCodeAreaId:o.postCodeAreaId,serviceId:o.serviceId,slaId:o.slaId,startTime:o.startDate,supplierId:o.supplierId}}).data,c=(d=void 0===d?{allocationByService:[],meta:{}}:d).allocationByService,l=d.meta,u=(null===(r=l.aggregate)||void 0===r?void 0:r.avg.allocationInMinutes)/60|0,m=(null===(a=l.aggregate)||void 0===a?void 0:a.avg.allocationInMinutes)%60|0,I=function(e){e.reflow()};return t(18393)(ek()),c&&(0,eN.jsx)(eM.J,{name:"AverageAllocationTime",removeChart:s,title:"Average Allocation Time by Service Line (".concat(u,":").concat(m,")"),children:(0,eN.jsx)(eJ(),{callback:I,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"column"},title:{text:null},series:[{data:c.map(function(e){return{name:e.serviceName,y:e.allocationInMinutes}}),showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:null}},ref:n})})}),eH=(0,eL.Ps)(a||(a=(0,eB.Z)(["\n  query GetTopLateSuppliers(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    attendanceBySupplier: getDashboard_AttendanceTime_By_Supplier(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { reactive_customer: asc }\n      limit: 10\n    ) {\n      delayedJobs: intval_extra\n      delayedJobsPercent: reactive_customer\n      jobCount: count\n      latencyInMinutes: value\n      supplierName: name\n    }\n    meta: getDashboard_AttendanceTime_By_Supplier_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          latencyInMinutes: value\n        }\n      }\n    }\n  }\n"]))),eG=(0,ej.forwardRef)(function(e,n){var r,a=e.filters,i=e.removeChart,o=(0,eZ.a)(eH,{variables:{adminId:a.adminId,customerId:a.customerId,endTime:a.endDate,isFixed:a.isFixed,isPlanned:a.isPlanned,locationId:a.locationId,managerId:a.managerId,postCodeAreaId:a.postCodeAreaId,serviceId:a.serviceId,slaId:a.slaId,startTime:a.startDate,supplierId:a.supplierId}}).data,s=(o=void 0===o?{attendanceBySupplier:[]}:o).attendanceBySupplier,d=function(e){e.reflow()};return t(18393)(ek()),s&&(0,eN.jsx)(eM.J,{name:"LateAttendanceBySupplierChart",removeChart:i,title:"Top 10 Late Suppliers",children:(0,eN.jsx)(eJ(),{callback:d,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"column"},xAxis:{type:"category",title:null},yAxis:{stackLabels:{enabled:!0}},plotOptions:{column:{stacking:"normal",pointPadding:0,groupPadding:0,dataLabels:{enabled:!1}}},series:[{data:s.map(function(e){return{name:e.supplierName,y:-Math.round(e.delayedJobs/e.jobCount*100)}}),showInLegend:!1},{data:s.map(function(e){return{name:e.supplierName,y:100-Math.round(e.delayedJobs/e.jobCount*100)}}),showInLegend:!1}]},ref:n})})}),eW=(0,eL.Ps)(i||(i=(0,eB.Z)(["\n  query GetAverageOutstandingByDay(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageDaysOutstanding: getDashboard_Average_Outstanding_By_Day(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: value\n    }\n    meta: getDashboard_Average_Outstanding_By_Day_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]))),eQ=t(74975),eV=(0,ej.forwardRef)(function(e,n){var r,a=e.filters,i=e.removeChart,o=(0,eZ.a)(eW,{variables:{adminId:a.adminId,customerId:a.customerId,endTime:a.endDate,isFixed:a.isFixed,isPlanned:a.isPlanned,locationId:a.locationId,managerId:a.managerId,postCodeAreaId:a.postCodeAreaId,serviceId:a.serviceId,slaId:a.slaId,startTime:a.startDate,supplierId:a.supplierId}}).data,s=(o=void 0===o?{averageDaysOutstanding:[]}:o).averageDaysOutstanding,d=function(e){e.reflow()};return t(18393)(ek()),s&&(0,eN.jsx)(eM.J,{name:"AverageDaysOutstandingChart",removeChart:i,title:"Average Days Outstanding",children:(0,eN.jsx)(eJ(),{callback:d,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"line",zoomType:"x"},title:{text:null},series:[{data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.date),"yyyy dd MMM"),y:e.avg||0}}),name:"Avg",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Days"}}},ref:n})})}),eY=(0,eL.Ps)(o||(o=(0,eB.Z)(["\n  query GetAverageJobLength(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageJobLength: getDashboard_Average_Job_Length(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: value\n    }\n    meta: getDashboard_Average_Job_Length_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]))),eU=t(68162),eX=t(41733),eK=t(74721),e0=t(36833),e1=t(66242),e3=t(78445),e2=t(26447),e6=t(15861),e9=t(21023),e5=t(93946),e8=t(44267),e4=t(5616),e7=t(11994),ne={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"40%",minHeight:"40%",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function nn(e){var n=e.openModal,t=e.setOpenModal,r=e.children,a=e.title,i=function(){return t(!1)};return(0,eN.jsx)("div",{children:(0,eN.jsx)(e7.Z,{open:n,onClose:i,children:(0,eN.jsx)(e4.Z,{sx:ne,children:(0,eN.jsxs)(e6.Z,{variant:"h6",component:"h2",sx:{fontFamily:"Nunito-SemiBold",fontStyle:"normal",fontWeight:600,fontSize:"1rem",letterSpacing:"0.0595px",color:"rgba(0, 0, 0, 0.87)"},children:[a," Filters",r]})})})})}var nt=t(76301),nr=t(30381),na=t.n(nr),ni=function(e){var n=e.accountId,t=e.area,r=e.assetCategoryId,a=e.entity,i=e.entityId,o=(e.hasRole,e.id),s=e.locationId,d=e.serviceId,c=e.taxonomyGroupType,l=e.customerId,u=e.customerRole,m=e.type,I=e.userId,p=m;switch(u&&(p="".concat(m,"_").concat(u)),p){case"address":return{query:nt.cz,variables:{entity:a,entityId:i}};case"asset":return{query:nt.UH,variables:{categoryId:r,locationId:s}};case"assetBookable":return{query:nt.UH,variables:{categoryId:r,locationId:s,bookable:"yes"}};case"assetCategory":return{query:nt.nD,variables:{id:o}};case"compliance":return{query:nt.kU,variables:{locationId:s}};case"coverage":return{query:nt.j$};case"customer":return{query:nt.SW};case"job":return{query:nt.Qn,variables:{locationId:s}};case"manager":return{query:nt.he,variables:{accountId:n}};case"product":return{query:nt.UH,variables:{category:"product",locationId:s}};case"property":return{query:nt._d,variables:{where:{status:{_eq:"active"},Account_Locations:{accountId:{_eq:n}}}}};case"property_user":return{query:nt._d,variables:{where:{status:{_eq:"active"},Account_Locations:{accountId:{_eq:n},Account:{type:{_eq:"customer"},Account_Users:{role:{_eq:"user"},userId:{_eq:l}}},User_Account_Locations:{Account_User:{userId:{_eq:l},accountId:{_eq:n}}}}}}};case"sensor":return{query:nt.UH,variables:{category:"sensor",locationId:s}};case"service":return{query:nt.kx};case"sla":return{query:nt.t1,variables:{type:"priority",adminId:n}};case"sublocation":return{query:nt.UH,variables:{category:"sublocation",adminId:n,locationId:s}};case"supplier":var g={type:{_eq:"supplier"}};return t&&(g.PostcodeAreas={PostcodeArea:{area:{_eq:t}},entity:{_eq:"Account"},status:{_eq:"active"}}),d&&(g.Services={serviceId:{_eq:d},status:{_eq:"active"}}),{query:nt.by,variables:{where:g}};case"user":return{query:nt.yR,variables:{accountId:n}};case"usersForBookings":return{query:nt.yR,variables:{accountId:I}};case"tenant":return{query:nt.RJ};case"taxonomyGroup":return{query:nt.Cj,variables:{type:c}};case"expenseCategory":return{query:nt.Ve};default:return{query:nt.qd}}},no=function(e){switch(e){case"supplier":return"Select supplier";case"customer":return"Select customer";case"property":return"Select property";case"service":return"Select service";case"coverage":return"Select postcodes";case"sla":return"SLA";case"user":return"Assigned to";default:return""}},ns=function(e){switch(e){case"-1":return"Today";case"-30":return"Last 30 Days";case"-7":return"Last Week";case"custom":return"Custom";default:return null}},nd=function(e){switch(e){case 0:return"Reactive";case 1:return"PPM";case"All":return"All";default:return null}},nc=function(e){switch(e){case 0:return"Time and materials";case 1:return"Fixed";case"All":return"All";default:return null}},nl=function(e){switch(e){case"Average Job Revenue":return"The average revenue per completed job.";case"Average Job Length":return"The average time taken to complete a job.";case"Average Time To Accept Job":return"The average time taken for a job to be accepted once it has been offered. ";case"SLA Breach (Count)":return"The number of jobs where a relevant SLA has been.";case"SLA Breach (Percentage)":return"The percentage of jobs where the relevant SLA has been breached.";case"Average Time To Close Job":return"The average time taken to close down a job once completed.";case"Number Of Quotes":return"Number of quotes submitted during time period.";case"Average Quote Value":return"The average value of quotes submitted during time period. ";case"Quote Acceptance Rate":return"The percentage of quotes submitted that are accepted. ";default:return null}};function nu(e){var n=e.title,t=e.children,r=e.isTable,a=e.name,i=e.removeChart,o=e.filtersComponent,s=e.activeFiltersComponent,d=e.setOpenModal,c=e.openModal,l=function(){return d(!0)},u=function(e){e.stopPropagation(),i(e,a)},m=nl(n);return(0,eN.jsxs)(eN.Fragment,{children:[(0,eN.jsx)(nn,{title:n,openModal:c,setOpenModal:d,children:o}),(0,eN.jsxs)(e1.Z,{sx:{minWidth:300,border:"1px solid rgba(211,211,211,0.6)",height:"100%"},children:[(0,eN.jsx)(e3.Z,{title:(0,eN.jsxs)(e2.Z,{direction:"row",children:[(0,eN.jsx)(e6.Z,{sx:{fontFamily:"Nunito-SemiBold",fontStyle:"normal",fontWeight:500,fontSize:"1rem",letterSpacing:"0.0595px",color:"rgba(0, 0, 0, 0.87)"},children:n}),(0,eN.jsx)(e9.Z,{placement:"right-start",title:m,children:(0,eN.jsx)(eK.Z,{fontSize:"medium",sx:{color:"#2196F3",ml:"0.1rem",position:"relative"}})})]}),action:(0,eN.jsxs)(eN.Fragment,{children:[(0,eN.jsx)(e5.Z,{onClick:l,size:"small",sx:{mr:"20px"},children:(0,eN.jsx)(eU.Z,{sx:{color:"rgba(39, 39, 39, 0.7)"}})}),(0,eN.jsx)(e5.Z,{onClick:u,size:"small",sx:{mr:"20px"},children:(0,eN.jsx)(eX.Z,{sx:{color:"rgba(39, 39, 39, 0.7)"}})}),(0,eN.jsx)(e5.Z,{className:"dragHandle",onClick:function(e){return e.stopPropagation()},size:"small",sx:{mr:"20px"},children:(0,eN.jsx)(e0.Z,{sx:{color:"rgba(39, 39, 39, 0.7)"}})})]})}),(0,eN.jsxs)("div",{style:{backgroundColor:"white"},children:[(0,eN.jsx)(e8.Z,{sx:{borderBottom:"1px solid #E4E7EB"},children:(0,eN.jsx)(nm,{overflow:r,children:t})}),(0,eN.jsx)(e4.Z,{children:s})]})]})]})}var nm=(0,ei.ZP)(e4.Z).withConfig({displayName:"chartWrapper__StyledChildren",componentId:"sc-1fsr1uy-0"})(["overflow-x:",";"],function(e){return e.overflow?"hidden":"unset"}),nI=t(72936),np=t(42283),ng=t(11057),nv=t(4730),n$=t(66252),ny=t(50135),nf=t(23776),nb=t(52019),nx=["AddForm","accountId","area","assetCategoryId","entity","entityId","errors","id","isClearable","isDisabled","label","locationId","name","serviceId","taxonomyGroupType","customerId","customerRole","type","userId","onChange","control","filters"];function nh(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function n_(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nh(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nh(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var nT=function(e,n){var t,r,a,i=!0;return(null===(t=e.errors[e.name])||void 0===t?void 0:t.message)!==(null===(r=n.errors[n.name])||void 0===r?void 0:r.message)&&(i=!1),["accountId","assetCategoryId","entity","entityId","locationId","serviceId","type","value","customerId","customerRole"].forEach(function(t){e[t]!==n[t]&&(i=!1)}),i},nj=(0,ej.memo)(function(e){e.AddForm;var n=e.accountId,t=e.area,r=e.assetCategoryId,a=e.entity,i=e.entityId,o=(e.errors,e.id),s=(e.isClearable,e.isDisabled,e.label,e.locationId),d=e.name,c=e.serviceId,l=e.taxonomyGroupType,u=e.customerId,m=e.customerRole,I=e.type,p=e.userId,g=(e.onChange,e.control),v=e.filters;(0,nv.Z)(e,nx);var $,y=(0,n$.x)(),f=(0,ej.useState)(!1),b=f[0],x=f[1],h=(0,ej.useState)([]),_=h[0],T=h[1],j=(0,ej.useState)(!1),C=j[0],P=j[1],A=(0,ej.useContext)(nb.Z).hasRole,O=(0,ej.useState)(!1)[1];(0,ej.useEffect)(function(){return O(!1),P(!1),function(){}},[n,r,a,i,s,c,I,u,m,p]);var w=($=(0,ex.Z)(eT().mark(function e(){var d,g,v,$,f,b,h;return eT().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=3;break}return O(!0),e.abrupt("return",null);case 3:return x(!0),g=(d=ni({accountId:n,area:t,assetCategoryId:r,entity:a,entityId:i,hasRole:A,id:o,locationId:s,serviceId:c,taxonomyGroupType:l,customerId:u,customerRole:m,type:I,userId:p})).query,$=void 0===(v=d.variables)?{}:v,e.next=7,y.query({query:g,variables:n_({},$)});case 7:T((b=void 0===(b=e.sent.data)?{items:[]}:b).items),x(!1),P(!0),O(!0);case 15:case"end":return e.stop()}},e)})),function(){return $.apply(this,arguments)});return(0,eN.jsx)(np.Qr,{render:function(e){return(0,eN.jsx)(nf.Z,n_(n_({},e),{},{options:_,value:v[d],getOptionLabel:function(e){return e.label},sx:{width:"45%",mb:2,"& .MuiInputLabel-root":{lineHeight:"1.4375em",fontFamily:"Nunito-SemiBold",fontStyle:"normal",fontWeight:700,fontSize:"0.875rem",letterSpacing:"0.0595px",color:"rgba(0, 0, 0, 0.54)"}},onOpen:w,loading:b,renderInput:function(e){return(0,eN.jsx)(ny.Z,n_(n_({},e),{},{label:no(I),variant:"standard",inputProps:n_(n_({},e.inputProps),{},{style:{lineHeight:"1.4375em",fontFamily:"Nunito-SemiBold",fontStyle:"normal",fontWeight:700,fontSize:"0.875rem",letterSpacing:"0.07875px",color:"rgba(0, 0, 0, 0.54)"}})}))},onChange:function(n,t){e.onChange(t)}}))},name:d,control:g})},nT);nj.defaultProps={isClearable:!0,label:"Account",name:"account",type:"account"};var nC=t(52220),nP=t(94054),nA=t(47312),nO=t(18360),nw=t(18972),nD=["name","label","control","defaultValue","children","options","variant"];function nS(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function nF(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nS(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nS(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var nZ=function(e){var n=e.name,t=e.label,r=e.control,a=e.defaultValue,i=(e.children,e.options),o=e.variant,s=(0,nv.Z)(e,nD);return(0,eN.jsxs)(nP.Z,{sx:{width:t?"45%":"100%"},fullWidth:!0,children:[t&&(0,eN.jsx)(nA.Z,{sx:{"&.MuiInputLabel-root	":{lineHeight:"1.4375em",fontFamily:"Nunito-SemiBold",fontStyle:"normal",fontWeight:700,fontSize:"0.875rem",letterSpacing:"0.07875px",color:"rgba(0, 0, 0, 0.54)"},"&.MuiInputLabel-formControl":{left:"-13px",top:"5px"}},htmlFor:"select",children:t}),(0,eN.jsx)(np.Qr,{as:(0,eN.jsx)(nO.Z,nF(nF({id:"select"},s),{},{variant:o,sx:{mt:2,lineHeight:"1.4375em",fontFamily:"Nunito-SemiBold",fontStyle:"normal",fontWeight:700,fontSize:"0.875rem",letterSpacing:"0.0595px",color:"rgba(0, 0, 0, 0.54)"},children:i.map(function(e){return(0,eN.jsx)(nw.Z,{value:e.value,sx:{fontFamily:"Nunito-Regular",fontStyle:"normal",fontWeight:400,fontSize:"0.875rem",lineHeight:"24px",letterSpacing:"0.0595px",color:"rgba(0, 0, 0, 0.54)"},children:e.label},e.value)})})),name:n,control:r,defaultValue:a})]})};function nB(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function nL(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nB(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nB(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var nq=[{label:"All",value:"All"},{label:"PPM",value:1},{label:"Reactive",value:0}],nR=[{label:"All",value:"All"},{label:"Fixed",value:1},{label:"Time and material",value:0}],nk=function(e){var n=e.setFilters,t=e.initialFilters,r=e.filters,a=(0,nI.x)().user,i=(0,np.cI)({defaultValues:nL({},r)}),o=i.control,s=i.errors,d=i.handleSubmit,c=i.register,l=i.reset,u=i.watch,m={errors:s,register:c,control:o,reset:l,filters:r},I=function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}},p=function(e){var t="custom"===e.intervals?{startDate:e.startDate,endDate:e.endDate,intervals:e.intervals}:eF(e.intervals),r=a.accountId,i=a.accountType,o=nL(nL(nL({},t),I({accountId:r,accountType:i})),{customerId:e.customerId,locationId:e.locationId,serviceId:e.serviceId,slaId:e.slaId,supplierId:e.supplierId,managerId:e.managerId,isPlanned:e.isPlanned,isFixed:e.isFixed});n(o)},g=function(){l({initialFilters:t}),n(t)},v=u("intervals");return(0,eN.jsx)(eN.Fragment,{children:(0,eN.jsx)("form",{onSubmit:d(p),children:(0,eN.jsxs)(e2.Z,{children:[(0,eN.jsx)(nZ,{sx:{mt:1,mb:.5},control:o,name:"intervals",options:eD,variant:"standard"}),"custom"===v&&(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(e4.Z,{sx:{mt:2,width:"45%"},children:(0,eN.jsx)(nC.M,nL(nL({},m),{},{name:"startDate",placeholder:"Start Date"}))}),(0,eN.jsx)(e4.Z,{sx:{mt:2,width:"45%"},children:(0,eN.jsx)(nC.M,nL(nL({},m),{},{name:"endDate",placeholder:"End Date"}))})]}),(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(nj,nL(nL({},m),{},{name:"customerId",type:"customer",control:o,textFieldValue:!0,setTextFieldValue:!0})),(0,eN.jsx)(nj,nL(nL({},m),{},{name:"supplierId",type:"supplier",control:o}))]}),(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(nj,nL(nL({},m),{},{name:"locationId",type:"property",control:o})),(0,eN.jsx)(nj,nL(nL({},m),{},{name:"serviceId",type:"service",control:o}))]}),(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(nj,nL(nL({},m),{},{name:"slaId",type:"sla",control:o})),(0,eN.jsx)(nj,nL(nL({},m),{},{name:"managerId",type:"user",control:o}))]}),(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(nZ,{control:o,name:"isPlanned",options:nq,variant:"standard",label:"Schedule"}),(0,eN.jsx)(nZ,{control:o,name:"isFixed",options:nR,variant:"standard",label:"Price"})]}),(0,eN.jsxs)(e2.Z,{mt:10,spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,eN.jsx)(ng.Z,{onClick:g,variant:"outlined",style:{textTransform:"none"},children:"Reset filters"}),(0,eN.jsx)(ng.Z,{type:"submit",variant:"contained",style:{textTransform:"none"},children:"Apply"})]})]})})})},nz=t(86886),nJ=function(e){var n,t=Object.keys(n=e.filters).map(function(e){var t,r,a,i,o,s;switch(e){case"managerId":return{label:"Assigned to",value:(null===(t=n[e])||void 0===t?void 0:t.label)||null};case"customerId":return{label:"Customer",value:(null===(r=n[e])||void 0===r?void 0:r.label)||null};case"isFixed":return{label:"Price",value:nc(n[e])};case"isPlanned":return{label:"Schedule",value:nd(n[e])};case"locationId":return{label:"Location",value:(null===(a=n[e])||void 0===a?void 0:a.label)||null};case"serviceId":return{label:"Service",value:(null===(i=n[e])||void 0===i?void 0:i.label)||null};case"slaId":return{label:"SLA",value:(null===(o=n[e])||void 0===o?void 0:o.label)||null};case"supplierId":return{label:"Supplier",value:(null===(s=n[e])||void 0===s?void 0:s.label)||null};case"intervals":return{label:"Time Slot",value:ns(n[e])};case"endDate":return{label:"End Date",value:na()(n[e]).format("DD MMM YYYY")};case"startDate":return{label:"Start Date",value:na()(n[e]).format("DD MMM YYYY")};default:return null}});return(0,eN.jsx)(e4.Z,{sx:{flexGrow:2,ml:6,mr:6,mb:4,mt:1},children:(0,eN.jsx)(nz.ZP,{container:!0,rowSpacing:1,columnSpacing:{xs:1,sm:2,md:3},children:t.map(function(e){return e&&e.value&&(0,eN.jsx)(nM,{label:e.label,value:e.value},e.label)})})})},nM=function(e){var n=e.label,t=e.value;return(0,eN.jsxs)(nz.ZP,{item:!0,xs:3,children:[(0,eN.jsx)(e2.Z,{direction:"row",children:(0,eN.jsxs)(e6.Z,{sx:{fontFamily:"Nunito-Regular",fontSize:"0.625rem",fontStyle:"normal",fontWeight:400,lineHeight:"21px",color:"rgba(0, 0, 0, 0.87)",letterSpacing:"0.07875px",mr:"5px"},children:[n," :"]})}),(0,eN.jsx)(e2.Z,{children:(0,eN.jsx)(e6.Z,{sx:{fontFamily:"Nunito-Regular",fontSize:"0.75rem",fontStyle:"normal",fontWeight:400,lineHeight:"21px",color:"#2196F3",letterSpacing:"0.07875px"},children:t})})]})};function nN(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function nE(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nN(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nN(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var nH=(0,ej.forwardRef)(function(e,n){var r,a,i,o,s,d,c,l,u,m,I=e.removeChart,p=(0,nI.x)().user,g=nE(nE({},eF(eD.find(function(e){return e.default}).value)),(l=(c={accountId:p.accountId,accountType:p.accountType,customerId:null,supplierId:null,locationId:null,serviceId:null,slaId:null,managerId:null,isPlanned:null,isFixed:null}).accountId,"admin"===c.accountType?{adminId:l}:{accountId:l})),v=(0,ej.useState)(g),$=v[0],y=v[1],f=(0,ej.useState)(!1),b=f[0],x=f[1],h=(0,eZ.a)(eY,{onCompleted:function(){x(!1)},variables:{adminId:$.adminId,customerId:null===(r=$.customerId)||void 0===r?void 0:r.value,endTime:$.endDate,startTime:$.startDate,isFixed:$.isFixed,isPlanned:$.isPlanned,locationId:null===(a=$.locationId)||void 0===a?void 0:a.value,managerId:null===(i=$.managerId)||void 0===i?void 0:i.value,serviceId:null===(o=$.serviceId)||void 0===o?void 0:o.value,slaId:null===(s=$.slaId)||void 0===s?void 0:s.value,supplierId:null===(d=$.supplierId)||void 0===d?void 0:d.value}}).data,_=(h=void 0===h?{averageJobLength:[]}:h).averageJobLength,T=function(e){e.reflow()};return t(18393)(ek()),_&&(0,eN.jsx)(nu,{name:"AverageJobLengthChart",removeChart:I,title:"Average Job Length",openModal:b,setOpenModal:x,filtersComponent:(0,eN.jsx)(nk,{filters:$,initialFilters:g,setFilters:y}),activeFiltersComponent:(0,eN.jsx)(nJ,{filters:$}),children:(0,eN.jsx)(eJ(),{callback:T,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"spline",zoomType:"x"},title:{text:null},exporting:{buttons:{contextButton:{align:"right",x:0,y:5,verticalAlign:"top",symbol:"menuball"}}},series:[{name:"AVG, hours",data:_.map(function(e){return{name:(0,eQ.Z)(new Date(e.date),"dd LLL yyyy"),y:e.avg||0}}),showInLegend:!1,color:"#1E88E5"}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Hours"}}},ref:n})})}),nG=(0,eL.Ps)(s||(s=(0,eB.Z)(["\n  query GetJobsFinancialByDay(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageJobRevenue: getDashboard_Financial_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      jobDate: date_val1_extra\n      jobRevenue: ppm_revenue\n    }\n    meta: getDashboard_Financial_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          sumJobRevenue: ppm_revenue\n        }\n      }\n    }\n  }\n"])));function nW(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function nQ(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nW(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nW(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var nV=[{label:"All",value:"All"},{label:"PPM",value:1},{label:"Reactive",value:0}],nY=[{label:"All",value:"All"},{label:"Fixed",value:1},{label:"Time and material",value:0}],nU=function(e){var n=e.setFilters,t=e.initialFilters,r=e.filters,a=(0,nI.x)().user,i=(0,np.cI)({defaultValues:nQ({},r)}),o=i.control,s=i.errors,d=i.handleSubmit,c=i.register,l=i.reset,u=i.watch,m={errors:s,register:c,control:o,reset:l,filters:r},I=function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}},p=function(e){var t="custom"===e.intervals?{startDate:e.startDate,endDate:e.endDate,intervals:e.intervals}:eF(e.intervals),r=a.accountId,i=a.accountType,o=nQ(nQ(nQ({},t),I({accountId:r,accountType:i})),{customerId:e.customerId,locationId:e.locationId,serviceId:e.serviceId,slaId:e.slaId,supplierId:e.supplierId,managerId:e.managerId,isPlanned:e.isPlanned,isFixed:e.isFixed});n(o)},g=function(){l({initialFilters:t}),n(t)},v=u("intervals");return(0,eN.jsx)(eN.Fragment,{children:(0,eN.jsx)("form",{onSubmit:d(p),children:(0,eN.jsxs)(e2.Z,{children:[(0,eN.jsx)(nZ,{sx:{mt:1,mb:.5},control:o,name:"intervals",options:eD,variant:"standard"}),"custom"===v&&(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(e4.Z,{sx:{mt:2,width:"45%"},children:(0,eN.jsx)(nC.M,nQ(nQ({},m),{},{name:"startDate",placeholder:"Start Date"}))}),(0,eN.jsx)(e4.Z,{sx:{mt:2,width:"45%"},children:(0,eN.jsx)(nC.M,nQ(nQ({},m),{},{name:"endDate",placeholder:"End Date"}))})]}),(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(nj,nQ(nQ({},m),{},{name:"customerId",type:"customer",control:o,textFieldValue:!0,setTextFieldValue:!0})),(0,eN.jsx)(nj,nQ(nQ({},m),{},{name:"supplierId",type:"supplier",control:o}))]}),(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(nj,nQ(nQ({},m),{},{name:"locationId",type:"property",control:o})),(0,eN.jsx)(nj,nQ(nQ({},m),{},{name:"serviceId",type:"service",control:o}))]}),(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(nj,nQ(nQ({},m),{},{name:"slaId",type:"sla",control:o})),(0,eN.jsx)(nj,nQ(nQ({},m),{},{name:"managerId",type:"user",control:o}))]}),(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(nZ,{control:o,name:"isPlanned",options:nV,variant:"standard",label:"Schedule"}),(0,eN.jsx)(nZ,{control:o,name:"isFixed",options:nY,variant:"standard",label:"Price"})]}),(0,eN.jsxs)(e2.Z,{mt:10,spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,eN.jsx)(ng.Z,{onClick:g,variant:"outlined",children:"Reset filters"}),(0,eN.jsx)(ng.Z,{type:"submit",variant:"contained",children:"Apply"})]})]})})})};function nX(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function nK(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nX(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nX(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var n0=(0,ej.forwardRef)(function(e,n){var r,a,i,o,s,d,c,l,u,m,I,p=e.removeChart,g=(0,nI.x)().user,v=nK(nK({},eF(eD.find(function(e){return e.default}).value)),(u=(l={accountId:g.accountId,accountType:g.accountType,customerId:null,supplierId:null,locationId:null,serviceId:null,slaId:null,managerId:null,isPlanned:null,isFixed:null}).accountId,"admin"===l.accountType?{adminId:u}:{accountId:u})),$=(0,ej.useState)(v),y=$[0],f=$[1],b=(0,ej.useState)(!1),x=b[0],h=b[1],_=(0,eZ.a)(nG,{onCompleted:function(){h(!1)},variables:{adminId:y.adminId,startTime:y.startDate,endTime:y.endDate,customerId:null===(r=y.customerId)||void 0===r?void 0:r.value,locationId:null===(a=y.locationId)||void 0===a?void 0:a.value,managerId:null===(i=y.managerId)||void 0===i?void 0:i.value,postCodeAreaId:null===(o=y.postCodeAreaId)||void 0===o?void 0:o.value,serviceId:null===(s=y.serviceId)||void 0===s?void 0:s.value,slaId:null===(d=y.slaId)||void 0===d?void 0:d.value,supplierId:null===(c=y.supplierId)||void 0===c?void 0:c.value,isFixed:"All"===y.isFixed?null:y.isFixed,isPlanned:"All"===y.isPlanned?null:y.isPlanned}}).data,T=(_=void 0===_?{averageJobRevenue:[]}:_).averageJobRevenue,j=function(e){e.reflow()};return t(18393)(ek()),T&&(0,eN.jsx)(nu,{name:"AverageJobRevenueChart",removeChart:p,title:"Average Job Revenue",openModal:x,setOpenModal:h,filtersComponent:(0,eN.jsx)(nU,{filters:y,initialFilters:v,setFilters:f}),activeFiltersComponent:(0,eN.jsx)(nJ,{filters:y}),tooltip:"",children:(0,eN.jsx)(eJ(),{callback:j,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"spline",zoomType:"x"},title:{text:null},exporting:{buttons:{contextButton:{align:"right",x:0,y:5,verticalAlign:"top",symbol:"menuball"}}},series:[{name:"Revenue, \xa3",data:T.map(function(e){return{name:(0,eQ.Z)(new Date(e.jobDate),"dd LLL yyyy"),y:e.jobRevenue}}),showInLegend:!1,color:"#1E88E5"}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Amounts(\xa3)"}}},ref:n})})}),n1=(0,eL.Ps)(d||(d=(0,eB.Z)(["\n  query GetAvgPriceByMonth(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    priceByMonth: getDashboard_AvgPrice_By_Month(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { strval_extra: asc }\n    ) {\n      month: strval_extra\n      avg: value\n    }\n    meta: getDashboard_AvgPrice_By_Month_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]))),n3=(0,ej.forwardRef)(function(e,n){var r,a=e.filters,i=e.removeChart,o=(0,eZ.a)(n1,{variables:{adminId:a.adminId,customerId:a.customerId,endTime:a.endDate,isFixed:a.isFixed,isPlanned:a.isPlanned,locationId:a.locationId,managerId:a.managerId,postCodeAreaId:a.postCodeAreaId,serviceId:a.serviceId,slaId:a.slaId,startTime:a.startDate,supplierId:a.supplierId}}).data,s=(o=void 0===o?{priceByMonth:[]}:o).priceByMonth,d=function(e){e.reflow()};return t(18393)(ek()),s&&(0,eN.jsx)(eM.J,{name:"AvgPriceChart",removeChart:i,title:"Average Job Price By Month ",children:(0,eN.jsx)(eJ(),{callback:d,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"line",zoomType:"x"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:{text:"Amounts(\xa3)"}},series:[{name:"Ave",data:s.map(function(e){return{name:na()(e.month,"YYYY-M").format("MMM YYYY"),y:e.avg||0}}),showInLegend:!1}]},ref:n})})}),n2=(0,eL.Ps)(c||(c=(0,eB.Z)(["\n  query GetAverageProfit(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageProfit: getDashboard_Customer_Profit(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: ppm_customer\n    }\n    meta: getDashboard_Customer_Profit_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]))),n6=(0,ej.forwardRef)(function(e,n){var r,a=e.filters,i=e.removeChart,o=(0,eZ.a)(n2,{variables:{adminId:a.adminId,customerId:a.customerId,endTime:a.endDate,isFixed:a.isFixed,isPlanned:a.isPlanned,locationId:a.locationId,managerId:a.managerId,postCodeAreaId:a.postCodeAreaId,serviceId:a.serviceId,slaId:a.slaId,startTime:a.startDate,supplierId:a.supplierId}}).data,s=(o=void 0===o?{averageProfit:[]}:o).averageProfit,d=function(e){e.reflow()};return t(18393)(ek()),s&&(0,eN.jsx)(eM.J,{name:"AverageProfitChart",removeChart:i,title:"Average Profit Margin",children:(0,eN.jsx)(eJ(),{callback:d,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"line",zoomType:"x"},title:{text:null},series:[{data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.date),"yyyy dd MMM"),y:e.avg||0}}),name:"average margin profit",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Amounts(\xa3)"}}},ref:n})})}),n9=(0,eL.Ps)(l||(l=(0,eB.Z)(["\n  query GetAverageQuoteValue(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageQuoteValue: getDashboard_Average_Quote(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      amount: reactive_customer\n      date: date_val1_extra\n    }\n    meta: getDashboard_Average_Quote_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          sumJobRevenue: ppm_revenue\n        }\n      }\n    }\n  }\n"])));function n5(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function n8(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?n5(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n5(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var n4=function(e){var n=e.setFilters,t=e.initialFilters,r=e.filters,a=(0,nI.x)().user,i=(0,np.cI)({defaultValues:n8({},r)}),o=i.control,s=i.errors,d=i.handleSubmit,c=i.register,l=i.reset,u=i.watch,m={errors:s,register:c,control:o,reset:l,filters:r},I=function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}},p=function(e){var t="custom"===e.intervals?{startDate:e.startDate,endDate:e.endDate,intervals:e.intervals}:eF(e.intervals),r=a.accountId,i=a.accountType,o=n8(n8(n8({},t),I({accountId:r,accountType:i})),{customerId:e.customerId,locationId:e.locationId,serviceId:e.serviceId,slaId:e.slaId,supplierId:e.supplierId,managerId:e.managerId});n(o)},g=function(){l({initialFilters:t}),n(t)},v=u("intervals");return(0,eN.jsx)(eN.Fragment,{children:(0,eN.jsx)("form",{onSubmit:d(p),children:(0,eN.jsxs)(e2.Z,{children:[(0,eN.jsx)(nZ,{sx:{mt:1,mb:.5},control:o,name:"intervals",options:eD,variant:"standard"}),"custom"===v&&(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(e4.Z,{sx:{mt:2,width:"45%"},children:(0,eN.jsx)(nC.M,n8(n8({},m),{},{name:"startDate",placeholder:"Start Date"}))}),(0,eN.jsx)(e4.Z,{sx:{mt:2,width:"45%"},children:(0,eN.jsx)(nC.M,n8(n8({},m),{},{name:"endDate",placeholder:"End Date"}))})]}),(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(nj,n8(n8({},m),{},{name:"customerId",type:"customer",control:o,textFieldValue:!0,setTextFieldValue:!0})),(0,eN.jsx)(nj,n8(n8({},m),{},{name:"supplierId",type:"supplier",control:o}))]}),(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(nj,n8(n8({},m),{},{name:"locationId",type:"property",control:o})),(0,eN.jsx)(nj,n8(n8({},m),{},{name:"serviceId",type:"service",control:o}))]}),(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(nj,n8(n8({},m),{},{name:"slaId",type:"sla",control:o})),(0,eN.jsx)(nj,n8(n8({},m),{},{name:"managerId",type:"user",control:o}))]}),(0,eN.jsxs)(e2.Z,{mt:10,spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,eN.jsx)(ng.Z,{onClick:g,variant:"outlined",children:"Reset filters"}),(0,eN.jsx)(ng.Z,{type:"submit",variant:"contained",children:"Apply"})]})]})})})};function n7(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function te(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?n7(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n7(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var tn=(0,ej.forwardRef)(function(e,n){var r,a,i,o,s,d,c,l,u=e.removeChart,m=(0,nI.x)().user,I=te(te({},eF(eD.find(function(e){return e.default}).value)),(d=(s={accountId:m.accountId,accountType:m.accountType,customerId:null,supplierId:null,locationId:null,serviceId:null,slaId:null,managerId:null}).accountId,"admin"===s.accountType?{adminId:d}:{accountId:d})),p=(0,ej.useState)(I),g=p[0],v=p[1],$=(0,ej.useState)(!1),y=$[0],f=$[1],b=(0,eZ.a)(n9,{onCompleted:function(){f(!1)},variables:{adminId:g.adminId,customerId:null===(r=g.customerId)||void 0===r?void 0:r.value,endTime:g.endDate,locationId:null===(a=g.locationId)||void 0===a?void 0:a.value,managerId:null===(i=g.managerId)||void 0===i?void 0:i.value,serviceId:null===(o=g.serviceId)||void 0===o?void 0:o.value,slaId:g.slaId,startTime:g.startDate,supplierId:g.supplierId}}).data,x=(b=void 0===b?{averageQuoteValue:[]}:b).averageQuoteValue,h=function(e){e.reflow()};return t(18393)(ek()),x&&(0,eN.jsx)(nu,{name:"AverageQuoteValueChart",removeChart:u,title:"Average Quote Value",openModal:y,setOpenModal:f,filtersComponent:(0,eN.jsx)(n4,{filters:g,initialFilters:I,setFilters:v}),activeFiltersComponent:(0,eN.jsx)(nJ,{filters:g}),children:(0,eN.jsx)(eJ(),{callback:h,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"spline",zoomType:"x"},title:{text:null},exporting:{buttons:{contextButton:{align:"right",x:0,y:5,verticalAlign:"top",symbol:"menuball"}}},series:[{name:"AVG, \xa3",data:x.map(function(e){return{name:(0,eQ.Z)(new Date(e.date),"dd LLL yyyy"),y:e.amount}}),showInLegend:!1,color:"#1E88E5"}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Amounts(\xa3)"}}},ref:n})})}),tt=(0,eL.Ps)(u||(u=(0,eB.Z)(["\n  query GetAverageTimeToAcceptByMinute(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageTimeToAcceptByMinute: getDashboard_Average_Time_To_Accept_By_minute(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: value\n    }\n    meta: getDashboard_Average_Time_To_Accept_By_minute_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"])));function tr(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function ta(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?tr(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tr(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ti=function(e){var n=e.setFilters,t=e.initialFilters,r=e.filters,a=(0,nI.x)().user,i=(0,np.cI)({defaultValues:ta({},r)}),o=i.control,s=i.errors,d=i.handleSubmit,c=i.register,l=i.reset,u=i.watch,m={errors:s,register:c,control:o,reset:l,filters:r},I=function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}},p=function(e){var t="custom"===e.intervals?{startDate:e.startDate,endDate:e.endDate,intervals:e.intervals}:eF(e.intervals),r=a.accountId,i=a.accountType,o=ta(ta(ta({},t),I({accountId:r,accountType:i})),{customerId:e.customerId,locationId:e.locationId,serviceId:e.serviceId,slaId:e.slaId,supplierId:e.supplierId});n(o)},g=function(){l({initialFilters:t}),n(t)},v=u("intervals");return(0,eN.jsx)(eN.Fragment,{children:(0,eN.jsx)("form",{onSubmit:d(p),children:(0,eN.jsxs)(e2.Z,{children:[(0,eN.jsx)(nZ,{sx:{mt:1,mb:.5},control:o,name:"intervals",options:eD,variant:"standard"}),"custom"===v&&(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(e4.Z,{sx:{mt:2,width:"45%"},children:(0,eN.jsx)(nC.M,ta(ta({},m),{},{name:"startDate",placeholder:"Start Date"}))}),(0,eN.jsx)(e4.Z,{sx:{mt:2,width:"45%"},children:(0,eN.jsx)(nC.M,ta(ta({},m),{},{name:"endDate",placeholder:"End Date"}))})]}),(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(nj,ta(ta({},m),{},{name:"customerId",type:"customer",control:o,textFieldValue:!0,setTextFieldValue:!0})),(0,eN.jsx)(nj,ta(ta({},m),{},{name:"supplierId",type:"supplier",control:o}))]}),(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(nj,ta(ta({},m),{},{name:"locationId",type:"property",control:o})),(0,eN.jsx)(nj,ta(ta({},m),{},{name:"serviceId",type:"service",control:o}))]}),(0,eN.jsx)(e2.Z,{direction:"row",justifyContent:"space-between",children:(0,eN.jsx)(nj,ta(ta({},m),{},{name:"slaId",type:"sla",control:o}))}),(0,eN.jsxs)(e2.Z,{mt:10,spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,eN.jsx)(ng.Z,{onClick:g,variant:"outlined",style:{textTransform:"none"},children:"Reset filters"}),(0,eN.jsx)(ng.Z,{type:"submit",variant:"contained",style:{textTransform:"none"},children:"Apply"})]})]})})})};function to(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function ts(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?to(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):to(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var td=(0,ej.forwardRef)(function(e,n){var r,a,i,o,s,d,c,l,u=e.removeChart,m=(0,nI.x)().user,I=eD.find(function(e){return e.default}),p=ts(ts({},eF(I.value)),(c=(d={accountId:m.accountId,accountType:m.accountType,customerId:null,supplierId:null,locationId:null,serviceId:null,slaId:null}).accountId,"admin"===d.accountType?{adminId:c}:{accountId:c})),g=(0,ej.useState)(p),v=g[0],$=g[1],y=(0,ej.useState)(!1),f=y[0],b=y[1],x=(0,eZ.a)(tt,{onCompleted:function(){b(!1)},variables:{adminId:v.adminId,endTime:v.endDate,startTime:v.startDate,customerId:null===(r=v.customerId)||void 0===r?void 0:r.value,locationId:null===(a=v.locationId)||void 0===a?void 0:a.value,serviceId:null===(i=v.serviceId)||void 0===i?void 0:i.value,slaId:null===(o=v.slaId)||void 0===o?void 0:o.value,supplierId:null===(s=v.supplierId)||void 0===s?void 0:s.value}}).data,h=(x=void 0===x?{averageTimeToAcceptByMinute:[]}:x).averageTimeToAcceptByMinute,_=function(e){e.reflow()};return t(18393)(ek()),h&&(0,eN.jsx)(nu,{name:"AverageTimeToAcceptByMinuteChart",removeChart:u,title:"Average Time To Accept Job",openModal:f,setOpenModal:b,filtersComponent:(0,eN.jsx)(ti,{filters:v,initialFilters:p,setFilters:$,defaultInterval:I}),activeFiltersComponent:(0,eN.jsx)(nJ,{filters:v}),children:(0,eN.jsx)(eJ(),{callback:_,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"spline",zoomType:"x"},title:{text:null},exporting:{buttons:{contextButton:{align:"right",x:0,y:5,verticalAlign:"top",symbol:"menuball"}}},series:[{name:"Avg, minutes",data:h.map(function(e){return{name:(0,eQ.Z)(new Date(e.date),"dd LLL yyyy"),y:e.avg||0}}),showInLegend:!1,color:"#1E88E5"}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Minutes"}}},ref:n})})}),tc=(0,eL.Ps)(m||(m=(0,eB.Z)(["\n  query GetAverageTimeToAttendance(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageTimeToAttendance: getDashboard_Average_Time_To_Attendance(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: value\n    }\n    meta: getDashboard_Average_Time_To_Attendance_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]))),tl=(0,ej.forwardRef)(function(e,n){var r,a=e.filters,i=e.removeChart,o=(0,eZ.a)(tc,{variables:{adminId:a.adminId,customerId:a.customerId,endTime:a.endDate,isFixed:a.isFixed,isPlanned:a.isPlanned,locationId:a.locationId,managerId:a.managerId,postCodeAreaId:a.postCodeAreaId,serviceId:a.serviceId,slaId:a.slaId,startTime:a.startDate,supplierId:a.supplierId}}).data,s=(o=void 0===o?{averageTimeToAttendance:[]}:o).averageTimeToAttendance,d=function(e){e.reflow()};return t(18393)(ek()),s&&(0,eN.jsx)(eM.J,{name:"AverageTimeToAttendanceChart",removeChart:i,title:"Average Time To Attendance",children:(0,eN.jsx)(eJ(),{callback:d,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"line",zoomType:"x"},title:{text:null},series:[{data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.date),"yyyy dd MMM"),y:e.avg||0}}),name:"Attendance",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Hours"}}},ref:n})})}),tu=(0,eL.Ps)(I||(I=(0,eB.Z)(["\n  query GetAverageTimeToSubmitJobReport(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageTimeToSubmitJobReport: getDashboard_Average_Time_To_Compelete_By_Hour(\n      order_by: { date_val1_extra: asc }\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      count: value\n      date: date_val1_extra\n    }\n    meta: getDashboard_Average_Time_To_Compelete_By_Hour_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        count\n      }\n    }\n  }\n"]))),tm=(0,ej.forwardRef)(function(e,n){var r,a=e.filters,i=e.removeChart,o=(0,eZ.a)(tu,{variables:{adminId:a.adminId,customerId:a.customerId,endTime:a.endDate,managerId:a.managerId,postCodeAreaId:a.postCodeAreaId,serviceId:a.serviceId,startTime:a.startDate,supplierId:a.supplierId}}).data,s=(o=void 0===o?{averageTimeToSubmitJobReport:[]}:o).averageTimeToSubmitJobReport,d=function(e){e.reflow()};return t(18393)(ek()),s&&(0,eN.jsx)(eM.J,{name:"AverageTimeToSubmitJobReportChart",removeChart:i,title:"Average Time To Submit Job",children:(0,eN.jsx)(eJ(),{callback:d,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"line",zoomType:"x"},title:{text:null},series:[{data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.date),"dd LLL yyyy"),y:e.count}}),name:"Avg",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Hours"}}},ref:n})})}),tI=(0,eL.Ps)(p||(p=(0,eB.Z)(["\n  query GetAverageToCloseByHour(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageToCloseByHour: getDashboard_Average_To_Close_By_Hour(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: value\n    }\n    meta: getDashboard_Average_To_Close_By_Hour_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"])));function tp(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function tg(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?tp(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tp(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var tv=function(e){var n=e.setFilters,t=e.initialFilters,r=e.filters,a=(0,nI.x)().user,i=(0,np.cI)({defaultValues:tg({},r)}),o=i.control,s=i.errors,d=i.handleSubmit,c=i.register,l=i.reset,u=i.watch,m={errors:s,register:c,control:o,reset:l,filters:r},I=function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}},p=function(e){var t="custom"===e.intervals?{startDate:e.startDate,endDate:e.endDate,intervals:e.intervals}:eF(e.intervals),r=a.accountId,i=a.accountType,o=tg(tg(tg({},t),I({accountId:r,accountType:i})),{customerId:e.customerId,locationId:e.locationId,serviceId:e.serviceId,slaId:e.slaId,supplierId:e.supplierId,managerId:e.managerId});n(o)},g=function(){l({initialFilters:t}),n(t)},v=u("intervals");return(0,eN.jsx)(eN.Fragment,{children:(0,eN.jsx)("form",{onSubmit:d(p),children:(0,eN.jsxs)(e2.Z,{children:[(0,eN.jsx)(nZ,{sx:{mt:1,mb:.5},control:o,name:"intervals",options:eD,variant:"standard"}),"custom"===v&&(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(e4.Z,{sx:{mt:2,width:"45%"},children:(0,eN.jsx)(nC.M,tg(tg({},m),{},{name:"startDate",placeholder:"Start Date"}))}),(0,eN.jsx)(e4.Z,{sx:{mt:2,width:"45%"},children:(0,eN.jsx)(nC.M,tg(tg({},m),{},{name:"endDate",placeholder:"End Date"}))})]}),(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(nj,tg(tg({},m),{},{name:"customerId",type:"customer",control:o,textFieldValue:!0,setTextFieldValue:!0})),(0,eN.jsx)(nj,tg(tg({},m),{},{name:"supplierId",type:"supplier",control:o}))]}),(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(nj,tg(tg({},m),{},{name:"locationId",type:"property",control:o})),(0,eN.jsx)(nj,tg(tg({},m),{},{name:"serviceId",type:"service",control:o}))]}),(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(nj,tg(tg({},m),{},{name:"slaId",type:"sla",control:o})),(0,eN.jsx)(nj,tg(tg({},m),{},{name:"managerId",type:"user",control:o}))]}),(0,eN.jsxs)(e2.Z,{mt:10,spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,eN.jsx)(ng.Z,{onClick:g,variant:"outlined",style:{textTransform:"none"},children:"Reset filters"}),(0,eN.jsx)(ng.Z,{type:"submit",variant:"contained",style:{textTransform:"none"},children:"Apply"})]})]})})})};function t$(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function ty(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?t$(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):t$(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var tf=(0,ej.forwardRef)(function(e,n){var r,a,i,o,s,d,c,l,u=e.removeChart,m=(0,nI.x)().user,I=ty(ty({},eF(eD.find(function(e){return e.default}).value)),(d=(s={accountId:m.accountId,accountType:m.accountType,customerId:null,supplierId:null,locationId:null,serviceId:null,slaId:null,managerId:null}).accountId,"admin"===s.accountType?{adminId:d}:{accountId:d})),p=(0,ej.useState)(I),g=p[0],v=p[1],$=(0,ej.useState)(!1),y=$[0],f=$[1],b=(0,eZ.a)(tI,{onCompleted:function(){f(!1)},variables:{adminId:g.adminId,customerId:null===(r=g.customerId)||void 0===r?void 0:r.value,endTime:g.endDate,locationId:null===(a=g.locationId)||void 0===a?void 0:a.value,managerId:null===(i=g.managerId)||void 0===i?void 0:i.value,serviceId:null===(o=g.serviceId)||void 0===o?void 0:o.value,slaId:g.slaId,startTime:g.startDate,supplierId:g.supplierId}}).data,x=(b=void 0===b?{averageToCloseByHour:[]}:b).averageToCloseByHour,h=function(e){e.reflow()};return t(18393)(ek()),x&&(0,eN.jsx)(nu,{name:"AverageToCloseByHourChart",removeChart:u,title:"Average Time To Close Job",openModal:y,setOpenModal:f,filtersComponent:(0,eN.jsx)(tv,{filters:g,initialFilters:I,setFilters:v}),activeFiltersComponent:(0,eN.jsx)(nJ,{filters:g}),children:(0,eN.jsx)(eJ(),{callback:h,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"spline",zoomType:"x"},title:{text:null},exporting:{buttons:{contextButton:{align:"right",x:0,y:5,verticalAlign:"top",symbol:"menuball"}}},series:[{data:x.map(function(e){return{name:(0,eQ.Z)(new Date(e.date),"dd LLL yyyy"),y:e.avg||0}}),name:"AVG, days",showInLegend:!1,color:"#1E88E5"}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Days"}}},ref:n})})}),tb=(0,eL.Ps)(g||(g=(0,eB.Z)(["\n  query GetCountByActiveAccount(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    countByActiveAccount: getDashboard_Count_By_Active_Account(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      count: count\n      date: date_val1_extra\n    }\n    meta: getDashboard_Count_By_Active_Account_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        count\n      }\n    }\n  }\n"]))),tx=(0,ej.forwardRef)(function(e,n){var r,a=e.filters,i=e.removeChart,o=(0,eZ.a)(tb,{variables:{adminId:a.adminId,customerId:a.customerId,endTime:a.endDate,postCodeAreaId:a.postCodeAreaId,serviceId:a.serviceId,startTime:a.startDate,supplierId:a.supplierId}}).data,s=(o=void 0===o?{countByActiveAccount:[]}:o).countByActiveAccount,d=function(e){e.reflow()};return t(18393)(ek()),s&&(0,eN.jsx)(eM.J,{name:"CountByActiveAccountChart",removeChart:i,title:"Count By Active Account",children:(0,eN.jsx)(eJ(),{callback:d,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"line",zoomType:"x"},title:{text:null},series:[{data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.date),"dd LLL yyyy"),y:e.count}}),name:"Active account",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Counts"}}},ref:n})})}),th=(0,eL.Ps)(v||(v=(0,eB.Z)(["\n  query GetCountJobsEngagementRate(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    CountJobsEngagementRate: getDashboard_Count_Jobs_Engagement_Rate(\n      order_by: { date_val1_extra: asc }\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      count: count\n      date: date_val1_extra\n    }\n    meta: getDashboard_Count_Jobs_Engagement_Rate_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        count\n      }\n    }\n  }\n"]))),t_=(0,ej.forwardRef)(function(e,n){var r,a=e.filters,i=e.removeChart,o=(0,eZ.a)(th,{variables:{adminId:a.adminId,customerId:a.customerId,endTime:a.endDate,managerId:a.managerId,postCodeAreaId:a.postCodeAreaId,serviceId:a.serviceId,startTime:a.startDate,supplierId:a.supplierId}}).data,s=(o=void 0===o?{CountJobsEngagementRate:[]}:o).CountJobsEngagementRate,d=function(e){e.reflow()};return t(18393)(ek()),s&&(0,eN.jsx)(eM.J,{name:"CountJobsEngagementRateChart",removeChart:i,title:"Engagement Rate",children:(0,eN.jsx)(eJ(),{callback:d,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"line",zoomType:"x"},title:{text:null},series:[{data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.date),"dd LLL yyyy"),y:e.count}}),name:"Count",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Counts"}}},ref:n})})}),tT=(0,eL.Ps)($||($=(0,eB.Z)(["\n  query GetCountOpenJobByDate(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    countOpenJobsByDate: getDashboard_Count_Open_Jobs_By_Date(\n      order_by: { date_val1_extra: desc }\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      count: count\n      date: date_val1_extra\n    }\n    meta: getDashboard_Count_Open_Jobs_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        count: count\n      }\n    }\n  }\n"]))),tj=(0,ej.forwardRef)(function(e,n){var r,a=e.filters,i=e.removeChart,o=(0,eZ.a)(tT,{variables:{adminId:a.adminId,customerId:a.customerId,endTime:a.endDate,isFixed:a.isFixed,isPlanned:a.isPlanned,locationId:a.locationId,managerId:a.managerId,postCodeAreaId:a.postCodeAreaId,serviceId:a.serviceId,slaId:a.slaId,startTime:a.startDate,supplierId:a.supplierId}}).data,s=(o=void 0===o?{countOpenJobsByDate:[]}:o).countOpenJobsByDate,d=function(e){e.reflow()};return t(18393)(ek()),s&&(0,eN.jsx)(eM.J,{name:"CountOpenJobsByDateChart",removeChart:i,title:"Number Of Open Jobs",children:(0,eN.jsx)(eJ(),{callback:d,constructorType:"chart",Highcharts:ek(),options:{chart:{zoomType:"x"},title:{text:null},series:[{data:s.map(function(e){return{type:"line",name:(0,eQ.Z)(new Date(e.date),"dd LLL yyyy"),y:e.count}}),name:"Count",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Counts"}}},ref:n})})}),tC=(0,eL.Ps)(y||(y=(0,eB.Z)(["\n  query getDashboard_Financial_By_Month(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    financebymonth: getDashboard_Financial_By_Month(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { name: asc }\n    ) {\n      month: name\n      ppm_supplier\n      ppm_revenue\n      ppm_customer\n      reactive_customer\n      reactive_revenue\n      reactive_supplier\n    }\n  }\n"]))),tP=(0,ej.forwardRef)(function(e,n){var r,a=e.filters,i=e.removeChart,o=(0,eZ.a)(tC,{variables:{adminId:a.adminId,customerId:a.customerId,endTime:a.endDate,isFixed:a.isFixed,isPlanned:a.isPlanned,locationId:a.locationId,managerId:a.managerId,postCodeAreaId:a.postCodeAreaId,serviceId:a.serviceId,slaId:a.slaId,startTime:a.startDate,supplierId:a.supplierId}}).data,s=(o=void 0===o?{financebymonth:[]}:o).financebymonth,d=function(e){e.reflow()};return t(18393)(ek()),s&&(0,eN.jsx)(eM.J,{name:"CustomerAndSupplierAmounts",removeChart:i,title:"Customer \\ Supplier Amounts By Month",children:(0,eN.jsx)(eJ(),{callback:d,constructorType:"chart",Highcharts:ek(),options:{title:{text:null},xAxis:{type:"category"},yAxis:{title:{text:"Amounts(\xa3)"}},tooltip:{formatter:function(){return"<b>"+this.x+"</b><br/>"+this.series.name+": "+this.y+"<br/>Total: "+this.point.stackTotal}},plotOptions:{column:{stacking:"normal"}},series:[{type:"column",name:"Customer Amount",data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.month),"LLL yyyy"),y:e.ppm_customer,stack:"customer"}}),showInLegend:!1},{type:"column",name:"Customer Amount",data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.month),"LLL yyyy"),y:e.reactive_customer,stack:"customer"}}),showInLegend:!1},{type:"column",name:"PPM Supplier Amount",data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.month),"LLL yyyy"),y:e.ppm_supplier,stack:"supplier"}}),showInLegend:!1},{type:"column",name:"Supplier Amount",data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.month),"LLL yyyy"),y:e.reactive_supplier,stack:"supplier"}}),showInLegend:!1},{type:"spline",marker:{radius:4,lineWidth:1,symbol:"square"},name:"Revenue Amount",data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.month),"LLL yyyy"),y:e.reactive_revenue}}),showInLegend:!1},{type:"spline",marker:{radius:4,lineWidth:1,symbol:"diamond"},name:"Revenue Amount",data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.month),"LLL yyyy"),y:e.ppm_revenue}}),showInLegend:!1}]},ref:n})})}),tA=t(16835),tO=t(73359),tw=(0,eL.Ps)(f||(f=(0,eB.Z)(["\n  query CustomerDebt(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_finance_debt_order_by!]\n    $outstanding_levels: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    customers: getDashboard_Financial_Debt_By_Customer(\n      limit: $limit\n      offset: $offset\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        outstanding_levels: $outstanding_levels\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: $orderBy\n    ) {\n      customer: Account {\n        id\n        name\n      }\n      total_invoice_count\n      total_invoice_amount\n      outstanding_invoice_count\n      outstanding_invoice_amount\n      outstanding_0_30\n      outstanding_31_60\n      outstanding_61_90\n      outstanding_91_x\n    }\n    meta: getDashboard_Financial_Debt_By_Customer_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        outstanding_levels: $outstanding_levels\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          total_invoice_count\n          total_invoice_amount\n          outstanding_invoice_count\n          outstanding_invoice_amount\n          outstanding_0_30\n          outstanding_31_60\n          outstanding_61_90\n          outstanding_91_x\n        }\n        totalCount: count\n      }\n    }\n  }\n"]))),tD=t(57460),tS=t.n(tD),tF=t(87043),tZ=t(26186),tB=t(11082),tL=t(16551),tq=t(67872),tR=t(42846),tk=function(e,n,t){return e&&n?"".concat(t?(0,tB.Z)(e):e||0," (").concat(Math.round(e/n*100),"%)"):"".concat(t?(0,tB.Z)(e):e||0)},tz=t(48829);function tJ(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function tM(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?tJ(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tJ(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var tN={item:"outstanding_invoice_amount",order:"desc"},tE=(0,ej.forwardRef)(function(e,n){var t,r,a,i=e.filters,o=e.removeChart,s=(0,tR.x)({filters:i,initialSort:tN}),d=s.initialData,c=s.ref,l=(0,ej.useState)(),u=l[0],m=l[1],I=(0,eZ.a)(tw,{variables:tM(tM({},d),{},{outstanding_levels:u})}),p=I.data,g=(p=void 0===p?{customers:[],meta:{aggregate:{}}}:p).customers,v=p.meta,$=I.loading,y=I.refetch,f=(0,tO.t)(tw,{variables:{limit:tF.C1.paginationSize,offset:((null===(t=c.current)||void 0===t?void 0:t.currentPage)-1||0)*tF.C1.paginationSize,orderBy:(0,eh.Z)({},null===(r=c.current)||void 0===r?void 0:r.sort.item,null===(a=c.current)||void 0===a?void 0:a.sort.order),outstanding_levels:u},onCompleted:function(e){var n,t=tS().unparse((n=e.customers).map(function(e){return{name:e.customer.name,totalInvoiceCount:e.total_invoice_count,outstanding_invoice_count:tk(e.outstanding_invoice_count,e.total_invoice_count),outstanding_0_30:tk(e.outstanding_0_30,e.outstanding_invoice_count),outstanding_31_60:tk(e.outstanding_31_60,e.outstanding_invoice_count),outstanding_61_90:tk(e.outstanding_61_90,e.outstanding_invoice_count),outstanding_91_x:tk(e.outstanding_91_x,e.outstanding_invoice_count),totalInvoiceAmount:(0,tB.Z)(e.total_invoice_amount),outstanding_invoice_amount:tk(e.outstanding_invoice_amount,e.total_invoice_amount,!0)}})),r="data:application/octet-stream,"+encodeURIComponent(t);(0,tz.S)(r,"customer-debt.csv")}}),b=(0,tA.Z)(f,1)[0],x=function(e){var n=e.accountId,t=e.level,r=e.number,a="/dashboard/customers/view?id=".concat(n),o="&endDate=".concat((0,tZ.Z)(i.endDate)),s="&startDate=".concat((0,tZ.Z)(i.startDate));return(0,eN.jsx)(el.Z,{to:"".concat(a,"&tab=finance&outstandingLevel=").concat(t).concat(s).concat(o),children:r})},h=function(e){m(e)};return(0,eN.jsxs)(eM.J,{isTable:!0,name:"CustomerDebtTable",removeChart:o,title:"Customer Debt",children:[(0,eN.jsx)(eo.Z,{children:(0,eN.jsx)(es.Z,{md:1,children:(0,eN.jsx)(eO.Z,{content:"Export to CSV",context:"secondary",onClick:b,title:"Export to CSV",size:"sm"})})}),v.aggregate.sum&&(0,eN.jsxs)(tL.Z,{align:"flex-end",children:[(0,eN.jsx)(eO.Z,{content:(0,eN.jsxs)(eN.Fragment,{children:["Invoice Count: ",(0,eN.jsx)("b",{children:v.aggregate.sum.total_invoice_count})]}),context:"secondary",onClick:function(e){return h(null)},outline:!0,size:"sm"}),(0,eN.jsx)(eO.Z,{content:(0,eN.jsxs)(eN.Fragment,{children:["Outstanding Invoices:",(0,eN.jsx)("b",{children:tk(v.aggregate.sum.outstanding_invoice_count,v.aggregate.sum.total_invoice_count)})]}),context:"secondary",outline:!0,size:"sm"}),(0,eN.jsx)(eO.Z,{content:(0,eN.jsxs)(eN.Fragment,{children:["Outstanding 1-30:",(0,eN.jsx)("b",{children:tk(v.aggregate.sum.outstanding_0_30,v.aggregate.sum.outstanding_invoice_count)})]}),context:1===u?"success":"secondary",onClick:function(e){return h(1)},outline:!0,size:"sm"}),(0,eN.jsx)(eO.Z,{content:(0,eN.jsxs)(eN.Fragment,{children:["Outstanding 31-60:",(0,eN.jsx)("b",{children:tk(v.aggregate.sum.outstanding_31_60,v.aggregate.sum.outstanding_invoice_count)})]}),context:31===u?"success":"secondary",onClick:function(e){return h(31)},outline:!0,size:"sm"}),(0,eN.jsx)(eO.Z,{content:(0,eN.jsxs)(eN.Fragment,{children:["Outstanding 61-90:",(0,eN.jsx)("b",{children:tk(v.aggregate.sum.outstanding_61_90,v.aggregate.sum.outstanding_invoice_count)})]}),context:61===u?"success":"secondary",onClick:function(e){return h(61)},outline:!0,size:"sm"}),(0,eN.jsx)(eO.Z,{content:(0,eN.jsxs)(eN.Fragment,{children:["Outstanding > 90:",(0,eN.jsx)("b",{children:tk(v.aggregate.sum.outstanding_91_x,v.aggregate.sum.outstanding_invoice_count)})]}),context:91===u?"success":"secondary",onClick:function(e){return h(91)},outline:!0,size:"sm"}),(0,eN.jsx)(eO.Z,{content:(0,eN.jsxs)(eN.Fragment,{children:["Total Invoice Amount: ",(0,eN.jsx)("b",{children:(0,tB.Z)(v.aggregate.sum.total_invoice_amount)})]}),context:"secondary",outline:!0,size:"sm"}),(0,eN.jsx)(eO.Z,{content:(0,eN.jsxs)(eN.Fragment,{children:["Outstanding Amount:",(0,eN.jsx)("b",{children:tk(v.aggregate.sum.outstanding_invoice_amount,v.aggregate.sum.total_invoice_amount,!0)})]}),context:"secondary",outline:!0,size:"sm"})]}),(0,eN.jsx)(tq.t,{columns:[{hidden:!0},{formatter:function(e){var n;return n=e.row,(0,eN.jsx)(el.Z,{to:"/dashboard/customers/view?id=".concat(n.accountId,"&tab=finance"),children:n.name})},text:"Customer"},{sortable:!0,sortName:"total_invoice_count",text:"Invoice Count"},{formatter:function(e){var n=e.row;return x({accountId:n.accountId,level:0,number:n.outstanding_invoice_count})},sortable:!0,sortName:"outstanding_invoice_count",text:"Outstanding Invoices"},{formatter:function(e){var n=e.row;return x({accountId:n.accountId,level:1,number:n.outstanding_0_30})},sortable:!0,sortName:"outstanding_0_30",text:"Outstanding 1-30"},{formatter:function(e){var n=e.row;return x({accountId:n.accountId,level:31,number:n.outstanding_31_60})},sortable:!0,sortName:"outstanding_31_60",text:"Outstanding 31-60"},{formatter:function(e){var n=e.row;return x({accountId:n.accountId,level:61,number:n.outstanding_61_90})},sortable:!0,sortName:"outstanding_61_90",text:"Outstanding 61-90"},{formatter:function(e){var n=e.row;return x({accountId:n.accountId,level:91,number:n.outstanding_91_x})},sortable:!0,sortName:"outstanding_91_x",text:"Outstanding > 90"},{sortable:!0,sortName:"total_invoice_amount",text:"Total Invoice Amount"},{formatter:function(e){var n=e.row;return x({accountId:n.accountId,level:0,number:n.outstanding_invoice_amount})},sortable:!0,sortName:"outstanding_invoice_amount",text:"Outstanding Amount"}],history:!1,initialSort:tN,loading:$,meta:v,ref:c,refetch:y,rows:g.map(function(e){return{accountId:e.customer.id,name:e.customer.name,totalInvoiceCount:e.total_invoice_count,outstanding_invoice_count:tk(e.outstanding_invoice_count,e.total_invoice_count),outstanding_0_30:tk(e.outstanding_0_30,e.outstanding_invoice_count),outstanding_31_60:tk(e.outstanding_31_60,e.outstanding_invoice_count),outstanding_61_90:tk(e.outstanding_61_90,e.outstanding_invoice_count),outstanding_91_x:tk(e.outstanding_91_x,e.outstanding_invoice_count),totalInvoiceAmount:(0,tB.Z)(e.total_invoice_amount),outstanding_invoice_amount:tk(e.outstanding_invoice_amount,e.total_invoice_amount,!0)}})})]})}),tH=(0,eL.Ps)(b||(b=(0,eB.Z)(["\n  query GetDisputeRateByMonth(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    disputeByMonth: getDashboard_DisputeRate_By_Month(\n      order_by: { strval_extra: asc, count: desc }\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      month: strval_extra\n      disputeRate: count\n    }\n    meta: getDashboard_DisputeRate_By_Month_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          disputeRate: count\n        }\n      }\n    }\n  }\n"]))),tG=(0,ej.forwardRef)(function(e,n){var r,a,i=e.filters,o=e.removeChart,s=(0,eZ.a)(tH,{variables:{adminId:i.adminId,customerId:i.customerId,endTime:i.endDate,isFixed:i.isFixed,isPlanned:i.isPlanned,locationId:i.locationId,managerId:i.managerId,postCodeAreaId:i.postCodeAreaId,serviceId:i.serviceId,slaId:i.slaId,startTime:i.startDate,supplierId:i.supplierId}}).data,d=(s=void 0===s?{disputeByMonth:[],meta:{}}:s).disputeByMonth,c=s.meta,l=function(e){e.reflow()};return t(18393)(ek()),d&&(0,eN.jsx)(eM.J,{name:"DisputeRateChart",removeChart:o,title:"Average Dispute Rate By Month (".concat(Number(null===(r=c.aggregate)||void 0===r?void 0:r.avg.disputeRate).toFixed(2),")"),children:(0,eN.jsx)(eJ(),{callback:l,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"column"},title:{text:null},series:[{data:d.map(function(e){return{name:na()(e.month,"YYYY-M").format("MMM YYYY"),y:e.disputeRate||0}}),showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:null}},ref:n})})}),tW=(0,eL.Ps)(x||(x=(0,eB.Z)(["\n  query GetJobsByDay(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    jobsByDay: getDashboard_Count_By_Date(\n      order_by: { date_val1_extra: asc }\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      count: count\n      jobDate: date_val1_extra\n    }\n    meta: getDashboard_Count_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        count\n      }\n    }\n  }\n"]))),tQ=(0,ej.forwardRef)(function(e,n){var r,a=e.filters,i=(0,eZ.a)(tW,{variables:{adminId:a.adminId,customerId:a.customerId,endTime:a.endDate,isFixed:a.isFixed,isPlanned:a.isPlanned,locationId:a.locationId,managerId:a.managerId,postCodeAreaId:a.postCodeAreaId,serviceId:a.serviceId,slaId:a.slaId,startTime:a.startDate,supplierId:a.supplierId}}).data,o=(i=void 0===i?{jobsByDay:[]}:i).jobsByDay,s=function(e){e.reflow()};return t(18393)(ek()),o&&(0,eN.jsx)(eM.J,{title:"Total bookings by Day",children:(0,eN.jsx)(eJ(),{callback:s,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"line",zoomType:"x"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:{text:"Counts"}},series:[{name:"count",data:o.map(function(e){return{name:(0,eQ.Z)(new Date(e.jobDate),"dd LLL yyyy"),y:e.count}}),showInLegend:!1}]},ref:n})})}),tV=t(16726),tY=(0,eL.Ps)(h||(h=(0,eB.Z)(["\n  query GetJobsByService(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    jobsByService: getDashboard_Service(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { count: desc }\n    ) {\n      servicename: name\n      count: count\n      serviceid: id\n    }\n    meta: getDashboard_Service_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          count: count\n        }\n      }\n    }\n  }\n"]))),tU=(0,ej.forwardRef)(function(e,n){var r,a,i=e.filters,o=e.removeChart,s=(0,eZ.a)(tY,{variables:{adminId:i.adminId,customerId:i.customerId,endTime:i.endDate,isFixed:i.isFixed,isPlanned:i.isPlanned,locationId:i.locationId,managerId:i.managerId,postCodeAreaId:i.postCodeAreaId,serviceId:i.serviceId,slaId:i.slaId,startTime:i.startDate,supplierId:i.supplierId}}).data,d=(s=void 0===s?{meta:{},jobsByService:[]}:s).meta,c=s.jobsByService,l=function(e){e.reflow()};return t(18393)(ek()),(0,eN.jsx)(eM.J,{name:"JobsByService",removeChart:o,title:"Total bookings by Service (".concat(null===(r=d.aggregate)||void 0===r?void 0:r.sum.count,")"),children:(0,eN.jsx)(eJ(),{callback:l,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"pie"},title:{text:null},series:[{data:c.map(function(e){return{name:e.servicename,y:e.count}}),showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:null}},ref:n})})}),tX=(0,eL.Ps)(_||(_=(0,eB.Z)(["\n  query GetDashboard_SlA(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    jobsla: getDashboard_SLA(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { name: asc }\n    ) {\n      count\n      sla_name: name\n    }\n  }\n"]))),tK=(0,ej.forwardRef)(function(e,n){var r,a=e.filters,i=e.removeChart,o=(0,eZ.a)(tX,{variables:{adminId:a.adminId,customerId:a.customerId,endTime:a.endDate,isFixed:a.isFixed,isPlanned:a.isPlanned,locationId:a.locationId,managerId:a.managerId,postCodeAreaId:a.postCodeAreaId,serviceId:a.serviceId,slaId:a.slaId,startTime:a.startDate,supplierId:a.supplierId}}).data,s=(o=void 0===o?{jobsla:[]}:o).jobsla,d=function(e){e.reflow()};return t(18393)(ek()),s&&(0,eN.jsx)(eM.J,{name:"jobsBySLA",removeChart:i,title:"Bookings By SLAs",children:(0,eN.jsx)(eJ(),{callback:d,constructorType:"chart",Highcharts:ek(),options:{chart:{plotBackgroundColor:null,plotBorderWidth:0,plotShadow:!1},title:{text:"SLAs",align:"center",verticalAlign:"middle",y:60},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},accessibility:{point:{valueSuffix:"%"}},plotOptions:{pie:{dataLabels:{enabled:!0,distance:-50,style:{fontWeight:"bold",color:"white"}},startAngle:-90,endAngle:90,center:["50%","75%"],size:"110%"}},series:[{type:"pie",name:"SLA",innerSize:"50%",data:s.map(function(e){return{name:e.sla_name,y:e.count}}),showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:null}},ref:n})})}),t0=t(52076),t1=(0,eL.Ps)(T||(T=(0,eB.Z)(["\n  query GetJobsFinancialByDay(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    jobsFinancialByDay: getDashboard_Financial_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      customerAmount: reactive_customer\n      supplierAmount: reactive_supplier\n      jobDate: date_val1_extra\n      jobRevenue: reactive_revenue\n    }\n    meta: getDashboard_Financial_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          sumJobRevenue: reactive_revenue\n        }\n      }\n    }\n  }\n"]))),t3=(0,ej.forwardRef)(function(e,n){var r,a=e.filters,i=e.removeChart,o=(0,eZ.a)(t1,{variables:{adminId:a.adminId,customerId:a.customerId,endTime:a.endDate,isFixed:a.isFixed,isPlanned:a.isPlanned,locationId:a.locationId,managerId:a.managerId,postCodeAreaId:a.postCodeAreaId,serviceId:a.serviceId,slaId:a.slaId,startTime:a.startDate,supplierId:a.supplierId}}).data,s=(o=void 0===o?{jobsFinancialByDay:[]}:o).jobsFinancialByDay,d=function(e){e.reflow()};return t(18393)(ek()),s&&(0,eN.jsx)(eM.J,{name:"JobsFinancialByDayLineChart",removeChart:i,title:"Total Revenue by Day",children:(0,eN.jsx)(eJ(),{callback:d,constructorType:"chart",Highcharts:ek(),options:{chart:{zoomType:"x"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:{text:"Amounts(\xa3)"}},series:[{type:"column",name:"Job Amount",data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.jobDate),"dd LLL yyyy"),y:e.customerAmount}}),showInLegend:!1},{type:"column",name:"Revenu",data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.jobDate),"dd LLL yyyy"),y:e.jobRevenue}}),showInLegend:!1}]},ref:n})})}),t2=(0,eL.Ps)(j||(j=(0,eB.Z)(["\n  query GetSLAJobsByMonth(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    jobSLAByMonth: getDashboard_SLA_By_Month(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { strval_extra: desc }\n    ) {\n      slaname: name\n      count\n      month: strval_extra\n      p1: value\n      p5: intval_extra\n      p2: reactive_customer\n      P3: ppm_customer\n      P4: reactive_supplier\n    }\n  }\n"]))),t6=(0,ej.forwardRef)(function(e,n){var r,a=e.filters,i=e.removeChart,o=(0,eZ.a)(t2,{variables:{adminId:a.adminId,customerId:a.customerId,endTime:a.endDate,isFixed:a.isFixed,isPlanned:a.isPlanned,locationId:a.locationId,managerId:a.managerId,postCodeAreaId:a.postCodeAreaId,serviceId:a.serviceId,slaId:a.slaId,startTime:a.startDate,supplierId:a.supplierId}}).data,s=(o=void 0===o?{jobSLAByMonth:[]}:o).jobSLAByMonth,d=function(e){e.reflow()};return t(18393)(ek()),s&&(0,eN.jsx)(eM.J,{name:"JobSLAByMonth",removeChart:i,title:"Monthly SLAs ",children:(0,eN.jsx)(eJ(),{callback:d,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"spline"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:null},tooltip:{headerFormat:"<b>{series.slaname}</b><br>",pointFormat:"{series.count}"},plotOptions:{series:{marker:{enabled:!0}}},series:[{name:"P1",data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.month),"LLL yyyy"),y:e.P1}})},{name:"P2",data:s.map(function(e){return{nam:(0,eQ.Z)(new Date(e.month),"LLL yyyy"),name:e.month,y:e.P2}})},{name:"P3",data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.month),"LLL yyyy"),y:e.P3}})},{name:"P4",data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.month),"LLL yyyy"),y:e.P4}})},{name:"P5",data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.month),"LLL yyyy"),y:e.P5}})}]},ref:n})})}),t9=(0,eL.Ps)(C||(C=(0,eB.Z)(["\n  query GetNewCustomerAccounts(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    newCustomerAccounts: getDashboard_Count_New_Customer_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: desc }\n    ) {\n      date: date_val1_extra\n      count\n    }\n    meta: getDashboard_Count_New_Customer_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]))),t5=(0,ej.forwardRef)(function(e,n){var r,a=e.filters,i=e.removeChart,o=(0,eZ.a)(t9,{variables:{adminId:a.adminId,customerId:a.customerId,endTime:a.endDate,isFixed:a.isFixed,isPlanned:a.isPlanned,locationId:a.locationId,managerId:a.managerId,postCodeAreaId:a.postCodeAreaId,serviceId:a.serviceId,slaId:a.slaId,startTime:a.startDate,supplierId:a.supplierId}}).data,s=(o=void 0===o?{newCustomerAccounts:[]}:o).newCustomerAccounts,d=function(e){e.reflow()};return t(18393)(ek()),s&&(0,eN.jsx)(eM.J,{name:"NewCustomerAccountsChart",removeChart:i,title:"New Customer Accounts",children:(0,eN.jsx)(eJ(),{callback:d,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"column",zoomType:"x"},title:{text:null},series:[{data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.date),"yyyy dd MMM"),y:e.count||0}}),name:"Active Customer",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Counts"}}},ref:n})})}),t8=(0,eL.Ps)(P||(P=(0,eB.Z)(["\n  query GetAverageProfit(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    quoteAcceptanceRate: getDashboard_Quote_Acceptance_Rate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      count: value\n      date: date_val1_extra\n    }\n    meta: getDashboard_Quote_Acceptance_Rate_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"])));function t4(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function t7(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?t4(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):t4(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var re=function(e){var n=e.setFilters,t=e.initialFilters,r=e.filters,a=(0,nI.x)().user,i=(0,np.cI)({defaultValues:t7({},r)}),o=i.control,s=i.errors,d=i.handleSubmit,c=i.register,l=i.reset,u=i.watch,m={errors:s,register:c,control:o,reset:l,filters:r},I=function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}},p=function(e){var t="custom"===e.intervals?{startDate:e.startDate,endDate:e.endDate,intervals:e.intervals}:eF(e.intervals),r=a.accountId,i=a.accountType,o=t7(t7(t7({},t),I({accountId:r,accountType:i})),{customerId:e.customerId,locationId:e.locationId,serviceId:e.serviceId,slaId:e.slaId,supplierId:e.supplierId,managerId:e.managerId});n(o)},g=function(){l({initialFilters:t}),n(t)},v=u("intervals");return(0,eN.jsx)(eN.Fragment,{children:(0,eN.jsx)("form",{onSubmit:d(p),children:(0,eN.jsxs)(e2.Z,{children:[(0,eN.jsx)(nZ,{sx:{mt:1,mb:.5},control:o,name:"intervals",options:eD,variant:"standard"}),"custom"===v&&(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(e4.Z,{sx:{mt:2,width:"45%"},children:(0,eN.jsx)(nC.M,t7(t7({},m),{},{name:"startDate",placeholder:"Start Date"}))}),(0,eN.jsx)(e4.Z,{sx:{mt:2,width:"45%"},children:(0,eN.jsx)(nC.M,t7(t7({},m),{},{name:"endDate",placeholder:"End Date"}))})]}),(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(nj,t7(t7({},m),{},{name:"customerId",type:"customer",control:o,textFieldValue:!0,setTextFieldValue:!0})),(0,eN.jsx)(nj,t7(t7({},m),{},{name:"supplierId",type:"supplier",control:o}))]}),(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(nj,t7(t7({},m),{},{name:"locationId",type:"property",control:o})),(0,eN.jsx)(nj,t7(t7({},m),{},{name:"serviceId",type:"service",control:o}))]}),(0,eN.jsx)(e2.Z,{direction:"row",justifyContent:"space-between",children:(0,eN.jsx)(nj,t7(t7({},m),{},{name:"managerId",type:"user",control:o}))}),(0,eN.jsxs)(e2.Z,{mt:10,spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,eN.jsx)(ng.Z,{onClick:g,variant:"outlined",style:{textTransform:"none"},children:"Reset filters"}),(0,eN.jsx)(ng.Z,{type:"submit",variant:"contained",style:{textTransform:"none"},children:"Apply"})]})]})})})};function rn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function rt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?rn(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rn(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var rr=(0,ej.forwardRef)(function(e,n){var r,a,i,o,s,d,c,l,u,m=e.removeChart,I=(0,nI.x)().user,p=rt(rt({},eF(eD.find(function(e){return e.default}).value)),(c=(d={accountId:I.accountId,accountType:I.accountType,customerId:null,supplierId:null,locationId:null,serviceId:null,slaId:null,managerId:null}).accountId,"admin"===d.accountType?{adminId:c}:{accountId:c})),g=(0,ej.useState)(p),v=g[0],$=g[1],y=(0,ej.useState)(!1),f=y[0],b=y[1],x=(0,eZ.a)(t8,{onCompleted:function(){b(!1)},variables:{adminId:v.adminId,customerId:null===(r=v.customerId)||void 0===r?void 0:r.value,endTime:v.endDate,locationId:null===(a=v.locationId)||void 0===a?void 0:a.value,managerId:null===(i=v.managerId)||void 0===i?void 0:i.value,serviceId:null===(o=v.serviceId)||void 0===o?void 0:o.value,startTime:v.startDate,supplierId:null===(s=v.supplierId)||void 0===s?void 0:s.value}}).data,h=(x=void 0===x?{quoteAcceptanceRate:[]}:x).quoteAcceptanceRate,_=function(e){e.reflow()};return t(18393)(ek()),h&&(0,eN.jsx)(nu,{name:"QuoteAcceptanceRateChart",removeChart:m,title:"Quote Acceptance Rate",openModal:f,setOpenModal:b,filtersComponent:(0,eN.jsx)(re,{filters:v,initialFilters:p,setFilters:$}),activeFiltersComponent:(0,eN.jsx)(nJ,{filters:v}),children:(0,eN.jsx)(eJ(),{callback:_,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"spline",zoomType:"x"},title:{text:null},exporting:{buttons:{contextButton:{align:"right",x:0,y:5,verticalAlign:"top",symbol:"menuball"}}},series:[{data:h.map(function(e){return{name:(0,eQ.Z)(new Date(e.date),"dd LLL yyyy"),y:e.count||0}}),name:"%",showInLegend:!1,color:"#1E88E5"}],xAxis:{type:"category",title:null},yAxis:{title:{text:"%"}}},ref:n})})}),ra=(0,eL.Ps)(A||(A=(0,eB.Z)(["\n  query GetNewCustomerAccounts(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    newSupplierAccounts: getDashboard_Count_New_Supplier_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: desc }\n    ) {\n      date: date_val1_extra\n      count\n    }\n    meta: getDashboard_Count_New_Supplier_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]))),ri=(0,ej.forwardRef)(function(e,n){var r,a=e.filters,i=e.removeChart,o=(0,eZ.a)(ra,{variables:{adminId:a.adminId,customerId:a.customerId,endTime:a.endDate,isFixed:a.isFixed,isPlanned:a.isPlanned,locationId:a.locationId,managerId:a.managerId,postCodeAreaId:a.postCodeAreaId,serviceId:a.serviceId,slaId:a.slaId,startTime:a.startDate,supplierId:a.supplierId}}).data,s=(o=void 0===o?{newSupplierAccounts:[]}:o).newSupplierAccounts,d=function(e){e.reflow()};return t(18393)(ek()),s&&(0,eN.jsx)(eM.J,{name:"NewSupplierAccountsChart",removeChart:i,title:"New Supplier Accounts",children:(0,eN.jsx)(eJ(),{callback:d,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"column",zoomType:"x"},title:{text:null},series:[{data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.date),"yyyy dd MMM"),y:e.count||0}}),name:"Active Supplier",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Counts"}}},ref:n})})}),ro=(0,eL.Ps)(O||(O=(0,eB.Z)(["\n  query GetPercentageOfSpendByServiceLine(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    percentageOfSpendByServiceLine: getDashboard_Count_All_Job_by_Service(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      serviceName: strval_extra\n      currentAmount: reactive_customer\n      lastAmount: ppm_customer\n    }\n    meta: getDashboard_Count_All_Job_by_Service_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"])));function rs(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function rd(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?rs(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rs(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var rc={item:"reactive_customer",order:"desc"},rl=(0,ej.forwardRef)(function(e,n){var t=e.filters,r=e.removeChart,a=(0,tR.x)({filters:t,initialSort:rc}),i=a.initialData,o=a.ref,s=(0,eZ.a)(ro,{variables:rd(rd({},i),{},{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),d=s.data,c=(d=void 0===d?{percentageOfSpendByServiceLine:[],meta:{aggregate:{}}}:d).percentageOfSpendByServiceLine,l=d.meta,u=s.loading,m=s.refetch;return(0,eN.jsx)(eM.J,{isTable:!0,name:"PercentageOfSpendByServiceLineTable",removeChart:r,title:"% Of Spend By Service Line",children:(0,eN.jsx)(tq.t,{columns:[{text:"Service Name"},{sortable:!0,sortName:"reactive_customer",text:"Current Amount"},{sortable:!0,sortName:"last_amount",text:"Last Amount"}],history:!1,initialSort:rc,loading:u,meta:l,ref:o,refetch:m,rows:c.map(function(e){return{serviceName:e.serviceName,currentAmount:e.currentAmount,lastAmount:e.lastAmount}})})})}),ru=(0,eL.Ps)(w||(w=(0,eB.Z)(["\n  query GetPercentageOfWorkOrdersByServiceLine(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    percentageOfWorkOrdersByServiceLine: getDashboard_Count_Job_by_Service(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      countLastYear: value\n      countJobIdCurrentYear: intval_extra\n      serviceName: strval_extra\n    }\n    meta: getDashboard_Count_Job_by_Service_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { intval_extra: desc }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"])));function rm(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function rI(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?rm(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rm(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var rp={item:"intval_extra",order:"desc"},rg=(0,ej.forwardRef)(function(e,n){var t=e.filters,r=e.removeChart,a=(0,tR.x)({filters:t,initialSort:rp}),i=a.initialData,o=a.ref,s=(0,eZ.a)(ru,{variables:rI(rI({},i),{},{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),d=s.data,c=(d=void 0===d?{percentageOfWorkOrdersByServiceLine:[],meta:{aggregate:{}}}:d).percentageOfWorkOrdersByServiceLine,l=d.meta,u=s.loading,m=s.refetch;return(0,eN.jsx)(eM.J,{isTable:!0,name:"PercentageOfWorkOrdersByServiceLineTable",removeChart:r,title:"% Of Work Orders By Service Line",children:(0,eN.jsx)(tq.t,{columns:[{text:"Service name"},{sortable:!0,sortName:"intval_extra",text:"current year"},{sortable:!0,sortName:"value",text:" last year"}],history:!1,initialSort:rp,loading:u,meta:l,ref:o,refetch:m,rows:c.map(function(e){return{serviceName:e.serviceName,countJobIdCurrentYear:e.countJobIdCurrentYear,countLastYear:e.countLastYear}})})})}),rv=(0,eL.Ps)(D||(D=(0,eB.Z)(["\n  query getDashboard_Financial_By_Month(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    financebymonth: getDashboard_Financial_By_Month(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      month: name\n      reactive_customer\n      reactive_revenue\n      reactive_supplier\n    }\n  }\n"]))),r$=(0,ej.forwardRef)(function(e,n){var r,a=e.filters,i=e.removeChart,o=(0,eZ.a)(rv,{variables:{adminId:a.adminId,customerId:a.customerId,endTime:a.endDate,isFixed:a.isFixed,isPlanned:a.isPlanned,locationId:a.locationId,managerId:a.managerId,postCodeAreaId:a.postCodeAreaId,serviceId:a.serviceId,slaId:a.slaId,startTime:a.startDate,supplierId:a.supplierId}}).data,s=(o=void 0===o?{financebymonth:[]}:o).financebymonth,d=function(e){e.reflow()};return t(18393)(ek()),s&&(0,eN.jsx)(eM.J,{name:"ReactiveAmountByMonth",removeChart:i,title:"Supplier/Customer Amounts By Month",children:(0,eN.jsx)(eJ(),{callback:d,constructorType:"chart",Highcharts:ek(),options:{title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:{text:"Amount(\xa3)"}},labels:{items:[{style:{fontSize:"15px",left:"50px",top:"18px"}}]},series:[{type:"column",name:"Customer",data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.month),"LLL yyyy"),y:e.reactive_customer}})},{type:"column",name:"supplier",data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.month),"LLL yyyy"),y:e.reactive_supplier}})},{type:"spline",name:"Revenue",marker:{lineWidth:2,fillColor:"white"},data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.month),"LLL yyyy"),y:e.reactive_revenue}})}]},ref:n})})}),ry=(0,eL.Ps)(S||(S=(0,eB.Z)(["\n  query GetDashboard_SlA(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    sla: getDashboard_SLA(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { name: asc }\n    ) {\n      count\n      sla_name: name\n      Breached_Count: ppm_customer\n      Live_Count: reactive_customer\n    }\n  }\n"]))),rf=(0,ej.forwardRef)(function(e,n){var r,a=e.filters,i=e.removeChart,o=(0,eZ.a)(ry,{variables:{adminId:a.adminId,customerId:a.customerId,endTime:a.endDate,isFixed:a.isFixed,isPlanned:a.isPlanned,locationId:a.locationId,managerId:a.managerId,postCodeAreaId:a.postCodeAreaId,serviceId:a.serviceId,slaId:a.slaId,startTime:a.startDate,supplierId:a.supplierId}}).data,s=(o=void 0===o?{sla:[]}:o).sla,d=function(e){e.reflow()};return t(18393)(ek()),s&&(0,eN.jsx)(eM.J,{name:"ReactiveBySLA",removeChart:i,title:"Reactive By SLA",children:(0,eN.jsx)(eJ(),{callback:d,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"bar"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{min:0,labels:{overflow:"justify"}},plotOptions:{bar:{dataLabels:{enabled:!0}}},legend:{layout:"vertical",align:"right",verticalAlign:"top",x:-40,y:80,floating:!0,borderWidth:1,shadow:!0},credits:{enabled:!1},series:[{name:"live jobs",data:s.map(function(e){return{name:e.sla_name,y:e.Live_Count}}),showInLegend:!1},{name:"Breached jobs",data:s.map(function(e){return{name:e.sla_name,y:e.Breached_Count}}),showInLegend:!1}]},ref:n})})}),rb=(0,eL.Ps)(F||(F=(0,eB.Z)(["\n  query GetSpendByCoverageArea(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    spendByCoverageArea: getDashboard_Sum_CustomerAmount_By_Coverage(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      coverage: strval_extra\n      total: reactive_customer\n    }\n    meta: getDashboard_Sum_CustomerAmount_By_Coverage_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"])));function rx(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function rh(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?rx(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rx(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var r_={item:"reactive_customer",order:"desc"},rT=(0,ej.forwardRef)(function(e,n){var t=e.filters,r=e.removeChart,a=(0,tR.x)({filters:t,initialSort:r_}),i=a.initialData,o=a.ref,s=(0,eZ.a)(rb,{variables:rh(rh({},i),{},{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),d=s.data,c=(d=void 0===d?{spendByCoverageArea:[],meta:{aggregate:{}}}:d).spendByCoverageArea,l=d.meta,u=s.loading,m=s.refetch;return(0,eN.jsx)(eM.J,{isTable:!0,name:"SpendByCoverageAreaTable",removeChart:r,title:"Spend By Coverage Area",children:(0,eN.jsx)(tq.t,{columns:[{text:"coverage"},{sortable:!0,sortName:"reactive_customer",text:"Total"}],history:!1,initialSort:r_,loading:u,meta:l,ref:o,refetch:m,rows:c.map(function(e){return{coverage:e.coverage,total:e.total}})})})}),rj=(0,eL.Ps)(Z||(Z=(0,eB.Z)(["\n  query GetNewCustomerAccounts(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    spendFromNewCustomerAccounts: getDashboard_Count_New_Customer_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      count: count\n    }\n    meta: getDashboard_Count_New_Customer_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]))),rC=(0,ej.forwardRef)(function(e,n){var r,a=e.filters,i=e.removeChart,o=(0,eZ.a)(rj,{variables:{adminId:a.adminId,customerId:a.customerId,endTime:a.endDate,isFixed:a.isFixed,isPlanned:a.isPlanned,locationId:a.locationId,managerId:a.managerId,postCodeAreaId:a.postCodeAreaId,serviceId:a.serviceId,slaId:a.slaId,startTime:a.startDate,supplierId:a.supplierId}}).data,s=(o=void 0===o?{spendFromNewCustomerAccounts:[]}:o).spendFromNewCustomerAccounts,d=function(e){e.reflow()};return t(18393)(ek()),s&&(0,eN.jsx)(eM.J,{name:"SpendFromNewCustomerAccountsChart",removeChart:i,title:"Spend From New Customer Accounts",children:(0,eN.jsx)(eJ(),{callback:d,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"column",zoomType:"x"},title:{text:null},series:[{data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.date),"yyyy dd MMM"),y:e.count||0}}),name:"Active Customer",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Amounts(\xa3)"}}},ref:n})})}),rP=(0,eL.Ps)(B||(B=(0,eB.Z)(["\n  query GetSumQuoteAcceptedByDate(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    meta: getDashboard_Sum_Quote_Accepted_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          count: count\n        }\n      }\n    }\n    sumQuoteAccepted: getDashboard_Sum_Quote_Accepted_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      sum: reactive_customer\n      jobDate: date_val1_extra\n    }\n  }\n"]))),rA=(0,ej.forwardRef)(function(e,n){var r,a=e.filters,i=e.removeChart,o=(0,eZ.a)(rP,{variables:{adminId:a.adminId,customerId:a.customerId,endTime:a.endDate,isFixed:a.isFixed,isPlanned:a.isPlanned,locationId:a.locationId,managerId:a.managerId,postCodeAreaId:a.postCodeAreaId,serviceId:a.serviceId,slaId:a.slaId,startTime:a.startDate,supplierId:a.supplierId}}).data,s=(o=void 0===o?{sumQuoteAccepted:[]}:o).sumQuoteAccepted,d=function(e){e.reflow()};return t(18393)(ek()),s&&(0,eN.jsx)(eM.J,{name:"SumQuoteAccepted",removeChart:i,title:"Value of Quotes Accepted By Date",children:(0,eN.jsx)(eJ(),{callback:d,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"line",zoomType:"x"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:{text:"Amounts(\xa3)"}},series:[{name:"sum",data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.jobDate),"dd LLL yyyy"),y:e.sum}}),showInLegend:!1}]},ref:n})})}),rO=(0,eL.Ps)(L||(L=(0,eB.Z)(["\n  query GetSumQuoteSendByDate(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    meta: getDashboard_Sum_Quote_Quotations_Sent_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          count: count\n        }\n      }\n    }\n    sumQuoteSent: getDashboard_Sum_Quote_Quotations_Sent_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      sum: reactive_customer\n      jobDate: date_val1_extra\n    }\n  }\n"]))),rw=(0,ej.forwardRef)(function(e,n){var r,a=e.filters,i=e.removeChart,o=(0,eZ.a)(rO,{variables:{adminId:a.adminId,customerId:a.customerId,endTime:a.endDate,isFixed:a.isFixed,isPlanned:a.isPlanned,locationId:a.locationId,managerId:a.managerId,postCodeAreaId:a.postCodeAreaId,serviceId:a.serviceId,slaId:a.slaId,startTime:a.startDate,supplierId:a.supplierId}}).data,s=(o=void 0===o?{sumQuoteSent:[]}:o).sumQuoteSent,d=function(e){e.reflow()};return t(18393)(ek()),s&&(0,eN.jsx)(eM.J,{name:"SumQuoteSent",removeChart:i,title:"Value Of Quotations Sent By Date",children:(0,eN.jsx)(eJ(),{callback:d,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"line",zoomType:"x"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:{text:"Amounts(\xa3)"}},series:[{name:"sum",data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.jobDate),"dd LLL yyyy"),y:e.sum}}),showInLegend:!1}]},ref:n})})}),rD=(0,eL.Ps)(q||(q=(0,eB.Z)(["\n  query SupplierDebt(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_finance_debt_order_by!]\n    $outstanding_levels: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    suppliers: getDashboard_Financial_Debt_By_Supplier(\n      limit: $limit\n      offset: $offset\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        outstanding_levels: $outstanding_levels\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: $orderBy\n    ) {\n      supplier: Account {\n        id\n        name\n      }\n      total_invoice_count\n      total_invoice_amount\n      outstanding_invoice_count\n      outstanding_invoice_amount\n      outstanding_0_30\n      outstanding_31_60\n      outstanding_61_90\n      outstanding_91_x\n    }\n    meta: getDashboard_Financial_Debt_By_Supplier_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        outstanding_levels: $outstanding_levels\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          total_invoice_count\n          total_invoice_amount\n          outstanding_invoice_count\n          outstanding_invoice_amount\n          outstanding_0_30\n          outstanding_31_60\n          outstanding_61_90\n          outstanding_91_x\n        }\n        totalCount: count\n      }\n    }\n  }\n"]))),rS=function(e,n,t){return e&&n?"".concat(t?(0,tB.Z)(e):e||0," (").concat(Math.round(e/n*100),"%)"):"".concat(t?(0,tB.Z)(e):e||0)};function rF(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function rZ(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?rF(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rF(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var rB={item:"outstanding_invoice_amount",order:"desc"},rL=(0,ej.forwardRef)(function(e,n){var t,r,a,i=e.filters,o=e.removeChart,s=(0,tR.x)({filters:i,initialSort:rB}),d=s.initialData,c=s.ref,l=(0,ej.useState)(),u=l[0],m=l[1],I=(0,eZ.a)(rD,{variables:rZ(rZ({},d),{},{outstanding_levels:u})}),p=I.data,g=(p=void 0===p?{suppliers:[],meta:{aggregate:{}}}:p).suppliers,v=p.meta,$=I.loading,y=I.refetch,f=(0,tO.t)(rD,{variables:rZ(rZ({},d),{},{limit:tF.C1.paginationSize,offset:((null===(t=c.current)||void 0===t?void 0:t.currentPage)-1||0)*tF.C1.paginationSize,orderBy:(0,eh.Z)({},null===(r=c.current)||void 0===r?void 0:r.sort.item,null===(a=c.current)||void 0===a?void 0:a.sort.order),outstanding_levels:u}),onCompleted:function(e){var n,t=tS().unparse((n=e.suppliers).map(function(e){return{name:e.customer.name,totalInvoiceCount:e.total_invoice_count,outstanding_invoice_count:rS(e.outstanding_invoice_count,e.total_invoice_count),outstanding_0_30:rS(e.outstanding_0_30,e.outstanding_invoice_count),outstanding_31_60:rS(e.outstanding_31_60,e.outstanding_invoice_count),outstanding_61_90:rS(e.outstanding_61_90,e.outstanding_invoice_count),outstanding_91_x:rS(e.outstanding_91_x,e.outstanding_invoice_count),totalInvoiceAmount:(0,tB.Z)(e.total_invoice_amount),outstanding_invoice_amount:rS(e.outstanding_invoice_amount,e.total_invoice_amount,!0)}})),r="data:application/octet-stream,"+encodeURIComponent(t);(0,tz.S)(r,"customer-debt.csv")}}),b=(0,tA.Z)(f,1)[0],x=function(e){var n=e.accountId,t=e.level,r=e.number,a="/dashboard/suppliers/view?id=".concat(n),o="&endDate=".concat((0,tZ.Z)(i.endDate)),s="&startDate=".concat((0,tZ.Z)(i.startDate));return(0,eN.jsx)(el.Z,{to:"".concat(a,"&tab=finance&outstandingLevel=").concat(t).concat(s).concat(o),children:r})},h=function(e){m(e)};return(0,eN.jsxs)(eM.J,{isTable:!0,name:"SupplierDebtTable",removeChart:o,title:"Supplier Debt",children:[(0,eN.jsx)(eo.Z,{children:(0,eN.jsx)(es.Z,{md:1,children:(0,eN.jsx)(eO.Z,{content:"Export to CSV",context:"secondary",onClick:b,title:"Export to CSV",size:"sm"})})}),v.aggregate.sum&&(0,eN.jsxs)(tL.Z,{align:"flex-end",children:[(0,eN.jsx)(eO.Z,{content:(0,eN.jsxs)(eN.Fragment,{children:["Invoice Count: ",(0,eN.jsx)("b",{children:v.aggregate.sum.total_invoice_count})]}),context:"secondary",onClick:function(e){return h(null)},outline:!0,size:"sm"}),(0,eN.jsx)(eO.Z,{content:(0,eN.jsxs)(eN.Fragment,{children:["Outstanding Invoices:",(0,eN.jsx)("b",{children:rS(v.aggregate.sum.outstanding_invoice_count,v.aggregate.sum.total_invoice_count)})]}),context:"secondary",outline:!0,size:"sm"}),(0,eN.jsx)(eO.Z,{content:(0,eN.jsxs)(eN.Fragment,{children:["Outstanding 1-30:",(0,eN.jsx)("b",{children:rS(v.aggregate.sum.outstanding_0_30,v.aggregate.sum.outstanding_invoice_count)})]}),context:1===u?"success":"secondary",onClick:function(e){return h(1)},outline:!0,size:"sm"}),(0,eN.jsx)(eO.Z,{content:(0,eN.jsxs)(eN.Fragment,{children:["Outstanding 31-60:",(0,eN.jsx)("b",{children:rS(v.aggregate.sum.outstanding_31_60,v.aggregate.sum.outstanding_invoice_count)})]}),context:31===u?"success":"secondary",onClick:function(e){return h(31)},outline:!0,size:"sm"}),(0,eN.jsx)(eO.Z,{content:(0,eN.jsxs)(eN.Fragment,{children:["Outstanding 61-90:",(0,eN.jsx)("b",{children:rS(v.aggregate.sum.outstanding_61_90,v.aggregate.sum.outstanding_invoice_count)})]}),context:61===u?"success":"secondary",onClick:function(e){return h(61)},outline:!0,size:"sm"}),(0,eN.jsx)(eO.Z,{content:(0,eN.jsxs)(eN.Fragment,{children:["Outstanding > 90:",(0,eN.jsx)("b",{children:rS(v.aggregate.sum.outstanding_91_x,v.aggregate.sum.outstanding_invoice_count)})]}),context:91===u?"success":"secondary",onClick:function(e){return h(91)},outline:!0,size:"sm"}),(0,eN.jsx)(eO.Z,{content:(0,eN.jsxs)(eN.Fragment,{children:["Total Invoice Amount: ",(0,eN.jsx)("b",{children:(0,tB.Z)(v.aggregate.sum.total_invoice_amount)})]}),context:"secondary",outline:!0,size:"sm"}),(0,eN.jsx)(eO.Z,{content:(0,eN.jsxs)(eN.Fragment,{children:["Outstanding Amount:",(0,eN.jsx)("b",{children:rS(v.aggregate.sum.outstanding_invoice_amount,v.aggregate.sum.total_invoice_amount,!0)})]}),context:"secondary",outline:!0,size:"sm"})]}),(0,eN.jsx)(tq.t,{columns:[{hidden:!0},{formatter:function(e){var n;return n=e.row,(0,eN.jsx)(el.Z,{to:"/dashboard/suppliers/view?id=".concat(n.accountId,"&tab=finance"),children:n.name})},text:"Supplier"},{sortable:!0,sortName:"total_invoice_count",text:"Invoice Count"},{formatter:function(e){var n=e.row;return x({accountId:n.accountId,level:0,number:n.outstanding_invoice_count})},sortable:!0,sortName:"outstanding_invoice_count",text:"Outstanding Invoices"},{formatter:function(e){var n=e.row;return x({accountId:n.accountId,level:1,number:n.outstanding_0_30})},sortable:!0,sortName:"outstanding_0_30",text:"Outstanding 1-30"},{formatter:function(e){var n=e.row;return x({accountId:n.accountId,level:31,number:n.outstanding_31_60})},sortable:!0,sortName:"outstanding_31_60",text:"Outstanding 31-60"},{formatter:function(e){var n=e.row;return x({accountId:n.accountId,level:61,number:n.outstanding_61_90})},sortable:!0,sortName:"outstanding_61_90",text:"Outstanding 61-90"},{formatter:function(e){var n=e.row;return x({accountId:n.accountId,level:91,number:n.outstanding_91_x})},sortable:!0,sortName:"outstanding_91_x",text:"Outstanding > 90"},{sortable:!0,sortName:"total_invoice_amount",text:"Total Invoice Amount"},{formatter:function(e){var n=e.row;return x({accountId:n.accountId,level:0,number:n.outstanding_invoice_amount})},sortable:!0,sortName:"outstanding_invoice_amount",text:"Outstanding Amount"}],history:!1,initialSort:rB,loading:$,meta:v,ref:c,refetch:y,rows:g.map(function(e){return{accountId:e.supplier.id,name:e.supplier.name,totalInvoiceCount:e.total_invoice_count,outstanding_invoice_count:rS(e.outstanding_invoice_count,e.total_invoice_count),outstanding_0_30:rS(e.outstanding_0_30,e.outstanding_invoice_count),outstanding_31_60:rS(e.outstanding_31_60,e.outstanding_invoice_count),outstanding_61_90:rS(e.outstanding_61_90,e.outstanding_invoice_count),outstanding_91_x:rS(e.outstanding_91_x,e.outstanding_invoice_count),totalInvoiceAmount:(0,tB.Z)(e.total_invoice_amount),outstanding_invoice_amount:rS(e.outstanding_invoice_amount,e.total_invoice_amount,!0)}})})]})}),rq=(0,eL.Ps)(R||(R=(0,eB.Z)(["\n  query GetTopAssetsByNumberOfJobs(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    topAssetsByNumberOfJobs: getDashboard_Asset(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      assetName: strval_extra\n      amount: ppm_customer\n      countOfferedJob: count\n    }\n    meta: getDashboard_Asset_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"])));function rR(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function rk(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?rR(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rR(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var rz={item:"ppm_customer",order:"desc"},rJ=(0,ej.forwardRef)(function(e,n){var t=e.filters,r=e.removeChart,a=(0,tR.x)({filters:t,initialSort:rz}),i=a.initialData,o=a.ref,s=(0,eZ.a)(rq,{variables:rk(rk({},i),{},{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),d=s.data,c=(d=void 0===d?{topAssetsByNumberOfJobs:[],meta:{aggregate:{}}}:d).topAssetsByNumberOfJobs,l=d.meta,u=s.loading,m=s.refetch;return(0,eN.jsx)(eM.J,{isTable:!0,name:"TopAssetsByNumberOfJobsTable",removeChart:r,title:"Top Assets By Number Of Jobs",children:(0,eN.jsx)(tq.t,{columns:[{text:"Name"},{sortable:!0,sortName:"ppm_customer",text:"Amount",formatter:function(e){var n=e.row;return(0,tB.Z)(n.amount)}},{sortable:!0,sortName:"count",text:"Count Offered Job"}],history:!1,initialSort:rz,loading:u,meta:l,ref:o,refetch:m,rows:c.map(function(e){return{assetName:e.assetName,amount:e.amount,countOfferedJob:e.countOfferedJob}})})})}),rM=(0,eL.Ps)(k||(k=(0,eB.Z)(["\n  query GetTopAssetsBySpend(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    topAssetsBySpend: getDashboard_Asset(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      assetName: strval_extra\n      asset_id: intval_extra\n      amount: reactive_customer\n    }\n    meta: getDashboard_Asset_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"])));function rN(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function rE(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?rN(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rN(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var rH={item:"reactive_customer",order:"desc"},rG=(0,ej.forwardRef)(function(e,n){var t=e.filters,r=e.removeChart,a=(0,tR.x)({filters:t,initialSort:rH}),i=a.initialData,o=a.ref,s=(0,eZ.a)(rM,{variables:rE(rE({},i),{},{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),d=s.data,c=(d=void 0===d?{topAssetsBySpend:[],meta:{aggregate:{}}}:d).topAssetsBySpend,l=d.meta,u=s.loading,m=s.refetch;return(0,eN.jsx)(eM.J,{isTable:!0,name:"TopAssetsBySpendTable",removeChart:r,title:"Top Assets By Spend",children:(0,eN.jsx)(tq.t,{columns:[{text:"Name"},{sortable:!0,sortName:"reactive_customer",text:"Amount",formatter:function(e){var n=e.row;return(0,tB.Z)(n.amount)}}],history:!1,initialSort:rH,loading:u,meta:l,ref:o,refetch:m,rows:c.map(function(e){return{assetName:e.assetName,amount:e.amount}})})})}),rW=(0,eL.Ps)(z||(z=(0,eB.Z)(["\n  query GetTopAssetTypesBySpend(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    topAssetTypesBySpend: getDashboard_AssetTypes(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      amount: reactive_customer\n      assetTypeName: strval_extra\n      assetTypeID: intval_extra\n    }\n    meta: getDashboard_AssetTypes_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"])));function rQ(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function rV(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?rQ(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rQ(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var rY={item:"reactive_customer",order:"desc"},rU=(0,ej.forwardRef)(function(e,n){var t=e.filters,r=e.removeChart,a=(0,tR.x)({filters:t,initialSort:rY}),i=a.initialData,o=a.ref,s=(0,eZ.a)(rW,{variables:rV(rV({},i),{},{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),d=s.data,c=(d=void 0===d?{topAssetTypesBySpend:[],meta:{aggregate:{}}}:d).topAssetTypesBySpend,l=d.meta,u=s.loading,m=s.refetch;return(0,eN.jsx)(eM.J,{isTable:!0,name:"TopAssetTypesBySpendTable",removeChart:r,title:"Top Asset Types By Spend",children:(0,eN.jsx)(tq.t,{columns:[{text:"Name"},{sortable:!0,sortName:"reactive_customer",text:"Amount",formatter:function(e){var n=e.row;return(0,tB.Z)(n.amount)}}],history:!1,initialSort:rY,loading:u,meta:l,ref:o,refetch:m,rows:c.map(function(e){return{assetTypeName:e.assetTypeName,amount:e.amount}})})})}),rX=(0,eL.Ps)(J||(J=(0,eB.Z)(["\n  query GetTopCustomersByNumberOfProperties(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    topCustomersByNumberOfProperties: getDashboard_Customers_By_Location(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      countLocationId: value\n      accountName: strval_extra\n      customerAmount: reactive_amount\n    }\n\n    meta: getDashboard_Customers_By_Location_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"])));function rK(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function r0(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?rK(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rK(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var r1={item:"reactive_customer",order:"desc"},r3=(0,ej.forwardRef)(function(e,n){var t=e.filters,r=e.removeChart,a=(0,tR.x)({filters:t,initialSort:r1}),i=a.initialData,o=a.ref,s=(0,eZ.a)(rX,{variables:r0(r0({},i),{},{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),d=s.data,c=(d=void 0===d?{topCustomersByNumberOfProperties:[],meta:{aggregate:{}}}:d).topCustomersByNumberOfProperties,l=d.meta,u=s.loading,m=s.refetch;return(0,eN.jsx)(eM.J,{isTable:!0,name:"TopCustomersByNumberOfPropertiesTable",removeChart:r,title:"Top Customers By Number Of Properties",children:(0,eN.jsx)(tq.t,{columns:[{text:"Account name"},{sortable:!0,sortName:"reactive_customer",text:"Count Location"},{text:"Customer amount",formatter:function(e){var n=e.row;return(0,tB.Z)(n.customerAmount)}}],history:!1,initialSort:r1,loading:u,meta:l,ref:o,refetch:m,rows:c.map(function(e){return{accountName:e.accountName,countLocationId:e.countLocationId,customerAmount:e.customerAmount}})})})}),r2=(0,eL.Ps)(M||(M=(0,eB.Z)(["\n  query GetTopCustomersByProfit(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    topCustomersByProfit: getDashboard_Customer_Profit(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: reactive_customer\n    }\n    meta: getDashboard_Customer_Profit_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]))),r6=(0,ej.forwardRef)(function(e,n){var r,a=e.filters,i=e.removeChart,o=(0,eZ.a)(r2,{variables:{adminId:a.adminId,customerId:a.customerId,endTime:a.endDate,isFixed:a.isFixed,isPlanned:a.isPlanned,locationId:a.locationId,managerId:a.managerId,postCodeAreaId:a.postCodeAreaId,serviceId:a.serviceId,slaId:a.slaId,startTime:a.startDate,supplierId:a.supplierId}}).data,s=(o=void 0===o?{topCustomersByProfit:[]}:o).topCustomersByProfit,d=function(e){e.reflow()};return t(18393)(ek()),s&&(0,eN.jsx)(eM.J,{name:"TopCustomersByProfitChart",removeChart:i,title:"Top Customers By Profit",children:(0,eN.jsx)(eJ(),{callback:d,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"line",zoomType:"x"},title:{text:null},series:[{data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.date),"yyyy dd MMM"),y:e.avg||0}}),name:"Amount",showInLegend:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Amount(\xa3)"}}},ref:n})})}),r9=(0,eL.Ps)(N||(N=(0,eB.Z)(["\n  query GetTopPropertiesBySpend(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    topPropertiesBySpend: getDashboard_Location(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      locationName: strval_extra\n      locationId: intval_extra\n      amount: reactive_customer\n    }\n    meta: getDashboard_Location_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"])));function r5(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function r8(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r5(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r5(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var r4={item:"reactive_customer",order:"desc"},r7=(0,ej.forwardRef)(function(e,n){var t=e.filters,r=e.removeChart,a=(0,tR.x)({filters:t,initialSort:r4}),i=a.initialData,o=a.ref,s=(0,eZ.a)(r9,{variables:r8(r8({},i),{},{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),d=s.data,c=(d=void 0===d?{topPropertiesBySpend:[],meta:{aggregate:{}}}:d).topPropertiesBySpend,l=d.meta,u=s.loading,m=s.refetch;return(0,eN.jsx)(eM.J,{isTable:!0,name:"TopPropertiesBySpendTable",removeChart:r,title:"Top Properties By Spend",children:(0,eN.jsx)(tq.t,{columns:[{text:"Name"},{sortable:!0,sortName:"reactive_customer",text:"Amount",formatter:function(e){var n=e.row;return(0,tB.Z)(n.amount)}}],history:!1,initialSort:r4,loading:u,meta:l,ref:o,refetch:m,rows:c.map(function(e){return{locationName:e.locationName,amount:e.amount}})})})}),ae=(0,eL.Ps)(E||(E=(0,eB.Z)(["\n  query GetTopSuppliersByNumberOfJobs(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    topSuppliersByNumberOfJobs: getDashboard_Supplier_To_Accept_Job(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      countAcceptedJob: count\n      amountAcceptedJob: reactive_customer\n      supplierName: strval_extra\n    }\n    meta: getDashboard_Supplier_To_Accept_Job_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"])));function an(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function at(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?an(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):an(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ar={item:"reactive_customer",order:"desc"},aa=(0,ej.forwardRef)(function(e,n){var t=e.filters,r=e.removeChart,a=(0,tR.x)({filters:t,initialSort:ar}),i=a.initialData,o=a.ref,s=(0,eZ.a)(ae,{variables:at(at({},i),{},{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),d=s.data,c=(d=void 0===d?{topSuppliersByNumberOfJobs:[],meta:{aggregate:{}}}:d).topSuppliersByNumberOfJobs,l=d.meta,u=s.loading,m=s.refetch;return(0,eN.jsx)(eM.J,{isTable:!0,name:"TopSuppliersByNumberOfJobsTable",removeChart:r,title:"Top Suppliers By Number Of Jobs and Earnings",children:(0,eN.jsx)(tq.t,{columns:[{text:"Supplier Name"},{sortable:!0,sortName:"count",text:"Count Accepted Job"},{sortable:!0,sortName:"reactive_customer",text:"Amount Accepted Job",formatter:function(e){var n=e.row;return(0,tB.Z)(n.amountAcceptedJob)}}],history:!1,initialSort:ar,loading:u,meta:l,ref:o,refetch:m,rows:c.map(function(e){return{supplierName:e.supplierName,countAcceptedJob:e.countAcceptedJob,amountAcceptedJob:e.amountAcceptedJob}})})})}),ai=(0,eL.Ps)(H||(H=(0,eB.Z)(["\n  query GetTopSuppliersByQuoteReturn(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    topSuppliersByQuoteReturn: getDashboard_Suppliers_By_Quote_Return(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      reactiveAmount: reactive_supplier\n      dayDifference: count\n      supplierName: strval_extra\n    }\n    meta: getDashboard_Suppliers_By_Quote_Return_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"])));function ao(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function as(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ao(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ao(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ad={item:"reactive_supplier",order:"desc"},ac=(0,ej.forwardRef)(function(e,n){var t=e.filters,r=e.removeChart,a=(0,tR.x)({filters:t,initialSort:ad}),i=a.initialData,o=a.ref,s=(0,eZ.a)(ai,{variables:as(as({},i),{},{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),d=s.data,c=(d=void 0===d?{topSuppliersByQuoteReturn:[],meta:{aggregate:{}}}:d).topSuppliersByQuoteReturn,l=d.meta,u=s.loading,m=s.refetch;return(0,eN.jsx)(eM.J,{isTable:!0,name:"TopSuppliersByQuoteReturnTable",removeChart:r,title:"Top Suppliers By Quote Return",children:(0,eN.jsx)(tq.t,{columns:[{text:"Supplier Name"},{sortable:!0,sortName:"reactive_suppliers",text:"Reactive Amount"},{text:"Day Difference"}],history:!1,initialSort:ad,loading:u,meta:l,ref:o,refetch:m,rows:c.map(function(e){return{supplierName:e.supplierName,reactiveAmount:e.reactiveAmount,dayDifference:e.dayDifference}})})})}),al=(0,eL.Ps)(G||(G=(0,eB.Z)(["\n  query GetTopSuppliersByTimeToSubmitJobReport(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    topSuppliersByTimeToSubmitJobReport: getDashboard_Supplier_To_Submit_Job(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      supplier_name: strval_extra\n      supplier_id: value\n      amount: reactive_customer\n    }\n    meta: getDashboard_Supplier_To_Submit_Job_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"])));function au(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function am(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?au(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):au(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var aI={item:"reactive_customer",order:"desc"},ap=(0,ej.forwardRef)(function(e,n){var t=e.filters,r=e.removeChart,a=(0,tR.x)({filters:t,initialSort:aI}),i=a.initialData,o=a.ref,s=(0,eZ.a)(al,{variables:am(am({},i),{},{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),d=s.data,c=(d=void 0===d?{topSuppliersByTimeToSubmitJobReport:[],meta:{aggregate:{}}}:d).topSuppliersByTimeToSubmitJobReport,l=d.meta,u=s.loading,m=s.refetch;return(0,eN.jsx)(eM.J,{isTable:!0,name:"TopSuppliersByTimeToSubmitJobReportTable",removeChart:r,title:"Top Suppliers By Time To Submit Job",children:(0,eN.jsx)(tq.t,{columns:[{text:"Supplier Name"},{sortable:!0,sortName:"reactive_customer",text:"Amount",formatter:function(e){var n=e.row;return(0,tB.Z)(n.amount)}}],history:!1,initialSort:aI,loading:u,meta:l,ref:o,refetch:m,rows:c.map(function(e){return{supplier_name:e.supplier_name,amount:e.amount}})})})}),ag=function(e){var n,t=[];return e.map((n=(0,ex.Z)(eT().mark(function e(n){var r,a,i;return eT().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=(0,eQ.Z)(new Date(n.scheduledAt?n.scheduledAt:n.timingStart),"yyyy dd MMM"),(null===(r=n.meta)||void 0===r?void 0:r.customerVATInvoice)&&t.push({name:i,y:null===(a=n.meta)||void 0===a?void 0:a.customerVATInvoice.expensesInfo.expensesTotal});case 2:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})),t},av=t(11640),a$=t(22227),ay=function(e){var n=e.acquisitionCost,t=e.datePutInService,r=e.maintenanceSpend,a=e.residualValue,i=e.usefulLife,o=parseInt(r)/12,s=(0,eQ.Z)(new Date(t),"MMMM yyyy"),d=Array(parseInt(i)+1).fill({});return d.map(function(e,r){return 0===r?{name:s,y:(0,a$.l)(parseInt(n),2)}:r+1===parseInt(i)+1?{name:(0,eQ.Z)((0,av.Z)(new Date(t),r),"MMMM yyyy"),y:(0,a$.l)(r*o+parseInt(n)-parseInt(a),2)}:{name:(0,eQ.Z)((0,av.Z)(new Date(t),r),"MMMM yyyy"),y:(0,a$.l)(r*o+parseInt(n),2)}})},af=t(58965),ab=(0,ej.forwardRef)(function(e,n){var r,a,i=e.initialData,o=e.jobs,s=function(e){e.reflow()};return t(18393)(ek()),(0,eN.jsx)(af.Z,{fitParentHeight:!0,title:"Total cost of ownership",children:(0,eN.jsx)(eJ(),{callback:s,constructorType:"chart",Highcharts:ek(),options:(r=ay(i),a=ag(void 0===o?[]:o),{chart:{type:"line",zoomType:"x"},title:{text:"TCO"},series:[{data:r,showInLegend:!1},{data:Object.keys(a).map(function(e){return{name:e,y:a[e]}}),name:"Total Costs ",showInLegend:!1,type:"column",visible:!1}],xAxis:{type:"category",title:null},yAxis:{title:{text:"\xa3"}}}),ref:n})})}),ax=(0,eL.Ps)(W||(W=(0,eB.Z)(["\n  query GetFinancialByDate(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    averageJobLength: getDashboard_Financial_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: reactive_revenue\n    }\n    meta: getDashboard_Financial_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"]))),ah=(0,ej.forwardRef)(function(e,n){var r,a=e.filters,i=e.removeChart,o=(0,eZ.a)(ax,{variables:{adminId:a.adminId,customerId:a.customerId,endTime:a.endDate,isFixed:a.isFixed,isPlanned:a.isPlanned,locationId:a.locationId,managerId:a.managerId,postCodeAreaId:a.postCodeAreaId,serviceId:a.serviceId,slaId:a.slaId,startTime:a.startDate,supplierId:a.supplierId}}).data,s=(o=void 0===o?{averageJobLength:[]}:o).averageJobLength,d=function(e){e.reflow()};return t(18393)(ek()),s&&(0,eN.jsx)(eM.J,{name:"TotalJobRevenueChart",removeChart:i,title:"Total Job Revenue",children:(0,eN.jsx)(eJ(),{callback:d,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"line",zoomType:"x"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:{text:"Amounts(\xa3)"}},series:[{data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.date),"yyyy dd MMM"),y:e.avg||0}}),name:"Revenue",showInLegend:!1}]},ref:n})})}),a_=(0,eL.Ps)(Q||(Q=(0,eB.Z)(["\n  query GetTotalQuotInvoiceSendByDate(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    meta: getDashboard_Count_Quote_InvoiceSent_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          count: count\n        }\n      }\n    }\n    totalQuoteInvoiceSent: getDashboard_Count_Quote_InvoiceSent_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      count: count\n      jobDate: date_val1_extra\n    }\n  }\n"]))),aT=(0,ej.forwardRef)(function(e,n){var r,a=e.filters,i=e.removeChart,o=(0,eZ.a)(a_,{variables:{adminId:a.adminId,customerId:a.customerId,endTime:a.endDate,isFixed:a.isFixed,isPlanned:a.isPlanned,locationId:a.locationId,managerId:a.managerId,postCodeAreaId:a.postCodeAreaId,serviceId:a.serviceId,slaId:a.slaId,startTime:a.startDate,supplierId:a.supplierId}}).data,s=(o=void 0===o?{totalQuoteInvoiceSent:[]}:o).totalQuoteInvoiceSent,d=function(e){e.reflow()};return t(18393)(ek()),s&&(0,eN.jsx)(eM.J,{name:"totalQuoteInvoiceSent",removeChart:i,title:"Total Quote Invoice Sent By Date",children:(0,eN.jsx)(eJ(),{callback:d,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"line",zoomType:"x"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:{text:"Counts"}},series:[{name:"count",data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.jobDate),"dd LLL yyyy"),y:e.count}}),showInLegend:!1}]},ref:n})})}),aj=(0,eL.Ps)(V||(V=(0,eB.Z)(["\n  query GetTotalQuoteReportSendByDate(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    meta: getDashboard_Count_Quote_ReportSent_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          count: count\n        }\n      }\n    }\n    totalQuoteReportSend: getDashboard_Count_Quote_ReportSent_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      count: count\n      jobDate: date_val1_extra\n    }\n  }\n"]))),aC=(0,ej.forwardRef)(function(e,n){var r,a=e.filters,i=e.removeChart,o=(0,eZ.a)(aj,{variables:{adminId:a.adminId,customerId:a.customerId,endTime:a.endDate,isFixed:a.isFixed,isPlanned:a.isPlanned,locationId:a.locationId,managerId:a.managerId,postCodeAreaId:a.postCodeAreaId,serviceId:a.serviceId,slaId:a.slaId,startTime:a.startDate,supplierId:a.supplierId}}).data,s=(o=void 0===o?{totalQuoteReportSend:[]}:o).totalQuoteReportSend,d=function(e){e.reflow()};return t(18393)(ek()),s&&(0,eN.jsx)(eM.J,{name:"TotalQuoteReportSent",removeChart:i,title:"Total Quote Report Sent by Date",children:(0,eN.jsx)(eJ(),{callback:d,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"line",zoomType:"x"},title:{text:null},xAxis:{type:"category",title:null},yAxis:{title:{text:"Counts"}},series:[{name:"count",data:s.map(function(e){return{name:(0,eQ.Z)(new Date(e.jobDate),"dd LLL yyyy"),y:e.count}}),showInLegend:!1}]},ref:n})})}),aP=(0,eL.Ps)(Y||(Y=(0,eB.Z)(["\n  query GetTotalQuoteSendByDate(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    totalQuoteSent: getDashboard_Count_QuoteSent_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      count: count\n      jobDate: date_val1_extra\n    }\n    meta: getDashboard_Count_QuoteSent_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        sum {\n          count: count\n        }\n      }\n    }\n  }\n"])));function aA(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function aO(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?aA(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):aA(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var aw=function(e){var n=e.setFilters,t=e.initialFilters,r=e.filters,a=(0,nI.x)().user,i=(0,np.cI)({defaultValues:aO({},r)}),o=i.control,s=i.errors,d=i.handleSubmit,c=i.register,l=i.reset,u=i.watch,m={errors:s,register:c,control:o,reset:l,filters:r},I=function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}},p=function(e){var t="custom"===e.intervals?{startDate:e.startDate,endDate:e.endDate,intervals:e.intervals}:eF(e.intervals),r=a.accountId,i=a.accountType,o=aO(aO(aO({},t),I({accountId:r,accountType:i})),{customerId:e.customerId,locationId:e.locationId,serviceId:e.serviceId,slaId:e.slaId,supplierId:e.supplierId,managerId:e.managerId});n(o)},g=function(){l({initialFilters:t}),n(t)},v=u("intervals");return(0,eN.jsx)(eN.Fragment,{children:(0,eN.jsx)("form",{onSubmit:d(p),children:(0,eN.jsxs)(e2.Z,{children:[(0,eN.jsx)(nZ,{sx:{mt:1,mb:.5},control:o,name:"intervals",options:eD,variant:"standard"}),"custom"===v&&(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(e4.Z,{sx:{mt:2,width:"45%"},children:(0,eN.jsx)(nC.M,aO(aO({},m),{},{name:"startDate",placeholder:"Start Date"}))}),(0,eN.jsx)(e4.Z,{sx:{mt:2,width:"45%"},children:(0,eN.jsx)(nC.M,aO(aO({},m),{},{name:"endDate",placeholder:"End Date"}))})]}),(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(nj,aO(aO({},m),{},{name:"customerId",type:"customer",control:o,textFieldValue:!0,setTextFieldValue:!0})),(0,eN.jsx)(nj,aO(aO({},m),{},{name:"supplierId",type:"supplier",control:o}))]}),(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(nj,aO(aO({},m),{},{name:"locationId",type:"property",control:o})),(0,eN.jsx)(nj,aO(aO({},m),{},{name:"serviceId",type:"service",control:o}))]}),(0,eN.jsx)(e2.Z,{direction:"row",justifyContent:"space-between",children:(0,eN.jsx)(nj,aO(aO({},m),{},{name:"managerId",type:"user",control:o}))}),(0,eN.jsxs)(e2.Z,{mt:10,spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,eN.jsx)(ng.Z,{onClick:g,variant:"outlined",style:{textTransform:"none"},children:"Reset filters"}),(0,eN.jsx)(ng.Z,{type:"submit",variant:"contained",style:{textTransform:"none"},children:"Apply"})]})]})})})};function aD(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function aS(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?aD(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):aD(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var aF=(0,ej.forwardRef)(function(e,n){var r,a,i,o,s,d,c,l,u,m=e.removeChart,I=(0,nI.x)().user,p=aS(aS({},eF(eD.find(function(e){return e.default}).value)),(c=(d={accountId:I.accountId,accountType:I.accountType,customerId:null,supplierId:null,locationId:null,serviceId:null,slaId:null,managerId:null}).accountId,"admin"===d.accountType?{adminId:c}:{accountId:c})),g=(0,ej.useState)(p),v=g[0],$=g[1],y=(0,ej.useState)(!1),f=y[0],b=y[1],x=(0,eZ.a)(aP,{onCompleted:function(){b(!1)},variables:{adminId:v.adminId,customerId:null===(r=v.customerId)||void 0===r?void 0:r.value,endTime:v.endDate,locationId:null===(a=v.locationId)||void 0===a?void 0:a.value,managerId:null===(i=v.managerId)||void 0===i?void 0:i.value,serviceId:null===(o=v.serviceId)||void 0===o?void 0:o.value,startTime:v.startDate,supplierId:null===(s=v.supplierId)||void 0===s?void 0:s.value}}).data,h=(x=void 0===x?{totalQuoteSent:[]}:x).totalQuoteSent,_=function(e){e.reflow()};return t(18393)(ek()),h&&(0,eN.jsx)(nu,{name:"TotalQuoteSentChart",removeChart:m,title:"Number Of Quotes",openModal:f,setOpenModal:b,filtersComponent:(0,eN.jsx)(aw,{filters:v,initialFilters:p,setFilters:$}),activeFiltersComponent:(0,eN.jsx)(nJ,{filters:v}),children:(0,eN.jsx)(eJ(),{callback:_,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"column"},title:{text:null},exporting:{buttons:{contextButton:{align:"right",x:0,y:5,verticalAlign:"top",symbol:"menuball"}}},xAxis:{type:"category",title:null},yAxis:{title:{text:"Count"}},series:[{name:"Count, quotes",data:h.map(function(e){return{name:(0,eQ.Z)(new Date(e.jobDate),"dd LLL yyyy"),y:e.count}}),showInLegend:!1,color:"#1E88E5"}]},ref:n})})}),aZ=(0,eL.Ps)(U||(U=(0,eB.Z)(["\n  query GetWorstCustomersByAgedReceivables(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $offset: Int\n    $orderBy: [dashboard_main_order_by!]\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    worstCustomersByAgedReceivables: getDashboard_Customer_Aged_Receivables(\n      limit: $limit\n      offset: $offset\n      order_by: $orderBy\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      customer_name: strval_extra\n      amount: reactive_customer\n      customer_id: value\n    }\n    meta: getDashboard_Customer_Aged_Receivables_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"])));function aB(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function aL(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?aB(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):aB(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var aq={item:"reactive_customer",order:"desc"},aR=(0,ej.forwardRef)(function(e,n){var t=e.filters,r=e.removeChart,a=(0,tR.x)({filters:t,initialSort:aq}),i=a.initialData,o=a.ref,s=(0,eZ.a)(aZ,{variables:aL(aL({},i),{},{adminId:t.adminId,customerId:t.customerId,endTime:t.endDate,isFixed:t.isFixed,isPlanned:t.isPlanned,locationId:t.locationId,managerId:t.managerId,postCodeAreaId:t.postCodeAreaId,serviceId:t.serviceId,slaId:t.slaId,startTime:t.startDate,supplierId:t.supplierId})}),d=s.data,c=(d=void 0===d?{worstCustomersByAgedReceivables:[],meta:{aggregate:{}}}:d).worstCustomersByAgedReceivables,l=d.meta,u=s.loading,m=s.refetch;return(0,eN.jsx)(eM.J,{isTable:!0,name:"WorstCustomersByAgedReceivablesTable",removeChart:r,title:"Worst Customers By Aged Receivables",children:(0,eN.jsx)(tq.t,{columns:[{text:"Customer Name"},{sortable:!0,sortName:"reactive_customer",text:"Amount",formatter:function(e){var n=e.row;return(0,tB.Z)(n.amount)}}],history:!1,initialSort:aq,loading:u,meta:l,ref:o,refetch:m,rows:c.map(function(e){return{customer_name:e.customer_name,amount:e.amount}})})})}),ak=(0,eL.Ps)(X||(X=(0,eB.Z)(["\n  query GetSlaBreachCount(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    slaBreachCount: getDashboard_Count_SLA_Breach_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: value\n    }\n    meta: getDashboard_Count_SLA_Breach_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"])));function az(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function aJ(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?az(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):az(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var aM=function(e){var n=e.setFilters,t=e.initialFilters,r=e.filters,a=(0,nI.x)().user,i=(0,np.cI)({defaultValues:aJ({},r)}),o=i.control,s=i.errors,d=i.handleSubmit,c=i.register,l=i.reset,u=i.watch,m={errors:s,register:c,control:o,reset:l,filters:r},I=function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}},p=function(e){var t="custom"===e.intervals?{startDate:e.startDate,endDate:e.endDate,intervals:e.intervals}:eF(e.intervals),r=a.accountId,i=a.accountType,o=aJ(aJ(aJ({},t),I({accountId:r,accountType:i})),{customerId:e.customerId,locationId:e.locationId,serviceId:e.serviceId,slaId:e.slaId,supplierId:e.supplierId,managerId:e.managerId});n(o)},g=function(){l({initialFilters:t}),n(t)},v=u("intervals");return(0,eN.jsx)(eN.Fragment,{children:(0,eN.jsx)("form",{onSubmit:d(p),children:(0,eN.jsxs)(e2.Z,{children:[(0,eN.jsx)(nZ,{sx:{mt:1,mb:.5},control:o,name:"intervals",options:eD,variant:"standard"}),"custom"===v&&(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(e4.Z,{sx:{mt:2,width:"45%"},children:(0,eN.jsx)(nC.M,aJ(aJ({},m),{},{name:"startDate",placeholder:"Start Date"}))}),(0,eN.jsx)(e4.Z,{sx:{mt:2,width:"45%"},children:(0,eN.jsx)(nC.M,aJ(aJ({},m),{},{name:"endDate",placeholder:"End Date"}))})]}),(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(nj,aJ(aJ({},m),{},{name:"customerId",type:"customer",control:o,textFieldValue:!0,setTextFieldValue:!0})),(0,eN.jsx)(nj,aJ(aJ({},m),{},{name:"supplierId",type:"supplier",control:o}))]}),(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(nj,aJ(aJ({},m),{},{name:"locationId",type:"property",control:o})),(0,eN.jsx)(nj,aJ(aJ({},m),{},{name:"serviceId",type:"service",control:o}))]}),(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(nj,aJ(aJ({},m),{},{name:"slaId",type:"sla",control:o})),(0,eN.jsx)(nj,aJ(aJ({},m),{},{name:"managerId",type:"user",control:o}))]}),(0,eN.jsxs)(e2.Z,{mt:10,spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,eN.jsx)(ng.Z,{onClick:g,variant:"outlined",style:{textTransform:"none"},children:"Reset filters"}),(0,eN.jsx)(ng.Z,{type:"submit",variant:"contained",style:{textTransform:"none"},children:"Apply"})]})]})})})};function aN(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function aE(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?aN(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):aN(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var aH=(0,ej.forwardRef)(function(e,n){var r,a,i,o,s,d,c,l,u,m,I=e.removeChart,p=(0,nI.x)().user,g=aE(aE({},eF(eD.find(function(e){return e.default}).value)),(l=(c={accountId:p.accountId,accountType:p.accountType,customerId:null,supplierId:null,locationId:null,serviceId:null,slaId:null,managerId:null}).accountId,"admin"===c.accountType?{adminId:l}:{accountId:l})),v=(0,ej.useState)(g),$=v[0],y=v[1],f=(0,ej.useState)(!1),b=f[0],x=f[1],h=(0,eZ.a)(ak,{onCompleted:function(){x(!1)},variables:{adminId:$.adminId,customerId:null===(r=$.customerId)||void 0===r?void 0:r.value,endTime:$.endDate,locationId:null===(a=$.locationId)||void 0===a?void 0:a.value,managerId:null===(i=$.managerId)||void 0===i?void 0:i.value,serviceId:null===(o=$.serviceId)||void 0===o?void 0:o.value,slaId:null===(s=$.slaId)||void 0===s?void 0:s.value,startTime:$.startDate,supplierId:null===(d=$.supplierId)||void 0===d?void 0:d.value}}).data,_=(h=void 0===h?{slaBreachCount:[]}:h).slaBreachCount,T=function(e){e.reflow()};return t(18393)(ek()),_&&(0,eN.jsx)(nu,{name:"SlaBreachCountChart",removeChart:I,title:"SLA Breach (Count)",openModal:b,setOpenModal:x,filtersComponent:(0,eN.jsx)(aM,{filters:$,initialFilters:g,setFilters:y}),activeFiltersComponent:(0,eN.jsx)(nJ,{filters:$}),children:(0,eN.jsx)(eJ(),{callback:T,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"column"},title:{text:null},exporting:{buttons:{contextButton:{align:"right",x:0,y:5,verticalAlign:"top",symbol:"menuball"}}},series:[{name:"Count, jobs",data:_.map(function(e){return{name:(0,eQ.Z)(new Date(e.date),"dd LLL yyyy"),y:e.avg||0}}),showInLegend:!1,color:"#1E88E5"}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Count"}}},ref:n})})}),aG=(0,eL.Ps)(K||(K=(0,eB.Z)(["\n  query GetSlaBreachPercentage(\n    $adminId: Int\n    $customerId: Int\n    $endTime: timestamptz\n    $isFixed: Int\n    $isPlanned: Int\n    $locationId: Int\n    $managerId: Int\n    $postCodeAreaId: Int\n    $serviceId: Int\n    $slaId: Int\n    $startTime: timestamptz\n    $supplierId: Int\n  ) {\n    slaBreachPercentage: getDashboard_SLA_Breach_Percentage_By_Date(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n      order_by: { date_val1_extra: asc }\n    ) {\n      date: date_val1_extra\n      avg: value\n    }\n    meta: getDashboard_SLA_Breach_Percentage_By_Date_aggregate(\n      args: {\n        adminId: $adminId\n        customerId: $customerId\n        endTime: $endTime\n        isFixed: $isFixed\n        isPlanned: $isPlanned\n        locationId: $locationId\n        managerId: $managerId\n        postCodeAreaId: $postCodeAreaId\n        serviceId: $serviceId\n        slaId: $slaId\n        startTime: $startTime\n        supplierId: $supplierId\n      }\n    ) {\n      aggregate {\n        avg {\n          avg: value\n        }\n      }\n    }\n  }\n"])));function aW(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function aQ(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?aW(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):aW(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var aV=function(e){var n=e.setFilters,t=e.initialFilters,r=e.filters,a=(0,nI.x)().user,i=(0,np.cI)({defaultValues:aQ({},r)}),o=i.control,s=i.errors,d=i.handleSubmit,c=i.register,l=i.reset,u=i.watch,m={errors:s,register:c,control:o,reset:l,filters:r},I=function(e){var n=e.accountId;return"admin"===e.accountType?{adminId:n}:{accountId:n}},p=function(e){var t="custom"===e.intervals?{startDate:e.startDate,endDate:e.endDate,intervals:e.intervals}:eF(e.intervals),r=a.accountId,i=a.accountType,o=aQ(aQ(aQ({},t),I({accountId:r,accountType:i})),{customerId:e.customerId,locationId:e.locationId,serviceId:e.serviceId,slaId:e.slaId,supplierId:e.supplierId,managerId:e.managerId});n(o)},g=function(){l({initialFilters:t}),n(t)},v=u("intervals");return(0,eN.jsx)(eN.Fragment,{children:(0,eN.jsx)("form",{onSubmit:d(p),children:(0,eN.jsxs)(e2.Z,{children:[(0,eN.jsx)(nZ,{sx:{mt:1,mb:.5},control:o,name:"intervals",options:eD,variant:"standard"}),"custom"===v&&(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(e4.Z,{sx:{mt:2,width:"45%"},children:(0,eN.jsx)(nC.M,aQ(aQ({},m),{},{name:"startDate",placeholder:"Start Date"}))}),(0,eN.jsx)(e4.Z,{sx:{mt:2,width:"45%"},children:(0,eN.jsx)(nC.M,aQ(aQ({},m),{},{name:"endDate",placeholder:"End Date"}))})]}),(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(nj,aQ(aQ({},m),{},{name:"customerId",type:"customer",control:o,textFieldValue:!0,setTextFieldValue:!0})),(0,eN.jsx)(nj,aQ(aQ({},m),{},{name:"supplierId",type:"supplier",control:o}))]}),(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(nj,aQ(aQ({},m),{},{name:"locationId",type:"property",control:o})),(0,eN.jsx)(nj,aQ(aQ({},m),{},{name:"serviceId",type:"service",control:o}))]}),(0,eN.jsxs)(e2.Z,{direction:"row",justifyContent:"space-between",children:[(0,eN.jsx)(nj,aQ(aQ({},m),{},{name:"slaId",type:"sla",control:o})),(0,eN.jsx)(nj,aQ(aQ({},m),{},{name:"managerId",type:"user",control:o}))]}),(0,eN.jsxs)(e2.Z,{mt:10,spacing:2,direction:"row",justifyContent:"flex-end",children:[(0,eN.jsx)(ng.Z,{onClick:g,variant:"outlined",style:{textTransform:"none"},children:"Reset filters"}),(0,eN.jsx)(ng.Z,{type:"submit",variant:"contained",style:{textTransform:"none"},children:"Apply"})]})]})})})};function aY(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function aU(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?aY(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):aY(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var aX=(0,ej.forwardRef)(function(e,n){var r,a,i,o,s,d,c,l,u,m,I=e.removeChart,p=(0,nI.x)().user,g=aU(aU({},eF(eD.find(function(e){return e.default}).value)),(l=(c={accountId:p.accountId,accountType:p.accountType,customerId:null,supplierId:null,locationId:null,serviceId:null,slaId:null,managerId:null}).accountId,"admin"===c.accountType?{adminId:l}:{accountId:l})),v=(0,ej.useState)(g),$=v[0],y=v[1],f=(0,ej.useState)(!1),b=f[0],x=f[1],h=(0,eZ.a)(aG,{onCompleted:function(){x(!1)},variables:{adminId:$.adminId,customerId:null===(r=$.customerId)||void 0===r?void 0:r.value,endTime:$.endDate,locationId:null===(a=$.locationId)||void 0===a?void 0:a.value,managerId:null===(i=$.managerId)||void 0===i?void 0:i.value,serviceId:null===(o=$.serviceId)||void 0===o?void 0:o.value,slaId:null===(s=$.slaId)||void 0===s?void 0:s.value,startTime:$.startDate,supplierId:null===(d=$.supplierId)||void 0===d?void 0:d.value}}).data,_=(h=void 0===h?{slaBreachPercentage:[]}:h).slaBreachPercentage,T=function(e){e.reflow()};return t(18393)(ek()),_&&(0,eN.jsx)(nu,{name:"SlaBreachPercentageChart",removeChart:I,title:"SLA Breach (Percentage)",openModal:b,setOpenModal:x,filtersComponent:(0,eN.jsx)(aV,{filters:$,initialFilters:g,setFilters:y}),activeFiltersComponent:(0,eN.jsx)(nJ,{filters:$}),children:(0,eN.jsx)(eJ(),{callback:T,constructorType:"chart",Highcharts:ek(),options:{chart:{type:"column"},exporting:{buttons:{contextButton:{align:"right",x:0,y:5,verticalAlign:"top",symbol:"menuball"}}},title:{text:null},series:[{name:"%",data:_.map(function(e){return{name:(0,eQ.Z)(new Date(e.date),"dd LLL yyyy"),y:e.avg||0}}),showInLegend:!1,color:"#1E88E5"}],xAxis:{type:"category",title:null},yAxis:{title:{text:"Percentage"}}},ref:n})})}),aK=t(27812),a0=t(76600),a1=t(2305),a3=t(49501),a2=t(58594),a6=t(93750),a9=t(55863);function a5(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function a8(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a5(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a5(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var a4=function(e){var n={};return e.lg.map(function(e){return n=a8(a8({},n),{},(0,eh.Z)({},e.i,!0))}),n},a7=function(e){var n=e.newLayout,t=e.preLayout.lg.filter(function(e){return n[e.i]}),r=Object.keys(n).map(function(e){return{name:e,status:n[e]}}).filter(function(e){return!t.find(function(n){return n.i===e.name})}).filter(function(e){return e.status}).map(function(e){return{i:e.name,w:4,h:4,x:0,y:0,minW:4,maxW:12,minH:4,maxH:4}});return[].concat((0,aK.Z)(t),(0,aK.Z)(r))},ie=function(e){var n,t,r=e.layout,a=e.setLayout,i=e.onSuccess;e.category;var o=(0,a9.q)(),s=(0,np.cI)({defaultValues:a4(r)}),d=s.control,c=s.errors,l=s.handleSubmit,u=s.register,m=null===(n=o.admin)||void 0===n?void 0:null===(t=n.meta)||void 0===t?void 0:t.availableCharts,I=function(e){a({lg:a7({newLayout:e,preLayout:r})}),i()},p={control:d,errors:c,register:u};return(0,eN.jsx)(a0.Z,{id:"offCanvasForm",handleSubmit:l(I),children:(0,eN.jsx)(eN.Fragment,{children:(null!=m?m:[]).map(function(e){return(0,eN.jsx)(a1.Z,{bordered:!0,style:{marginBottom:"5px"},children:(0,eN.jsx)(it,{children:(0,eN.jsx)(eo.Z,{children:(0,eN.jsx)(es.Z,{md:12,children:(0,eN.jsx)(a3.Z,{label:"",children:(0,eN.jsx)(a2.Z,a8(a8({size:"xs"},p),{},{name:e.value,data:[{label:e.label,key:e.i,value:!0}]}))})})})})})})})})},it=(0,ei.ZP)(a6.Z).withConfig({displayName:"addChart__StyledCardBody",componentId:"sc-9g6xo7-0"})([""]);function ir(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function ia(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ir(Object(t),!0).forEach(function(n){(0,eh.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ir(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}ie.defaultProps={};var ii=(0,ej.memo)(function(e){var n,t,r,a,i,o,s,d=e.category,c=e.locationId,l=e.supplierId,u=(0,eP.WidthProvider)(eP.Responsive),m=(0,ej.useContext)(eA.Z),I=(0,nI.x)().user,p=(0,ej.useRef)([]),g=(0,a9.q)(),v=ia(ia(ia({},eS(eD.find(function(e){return e.default}))),(o=(i={accountId:I.accountId,accountType:I.accountType}).accountId,"admin"===i.accountType?{adminId:o}:{accountId:o})),{},{locationId:c,supplierId:l}),$=(0,ej.useState)(v)[0],y=null===(n=g.admin)||void 0===n?void 0:null===(t=n.meta)||void 0===t?void 0:t.availableCharts,f=null===(r=g.admin)||void 0===r?void 0:null===(a=r.meta)||void 0===a?void 0:a.prevAvailableCharts;(0,ej.useEffect)(function(){var e,n;!eC(y).differenceWith(f,eC.isEqual).isEmpty()&&(window.localStorage.removeItem("dashboardNewLayout_".concat(d)),_({lg:[]}))},[y,d,f]);var b,x=(0,ej.useState)(JSON.parse(window.localStorage.getItem("dashboardNewLayout_".concat(d)))||ee[d]),h=x[0],_=x[1],T=function(){window.localStorage.removeItem("dashboardNewLayout_".concat(d)),_(ee[d])},j=(b=(0,ex.Z)(eT().mark(function e(n,t){return eT().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.setItem("dashboardNewLayout_".concat(d),JSON.stringify(t));case 1:case"end":return e.stop()}},e)})),function(e,n){return b.apply(this,arguments)}),C=function(e,n){var t=e.findIndex(function(e){return e.i===n.i}),r=null===(a=p.current[t])||void 0===a?void 0:a.chart;if(r){var a,i,o=null===(i=p.current[t])||void 0===i?void 0:i.container.current.parentElement,s=o.clientHeight,d=o.clientWidth;r.setSize(d,s)}},P=function(e){_(e),window.localStorage.setItem("dashboardNewLayout_".concat(d),JSON.stringify(e))},A=function(e,n){var t={lg:eC.reject(h.lg,{i:n})};_(t),window.localStorage.setItem("dashboardNewLayout_".concat(d),JSON.stringify(t))},O=function(e){m.show({content:(0,eN.jsx)(ie,{layout:h,setLayout:P,onSuccess:w,category:d}),submit:!0,title:"View charts list",width:"30%"})},w=function(){m.close()};return(0,eN.jsx)(eN.Fragment,{children:(0,eN.jsxs)(eo.Z,{children:[(0,eN.jsxs)(es.Z,{md:6,children:[(0,eN.jsx)(io,{context:"info",content:"Reset Layout",onClick:T,size:"sm"}),(0,eN.jsx)(io,{context:"secondary",content:"Add charts",onClick:O,size:"sm"})]}),(0,eN.jsx)(es.Z,{md:12,children:(0,eN.jsx)(u,{breakpoints:{lg:1200,sm:768},cols:{lg:12,sm:6},className:"layout",draggableHandle:".dragHandle",layouts:h,onLayoutChange:function(e,n){return j(e,n)},onResizeStop:C,children:null==h?void 0:h.lg.filter(function(e){return en[e.i]}).map(function(e,n){var t=en[e.i];return(0,eN.jsx)("div",{"data-key":e.i,children:(0,eN.jsx)(t,{filters:$,ref:function(e){return p.current[n]=e},removeChart:function(e,n){return A(e,n)}})},e.i)})})})]})})},function(e,n){return!0}),io=(0,ei.ZP)(eO.Z).withConfig({displayName:"chart__StyledButton",componentId:"sc-33dnb4-0"})(["align-self:flex-end;margin-right:5px;"]);ii.defaultProps={accountId:null,locationId:null};var is=function(){var e=(0,et.useRouter)(),n=ee[e.query.category]?e.query.category:"overview";return(0,eN.jsxs)(eo.Z,{children:[(0,eN.jsx)(es.Z,{md:1,children:(0,eN.jsx)(id,{children:(0,eN.jsx)(ed.Z,{className:"test",flush:!0,children:(0,eN.jsx)(ec.Z,{children:(0,eN.jsx)(el.Z,{to:"/dashboard/data/business?category=overview",children:"Overview"})})})})}),(0,eN.jsx)(es.Z,{md:11,children:(0,eN.jsx)(ii,{category:n})},n)]})},id=ei.ZP.div.withConfig({displayName:"view__StyledMenu",componentId:"sc-126if1g-0"})(["a{border:none;color:",";}"],function(e){return e.theme.COLOUR.secondary}),ic=function(){var e,n,t=(0,a9.q)();return(0,nI.x)()?null!=t&&null!==(e=t.admin)&&void 0!==e&&null!==(n=e.modules)&&void 0!==n&&n.dataCharts?(0,eN.jsx)(ea.Z,{pageHeading:{heading:"Data - Charts"},View:(0,eN.jsx)(is,{})}):(er().push("/404"),null):(er().push("/account/sign-in"),null)}},5597:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/data/business",function(){return t(32879)}])}},function(e){e.O(0,[3662,6898,2283,212,8890,1100,1336,5020,6043,5370,3776,6540,1023,2797,6075,7145,9619,9774,2888,179],function(){return e(e.s=5597)}),_N_E=e.O()}]);