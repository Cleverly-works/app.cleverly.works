(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4064],{34193:function(n,e,t){"use strict";var r=t(64836);e.Z=void 0;var i=r(t(64938)),o=t(85893);e.Z=(0,i.default)((0,o.jsx)("path",{d:"m12 5.69 5 4.5V18h-2v-6H9v6H7v-7.81zM12 3 2 12h3v8h6v-6h2v6h6v-8h3z"}),"HomeOutlined")},8602:function(n,e,t){"use strict";var r=t(82066),i=t(85893);e.Z=(0,r.Z)((0,i.jsx)("path",{d:"M2 20h20v-4H2zm2-3h2v2H4zM2 4v4h20V4zm4 3H4V5h2zm-4 7h20v-4H2zm2-3h2v2H4z"}),"Storage")},58951:function(n,e,t){"use strict";t.d(e,{Z:function(){return b}});var r=t(63366),i=t(87462),o=t(67294),a=t(63961),s=t(58510),u=t(90948),d=t(14136),c=t(71657),l=t(15861),m=t(1977),p=t(8027);function f(n){return(0,p.ZP)("MuiDialogContentText",n)}(0,m.Z)("MuiDialogContentText",["root"]);var h=t(85893);let _=["children","className"],g=n=>{let{classes:e}=n,t=(0,s.Z)({root:["root"]},f,e);return(0,i.Z)({},e,t)},y=(0,u.ZP)(l.Z,{shouldForwardProp:n=>(0,d.Z)(n)||"classes"===n,name:"MuiDialogContentText",slot:"Root",overridesResolver:(n,e)=>e.root})({}),v=o.forwardRef(function(n,e){let t=(0,c.Z)({props:n,name:"MuiDialogContentText"}),{className:o}=t,s=(0,r.Z)(t,_),u=g(s);return(0,h.jsx)(y,(0,i.Z)({component:"p",variant:"body1",color:"text.secondary",ref:e,ownerState:s,className:(0,a.Z)(u.root,o)},t,{classes:u}))});var b=v},37645:function(n,e,t){"use strict";var r=t(87462),i=t(63366),o=t(67294),a=t(63961),s=t(58510),u=t(15861),d=t(90948),c=t(71657),l=t(4472),m=t(34182),p=t(85893);let f=["className","id"],h=n=>{let{classes:e}=n;return(0,s.Z)({root:["root"]},l.a,e)},_=(0,d.ZP)(u.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(n,e)=>e.root})({padding:"16px 24px",flex:"0 0 auto"}),g=o.forwardRef(function(n,e){let t=(0,c.Z)({props:n,name:"MuiDialogTitle"}),{className:s,id:u}=t,d=(0,i.Z)(t,f),l=h(t),{titleId:g=u}=o.useContext(m.Z);return(0,p.jsx)(_,(0,r.Z)({component:"h2",className:(0,a.Z)(l.root,s),ownerState:t,ref:e,variant:"h6",id:null!=u?u:g},d))});e.Z=g},30845:function(n,e){"use strict";var t=Number.isNaN||function(n){return"number"==typeof n&&n!=n};function r(n,e){return!!(n===e||t(n)&&t(e))}function i(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!r(n[t],e[t]))return!1;return!0}e.Z=function(n,e){void 0===e&&(e=i);var t,r,o=[],a=!1;return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return a&&t===this&&e(i,o)||(r=n.apply(this,i),a=!0,t=this,o=i),r}}},15641:function(n,e,t){"use strict";t.d(e,{z:function(){return o}});var r,i=t(71383),o=(0,t(75063).Ps)(r||(r=(0,i.Z)(["\n  fragment AccountFields on Account {\n    id\n    type\n    name\n    status\n    vatId\n  }\n"])))},18574:function(n,e,t){"use strict";t.d(e,{F:function(){return k}});var r=t(59499),i=t(10166),o=t(50135),a=t(98456),s=t(16143),u=t(80482),d=t(23776),c=t(27812),l=t(4730),m=t(74061),p=t(6498),f=t(61730),h=t(75438),_=t(15861),g=t(67294),y=t(85893),v=["children"];function b(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function $(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?b(Object(t),!0).forEach(function(e){(0,r.Z)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var I=(0,g.createContext)({}),q=(0,g.forwardRef)(function(n,e){var t=(0,g.useContext)(I);return(0,y.jsx)("div",$($({ref:e},n),t))}),x=(0,g.forwardRef)(function(n,e){var t=n.children,r=(0,l.Z)(n,v),i=[];t.forEach(function(n){i.push(n),i.push.apply(i,(0,c.Z)(n.children||[]))});var o,a,s=(0,p.u)(),u=(0,f.Z)(s.breakpoints.up("sm"),{noSsr:!0}),d=i.length,h=u?36:48,_=function(n){return n.hasOwnProperty("group")?48:h},b=(a=(0,g.useRef)(null),(0,g.useEffect)(function(){null!=a.current&&a.current.resetAfterIndex(0,!0)},[d]),a);return(0,y.jsx)("div",{ref:e,children:(0,y.jsx)(I.Provider,{value:r,children:(0,y.jsx)(m.S_,{itemData:i,height:(d>8?8*h:i.map(_).reduce(function(n,e){return n+e},0))+16,width:"100%",ref:b,outerElementType:q,innerElementType:"ul",itemSize:function(n){return _(i[n])},overscanCount:5,itemCount:d,children:S})})})});function S(n){var e=n.data,t=n.index,r=n.style,i=e[t],o=$($({},r),{},{top:r.top+8});return i.hasOwnProperty("group")?(0,y.jsx)(h.Z,{component:"div",style:o,children:i.group},i.key):(0,y.jsx)(_.Z,$($({component:"li"},i[0]),{},{noWrap:!0,style:o,children:i[1].label}))}function w(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function j(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?w(Object(t),!0).forEach(function(e){(0,r.Z)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var k=function(n){var e=n.label,t=n.loading,r=n.placeholder,i=n.error,s=n.helperText,u=n.inputProps;return(0,y.jsx)(O,j(j({},n),{},{disableListWrap:!0,PopperComponent:A,ListboxComponent:x,renderInput:function(n){return(0,y.jsx)(o.Z,j(j(j({},n),u),{},{error:i,helperText:s,label:e,placeholder:r,color:"secondary",variant:"standard",InputProps:j(j(j({},n.InputProps),(null==u?void 0:u.InputProps)||{}),{},{endAdornment:(0,y.jsxs)(y.Fragment,{children:[t?(0,y.jsx)(a.Z,{color:"inherit",size:20}):null,n.InputProps.endAdornment]})})}))},renderOption:function(n,e,t){return[n,e,t.index]},renderGroup:function(n){return n}}))};k.defaultProps={value:null,onChange:function(){},label:"",loading:!1,error:!1,onOpen:function(){},options:[],inputProps:{},withoutSelectIcon:!1};var A=(0,i.Z)(s.Z)((0,r.Z)({zIndex:"12000 !important"},"& .".concat(u.Z.listbox),{boxSizing:"border-box","& ul":{padding:0,margin:0}})),O=(0,i.Z)(d.Z)(function(n){return{"& .MuiAutocomplete-root":{cursor:"pointer"},"& .MuiAutocomplete-popper":{zIndex:"12000 "},"& .MuiAutocomplete-endAdornment":{"& .MuiButtonBase-root.MuiIconButton-root.MuiAutocomplete-popupIndicator":{"& .MuiSvgIcon-root":j({},n.withoutSelectIcon&&{display:"none"})}}}})},6911:function(n,e,t){"use strict";t.d(e,{q:function(){return f}});var r=t(59499),i=t(4730),o=t(23776),a=t(87918),s=t(50135),u=t(98456),d=t(67294),c=t(85893),l=["loading","setSearch","textFieldProps"];function m(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function p(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?m(Object(t),!0).forEach(function(e){(0,r.Z)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var f=function(n){var e=n.loading,t=n.setSearch,r=n.textFieldProps,m=(0,i.Z)(n,l),f=(0,d.useState)(""),h=f[0],_=f[1];return(0,d.useEffect)(function(){var n=setTimeout(function(){t(h)},500);return function(){return clearTimeout(n)}},[h,t]),(0,c.jsx)(o.Z,p(p({},m),{},{loading:e,onInputChange:function(n,e){_(e)},getOptionLabel:function(n){return n.label},renderTags:function(n,e){return n.map(function(n,t){return(0,c.jsx)(a.Z,p({size:"small",label:n.label},e({index:t})))})},renderInput:function(n){return(0,c.jsx)(s.Z,p(p(p({},n),r),{},{InputProps:p(p(p({},n.InputProps),r.InputProps||{}),{},{endAdornment:(0,c.jsxs)(c.Fragment,{children:[e?(0,c.jsx)(u.Z,{color:"inherit",size:20}):null,n.InputProps.endAdornment]})})}))}}))};f.defaultProps={color:"secondary",onChange:function(){},options:[],onOpen:function(){},setSearch:function(){},textFieldProps:{}}},59636:function(n,e,t){"use strict";t.d(e,{H_:function(){return y},Vw:function(){return I},aL:function(){return h},iU:function(){return q},pf:function(){return _},sW:function(){return $},wd:function(){return g},xY:function(){return v},yT:function(){return b}});var r,i,o,a,s,u,d,c,l,m=t(71383),p=t(75063),f=t(4431),h=(0,p.Ps)(r||(r=(0,m.Z)(["\n  fragment JobFields on Job {\n    access\n    issueReportedDescription\n    adminId\n    costCategory\n    createdAt\n    description\n    id\n    meta\n    pricing\n    reference\n    scheduledAt\n    status\n    supplierLabourAmount\n    supplierMaterialsAmount\n    timing\n    timingEnd\n    timingNormalHours\n    timingStart\n    title\n    type\n    siteVisitStart\n    siteVisitEnd\n    siteVisitWeekends\n    amount\n    number\n    quoted\n    timingStatus\n    correctDuration\n    correctStart\n    correctEnd\n  }\n"]))),_=(0,p.Ps)(i||(i=(0,m.Z)(["\n  fragment JobQuoteFields on Job {\n    quoted\n    quoteNumber\n    quoteDue\n    quoteDueSupplier\n    quoteCharge\n  }\n"]))),g=(0,p.Ps)(o||(o=(0,m.Z)(["\n  fragment JobAdminFields on Job {\n    supplierId\n    supplierUserId\n  }\n"]))),y=(0,p.Ps)(a||(a=(0,m.Z)(["\n  fragment JobSupplierFields on Job {\n    supplierId\n    supplierUserId\n  }\n"]))),v=(0,p.Ps)(s||(s=(0,m.Z)(["\n  mutation UpdateJob(\n    $id: Int!\n    $changes: Job_set_input\n    $timing: [JobTiming_insert_input!]!\n    $_append: Job_append_input = {}\n  ) {\n    update_Job_by_pk(pk_columns: { id: $id }, _set: $changes, _append: $_append) {\n      id\n    }\n    insert_JobTiming(objects: $timing) {\n      returning {\n        id\n        status\n        createdAt\n      }\n    }\n  }\n"]))),b=(0,p.Ps)(u||(u=(0,m.Z)(["\n  mutation InsertJobTiming($timing: [JobTiming_insert_input!]!) {\n    insert_JobTiming(objects: $timing) {\n      returning {\n        id\n        status\n        createdAt\n      }\n    }\n  }\n"]))),$=(0,p.Ps)(d||(d=(0,m.Z)(['\n  query GetJobHistory(\n    $jobId: Int\n    $locationId: Int!\n    $limit: Int\n    $offset: Int\n    $serviceId: Int\n    $startDate: timestamptz!\n  ) {\n    jobs: Job(\n      limit: $limit\n      offset: $offset\n      order_by: { createdAt: desc }\n      where: {\n        createdAt: { _gte: $startDate }\n        id: { _neq: $jobId }\n        locationId: { _eq: $locationId }\n        serviceId: { _eq: $serviceId }\n        status: { _nin: ["pending", "raised", "offered", "accepted", "inProgress"] }\n      }\n    ) {\n      id\n      title\n      status\n      scheduledAt\n      createdAt\n      meta\n      service: Service {\n        id\n        name\n      }\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        id\n        taxonomyId\n        comments\n        taxonomy: Taxonomy {\n          name\n        }\n      }\n    }\n    meta: Job_aggregate(\n      where: {\n        createdAt: { _gte: $startDate }\n        id: { _neq: $jobId }\n        locationId: { _eq: $locationId }\n        serviceId: { _eq: $serviceId }\n        status: { _nin: ["pending", "raised", "offered", "accepted", "inProgress"] }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n']))),I=(0,p.Ps)(c||(c=(0,m.Z)(['\n  query GetJob($jobId: Int!) {\n    job: Job_by_pk(id: $jobId) {\n      access\n      costCategory\n      customerSpendThreshold\n      description\n      supplierLabourAmount\n      supplierMaterialsAmount\n      quoteDue\n      quoteNumber\n      id\n      number\n      meta\n      paymentMethod\n      reference\n      status\n      title\n      type\n      quoted\n      invoices: Invoices(order_by: { createdAt: desc }) {\n        id\n        invoiceNumber\n      }\n      quotations: SupplierQuotes {\n        id\n        quoteNumber\n        status\n        lineItems: SupplierQuoteLineItems {\n          id\n          description\n          item\n          qty\n          qtyUnit\n          quoteId\n          total\n          type\n          unitRate\n          supplierTotal\n        }\n        supplier: Supplier {\n          id\n          type\n          name\n          accountUsers: Account_Users {\n            user: User {\n              id\n              fullName\n              nameFirst\n              nameLast\n              phone\n              email\n              devices: UserDevices(where: { status: { _eq: "active" } }) {\n                id\n                playerId\n              }\n            }\n          }\n        }\n      }\n      admin: Admin {\n        id\n        name\n      }\n      service: Service {\n        id\n        name\n      }\n      manager: Manager {\n        id\n        nameFirst\n        nameLast\n      }\n      customer: Customer {\n        id\n        name\n        website\n        slas: SLAs(where: { entity: { _eq: "Account" } }) {\n          id\n          entity\n          entityId\n          onSite\n          onSiteUnit\n          jobReport\n          jobReportUnit\n          completion\n          completionUnit\n          notes\n          inUse\n          normalRate\n          oohRate\n          premiumRate\n          minimumInterval\n          minimumLength\n          slaId\n          sla: SLA {\n            id\n            name\n            notes\n            normalRate\n            oohRate\n            premiumRate\n            onSite\n            onSiteUnit\n            jobReport\n            jobReportUnit\n            completion\n            completionUnit\n            minimumInterval\n            minimumLength\n          }\n        }\n      }\n      customerUser: CustomerUser {\n        id\n        nameFirst\n        nameLast\n        fullName\n        email\n        phone\n      }\n      supplier: Supplier {\n        id\n        name\n        contactUsers: Account_Users(where: { isContact: { _eq: true } }) {\n          id\n          role\n          position\n          isContact\n          lastSignInAt\n          userId\n          user: User {\n            id\n            fullName\n            nameFirst\n            nameLast\n            email\n            phone\n          }\n        }\n      }\n      supplierUser: SupplierUser {\n        id\n        fullName\n        nameFirst\n        nameLast\n        email\n        phone\n      }\n      location: Location {\n        id\n        name\n        addresses: Addresses(where: { entity: { _eq: "Location" } }) {\n          ...AddressEntityFields\n          address: Address {\n            ...AddressFields\n            country: Country {\n              id\n              name\n            }\n          }\n        }\n        slas: SLAs(where: { entity: { _eq: "Location" } }) {\n          id\n          entity\n          entityId\n          onSite\n          onSiteUnit\n          jobReport\n          jobReportUnit\n          completion\n          completionUnit\n          notes\n          inUse\n          normalRate\n          oohRate\n          premiumRate\n          minimumInterval\n          minimumLength\n          slaId\n          sla: SLA {\n            id\n            name\n            notes\n            normalRate\n            oohRate\n            premiumRate\n            onSite\n            onSiteUnit\n            jobReport\n            jobReportUnit\n            completion\n            completionUnit\n            minimumInterval\n            minimumLength\n          }\n        }\n      }\n      sla: SLA {\n        id\n        name\n        notes\n        normalRate\n        oohRate\n        premiumRate\n        onSite\n        onSiteUnit\n        jobReport\n        jobReportUnit\n        completion\n        completionUnit\n        minimumInterval\n        minimumLength\n      }\n      costCategoryTaxonomy: CostCategory {\n        id\n        name\n      }\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        id\n        taxonomyId\n        comments\n        taxonomy: Taxonomy {\n          name\n        }\n      }\n    }\n  }\n  ',"\n  ","\n"])),f.WW,f.MR),q=(0,p.Ps)(l||(l=(0,m.Z)(["\n  mutation calculateJobFinance($jobId: Int!, $invoiceType: String!) {\n    calculateJobFinance(jobId: $jobId, invoiceType: $invoiceType) {\n      data\n    }\n  }\n"])))},18479:function(n,e,t){"use strict";t.d(e,{w:function(){return h},L:function(){return f}});var r,i,o,a,s=t(71383),u=t(75063),d=t(15641),c=t(59636),l=t(4431),m=(0,u.Ps)(r||(r=(0,s.Z)(["\n  fragment QuoteFields on Job {\n    quoteNumber\n    quoteDue\n    quoteCharge\n  }\n"])));(0,u.Ps)(i||(i=(0,s.Z)(["\n  query Quote($id: Int!) {\n    job: Job_by_pk(id: $id) {\n      id\n      title\n      description\n      costCategory\n      status\n      workStatus\n      scheduledAt\n      createdAt\n      customerId\n      customerUserId\n      locationId\n      managerId\n      parentId\n      serviceId\n      slaId\n      tenantId\n      reference\n      amount\n      accountByTenantid {\n        id\n        companyNumber\n        createdAt\n        name\n        status\n        type\n        updatedAt\n        website\n        clientType\n        managerId\n        vatId\n        meta\n        media: Media {\n          id\n          medium: Medium {\n            id\n            category\n            filename\n            meta\n            type\n          }\n        }\n        manager: Manager {\n          id\n          fullName\n        }\n      }\n      customer: Account {\n        id\n        companyNumber\n        createdAt\n        name\n        status\n        type\n        updatedAt\n        website\n        clientType\n        managerId\n        vatId\n        meta\n        media: Media {\n          id\n          medium: Medium {\n            id\n            category\n            filename\n            meta\n            type\n          }\n        }\n        manager: Manager {\n          id\n          fullName\n        }\n      }\n      customerUser: CustomerUser {\n        id\n        name: nameFirst\n        nameFirst\n        nameLast\n        phone\n        status\n        email\n        createdAt\n        fullName\n        accounts: Account_Users {\n          id\n          role\n          position\n          isContact\n          status\n          account: Account {\n            id\n            name\n            type\n          }\n        }\n      }\n      expenses: Expenses {\n        id\n        paid\n        description\n        amount\n        markup\n        vat\n      }\n      location: Location {\n        id\n        access\n        createdAt\n        name\n        contactUserId\n      }\n      messages: Messages {\n        id\n        message\n        priority\n        taskId\n        jobId\n        locationId\n        description\n      }\n      service: Service {\n        id\n        name\n        countryId\n        currencyId\n      }\n      supplier: Suplier {\n        id\n        companyNumber\n        createdAt\n        name\n        status\n        type\n        updatedAt\n        website\n        clientType\n        managerId\n        vatId\n        meta\n        media: Media {\n          id\n          medium: Medium {\n            id\n            category\n            filename\n            meta\n            type\n          }\n        }\n        manager: Manager {\n          id\n          fullName\n        }\n      }\n      manager: Manager {\n        id\n        name: nameFirst\n        nameFirst\n        nameLast\n        phone\n        status\n        email\n        createdAt\n        fullName\n        accounts: Account_Users {\n          id\n          role\n          position\n          isContact\n          status\n          account: Account {\n            id\n            name\n            type\n          }\n        }\n      }\n      timings: JobTimings {\n        id\n        status\n        createdAt\n      }\n    }\n  }\n"])));var p=t(69496),f=(0,u.Ps)(o||(o=(0,s.Z)(["\n  query GetQuotes(\n    $endDate: timestamptz\n    $limit: Int\n    $offset: Int\n    $orderBy: Job_order_by!\n    $q: String\n    $startDate: timestamptz\n    $status: [String!]\n    $type: String\n  ) {\n    quotes: Job(\n      limit: $limit\n      offset: $offset\n      where: {\n        _and: [\n          {\n            _or: [\n              { description: { _ilike: $q } }\n              { reference: { _ilike: $q } }\n              { title: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { Customer: { name: { _ilike: $q } } }\n              { CustomerUser: { email: { _ilike: $q } } }\n              { Supplier: { name: { _ilike: $q } } }\n              { SupplierUser: { email: { _ilike: $q } } }\n              { Location: { name: { _ilike: $q } } }\n              { Taxonomy: { Taxonomy: { name: { _ilike: $q } } } }\n            ]\n          }\n        ]\n        createdAt: { _gte: $startDate }\n        quoteDue: { _lte: $endDate }\n        status: { _in: $status }\n        quoted: { _eq: true }\n        type: { _eq: $type }\n      }\n      order_by: [$orderBy]\n    ) {\n      ...JobFields\n      ...JobSupplierFields\n      ...QuoteFields\n      quotations: SupplierQuotes {\n        id\n        createdAt\n        jobId\n        methodStatement\n        notes\n        quoteNumber\n        startDate\n        status\n        totalDuration\n        totalDurationUnit\n        updatedAt\n        siteVisitAt\n        supplier: Supplier {\n          ...AccountFields\n        }\n      }\n      location: Location {\n        id\n        name\n      }\n      service: Service {\n        id\n        name\n      }\n      timings: JobTimings {\n        id\n        status\n        notes\n        createdAt\n        user: User {\n          ...UserFields\n        }\n      }\n    }\n    meta: Job_aggregate(\n      where: {\n        _and: [\n          {\n            _or: [\n              { description: { _ilike: $q } }\n              { reference: { _ilike: $q } }\n              { title: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { Customer: { name: { _ilike: $q } } }\n              { CustomerUser: { email: { _ilike: $q } } }\n              { Supplier: { name: { _ilike: $q } } }\n              { SupplierUser: { email: { _ilike: $q } } }\n              { Location: { name: { _ilike: $q } } }\n              { Taxonomy: { Taxonomy: { name: { _ilike: $q } } } }\n            ]\n          }\n        ]\n        createdAt: { _gte: $startDate }\n        quoteDue: { _lte: $endDate }\n        status: { _in: $status }\n        quoted: { _eq: true }\n        type: { _eq: $type }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),d.z,c.aL,m,c.H_,p.Px),h=function(n){var e=n.tagsWhere;return(0,u.Ps)(a||(a=(0,s.Z)(["\n  query GetQuotes(\n    $customerId: Int\n    $date: timestamptz\n    $endDate: timestamptz\n    $limit: Int\n    $locationId: Int\n    $managerId: Int\n    $customerManagerId: Int\n    $offset: Int\n    $orderBy: Job_order_by!\n    $q: String\n    $startDate: timestamptz\n    $status: [String!]\n    $supplierId: Int\n    $type: String\n    $userId: Int\n  ) {\n    quotes: Job(\n      limit: $limit\n      offset: $offset\n      where: {\n        _and: [\n          {\n            _or: [\n              { description: { _ilike: $q } }\n              { reference: { _ilike: $q } }\n              { title: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { Customer: { name: { _ilike: $q } } }\n              { CustomerUser: { email: { _ilike: $q } } }\n              { Supplier: { name: { _ilike: $q } } }\n              { SupplierUser: { email: { _ilike: $q } } }\n              { Location: { name: { _ilike: $q } } }\n              { Taxonomy: { Taxonomy: { name: { _ilike: $q } } } }\n            ]\n          }\n        ]\n        ",'\n        createdAt: { _gte: $startDate }\n        quoteDue: { _lte: $endDate }\n        status: { _in: $status }\n        type: { _eq: $type }\n        customerId: { _eq: $customerId }\n        locationId: { _eq: $locationId }\n        managerId: { _eq: $managerId }\n        Customer: { managerId: { _eq: $customerManagerId } }\n        supplierId: { _eq: $supplierId }\n        quoted: { _eq: true }\n        customerUserId: { _eq: $userId }\n      }\n      order_by: [$orderBy]\n    ) {\n      ...JobFields\n      ...JobAdminFields\n      ...QuoteFields\n      statusLog\n      quotations: SupplierQuotes {\n        id\n        createdAt\n        jobId\n        methodStatement\n        notes\n        quoteNumber\n        startDate\n        status\n        totalDuration\n        totalDurationUnit\n        updatedAt\n        siteVisitAt\n        supplier: Supplier {\n          ...AccountFields\n        }\n        lineItems: SupplierQuoteLineItems {\n          id\n          qty\n          total\n        }\n      }\n      supplier: Supplier {\n        ...AccountFields\n      }\n      admin: Admin {\n        id\n        name\n      }\n      customer: Customer {\n        ...AccountFields\n        manager: Manager {\n          id\n          fullName\n        }\n      }\n      location: Location {\n        id\n        name\n      }\n      sublocation: Sublocation {\n        id\n        name\n      }\n      manager: Manager {\n        ...UserFields\n      }\n      service: Service {\n        id\n        name\n      }\n      timings: JobTimings {\n        id\n        status\n        notes\n        createdAt\n        user: User {\n          ...UserFields\n        }\n      }\n      tags: Taxonomy(\n        where: {\n          entity: { _eq: "Job" }\n          Taxonomy: {\n            _and: [\n              {status: { _eq: "active" }}\n              {type: { _eq: "tags" }}\n            ]\n          }\n        }\n      ) {\n        id\n        tag: Taxonomy {\n          id\n          name\n          meta\n          type\n        }\n      }\n    }\n    meta: Job_aggregate(\n      where: {\n        _and: [\n          {\n            _or: [\n              { description: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { reference: { _ilike: $q } }\n              { title: { _ilike: $q } }\n              { Customer: { name: { _ilike: $q } } }\n              { CustomerUser: { email: { _ilike: $q } } }\n              { Supplier: { name: { _ilike: $q } } }\n              { SupplierUser: { email: { _ilike: $q } } }\n              { Location: { name: { _ilike: $q } } }\n              { Taxonomy: { Taxonomy: { name: { _ilike: $q } } } }\n            ]\n          }\n        ]\n        ',"\n        createdAt: { _gte: $startDate }\n        quoteDue: { _lte: $endDate }\n        status: { _in: $status }\n        customerId: { _eq: $customerId }\n        locationId: { _eq: $locationId }\n        managerId: { _eq: $managerId }\n        Customer: { managerId: { _eq: $customerManagerId } }\n        supplierId: { _eq: $supplierId }\n        quoted: { _eq: true }\n        type: { _eq: $type }\n        customerUserId: { _eq: $userId }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),e,e,d.z,l.WW,c.aL,c.wd,m,p.Px)}},87175:function(n,e,t){"use strict";var r,i=t(71383),o=t(75063),a=t(15641),s=t(59636),u=t(4431),d=t(69496),c=function(n){var e=n.tagsWhere;return(0,o.Ps)(r||(r=(0,i.Z)(["\n  query GetDashboardList(\n    $accountId: Int\n    $adminId: Int\n    $customerId: Int\n    $supplierId: Int\n    $locationId: Int\n    $managerId: Int\n    $number: String\n    $asAt: timestamptz\n    $jobHoldReasonId: Int\n    $limit: Int\n    $monthStart: timestamptz\n    $offset: Int\n    $orderBy: dashboard_home_details_order_by!\n    $q: String\n    $tileName: String\n    $dayStart: timestamptz\n    $userId: Int\n    $status: [String!]\n    $yearStart: timestamptz\n    $type: String\n  ) {\n    quotes: getDashboard_HomeTile_Details(\n      args: {\n        accountId: $accountId\n        adminId: $adminId\n        asAt: $asAt\n        jobHoldReasonId: $jobHoldReasonId\n        monthStart: $monthStart\n        tileName: $tileName\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n        locationId: $locationId\n        managerId: $managerId\n      }\n      where: {\n        _and: [\n          {\n            _or: [\n              { number: { _eq: $number } }\n              { reference: { _ilike: $q } }\n              { description: { _ilike: $q } }\n              { customerName: { _ilike: $q } }\n              { serviceName: { _ilike: $q } }\n              { assignedTo: { _ilike: $q } }\n              { supplierName: { _ilike: $q } }\n              { location: { _ilike: $q } }\n              { number: { _ilike: $q } }\n            ]\n          }\n        ]\n        ",'\n        customerId: { _eq: $customerId }\n        supplierId: { _eq: $supplierId }\n        status: { _in: $status }\n        Job: { type: { _eq: $type } }\n        locationId: { _eq: $locationId }\n        managerId: { _eq: $managerId }\n      }\n      order_by: [$orderBy]\n      limit: $limit\n      offset: $offset\n    ) {\n      Assets {\n        id\n        assetId\n        __typename\n      }\n      ...JobFields\n      ...JobAdminFields\n      admin: Admin {\n        id\n        name\n        __typename\n      }\n      customer: Customer {\n        ...AccountFields\n        __typename\n      }\n      location: Location {\n        id\n        name\n        __typename\n      }\n      manager: Manager {\n        ...UserFields\n        __typename\n      }\n      service: Service {\n        id\n        name\n        __typename\n      }\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        id\n        taxonomyId\n        comments\n        taxonomy: Taxonomy {\n          name\n          __typename\n        }\n        __typename\n      }\n      tags: Taxonomy(\n        where: {\n          entity: { _eq: "Job" }\n          Taxonomy: {\n            _and: [\n              {status: { _eq: "active" }}\n              {type: { _eq: "tags" }}\n            ]\n          }\n        }\n      ) {\n        id\n        tag: Taxonomy {\n          id\n          name\n          meta\n          type\n        }\n      }\n      sla: SLA {\n        id\n        name\n        __typename\n      }\n      supplier: Supplier {\n        ...AccountFields\n        __typename\n      }\n      supplierOffers: SupplierOffers {\n        status\n        rate\n        supplier: Supplier {\n          ...AccountFields\n          __typename\n        }\n        __typename\n      }\n      job: Job {\n        type\n      }\n      timings: JobTimings(order_by: { createdAt: asc }) {\n        id\n        status\n        createdAt\n        user: User {\n          ...UserFields\n          __typename\n        }\n        __typename\n      }\n      quotations: SupplierQuotes {\n        id\n        createdAt\n        jobId\n        methodStatement\n        notes\n        quoteNumber\n        startDate\n        status\n        totalDuration\n        totalDurationUnit\n        updatedAt\n        siteVisitAt\n        supplier: Supplier {\n          ...AccountFields\n        }\n      }\n      id: jobId\n      number\n      # location\n      priority\n      scheduledAt\n      assignedTo\n      jobHoldReason\n      locationId\n      meta\n      managerId\n      description\n      customerName\n      customerId\n      reference\n      serviceName\n      status\n      supplierId\n      supplierName\n      timingStart\n      type\n      quoteNumber\n      quoteDue\n      createdAt\n    }\n    meta: getDashboard_HomeTile_Details_aggregate(\n      args: {\n        accountId: $accountId\n        adminId: $adminId\n        asAt: $asAt\n        jobHoldReasonId: $jobHoldReasonId\n        monthStart: $monthStart\n        tileName: $tileName\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n      }\n      where: {\n        _and: [\n          {\n            _or: [\n              { reference: { _ilike: $q } }\n              { description: { _ilike: $q } }\n              { customerName: { _ilike: $q } }\n              { serviceName: { _ilike: $q } }\n              { assignedTo: { _ilike: $q } }\n              { supplierName: { _ilike: $q } }\n              { location: { _ilike: $q } }\n              { number: { _ilike: $q } }\n            ]\n          }\n        ]\n        ',"\n        customerId: { _eq: $customerId }\n        supplierId: { _eq: $supplierId }\n        number: { _eq: $number }\n        status: { _in: $status }\n        Job: { type: { _eq: $type } }\n        locationId: { _eq: $locationId }\n        managerId: { _eq: $managerId }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n        __typename\n      }\n      __typename\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),e,e,a.z,u.WW,s.aL,s.wd,d.Px)};e.Z=c},76301:function(n,e,t){"use strict";t.d(e,{Ak:function(){return N},Cj:function(){return V},K4:function(){return nr},Qn:function(){return E},RJ:function(){return H},SW:function(){return F},T_:function(){return W},UH:function(){return U},UM:function(){return ne},Ve:function(){return Y},_d:function(){return z},_f:function(){return nt},by:function(){return Q},cz:function(){return Z},he:function(){return L},j$:function(){return M},kB:function(){return X},kU:function(){return K},kx:function(){return J},nD:function(){return R},nP:function(){return no},pY:function(){return ni},qd:function(){return D},t1:function(){return G},yR:function(){return B},zR:function(){return nn}});var r,i,o,a,s,u,d,c,l,m,p,f,h,_,g,y,v,b,$,I,q,x,S,w,j,k,A,O,C,P=t(71383),T=t(75063),Z=(0,T.Ps)(r||(r=(0,P.Z)(["\n  query GetAddressForSelect($q: String, $entity: String!, $entityId: Int!) {\n    items: Address(\n      where: {\n        Address_Entities: { entity: { _eq: $entity }, entityId: { _eq: $entityId } }\n        _or: [\n          { addressLine1: { _eq: $q } }\n          { addressLine2: { _eq: $q } }\n          { addressLine3: { _eq: $q } }\n          { county: { _eq: $q } }\n          { postCode: { _eq: $q } }\n          { city: { _eq: $q } }\n        ]\n      }\n    ) {\n      label: addressLine1\n      value: id\n      id\n      name\n      addressLine1\n      addressLine2\n      addressLine3\n      postCode\n      county\n      country: Country {\n        name\n      }\n      city\n      Address_Entities {\n        invoice\n      }\n    }\n  }\n"]))),D=(0,T.Ps)(i||(i=(0,P.Z)(["\n  query GetAccountsForSelect($q: String, $type: String, $limit: Int, $offset: Int) {\n    items: Account(\n      where: { name: { _ilike: $q }, type: { _eq: $type } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]))),R=(0,T.Ps)(o||(o=(0,P.Z)(['\n  query GetTaxonomy($q: String, $id: Int) {\n    items: Taxonomy(\n      where: { type: { _eq: "assetCategory" }, status: { _eq: "active" } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      options: Taxonomies(\n        where: {\n          type: { _eq: "assetCategory" }\n          name: { _ilike: $q }\n          id: { _eq: $id }\n          status: { _eq: "active" }\n        }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']))),U=(0,T.Ps)(a||(a=(0,P.Z)(["\n  query GetAssetsForSelect($locationId: Int, $q: String, $categoryId: Int, $bookable: String) {\n    items: Asset(\n      where: {\n        categoryId: { _eq: $categoryId }\n        locationId: { _eq: $locationId }\n        name: { _ilike: $q }\n        bookable: { _eq: $bookable }\n      }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n      parent: ParentAsset {\n        id\n        name\n      }\n      media: Media {\n        id\n        item: Medium {\n          id\n          name\n          filename\n          meta\n          category\n          type\n        }\n      }\n    }\n  }\n"]))),F=(0,T.Ps)(s||(s=(0,P.Z)(['\n  query GetCustomersForSelect($q: String, $limit: Int, $offset: Int) {\n    items: Account(\n      where: { name: { _ilike: $q }, type: { _eq: "customer" } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      admin: Admins {\n        id: adminId\n      }\n      label: name\n      spendThreshold: meta(path: "$.finance.spendThreshold")\n      serviceRateLabour: meta(path: "$.finance.serviceRateLabour")\n      serviceRateExpenses: meta(path: "$.finance.serviceRateExpenses")\n      value: id\n    }\n  }\n']))),E=(0,T.Ps)(u||(u=(0,P.Z)(["\n  query GetJobsForSelect($_q: Int, $locationId: Int) {\n    items: Job(\n      where: {\n        Location: { id: { _eq: $locationId } }\n        _or: [{ id: { _eq: $_q } }, { Invoices: { id: { _eq: $_q } } }]\n      }\n      order_by: { title: asc }\n    ) {\n      label: label\n      value: id\n      number\n      createdAt\n      description\n      status\n      timingStart\n      title\n      type\n      Location {\n        name\n      }\n      Taxonomy {\n        Taxonomy {\n          shortJobDescription: name\n        }\n      }\n    }\n  }\n"]))),L=(0,T.Ps)(d||(d=(0,P.Z)(['\n  query GetManagersForSelect($userId: Int, $accountId: Int!, $q: String) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          role: { _in: ["owner", "manager"] }\n          status: { _eq: "active" }\n          Account: { id: { _eq: $accountId } }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n        id: { _neq: $userId }\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n']))),N=(0,T.Ps)(c||(c=(0,P.Z)(['\n  query GetManagersForSelect(\n    $userId: Int\n    $accountId: Int!\n    $q: String\n    $invoiceThreshold: numeric\n    $quoteThreshold: numeric\n  ) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          role: { _in: ["owner", "manager"] }\n          status: { _eq: "active" }\n          Account: { id: { _eq: $accountId } }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n        id: { _neq: $userId }\n        _and: [\n          {\n            _or: [\n              { invoiceThreshold: { _gt: $invoiceThreshold } }\n              { invoiceThreshold: { _is_null: true } }\n            ]\n          }\n          {\n            _or: [\n              { quoteThreshold: { _gt: $quoteThreshold } }\n              { quoteThreshold: { _is_null: true } }\n            ]\n          }\n        ]\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n']))),M=(0,T.Ps)(l||(l=(0,P.Z)(["\n  query GetPostCodeAreaForSelect($countryId: Int, $q: String) {\n    items: PostcodeArea(\n      where: { name: { _ilike: $q }, countryId: { _eq: $countryId } }\n      order_by: { name: asc }\n    ) {\n      area\n      label: name\n      value: id\n    }\n  }\n"]))),z=(0,T.Ps)(m||(m=(0,P.Z)(['\n  query GetPropertiesForSelect($where: Location_bool_exp, $limit: Int, $offset: Int) {\n    items: Location(where: $where, order_by: { name: asc }, limit: $limit, offset: $offset) {\n      label: name\n      value: id\n      access\n      permitsRequired\n      registeredAddress: Addresses(\n        where: { entity: { _eq: "Location" }, registered: { _eq: true } }\n      ) {\n        address: Address {\n          id\n          addressLine1\n          addressLine2\n          addressLine3\n          county\n          country: Country {\n            name\n          }\n          postCode\n          city\n        }\n      }\n    }\n  }\n']))),J=(0,T.Ps)(p||(p=(0,P.Z)(['\n  query GetServicesForSelect($q: String, $limit: Int, $offset: Int) {\n    items: Service(\n      where: { name: { _ilike: $q }, status: { _eq: "active" } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n']))),G=(0,T.Ps)(f||(f=(0,P.Z)(["\n  query GetSlasForSelect($q: String, $adminId: Int, $type: String) {\n    items: SLA(\n      where: { name: { _ilike: $q }, type: { _eq: $type }, adminId: { _eq: $adminId } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]))),W=(0,T.Ps)(h||(h=(0,P.Z)(["\n  query GetSlasForSelectNew($where: SLA_bool_exp, $limit: Int, $offset: Int) {\n    items: SLA(where: $where, order_by: { name: asc }, limit: $limit, offset: $offset) {\n      label: name\n      value: id\n    }\n  }\n"]))),Q=(0,T.Ps)(_||(_=(0,P.Z)(["\n  query GetSuppliersForSelect($where: Account_bool_exp, $limit: Int, $offset: Int) {\n    items: Account(where: $where, limit: $limit, offset: $offset, order_by: { name: asc }) {\n      label: name\n      value: id\n    }\n  }\n"]))),B=(0,T.Ps)(g||(g=(0,P.Z)(['\n  query GetUsersForSelect($accountId: Int, $q: String, $limit: Int, $offset: Int) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          accountId: { _eq: $accountId }\n          isContact: { _eq: true }\n          status: { _eq: "active" }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      order_by: { nameFirst: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      label: fullName\n      value: id\n      email\n      phone\n    }\n  }\n']))),H=(0,T.Ps)(y||(y=(0,P.Z)(['\n  query GetUsersForSelect($q: String) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n      email\n      phone\n    }\n  }\n']))),V=(0,T.Ps)(v||(v=(0,P.Z)(["\n  query GetTaxonomyGroupForSelect($q: String, $type: String!) {\n    items: Taxonomy(\n      where: { isGroup: { _eq: true }, name: { _ilike: $q }, type: { _eq: $type } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]))),Y=(0,T.Ps)(b||(b=(0,P.Z)(['\n  query GetTaxonomy($q: String) {\n    items: Taxonomy(where: { type: { _eq: "expenseCategoryGroup" } }, order_by: { name: asc }) {\n      label: name\n      options: Taxonomies(\n        where: { type: { _eq: "expenseCategory" }, name: { _ilike: $q } }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']))),K=(0,T.Ps)($||($=(0,P.Z)(['\n  query GetCompliancesForSelect($q: String, $locationId: Int) {\n    items: Taxonomy(where: { type: { _eq: "complianceCategory" } }, order_by: { name: asc }) {\n      label: name\n      options: Compliances(\n        where: {\n          name: { _ilike: $q }\n          Compliance_Entities: { Location: { id: { _eq: $locationId } } }\n        }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']))),X=(0,T.Ps)(I||(I=(0,P.Z)(["\n  query GetUserRole($userId: Int!, $accountId: Int!) {\n    accountUsers: Account_User(\n      where: { userId: { _eq: $userId }, accountId: { _eq: $accountId } }\n    ) {\n      role\n    }\n  }\n"]))),nn=(0,T.Ps)(q||(q=(0,P.Z)(["\n  query GetSublocationsForSelect($locationId: Int!, $q: String, $limit: Int, $offset: Int) {\n    items: Sublocation(\n      where: { name: { _ilike: $q }, locationId: { _eq: $locationId }, active: { _eq: true } }\n      limit: $limit\n      offset: $offset\n      order_by: { createdAt: desc }\n    ) {\n      value: id\n      label: name\n    }\n  }\n"]))),ne=(0,T.Ps)(x||(x=(0,P.Z)(['\n  query GetTaxonomy($q: String, $id: Int, $limit: Int, $offset: Int) {\n    items: Taxonomy(\n      where: {\n        id: { _eq: $id }\n        type: { _eq: "assetCategory" }\n        isGroup: { _eq: false }\n        status: { _eq: "active" }\n        name: { _ilike: $q }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n']))),nt=(0,T.Ps)(S||(S=(0,P.Z)(["\n  query GetTaxonomyForSelect(\n    $where: Taxonomy_bool_exp\n    $limit: Int\n    $offset: Int\n    $orderBy: Taxonomy_order_by!\n  ) {\n    items: Taxonomy(where: $where, limit: $limit, offset: $offset, order_by: [$orderBy]) {\n      value: id\n      label: name\n    }\n  }\n"])));(0,T.Ps)(w||(w=(0,P.Z)(['\n  query GetTagsForTask($q: String!, $limit: Int = 50, $offset: Int = 0) {\n    items: Taxonomy(\n      where: { name: { _ilike: $q }, status: { _eq: "active" }, type: { _eq: "taskTags" } }\n      limit: $limit\n      offset: $offset\n      order_by: { id: desc }\n    ) {\n      value: id\n      label: name\n    }\n  }\n']))),(0,T.Ps)(j||(j=(0,P.Z)(['\n  query GetTagsForEntity(\n    $entityId: Int\n    $entity: String!\n    $q: String!\n    $limit: Int = 50\n    $offset: Int = 0\n  ) {\n    tags: Taxonomy(\n      where: {\n        name: { _ilike: $q }\n        status: { _eq: "active" }\n        type: { _eq: "taskTags" }\n        _not: { Taxonomy_Entities: { entity: { _eq: $entity }, entityId: { _eq: $entityId } } }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { id: desc }\n    ) {\n      id\n      name\n      meta\n    }\n  }\n']))),(0,T.Ps)(k||(k=(0,P.Z)(['\n  query GetEntityTags($entityId: Int!, $entity: String!) {\n    tags: Taxonomy_Entity(\n      where: {\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n        Taxonomy: { status: { _eq: "active" }, type: { _eq: "taskTags" } }\n      }\n      order_by: { id: desc }\n    ) {\n      id\n      tag: Taxonomy {\n        id\n        name\n        meta\n      }\n    }\n  }\n'])));var nr=(0,T.Ps)(A||(A=(0,P.Z)(["\n  query GetCustomerManagers($accountId: Int, $q: String, $limit: Int, $offset: Int) {\n    items: User(\n      where: { Account_Users: { accountId: { _eq: $accountId } }, fullName: { _ilike: $q } }\n      order_by: { fullName: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n"]))),ni=(0,T.Ps)(O||(O=(0,P.Z)(["\n  query GetServiceSchedulesForSelect(\n    $q: String\n    $serviceId: Int\n    $entity: service_schedule_entity\n    $entityId: Int\n    $limit: Int = 50\n    $offset: Int = 0\n  ) {\n    items: ServiceSchedule(\n      where: {\n        name: { _ilike: $q }\n        serviceId: { _eq: $serviceId }\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]))),no=(0,T.Ps)(C||(C=(0,P.Z)(['\n  query GetPropertyById($id: Int!) {\n    item: Location_by_pk(id: $id) {\n      label: name\n      value: id\n      access\n      registeredAddress: Addresses(\n        where: { entity: { _eq: "Location" }, registered: { _eq: true } }\n      ) {\n        address: Address {\n          id\n          addressLine1\n          addressLine2\n          addressLine3\n          county\n          country: Country {\n            name\n          }\n          postCode\n          city\n        }\n      }\n    }\n  }\n'])))},42846:function(n,e,t){"use strict";t.d(e,{x:function(){return c}});var r=t(59499),i=t(67294),o=t(96486),a=t(87043),s=function(n){try{return JSON.parse(n)}catch(e){return!1}};function u(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function d(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?u(Object(t),!0).forEach(function(e){(0,r.Z)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var c=function(n){var e,t,u,c,l,m,p,f,h,_,g,y=n.filters,v=n.newFilters,b=n.initialSort,$=(0,i.useRef)(),I=(0,i.useState)({}),q=I[0],x=I[1],S=(0,i.useState)({}),w=S[0],j=S[1],k=b||{item:"createdAt",order:"desc"},A=(0,r.Z)({},(null===(e=$.current)||void 0===e?void 0:e.sort.item)||k.item,k.inneritem?(0,r.Z)({},k.inneritem,(null===(t=$.current)||void 0===t?void 0:t.sort.order)||k.order):(null===(u=$.current)||void 0===u?void 0:u.sort.order)||k.order);return(0,i.useEffect)(function(){var n=!(0,o.isEqual)(q,y),e=!(0,o.isEqual)(w,v);if(n&&(x(y),null==$||null===(r=$.current)||void 0===r||r.resetPagination()),e&&(j(v),null==$||null===(i=$.current)||void 0===i||i.resetPagination()),null!=$&&null!==(t=$.current)&&void 0!==t&&t.setSort&&!(n||e)){var t,r,i,a,s,u,d,c,l,m,p,f=null!==(a=$.current)&&void 0!==a&&null!==(s=a.sort)&&void 0!==s&&s.item&&null!==(u=$.current)&&void 0!==u&&null!==(d=u.sort)&&void 0!==d&&d.order?{item:null===(c=$.current)||void 0===c?void 0:null===(l=c.sort)||void 0===l?void 0:l.item,order:null===(m=$.current)||void 0===m?void 0:null===(p=m.sort)||void 0===p?void 0:p.order}:A;$.current.setSort(f)}},[y,v]),{initialData:d(d({},y),{},{newFilters:(null==v?void 0:v.length)>0?v:void 0,limit:(null===(c=$.current)||void 0===c?void 0:c.pageSize)==="Infinity"?null:parseInt(null===(l=$.current)||void 0===l?void 0:l.pageSize,10)||a.C1.paginationSize,offset:((null===(m=$.current)||void 0===m?void 0:m.currentPage)-1||0)*((null===(p=$.current)||void 0===p?void 0:p.pageSize)||a.C1.paginationSize),orderBy:s(null===(f=$.current)||void 0===f?void 0:null===(h=f.sort)||void 0===h?void 0:null===(_=h.item)||void 0===_?void 0:_.replace(/ORDER/i,null===(g=$.current)||void 0===g?void 0:g.sort.order))||A}),initialSort:b,ref:$}}},46353:function(n,e,t){"use strict";t.d(e,{Y:function(){return r}});var r=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Job",t="";return null!=n&&n.length&&(t="\n      Taxonomy: {\n      _and: [\n        { entity: { _eq: ".concat(e,' } }\n        {\n          Taxonomy: {\n            status: { _eq: "active" }\n            _and: [{ id: { _in: [').concat(n,'] } }, { type: { _eq: "tags" } }]\n          }\n        }\n      ]\n    }\n  ')),t}},69496:function(n,e,t){"use strict";t.d(e,{$E:function(){return R},AX:function(){return x},I4:function(){return q},JA:function(){return w},MT:function(){return C},Px:function(){return k},WF:function(){return j},ZA:function(){return E},a8:function(){return A},fA:function(){return D},fo:function(){return S},ge:function(){return F},iM:function(){return Z},nE:function(){return P},nh:function(){return T},r1:function(){return O},tW:function(){return L},uz:function(){return U}});var r,i,o,a,s,u,d,c,l,m,p,f,h,_,g,y,v,b,$=t(71383),I=t(75063),q=(0,I.Ps)(r||(r=(0,$.Z)(["\n  mutation InsertAccountUser($objects: [Account_User_insert_input!]!) {\n    insert_Account_User(objects: $objects) {\n      returning {\n        id\n      }\n    }\n  }\n"]))),x=(0,I.Ps)(i||(i=(0,$.Z)(["\n  mutation UpdateUser(\n    $id: Int!\n    $accountUserId: Int!\n    $accountUserChanges: Account_User_set_input\n    $changes: User_set_input\n    $updateAccountUser: Boolean!\n  ) {\n    update_Account_User_by_pk(pk_columns: { id: $accountUserId }, _set: $accountUserChanges)\n      @include(if: $updateAccountUser) {\n      id\n    }\n    update_User_by_pk(pk_columns: { id: $id }, _set: $changes) {\n      id\n    }\n  }\n"]))),S=(0,I.Ps)(o||(o=(0,$.Z)(["\n  query GetUsers(\n    $accountId: Int\n    $accountType: String\n    $date: timestamptz\n    $limit: Int\n    $offset: Int\n    $q: String\n    $orderBy: User_order_by!\n    $status: String\n  ) {\n    users: User(\n      limit: $limit\n      offset: $offset\n      where: {\n        Account_Users: { Account: { id: { _eq: $accountId }, type: { _eq: $accountType } } }\n        createdAt: { _eq: $date }\n        _or: [\n          { email: { _ilike: $q } }\n          { nameFirst: { _ilike: $q } }\n          { nameLast: { _ilike: $q } }\n        ]\n        status: { _eq: $status }\n      }\n      order_by: [$orderBy]\n    ) {\n      id\n      name: nameFirst\n      nameFirst\n      nameLast\n      phone\n      status\n      email\n      createdAt\n      meta\n      invoiceThreshold\n      quoteThreshold\n      media: Media {\n        id\n        medium: Medium {\n          id\n          category\n          filename\n          meta\n          type\n        }\n      }\n      accounts: Account_Users {\n        id\n        role\n        position\n        isContact\n        status\n        account: Account {\n          id\n          name\n          type\n        }\n        userLocations: User_Account_Locations {\n          accountLocationId\n        }\n      }\n    }\n    meta: User_aggregate(\n      where: {\n        Account_Users: { Account: { id: { _eq: $accountId }, type: { _eq: $accountType } } }\n        createdAt: { _eq: $date }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n        status: { _eq: $status }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"]))),w=(0,I.Ps)(a||(a=(0,$.Z)(["\n  query GetUser($id: Int!) {\n    user: User_by_pk(id: $id) {\n      id\n      fullName\n      name: nameFirst\n      nameFirst\n      nameLast\n      phone\n      status\n      email\n      createdAt\n      meta\n      invoiceThreshold\n      quoteThreshold\n      media: Media {\n        id\n        medium: Medium {\n          id\n          category\n          filename\n          meta\n          type\n        }\n      }\n      accounts: Account_Users {\n        id\n        role\n        position\n        isContact\n        status\n        account: Account {\n          id\n          name\n          type\n        }\n      }\n    }\n  }\n"]))),j=(0,I.Ps)(s||(s=(0,$.Z)(["\n  query CheckDuplicateEmail($email: String!) {\n    users: User_public(where: { email: { _eq: $email } }) {\n      id\n      nameFirst\n      nameLast\n      email\n      phone\n    }\n  }\n"]))),k=(0,I.Ps)(u||(u=(0,$.Z)(["\n  fragment UserFields on User {\n    id\n    email\n    nameFirst\n    nameLast\n    fullName\n    phone\n    status\n  }\n"]))),A=(0,I.Ps)(d||(d=(0,$.Z)(["\n  mutation SendGoogleAuthCode($code: String!, $id: Int!, $type: String!) {\n    createGoogleToken(code: $code, id: $id, type: $type) {\n      success\n      tokens\n      error\n    }\n  }\n"]))),O=(0,I.Ps)(c||(c=(0,$.Z)(["\n  mutation GenerateMSURL($type: String!, $id: Int!) {\n    genenrateMSURL(id: $id, type: $type) {\n      url\n    }\n  }\n"]))),C=(0,I.Ps)(l||(l=(0,$.Z)(["\n  mutation signoutMS($id: Int!, $type: String!, $email: String!) {\n    signoutMS(id: $id, type: $type, email: $email) {\n      error\n      msId\n      success\n    }\n  }\n"]))),P=(0,I.Ps)(m||(m=(0,$.Z)(["\n  query getAccountMeta($id: Int!) {\n    account: Account_by_pk(id: $id) {\n      meta\n    }\n  }\n"]))),T=(0,I.Ps)(p||(p=(0,$.Z)(["\n  query user($id: Int!) {\n    user: User_by_pk(id: $id) {\n      meta\n      invoiceThreshold\n      quoteThreshold\n    }\n  }\n"]))),Z=(0,I.Ps)(f||(f=(0,$.Z)(["\n  query GetAccountUserMeta($userId: Int!, $accountId: Int!) {\n    accountUser: Account_User(where: { userId: { _eq: $userId }, accountId: { _eq: $accountId } }) {\n      meta\n    }\n  }\n"]))),D=(0,I.Ps)(h||(h=(0,$.Z)(["\n  mutation UpdateAccountUserByUserIdAccoutId(\n    $userId: Int!\n    $accountId: Int!\n    $changes: Account_User_set_input!\n  ) {\n    update_Account_User(\n      where: { userId: { _eq: $userId }, accountId: { _eq: $accountId } }\n      _set: $changes\n    ) {\n      returning {\n        id\n      }\n    }\n  }\n"]))),R=(0,I.Ps)(_||(_=(0,$.Z)(["\n  mutation updateAccount($accountId: Int!, $set: Account_set_input!) {\n    update_Account_by_pk(pk_columns: { id: $accountId }, _set: $set) {\n      id\n    }\n  }\n"]))),U=(0,I.Ps)(g||(g=(0,$.Z)(["\n  mutation updateUserMeta($userId: Int!, $meta: jsonb!) {\n    update_User_by_pk(pk_columns: { id: $userId }, _set: { meta: $meta }) {\n      id\n      meta\n    }\n  }\n"]))),F=(0,I.Ps)(y||(y=(0,$.Z)(['\n  query userDevices($accountId: Int!) {\n    users: User(\n      where: {\n        Account_Users: { accountId: { _eq: $accountId }, status: { _eq: "active" } }\n        UserDevices: { status: { _eq: "active" } }\n        status: { _eq: "active" }\n      }\n    ) {\n      id\n      fullName\n      devices: UserDevices(\n        order_by: { updatedAt: desc_nulls_last }\n        where: { status: { _eq: "active" } }\n        limit: 1\n      ) {\n        id\n        playerId\n      }\n    }\n  }\n']))),E=(0,I.Ps)(v||(v=(0,$.Z)(['\n  query GetAccountLocations($accountId: Int, $limit: Int, $offset: Int) {\n    location: Location(\n      offset: $offset\n      limit: $limit\n      where: {\n        Account_Locations: {\n          accountId: { _eq: $accountId }\n          Account: { type: { _eq: "customer" } }\n        }\n      }\n    ) {\n      id\n      name\n      accountLocations: Account_Locations {\n        id\n      }\n      addresses: Addresses(where: { entity: { _eq: "Location" }, registered: { _eq: true } }) {\n        id\n        status\n        address: Address {\n          id\n          name\n          addressLine1\n          postCode\n        }\n      }\n    }\n    meta: Location_aggregate(\n      where: {\n        Account_Locations: {\n          accountId: { _eq: $accountId }\n          Account: { type: { _eq: "customer" } }\n        }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n']))),L=(0,I.Ps)(b||(b=(0,$.Z)(["\n  mutation InsertUserAccountLocations(\n    $accountUserId: Int!\n    $objects: [User_Account_Location_insert_input!]!\n  ) {\n    delete_User_Account_Location(where: { accountUserId: { _eq: $accountUserId } }) {\n      affected_rows\n    }\n    insert_User_Account_Location(objects: $objects) {\n      affected_rows\n      returning {\n        id\n      }\n    }\n  }\n"])))},48829:function(n,e,t){"use strict";t.d(e,{S:function(){return r}});var r=function(n,e){var t=document.createElement("a");"string"==typeof t.download?(document.body.appendChild(t),t.download=e,t.href=n,t.click(),document.body.removeChild(t)):location.replace(n)}},93673:function(n,e,t){"use strict";t.d(e,{x:function(){return r}});var r=[{text:"Reactive",value:"reactive",context:"#2EE6CA"},{text:"Planned Maintenance",value:"ppm",context:"#D67EFF"},{text:"Quote",value:"quote",context:"#7D7"},{text:"Compliance",value:"cppm",context:"#CC7429"}]},31189:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return n_}});var r=t(11163),i=t.n(r),o=t(38033),a=t(16835),s=t(59499),u=t(67294),d=t(6812),c=t(73359),l=t(26447),m=t(15861),p=t(11057),f=t(98456),h=t(90629),_=t(82066),g=t(85893),y=(0,_.Z)((0,g.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"}),"Notifications"),v=t(8602),b=t(30381),$=t.n(b),I=t(57460),q=t.n(I),x=t(55863),S=t(72936),w=t(42846),j=t(48829),k=t(61730),A=t(86886),O=t(50135),C=t(11994),P=t(42283),T=t(10166),Z=t(33754),D=t(3896),R=t(33366),U=t(19015),F=t(76301),E=t(18574),L=t(15050),N=t(6911);function M(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function z(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?M(Object(t),!0).forEach(function(e){(0,s.Z)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):M(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var J=function(n){var e=n.open,t=n.setOpen,r=n.initialFilters,i=(n.filters,n.setFilters),o=(0,k.Z)("(max-width: 400px)")?4:0,s=(0,S.x)(),m=s.hasRole,f=s.user,h=(0,D.X)("form_data_".concat(r.filterType),r),_=(0,a.Z)(h,2),y=_[0],v=_[1],b=(0,P.cI)({defaultValues:y}),$=b.control,I=b.handleSubmit,q=b.register,x=b.reset,w=b.watch,j=b.setValue,C=b.getValues,T=w("startDate"),Z=(0,u.useState)(""),M=Z[0],J=Z[1],B=R.iz.map(function(n){return m("supplier")?{label:n.supplierText,value:n.value}:m("customer")?{label:n.customerText,value:n.value}:{label:n.text,value:n.value}}).filter(function(n){return null!==n.label}),H=(0,c.t)(F.yR),V=(0,a.Z)(H,2),Y=V[0],K=V[1],X=K.loading,nn=K.data,ne=(nn=void 0===nn?{items:[]}:nn).items,nt=(0,c.t)(F.SW),nr=(0,a.Z)(nt,2),ni=nr[0],no=nr[1],na=no.loading,ns=no.data,nu=(ns=void 0===ns?{items:[]}:ns).items,nd=(0,c.t)(F.by,{variables:{where:{type:{_eq:"supplier"}}}}),nc=(0,a.Z)(nd,2),nl=nc[0],nm=nc[1],np=nm.loading,nf=nm.data,nh=(nf=void 0===nf?{items:[]}:nf).items,n_=(0,d.a)(F.K4,{skip:!e,variables:{accountId:f.accountId,limit:50,offset:0,q:""!==M?"%".concat(M,"%"):null}}),ng=n_.data,ny=(ng=void 0===ng?{items:[]}:ng).items,nv=n_.loading;(0,u.useEffect)(function(){var n=B.filter(function(n){return"quoteOffered"===n.value});j("status",T?n:[])},[T,j,B]);var nb=function(n){try{var e,o,a,s,u,d,c,l={startDate:n.startDate,endDate:n.endDate,status:null===(e=n.status)||void 0===e?void 0:e.map(function(n){return n.value}),customerId:null===(o=n.customerId)||void 0===o?void 0:o.value,supplierId:null===(a=n.supplierId)||void 0===a?void 0:a.value,userId:null===(s=n.userId)||void 0===s?void 0:s.value,tags:null===(u=n.tags)||void 0===u?void 0:u.map(function(n){return n.value}),customerManagerId:null===(d=n.customerManager)||void 0===d?void 0:d.value},m=n.q;if(m){l.q="%".concat(m,"%")||0;var p=/^\d+$/.test(m);"id"in r&&(l.id=p?Number(m):null),"meta"in r&&(l.meta=p?{invoiceNumbers:[m]}:null),"jobNumber"in r&&(l.jobNumber=p?String(m):null,l.invoiceNumber=p?Number(m):null)}null!==(c=l.status)&&void 0!==c&&c.length&&(l.isChangedStatusSelect=!0),i(function(n){return z(z({},n),l)});var f=C();v(function(n){return z(z({},n),f)})}finally{t(!1)}},n$=function(){i(r),x(r),t(!1)};return(0,g.jsx)(G,{keepMounted:!0,open:e,onClose:function(){return t(!1)},children:(0,g.jsx)("form",{onSubmit:I(nb),children:(0,g.jsx)(W,{children:(0,g.jsxs)(A.ZP,{container:!0,rowGap:4,children:[(0,g.jsx)(A.ZP,{container:!0,children:(0,g.jsx)(A.ZP,{item:!0,xs:12,children:(0,g.jsx)(O.Z,{fullWidth:!0,variant:"standard",color:"secondary",label:"Search...",name:"q",inputRef:q})})}),(0,g.jsxs)(A.ZP,{container:!0,columnSpacing:4,rowGap:o,children:[(0,g.jsx)(A.ZP,{item:!0,xs:12,xs2:6,children:(0,g.jsx)(P.Qr,{name:"startDate",control:$,render:function(n){return(0,g.jsx)(Q,z(z({},n),{},{label:"Quote offered date",renderInput:function(n){return(0,g.jsx)(O.Z,z(z({},n),{},{variant:"standard"}))}}))}})}),(0,g.jsx)(A.ZP,{item:!0,xs:12,xs2:6,rowGap:o,children:(0,g.jsx)(P.Qr,{name:"endDate",control:$,render:function(n){return(0,g.jsx)(Q,z(z({},n),{},{label:"Quote due date",renderInput:function(n){return(0,g.jsx)(O.Z,z(z({},n),{},{variant:"standard"}))}}))}})})]}),(0,g.jsxs)(A.ZP,{container:!0,columnSpacing:4,rowGap:o,children:[(0,g.jsx)(A.ZP,{item:!0,xs:12,xs2:6,children:(0,g.jsx)(P.Qr,{name:"status",control:$,render:function(n){var e=n.value,t=n.onChange;return(0,g.jsx)(E.F,{disabled:Boolean(T),multiple:!0,limitTags:1,value:e,onChange:function(n,e){return t(e)},label:"Select status",options:B})}})}),!m(["customer","supplier"])&&(0,g.jsx)(A.ZP,{item:!0,xs:12,xs2:6,children:(0,g.jsx)(P.Qr,{name:"customerId",control:$,render:function(n){var e=n.value,t=n.onChange;return(0,g.jsx)(E.F,{value:e,onChange:function(n,e){return t(e)},label:"Select customer",loading:na,onOpen:function(){return ni()},options:nu})}})}),m(U.n)&&(0,g.jsx)(A.ZP,{item:!0,xs:12,xs2:6,children:(0,g.jsx)(P.Qr,{name:"userId",control:$,render:function(n){var e=n.value,t=n.onChange;return(0,g.jsx)(E.F,{value:e,onChange:function(n,e){return t(e)},label:"Select user",loading:X,onOpen:function(){return Y()},options:ne})}})})]}),(0,g.jsxs)(A.ZP,{container:!0,columnSpacing:4,rowGap:o,children:[!m(["supplier","customer"])&&!T&&(0,g.jsx)(A.ZP,{item:!0,xs:12,xs2:6,children:(0,g.jsx)(P.Qr,{name:"supplierId",control:$,render:function(n){var e=n.value,t=n.onChange;return(0,g.jsx)(E.F,{value:e,onChange:function(n,e){return t(e)},label:"Select supplier",loading:np,onOpen:function(){return nl()},options:nh})}})}),m("admin")&&(0,g.jsx)(A.ZP,{item:!0,xs:12,xs2:6,children:(0,g.jsx)(L.r,{control:$})})]}),(0,g.jsx)(A.ZP,{container:!0,columnSpacing:4,rowGap:o,children:m("admin")&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(A.ZP,{item:!0,xs:12,xs2:6,children:(0,g.jsx)(P.Qr,{name:"supplierId",control:$,render:function(n){var e=n.value,t=n.onChange;return(0,g.jsx)(E.F,{disabled:T,value:e,onChange:function(n,e){return t(e)},label:"Select supplier",loading:np,onOpen:function(){return nl()},options:nh})}})}),(0,g.jsx)(A.ZP,{item:!0,xs:12,xs2:6,children:(0,g.jsx)(P.Qr,{name:"customerManager",control:$,render:function(n){var e=n.value,t=n.onChange;return(0,g.jsx)(N.q,{value:e,onChange:function(n,e){return t(e)},loading:nv,options:ny,setSearch:J,textFieldProps:{color:"secondary",variant:"standard",label:"Select account manager"}})}})})]})}),(0,g.jsx)(A.ZP,{container:!0,item:!0,xs:12,children:(0,g.jsxs)(l.Z,{width:"100%",direction:"row",justifyContent:"flex-end",spacing:2,children:[(0,g.jsx)(p.Z,{variant:"contained",color:"danger",onClick:function(){return n$()},children:"Cancel"}),(0,g.jsx)(p.Z,{variant:"contained",color:"secondary",type:"submit",children:"Search"})]})})]})})})})};J.defaultProps={open:!1,setOpen:function(){},initialFilters:{},filters:{},setFilters:function(){}};var G=(0,T.Z)(C.Z)(function(){return{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"}}),W=(0,T.Z)(h.Z)(function(){return{padding:"24px",maxWidth:"700px",maxHeight:"100vh",overflowY:"scroll"}}),Q=(0,T.Z)(Z.M)(function(){return{"&.MuiFormControl-root.MuiTextField-root":{width:"100%"}}}),B=t(27812),H=t(93673),V=t(87175),Y=t(18479);function K(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function X(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?K(Object(t),!0).forEach(function(e){(0,s.Z)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):K(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var nn=function(n){var e=n.data,t=n.isCSV,r=n.hasRole,i=r("admin"),o=r("customer"),a=r("supplier");return e.map(function(n){var e,r,s,u,d,c,l,m,p,f,h,_,g,y,v,b,I=(0,B.Z)(R.iz).find(function(e){return e.value===n.status})||{text:"Accepted",supplierText:"Accepted",customerText:"Accepted"},q=I.text,x=I.supplierText,S=I.customerText,w=q;o?w=S:a&&(w=x);var j,k=((0,B.Z)(H.x).find(function(e){return e.value===n.type})||{text:"Quote"}).text,A=n.manager?"".concat(n.manager.nameFirst," ").concat(n.manager.nameLast):"Unassigned",O=n.scheduledAt?$()(n.scheduledAt,!0).format("YYYY-MM-DD"):"-",C=t&&(i||o)?(null===(e=n.sublocation)||void 0===e?void 0:e.name)||"-":void 0;return X(X({id:n.id,description:null!=n&&n.description?null==n?void 0:n.description:"-",number:n.number,type:k,status:n.status,propertyId:null===(r=n.location)||void 0===r?void 0:r.id,managerId:null===(s=n.manager)||void 0===s?void 0:s.id,customerId:null===(u=n.customer)||void 0===u?void 0:u.id,supplierId:n.supplier?n.supplier.id:"",siteVisitStart:n.siteVisitStart,siteVisitEnd:n.siteVisitEnd,siteVisitWeekends:n.siteVisitWeekends,service:(null===(d=n.service)||void 0===d?void 0:d.name)||"-",manager:A,location:(null===(c=n.location)||void 0===c?void 0:c.name)||"-",property:(null===(l=n.location)||void 0===l?void 0:l.name)||"-",sublocation:C,tags:null==n?void 0:n.tags,customer:(null===(m=n.customer)||void 0===m?void 0:m.name)||"-",customerManager:(null===(p=n.customer)||void 0===p?void 0:null===(f=p.manager)||void 0===f?void 0:f.fullName)||"-"},!t&&{customerManagerId:null===(h=n.customer)||void 0===h?void 0:null===(_=h.manager)||void 0===_?void 0:_.id}),{},{acceptSupplier:n.supplier?n.supplier.name:"-",offeredSupplier:(null==n?void 0:null===(g=n.quotations)||void 0===g?void 0:g.length)>0?(j=n.quotations,t?j.map(function(n){var e;return null==n?void 0:null===(e=n.supplier)||void 0===e?void 0:e.name}).join(" / "):j):[],quotations:"".concat((null===(y=n.quotations)||void 0===y?void 0:y.length)||0,"/").concat(n.quoteNumber),received:"".concat(null===(v=n.quotations||[])||void 0===v?void 0:v.reduce(function(n,e){return"supplierQuoteComplete"===e.status?n+1:n},0),"/").concat((null===(b=n.quotations)||void 0===b?void 0:b.length)||0),range:ne(n.quotations),due:$()(n.quoteDue).format("YYYY-MM-DD"),scheduleDate:O,date:$()(n.createdAt).format("YYYY-MM-DD"),statusText:w,quoted:n.quoted||!1,quotationsId:n.quotations[0]&&n.quotations[0].id,actions:""})})},ne=function(n){var e=null;if(n.length>1){var t=n.map(function(n){var e;return null===(e=n.lineItems)||void 0===e?void 0:e.reduce(function(n,e){return n+(e.total||0)*e.qty},0)});e={high:Math.max.apply(Math,(0,B.Z)(t||[])),low:Math.min.apply(Math,(0,B.Z)(t||[]))}}return e},nt=function(n){var e=n.variables,t=n.user,r=n.queryParams,i=n.hasRole,o=e.limit,a=e.offset,s=e.orderBy,u=e.q,d=e.status,c=e.userId,l=e.asAt,m=e.locationId,p=e.managerId,f=e.tagsWhere,h=r.hasOwnProperty("tileName");if(!e.isChangedStatusSelect)switch(r.show){case"unsent":e.status=["quoteOffered","quoteNew"];break;case"unsentQuote":e.status=["quoteOffered","quoteReceived"];break;case"overdueQuote":e.status=["quoteNew","quoteOffered","quoteReceived","quoteSent"];break;default:e.status=r.show}if(h){var _=c||+r.userId,g=+r.accountId;return i(["customer","supplier"])&&(_=t.id,g=t.accountId),{query:(0,V.Z)({tagsWhere:f}),variables:X(X({},e),{},{accountId:g,locationId:m||r.locationId,managerId:p||r.managerId,asAt:l,tileName:null==r?void 0:r.tileName,monthStart:e.monthStart,dayStart:e.todayStart,yearStart:e.yearStart,adminId:null==t?void 0:t.adminId,userId:_})}}return"supplier"===t.accountType?{query:Y.L,variables:X({limit:o,offset:a,orderBy:s,q:u,status:d},e)}:{query:(0,Y.w)({tagsWhere:f}),variables:X({},e)}},nr=t(825),ni=t(32836),no=t(26143),na=t(94568),ns=t(45110),nu=t(9164),nd=t(24770),nc=t(46353);function nl(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function nm(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?nl(Object(t),!0).forEach(function(e){(0,s.Z)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):nl(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var np=function(n){var e,t,o,s,_,b=n.title,I=n.subtitle,k=n.initialFilters,A=(0,x.q)(),O=(0,S.x)(),C=O.hasRole,P=O.user,T=(0,r.useRouter)().query,Z=(0,u.useState)(nm({},k)),D=Z[0],R=Z[1],U=(0,u.useState)(!1),F=U[0],E=U[1],L=(0,u.useState)(!1),N=L[0],M=L[1],z=null===(e=A.admin)||void 0===e?void 0:null===(t=e.jobSetting)||void 0===t?void 0:t.jobNumberPrefix,G=null===(o=A.admin)||void 0===o?void 0:null===(s=o.jobSetting)||void 0===s?void 0:s.jobNumberSuffix,W=C("admin"),Q=C("supplier"),B=C(["admin","customer"]),H=C(["admin","supplier"]),V=(0,w.x)({filters:D}),Y=V.initialData,K=V.ref,X=nt({variables:nm(nm({},Y),{},{monthStart:$()(T.asAt).startOf("month"),todayEnd:$()(T.asAt).endOf("day"),todayStart:$()(T.asAt).startOf("day"),yearStart:$()(T.asAt).startOf("year"),asAt:$()(T.asAt).endOf("day"),tagsWhere:(0,nc.Y)(Y.tags)}),user:P,queryParams:T,hasRole:C}),ne=X.query,nl=X.variables;"Accepted"===nl.status?(nl.type="reactive",delete nl.status):delete nl.type;var np=(0,d.a)(ne,{variables:nl}),nf=np.data,nh=(nf=void 0===nf?{quotes:[],meta:{aggregate:{totalCount:0}}}:nf).quotes,n_=nf.meta,ng=np.loading,ny=np.refetch,nv=(0,c.t)(ne,{variables:nm(nm({},nl),{},{limit:(null==n_?void 0:null===(_=n_.aggregate)||void 0===_?void 0:_.totalCount)||150}),onCompleted:function(n){var e=n.quotes;try{var t=q().unparse(nx(e,!0)),r="data:application/octet-stream,"+encodeURIComponent(t);(0,j.S)(r,"quotes.csv")}finally{M(!1)}},skip:!0}),nb=(0,a.Z)(nv,1)[0],n$=function(n){n.stopPropagation(),M(!0),nb()},nI=function(n){var e=[];return W&&(e.push({context:"secondary",icon:"edit",onClick:function(e){return i().push("/dashboard/issues/manage?id=".concat(n.number,"&quoted=1"))},tooltip:"Edit"}),e.push({context:"secondary",icon:"info",onClick:function(){return i().push("/dashboard/issues/view?id=".concat(n.number))},tooltip:"Info"})),e},nq=function(n){n.stopPropagation(),i().push("/dashboard/issues/manage?quoted=1")},nx=function(n,e){return nn({data:n,isCSV:e,hasRole:C})};return(0,g.jsxs)(l.Z,{width:"100%",spacing:2,sx:{height:"100%"},children:[(0,g.jsxs)(l.Z,{width:"100%",direction:"row",justifyContent:"space-between",children:[(0,g.jsx)(p.Z,{variant:"contained",startIcon:(0,g.jsx)(v.Z,{}),onClick:function(){return E(!0)},children:"Filters"}),(0,g.jsxs)(l.Z,{direction:"row",spacing:2,children:[W&&(0,g.jsx)(p.Z,{variant:"contained",color:"secondary",onClick:nq,children:"Create Quote"}),!(0,na.s)()&&(0,g.jsx)(p.Z,{startIcon:!N&&(0,g.jsx)("img",{src:"/static/icons/csv.svg"}),disabled:N,variant:"contained",color:"success",onClick:n$,children:N?(0,g.jsx)(f.Z,{size:20,color:"secondary"}):"Export Quote"})]})]}),(0,g.jsxs)(h.Z,{sx:{paddingTop:"16px",paddingBottom:"16px",height:"calc(100% - 52px)"},children:[(0,g.jsxs)(l.Z,{children:[(0,g.jsx)(m.Z,{ml:2,variant:"h5",sx:{fontWeight:600},children:b}),I&&(0,g.jsx)(m.Z,{typography:"subtitle1",ml:2,children:I})]}),(0,g.jsx)(J,{open:F,setOpen:E,initialFilters:k,filters:D,setFilters:R}),(0,g.jsx)(ni.i,{autoHeight:!1,loading:ng,ref:K,columns:[{sortable:!0,minWidth:100,field:"id",headerName:"ID",sortName:"id",renderCell:function(n){var e=n.row;return(0,g.jsx)(nr.D,{id:e.id,number:e.number,numberPrefix:z,numberSuffix:G,status:e.status,openCanvas:!0,type:e.type,isQuote:e.quoted})}},{sortable:!1,flex:1,minWidth:80,field:"type",headerName:"Type",sortName:"type"},{minWidth:300,field:"tags",headerName:"Tags",sortable:!1,flex:1,renderCell:function(n){var e=n.row;return(0,g.jsx)(nd.K,{row:e,refetchQueries:["GetQuotes","GetDashboardList"],entity:"Job"})}},{sortable:!1,flex:1,minWidth:180,field:"description",headerName:"Description"},{sortable:!0,hide:!W,sortName:'{"Manager": {"nameFirst": "ORDER"}}',flex:1,minWidth:180,field:"manager",headerName:"Assigned to",renderCell:function(n){var e=n.row;return(0,g.jsx)(nu.r,{color:"secondary",href:"/dashboard/users/view?id=".concat(e.managerId),children:e.manager})}},{sortable:!0,hide:!B,flex:1,minWidth:180,field:"location-admin-customer",headerName:"Location",sortName:'{"Location": {"name": "ORDER"}}',renderCell:function(n){var e=n.row;return(0,g.jsx)(nu.r,{color:"secondary",href:"/dashboard/properties/view?id=".concat(e.propertyId),children:e.location})}},{sortable:!0,hide:B,flex:1,minWidth:180,field:"location",headerName:"Location",sortName:'{"Location": {"name": "ORDER"}}'},{sortable:!0,hide:!W,flex:1,minWidth:180,field:"customer",headerName:"Customer",sortName:'{"Customer": {"name": "ORDER"}}',renderCell:function(n){var e=n.row;return(0,g.jsx)(nu.r,{color:"secondary",href:"/dashboard/customers/view?id=".concat(e.customerId),children:e.customer})}},{minWidth:180,flex:1,field:"customerManager",headerName:"Account Manager",sortName:'{"Customer": {"Manager": {"fullName": "ORDER"}}}',renderCell:function(n){var e=n.row;return(0,g.jsx)(nu.r,{noWrap:!e.customerManagerId,color:"secondary",href:"/dashboard/users/view?id=".concat(e.customerManagerId),children:e.customerManager})}},{sortable:!0,hide:!W&&!Q,flex:1,minWidth:180,field:"acceptSupplier",headerName:"Accepted Supplier",sortName:'{"Supplier": {"name": "ORDER"}}',renderCell:function(n){var e=n.row;return(0,g.jsx)(nu.r,{color:"secondary",href:"/dashboard/suppliers/view?id=".concat(e.supplierId),children:e.acceptSupplier})}},{sortable:!0,hide:!W&&!Q,flex:1,minWidth:180,field:"offeredSupplier",headerName:"Offered Supplier",sortName:'{"Supplier": {"name": "ORDER"}}',renderCell:function(n){var e,t=n.row;return(0,g.jsx)(g.Fragment,{children:(null==t?void 0:null===(e=t.offeredSupplier)||void 0===e?void 0:e.length)>0?(0,g.jsx)(l.Z,{children:((null==t?void 0:t.offeredSupplier)||[]).map(function(n){var e,t;return(0,g.jsx)(nu.r,{color:"secondary",href:"/dashboard/suppliers/view?id=".concat(null==n?void 0:null===(e=n.supplier)||void 0===e?void 0:e.id),children:null==n?void 0:null===(t=n.supplier)||void 0===t?void 0:t.name})})}):"-"})}},{sortable:!1,hide:!W,flex:1,minWidth:100,field:"quotations",headerName:"Quotations"},{sortable:!1,hide:!W&&!Q,flex:1,minWidth:80,field:"received",headerName:"Quotations (Received)"},{sortable:!1,hide:!W,flex:1,minWidth:140,field:"range",headerName:"Quotations Range",renderCell:function(n){var e=n.row.range;return e?(0,g.jsxs)(l.Z,{children:[(0,g.jsxs)(m.Z,{sx:{whiteSpace:"nowrap"},children:["high: ",(0,ns.T)(e.high)]}),(0,g.jsxs)(m.Z,{sx:{whiteSpace:"nowrap"},children:["low: ",(0,ns.T)(e.low)]})]}):"N/A"}},{sortable:!0,headerName:"Quote Due",flex:1,minWidth:120,field:"due",sortName:"quoteDue",renderCell:function(n){var e=n.row,t=$()().format("YYYY-MM-DD"),r="Quote"===e.type,i=e.status.includes("quoteSent");if(r&&e.due<t&&!i)return(0,g.jsxs)(l.Z,{alignItems:"center",children:[(0,g.jsx)(y,{color:"error",sx:{height:"20px"}}),(0,g.jsx)(m.Z,{children:e.due})]})}},{flex:1,minWidth:120,field:"scheduleDate",headerName:"Scheduled",sortable:!0,sortName:"scheduledAt"},{flex:1,minWidth:120,field:"date",headerName:"Created",sortable:!0,sortName:"createdAt"},{flex:1,minWidth:140,field:"statusText",headerName:"Status",sortable:!0,sortName:"status",renderCell:function(n){var e=n.row;return(null==e?void 0:e.offeredSupplier.length)>0&&null!=e&&e.offeredSupplier.every(function(n){return"quotationRejected"===n.status})?"Rejected":e.statusText}},{sortable:!1,hide:!W,flex:1,field:"actions",headerName:"",maxWidth:50,renderCell:function(n){var e=n.row;return(0,g.jsx)(no.C,{actionsData:nI,row:e})}}],rows:nx(nh),meta:n_,refetch:ny,containerHeight:"calc(100% - 32px)",columnVisibilityModel:{manager:W,"location-admin-customer":B,location:!B,customer:W,customerManager:W,acceptSupplier:H,offeredSupplier:H,quotations:W,received:!Q,range:W,actions:W,tags:W}})]})]})};np.defaultProps={initialFilters:{},title:"",subtitle:""};var nf={id:null,q:null,startDate:null,endDate:null,status:[],customerId:null,supplierId:null,userId:null,isChangedStatusSelect:!1,customerManager:null,filterType:"quotes_table"},nh=function(){var n,e=(0,x.q)().hasUserModule,t=(0,S.x)(),a=t.user,s=t.hasRole,u=(0,r.useRouter)().query,d=e("quotes"),c=s("customer_user"),l=s("tenant_user");if(!a)return i().push("/account/sign-in"),null;if(!d&&(c||l))throw Error("Permission denied");return(0,g.jsx)(o.Z,{children:(0,g.jsx)(np,{title:null!==(n=null==u?void 0:u.title)&&void 0!==n?n:"Quotes",subtitle:null==u?void 0:u.subtitle,initialFilters:nf})})};nh.getLayout=function(n){return n};var n_=nh},56529:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/quotes",function(){return t(31189)}])},57460:function(n,e){var t,r,i,o; /* @license
Papa Parse
v5.3.0
https://github.com/mholt/PapaParse
License: MIT
*/ o=function n(){"use strict";var e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},t=!e.document&&!!e.postMessage,r=t&&/blob:/i.test((e.location||{}).protocol),i={},o=0,a={parse:function(t,r){var s=(r=r||{}).dynamicTyping||!1;if($(s)&&(r.dynamicTypingFunction=s,s={}),r.dynamicTyping=s,r.transform=!!$(r.transform)&&r.transform,r.worker&&a.WORKERS_SUPPORTED){var u=function(){if(!a.WORKERS_SUPPORTED)return!1;var t,r,s=(t=e.URL||e.webkitURL||null,r=n.toString(),a.BLOB_URL||(a.BLOB_URL=t.createObjectURL(new Blob(["(",r,")();"],{type:"text/javascript"})))),u=new e.Worker(s);return u.onmessage=_,u.id=o++,i[u.id]=u}();return u.userStep=r.step,u.userChunk=r.chunk,u.userComplete=r.complete,u.userError=r.error,r.step=$(r.step),r.chunk=$(r.chunk),r.complete=$(r.complete),r.error=$(r.error),delete r.worker,void u.postMessage({input:t,config:r,workerId:u.id})}var p=null;return a.NODE_STREAM_INPUT,"string"==typeof t?p=r.download?new d(r):new l(r):!0===t.readable&&$(t.read)&&$(t.on)?p=new m(r):(e.File&&t instanceof File||t instanceof Object)&&(p=new c(r)),p.stream(t)},unparse:function(n,e){var t=!1,r=!0,i=",",o="\r\n",s='"',u=s+s,d=!1,c=null,l=!1;!function(){if("object"==typeof e){if("string"!=typeof e.delimiter||a.BAD_DELIMITERS.filter(function(n){return -1!==e.delimiter.indexOf(n)}).length||(i=e.delimiter),("boolean"==typeof e.quotes||"function"==typeof e.quotes||Array.isArray(e.quotes))&&(t=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(d=e.skipEmptyLines),"string"==typeof e.newline&&(o=e.newline),"string"==typeof e.quoteChar&&(s=e.quoteChar),"boolean"==typeof e.header&&(r=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw Error("Option columns is empty");c=e.columns}void 0!==e.escapeChar&&(u=e.escapeChar+s),"boolean"==typeof e.escapeFormulae&&(l=e.escapeFormulae)}}();var m=RegExp(f(s),"g");if("string"==typeof n&&(n=JSON.parse(n)),Array.isArray(n)){if(!n.length||Array.isArray(n[0]))return h(null,n,d);if("object"==typeof n[0])return h(c||p(n[0]),n,d)}else if("object"==typeof n)return"string"==typeof n.data&&(n.data=JSON.parse(n.data)),Array.isArray(n.data)&&(n.fields||(n.fields=n.meta&&n.meta.fields),n.fields||(n.fields=Array.isArray(n.data[0])?n.fields:p(n.data[0])),Array.isArray(n.data[0])||"object"==typeof n.data[0]||(n.data=[n.data])),h(n.fields||[],n.data||[],d);throw Error("Unable to serialize unrecognized input");function p(n){if("object"!=typeof n)return[];var e=[];for(var t in n)e.push(t);return e}function h(n,e,t){var a="";"string"==typeof n&&(n=JSON.parse(n)),"string"==typeof e&&(e=JSON.parse(e));var s=Array.isArray(n)&&0<n.length,u=!Array.isArray(e[0]);if(s&&r){for(var d=0;d<n.length;d++)0<d&&(a+=i),a+=_(n[d],d);0<e.length&&(a+=o)}for(var c=0;c<e.length;c++){var l=s?n.length:e[c].length,m=!1,p=s?0===Object.keys(e[c]).length:0===e[c].length;if(t&&!s&&(m="greedy"===t?""===e[c].join("").trim():1===e[c].length&&0===e[c][0].length),"greedy"===t&&s){for(var f=[],h=0;h<l;h++){var g=u?n[h]:h;f.push(e[c][g])}m=""===f.join("").trim()}if(!m){for(var y=0;y<l;y++){0<y&&!p&&(a+=i);var v=s&&u?n[y]:y;a+=_(e[c][v],y)}c<e.length-1&&(!t||0<l&&!p)&&(a+=o)}}return a}function _(n,e){if(null==n)return"";if(n.constructor===Date)return JSON.stringify(n).slice(1,25);!0===l&&"string"==typeof n&&null!==n.match(/^[=+\-@].*$/)&&(n="'"+n);var r=n.toString().replace(m,u);return"boolean"==typeof t&&t||"function"==typeof t&&t(n,e)||Array.isArray(t)&&t[e]||function(n,e){for(var t=0;t<e.length;t++)if(-1<n.indexOf(e[t]))return!0;return!1}(r,a.BAD_DELIMITERS)||-1<r.indexOf(i)||" "===r.charAt(0)||" "===r.charAt(r.length-1)?s+r+s:r}}};if(a.RECORD_SEP="\x1e",a.UNIT_SEP="\x1f",a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r","\n",'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!t&&!!e.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=h,a.ParserHandle=p,a.NetworkStreamer=d,a.FileStreamer=c,a.StringStreamer=l,a.ReadableStreamStreamer=m,e.jQuery){var s=e.jQuery;s.fn.parse=function(n){var t=n.config||{},r=[];return this.each(function(n){if(!("INPUT"===s(this).prop("tagName").toUpperCase()&&"file"===s(this).attr("type").toLowerCase()&&e.FileReader)||!this.files||0===this.files.length)return!0;for(var i=0;i<this.files.length;i++)r.push({file:this.files[i],inputElem:this,instanceConfig:s.extend({},t)})}),i(),this;function i(){if(0!==r.length){var e,t,i,u,d=r[0];if($(n.before)){var c=n.before(d.file,d.inputElem);if("object"==typeof c){if("abort"===c.action)return e="AbortError",t=d.file,i=d.inputElem,u=c.reason,void($(n.error)&&n.error({name:e},t,i,u));if("skip"===c.action)return void o();"object"==typeof c.config&&(d.instanceConfig=s.extend(d.instanceConfig,c.config))}else if("skip"===c)return void o()}var l=d.instanceConfig.complete;d.instanceConfig.complete=function(n){$(l)&&l(n,d.file,d.inputElem),o()},a.parse(d.file,d.instanceConfig)}else $(n.complete)&&n.complete()}function o(){r.splice(0,1),i()}}}function u(n){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(n){var e=v(n);e.chunkSize=parseInt(e.chunkSize),n.step||n.chunk||(e.chunkSize=null),this._handle=new p(e),(this._handle.streamer=this)._config=e}).call(this,n),this.parseChunk=function(n,t){if(this.isFirstChunk&&$(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(n);void 0!==i&&(n=i)}this.isFirstChunk=!1,this._halted=!1;var o=this._partialLine+n;this._partialLine="";var s=this._handle.parse(o,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var u=s.meta.cursor;this._finished||(this._partialLine=o.substring(u-this._baseIndex),this._baseIndex=u),s&&s.data&&(this._rowCount+=s.data.length);var d=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(r)e.postMessage({results:s,workerId:a.WORKER_ID,finished:d});else if($(this._config.chunk)&&!t){if(this._config.chunk(s,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);s=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(s.data),this._completeResults.errors=this._completeResults.errors.concat(s.errors),this._completeResults.meta=s.meta),this._completed||!d||!$(this._config.complete)||s&&s.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),d||s&&s.meta.paused||this._nextChunk(),s}this._halted=!0},this._sendError=function(n){$(this._config.error)?this._config.error(n):r&&this._config.error&&e.postMessage({workerId:a.WORKER_ID,error:n,finished:!1})}}function d(n){var e;(n=n||{}).chunkSize||(n.chunkSize=a.RemoteChunkSize),u.call(this,n),this._nextChunk=t?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(n){this._input=n,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),t||(e.onload=b(this._chunkLoaded,this),e.onerror=b(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!t),this._config.downloadRequestHeaders){var n=this._config.downloadRequestHeaders;for(var r in n)e.setRequestHeader(r,n[r])}if(this._config.chunkSize){var i=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+i)}try{e.send(this._config.downloadRequestBody)}catch(o){this._chunkError(o.message)}t&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){var n,t;4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null===(t=(n=e).getResponseHeader("Content-Range"))?-1:parseInt(t.substring(t.lastIndexOf("/")+1))),this.parseChunk(e.responseText)))},this._chunkError=function(n){var t=e.statusText||n;this._sendError(Error(t))}}function c(n){(n=n||{}).chunkSize||(n.chunkSize=a.LocalChunkSize),u.call(this,n);var e,t,r="undefined"!=typeof FileReader;this.stream=function(n){this._input=n,t=n.slice||n.webkitSlice||n.mozSlice,r?((e=new FileReader).onload=b(this._chunkLoaded,this),e.onerror=b(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var n=this._input;if(this._config.chunkSize){var i=Math.min(this._start+this._config.chunkSize,this._input.size);n=t.call(n,this._start,i)}var o=e.readAsText(n,this._config.encoding);r||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(n){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(n.target.result)},this._chunkError=function(){this._sendError(e.error)}}function l(n){var e;u.call(this,n=n||{}),this.stream=function(n){return e=n,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var n,t=this._config.chunkSize;return t?(n=e.substring(0,t),e=e.substring(t)):(n=e,e=""),this._finished=!e,this.parseChunk(n)}}}function m(n){u.call(this,n=n||{});var e=[],t=!0,r=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(n){this._input=n,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):t=!0},this._streamData=b(function(n){try{e.push("string"==typeof n?n:n.toString(this._config.encoding)),t&&(t=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(r){this._streamError(r)}},this),this._streamError=b(function(n){this._streamCleanUp(),this._sendError(n)},this),this._streamEnd=b(function(){this._streamCleanUp(),r=!0,this._streamData("")},this),this._streamCleanUp=b(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function p(n){var e,t,r,i=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)(e[-+]?\d+)?\s*$/,o=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,s=this,u=0,d=0,c=!1,l=!1,m=[],p={data:[],errors:[],meta:{}};if($(n.step)){var _=n.step;n.step=function(e){if(p=e,b())y();else{if(y(),0===p.data.length)return;u+=e.data.length,n.preview&&u>n.preview?t.abort():(p.data=p.data[0],_(p,s))}}}function g(e){return"greedy"===n.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function y(){if(p&&r&&(q("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),r=!1),n.skipEmptyLines)for(var e=0;e<p.data.length;e++)g(p.data[e])&&p.data.splice(e--,1);return b()&&function(){if(p){if(Array.isArray(p.data[0])){for(var e=0;b()&&e<p.data.length;e++)p.data[e].forEach(t);p.data.splice(0,1)}else p.data.forEach(t)}function t(e,t){$(n.transformHeader)&&(e=n.transformHeader(e,t)),m.push(e)}}(),function(){if(!p||!n.header&&!n.dynamicTyping&&!n.transform)return p;function e(e,t){var r,i=n.header?{}:[];for(r=0;r<e.length;r++){var o=r,a=e[r];n.header&&(o=r>=m.length?"__parsed_extra":m[r]),n.transform&&(a=n.transform(a,o)),a=I(o,a),"__parsed_extra"===o?(i[o]=i[o]||[],i[o].push(a)):i[o]=a}return n.header&&(r>m.length?q("FieldMismatch","TooManyFields","Too many fields: expected "+m.length+" fields but parsed "+r,d+t):r<m.length&&q("FieldMismatch","TooFewFields","Too few fields: expected "+m.length+" fields but parsed "+r,d+t)),i}var t=1;return!p.data.length||Array.isArray(p.data[0])?(p.data=p.data.map(e),t=p.data.length):p.data=e(p.data,0),n.header&&p.meta&&(p.meta.fields=m),d+=t,p}()}function b(){return n.header&&0===m.length}function I(e,t){return n.dynamicTypingFunction&&void 0===n.dynamicTyping[e]&&(n.dynamicTyping[e]=n.dynamicTypingFunction(e)),!0===(n.dynamicTyping[e]||n.dynamicTyping)?"true"===t||"TRUE"===t||"false"!==t&&"FALSE"!==t&&(!function(n){if(i.test(n)){var e=parseFloat(n);if(-9007199254740992<e&&e<9007199254740992)return!0}return!1}(t)?o.test(t)?new Date(t):""===t?null:t:parseFloat(t)):t}function q(n,e,t,r){var i={type:n,code:e,message:t};void 0!==r&&(i.row=r),p.errors.push(i)}this.parse=function(i,o,s){var u=n.quoteChar||'"';if(n.newline||(n.newline=function(n,e){n=n.substring(0,1048576);var t=RegExp(f(e)+"([^]*?)"+f(e),"gm"),r=(n=n.replace(t,"")).split("\r"),i=n.split("\n"),o=1<i.length&&i[0].length<r[0].length;if(1===r.length||o)return"\n";for(var a=0,s=0;s<r.length;s++)"\n"===r[s][0]&&a++;return a>=r.length/2?"\r\n":"\r"}(i,u)),r=!1,n.delimiter)$(n.delimiter)&&(n.delimiter=n.delimiter(i),p.meta.delimiter=n.delimiter);else{var d=function(e,t,r,i,o){var s,u,d,c;o=o||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var l=0;l<o.length;l++){var m=o[l],p=0,f=0,_=0;d=void 0;for(var y=new h({comments:i,delimiter:m,newline:t,preview:10}).parse(e),v=0;v<y.data.length;v++)if(r&&g(y.data[v]))_++;else{var b=y.data[v].length;f+=b,void 0!==d?0<b&&(p+=Math.abs(b-d),d=b):d=b}0<y.data.length&&(f/=y.data.length-_),(void 0===u||p<=u)&&(void 0===c||c<f)&&1.99<f&&(u=p,s=m,c=f)}return{successful:!!(n.delimiter=s),bestDelimiter:s}}(i,n.newline,n.skipEmptyLines,n.comments,n.delimitersToGuess);d.successful?n.delimiter=d.bestDelimiter:(r=!0,n.delimiter=a.DefaultDelimiter),p.meta.delimiter=n.delimiter}var l=v(n);return n.preview&&n.header&&l.preview++,e=i,p=(t=new h(l)).parse(e,o,s),y(),c?{meta:{paused:!0}}:p||{meta:{paused:!1}}},this.paused=function(){return c},this.pause=function(){c=!0,t.abort(),e=$(n.chunk)?"":e.substring(t.getCharIndex())},this.resume=function(){s.streamer._halted?(c=!1,s.streamer.parseChunk(e,!0)):setTimeout(s.resume,3)},this.aborted=function(){return l},this.abort=function(){l=!0,t.abort(),p.meta.aborted=!0,$(n.complete)&&n.complete(p),e=""}}function f(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function h(n){var e,t=(n=n||{}).delimiter,r=n.newline,i=n.comments,o=n.step,s=n.preview,u=n.fastMode,d=e=void 0===n.quoteChar?'"':n.quoteChar;if(void 0!==n.escapeChar&&(d=n.escapeChar),("string"!=typeof t||-1<a.BAD_DELIMITERS.indexOf(t))&&(t=","),i===t)throw Error("Comment character same as delimiter");!0===i?i="#":("string"!=typeof i||-1<a.BAD_DELIMITERS.indexOf(i))&&(i=!1),"\n"!==r&&"\r"!==r&&"\r\n"!==r&&(r="\n");var c=0,l=!1;this.parse=function(n,a,m){if("string"!=typeof n)throw Error("Input must be a string");var p=n.length,h=t.length,_=r.length,g=i.length,y=$(o),v=[],b=[],I=[],q=c=0;if(!n)return U();if(u||!1!==u&&-1===n.indexOf(e)){for(var x=n.split(r),S=0;S<x.length;S++){if(c+=(I=x[S]).length,S!==x.length-1)c+=r.length;else if(m)break;if(!i||I.substring(0,g)!==i){if(y){if(v=[],T(I.split(t)),F(),l)return U()}else T(I.split(t));if(s&&s<=S)return v=v.slice(0,s),U(!0)}}return U()}for(var w=n.indexOf(t,c),j=n.indexOf(r,c),k=RegExp(f(d)+f(e),"g"),A=n.indexOf(e,c);;)if(n[c]!==e){if(i&&0===I.length&&n.substring(c,c+g)===i){if(-1===j)return U();c=j+_,j=n.indexOf(r,c),w=n.indexOf(t,c)}else{if(-1!==w&&(w<j||-1===j)){if(!(w<A)){I.push(n.substring(c,w)),c=w+h,w=n.indexOf(t,c);continue}var O=E(w,A,j);if(O&&void 0!==O.nextDelim){w=O.nextDelim,A=O.quoteSearch,I.push(n.substring(c,w)),c=w+h,w=n.indexOf(t,c);continue}}if(-1===j)break;if(I.push(n.substring(c,j)),R(j+_),y&&(F(),l))return U();if(s&&v.length>=s)return U(!0)}}else for(A=c,c++;;){if(-1===(A=n.indexOf(e,A+1)))return m||b.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:v.length,index:c}),D();if(A===p-1)return D(n.substring(c,A).replace(k,e));if(e!==d||n[A+1]!==d){if(e===d||0===A||n[A-1]!==d){-1!==w&&w<A+1&&(w=n.indexOf(t,A+1)),-1!==j&&j<A+1&&(j=n.indexOf(r,A+1));var C=Z(-1===j?w:Math.min(w,j));if(n[A+1+C]===t){I.push(n.substring(c,A).replace(k,e)),n[c=A+1+C+h]!==e&&(A=n.indexOf(e,c)),w=n.indexOf(t,c),j=n.indexOf(r,c);break}var P=Z(j);if(n.substring(A+1+P,A+1+P+_)===r){if(I.push(n.substring(c,A).replace(k,e)),R(A+1+P+_),w=n.indexOf(t,c),A=n.indexOf(e,c),y&&(F(),l))return U();if(s&&v.length>=s)return U(!0);break}b.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:v.length,index:c}),A++}}else A++}return D();function T(n){v.push(n),q=c}function Z(e){var t=0;if(-1!==e){var r=n.substring(A+1,e);r&&""===r.trim()&&(t=r.length)}return t}function D(e){return m||(void 0===e&&(e=n.substring(c)),I.push(e),c=p,T(I),y&&F()),U()}function R(e){c=e,T(I),I=[],j=n.indexOf(r,c)}function U(n){return{data:v,errors:b,meta:{delimiter:t,linebreak:r,aborted:l,truncated:!!n,cursor:q+(a||0)}}}function F(){o(U()),v=[],b=[]}function E(r,i,o){var a={nextDelim:void 0,quoteSearch:void 0},s=n.indexOf(e,i+1);if(i<r&&r<s&&(s<o||-1===o)){var u=n.indexOf(t,s);if(-1===u)return a;s<u&&(s=n.indexOf(e,s+1)),a=E(u,s,o)}else a={nextDelim:r,quoteSearch:i};return a}},this.abort=function(){l=!0},this.getCharIndex=function(){return c}}function _(n){var e=n.data,t=i[e.workerId],r=!1;if(e.error)t.userError(e.error,e.file);else if(e.results&&e.results.data){var o={abort:function(){r=!0,g(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:y,resume:y};if($(t.userStep)){for(var a=0;a<e.results.data.length&&(t.userStep({data:e.results.data[a],errors:e.results.errors,meta:e.results.meta},o),!r);a++);delete e.results}else $(t.userChunk)&&(t.userChunk(e.results,o,e.file),delete e.results)}e.finished&&!r&&g(e.workerId,e.results)}function g(n,e){var t=i[n];$(t.userComplete)&&t.userComplete(e),t.terminate(),delete i[n]}function y(){throw Error("Not implemented.")}function v(n){if("object"!=typeof n||null===n)return n;var e=Array.isArray(n)?[]:{};for(var t in n)e[t]=v(n[t]);return e}function b(n,e){return function(){n.apply(e,arguments)}}function $(n){return"function"==typeof n}return r&&(e.onmessage=function(n){var t=n.data;if(void 0===a.WORKER_ID&&t&&(a.WORKER_ID=t.workerId),"string"==typeof t.input)e.postMessage({workerId:a.WORKER_ID,results:a.parse(t.input,t.config),finished:!0});else if(e.File&&t.input instanceof File||t.input instanceof Object){var r=a.parse(t.input,t.config);r&&e.postMessage({workerId:a.WORKER_ID,results:r,finished:!0})}}),(d.prototype=Object.create(u.prototype)).constructor=d,(c.prototype=Object.create(u.prototype)).constructor=c,(l.prototype=Object.create(l.prototype)).constructor=l,(m.prototype=Object.create(u.prototype)).constructor=m,a},void 0!==(i=o.apply(e,[]))&&(n.exports=i)},36864:function(n,e,t){"use strict";function r(){return(r=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}t.d(e,{Z:function(){return r}})}},function(n){n.O(0,[3662,2283,212,8890,619,1100,4135,5020,6043,1564,4244,3911,3776,2329,778,4046,1023,4253,3148,8062,7328,4061,6344,8476,7725,8033,26,9774,2888,179],function(){return n(n.s=56529)}),_N_E=n.O()}]);