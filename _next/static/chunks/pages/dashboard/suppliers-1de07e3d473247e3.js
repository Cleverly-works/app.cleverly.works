(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[689],{26143:function(e,n,t){"use strict";t.d(n,{C:function(){return Z}});var r=t(67294),i=t(93946),o=t(25464),a=t(18972),s=t(57976),c=t(14218),u=t(95429),l=t(91988),d=t(70983),p=t(46761),m=t(91682),g=t(39702),f=t(36804),v=t(51797),h=t(53630),b=t(50748),y=t(23132),j=t(88127),x=t(52186),O=t(59301),P=t(26447),_=t(15861),S=t(85893),w={add:(0,S.jsx)(c.Z,{}),archive:(0,S.jsx)(u.Z,{}),avatar:(0,S.jsx)(l.Z,{}),check:(0,S.jsx)(d.Z,{}),delete:(0,S.jsx)(p.Z,{}),description:(0,S.jsx)(m.Z,{}),download:(0,S.jsx)(g.Z,{}),info:(0,S.jsx)(f.Z,{}),edit:(0,S.jsx)(v.Z,{}),location:(0,S.jsx)(h.Z,{}),unarchive:(0,S.jsx)(b.Z,{}),uploadFile:(0,S.jsx)(y.Z,{}),receipt:(0,S.jsx)(j.Z,{}),visibility:(0,S.jsx)(x.Z,{})},I={default:(0,S.jsx)(s.Z,{}),defaultHoriz:(0,S.jsx)(O.Z,{}),description:(0,S.jsx)(m.Z,{})},Z=function(e){var n=e.actionsData,t=e.icon,s=e.row,c=e.disabled,u=(0,r.useState)(null),l=u[0],d=u[1],p=function(e){e.stopPropagation(),d(e.currentTarget)},m=function(){d(null)};return(0,S.jsxs)("div",{children:[(0,S.jsx)(i.Z,{sx:{":hover":{backgroundColor:"#DDDDDD"}},disabled:c,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:p,children:I[t]}),(0,S.jsx)(o.Z,{id:"simple-menu",anchorEl:l,keepMounted:!0,open:Boolean(l),onClose:m,PaperProps:{sx:{borderRadius:2}},children:n(s).map(function(e,n){return(0,S.jsx)(a.Z,{disabled:e.disabled,onClick:function(n){e.onClick(n),m()},sx:{pl:3,pr:4},children:(0,S.jsxs)(P.Z,{direction:"row",alignItems:"center",spacing:2,children:[(null==w?void 0:w[e.icon])||null,(0,S.jsx)(_.Z,{children:e.tooltip})]})},n)})})]})};Z.defaultProps={actionsData:function(){return[{disabled:!1,onClick:function(){},icon:"edit",tooltip:"Edit"}]},icon:"default",disabled:!1}},6911:function(e,n,t){"use strict";t.d(n,{q:function(){return g}});var r=t(59499),i=t(4730),o=t(23776),a=t(87918),s=t(50135),c=t(98456),u=t(67294),l=t(85893),d=["loading","setSearch","textFieldProps"];function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var g=function(e){var n=e.loading,t=e.setSearch,r=e.textFieldProps,p=(0,i.Z)(e,d),g=(0,u.useState)(""),f=g[0],v=g[1];return(0,u.useEffect)(function(){var e=setTimeout(function(){t(f)},500);return function(){return clearTimeout(e)}},[f,t]),(0,l.jsx)(o.Z,m(m({},p),{},{loading:n,onInputChange:function(e,n){v(n)},getOptionLabel:function(e){return e.label},renderTags:function(e,n){return e.map(function(e,t){return(0,l.jsx)(a.Z,m({size:"small",label:e.label},n({index:t})))})},renderInput:function(e){return(0,l.jsx)(s.Z,m(m(m({},e),r),{},{InputProps:m(m(m({},e.InputProps),r.InputProps||{}),{},{endAdornment:(0,l.jsxs)(l.Fragment,{children:[n?(0,l.jsx)(c.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))}}))};g.defaultProps={color:"secondary",onChange:function(){},options:[],onOpen:function(){},setSearch:function(){},textFieldProps:{}}},71534:function(e,n,t){"use strict";t.d(n,{N:function(){return a}});var r=t(58594),i=t(85893),o=[{id:"assignedToMe",label:"Assigned to me",value:"assignedToMe"}],a=function(e){var n=e.data,t=e.errors,a=e.name,s=e.onChange,c=e.register;return(0,i.jsx)(r.Z,{errors:t,data:n||o,legend:"",name:a,onChange:s,register:c})};a.defaultProps={name:"assignedToMe"}},9164:function(e,n,t){"use strict";t.d(n,{r:function(){return l}});var r=t(59499),i=t(41664),o=t.n(i),a=t(23795),s=t(85893);function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var l=function(e){var n=e.children,t=e.href,r=e.noWrap,i=e.target,c=e.sx,l=void 0===c?{}:c;return r?(0,s.jsx)(s.Fragment,{children:n}):t?(0,s.jsx)(o(),{href:t,target:i,passHref:!0,children:(0,s.jsx)(a.Z,u(u({sx:l},e),{},{children:n}))}):(0,s.jsx)(a.Z,u(u({sx:l},e),{},{children:n}))};l.defaultProps={onClick:function(e){e.stopPropagation()}}},35137:function(e,n,t){"use strict";t.d(n,{C:function(){return m}});var r=t(59499);t(67294);var i=t(90948),o=t(61730),a=t(26447),s=t(15861),c=t(11057),u=t(85893);function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var p=(0,i.ZP)("img")({width:"300px",height:"250px"}),m=function(e){var n=e.imageSrc,t=e.sx,r=e.imageSx,i=e.title,l=e.titleSx,m=e.subtitleFirstLine,g=e.subtitleFirstLineSx,f=e.subtitleSecondLine,v=e.subtitleSecondLineSx,h=e.buttonText,b=e.onAction,y=(0,o.Z)("(max-width: 400px)");return(0,u.jsxs)(a.Z,{sx:d(d({},t),{},{width:"100%",height:"100%"}),justifyContent:"center",alignItems:"center",spacing:2,color:"#757575",children:[(0,u.jsx)(p,{src:n,sx:d(d({},r),{},{width:y?"250px":"300px"})}),(0,u.jsx)(s.Z,{typography:"h5",sx:d({},l),children:i}),(0,u.jsxs)(a.Z,{alignItems:"center",sx:{padding:"0px 10px",textAlign:"center"},children:[(0,u.jsx)(s.Z,{sx:d({},g),children:m}),(0,u.jsx)(s.Z,{sx:d({},v),children:f})]}),h&&b&&(0,u.jsx)(c.Z,{variant:"contained",color:"secondary",onClick:b,children:h})]})};m.defaultProps={title:"",subtitleFirstLine:"",subtitleSecondLine:"",sx:{},imageSx:{},titleSx:{},subtitleFirstLineSx:{},subtitleSecondLineSx:{},onAction:null}},15154:function(e,n,t){"use strict";t.d(n,{C:function(){return a},w:function(){return s}});var r=t(59499);function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var a=function(e){return e=o(o({},e.supplierDetails),e)},s=function(e,n){var t=e.assignedUser,r=e.coverage,i=e.service,o=e.status,a=e.q,s={type:{_eq:"supplier"}};return t&&(s.managerId={_eq:n.id}),i&&(s.Services={Service:{id:{_eq:i.value}}}),r&&(s.PostcodeAreas={postcodeAreaId:{_eq:r.value}}),o&&(s.status={_eq:o.value}),a&&(s.name={_ilike:a}),s}},7581:function(e,n,t){"use strict";t.d(n,{D7:function(){return j},KQ:function(){return y},R7:function(){return b},j$:function(){return O},kx:function(){return P},l1:function(){return h},lk:function(){return x},ys:function(){return v}});var r,i,o,a,s,c,u,l,d,p,m,g=t(71383),f=t(75063),v=(0,f.Ps)(r||(r=(0,g.Z)(['\n  query GetSuppliers(\n    $limit: Int\n    $offset: Int\n    $orderBy: Account_order_by!\n    $where: Account_bool_exp\n  ) {\n    suppliers: Account(limit: $limit, offset: $offset, where: $where, order_by: [$orderBy]) {\n      id\n      createdAt\n      name\n      status\n      companyNumber\n      vatId\n      website\n      jobs: SupplierJobs_aggregate {\n        aggregate {\n          count\n          max {\n            scheduledAt\n          }\n          sum {\n            amount\n          }\n        }\n      }\n      jobList: SupplierJobs(order_by: { createdAt: desc }) {\n        id\n      }\n      services: Services(where: { entity: { _eq: "Account" } }) {\n        id\n        service: Service {\n          id\n          name\n        }\n      }\n      addresses: Addresses(where: { entity: { _eq: "Account" } }) {\n        id\n        registered\n        operating\n        trading\n        invoice\n        status\n        createdAt\n        address: Address {\n          id\n          name\n          addressLine1\n          addressLine2\n          addressLine3\n          city\n          county\n          geo\n          postCode\n          country: Country {\n            id\n            name\n          }\n        }\n      }\n      locations: Account_Locations {\n        id\n      }\n      manager: Manager {\n        id\n        nameFirst\n        nameLast\n      }\n      contactUsers: Account_Users(where: { isContact: { _eq: true } }) {\n        id\n        role\n        position\n        isContact\n        lastSignInAt\n        userId\n        user: User {\n          id\n          name: nameFirst\n          nameFirst\n          nameLast\n          phone\n          status\n          email\n          createdAt\n          fullName\n          accounts: Account_Users {\n            id\n            role\n            position\n            isContact\n            status\n            account: Account {\n              id\n              name\n              type\n            }\n          }\n        }\n      }\n    }\n    meta: Account_aggregate(where: $where) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n']))),h=(0,f.Ps)(i||(i=(0,g.Z)(['\n  query GetSupplier($id: Int!) {\n    supplier: Account_by_pk(id: $id) {\n      id\n      companyNumber\n      createdAt\n      name\n      status\n      type\n      updatedAt\n      website\n      clientType\n      managerId\n      vatId\n      meta\n      statusLogs: StatusLog(where: { entity: { _eq: "Account" } }) {\n        id\n        status\n        createdAt\n      }\n      media: Media {\n        id\n        medium: Medium {\n          id\n          category\n          filename\n          meta\n          type\n        }\n      }\n      manager: Manager {\n        id\n        fullName\n      }\n      addresses: Addresses(where: { entity: { _eq: "Account" } }) {\n        id\n        registered\n        operating\n        trading\n        invoice\n        status\n        createdAt\n        address: Address {\n          id\n          name\n          addressLine1\n          addressLine2\n          addressLine3\n          city\n          county\n          geo\n          postCode\n          country: Country {\n            id\n            name\n          }\n        }\n      }\n\n      details: SupplierDetail {\n        cisRegistered\n        quotingEmail\n        typeOfOrganisation\n        utrNumber\n        accountId\n      }\n\n      contactUsers: Account_Users(where: { isContact: { _eq: true } }) {\n        role\n        position\n        isContact\n        lastSignInAt\n        userId\n        user: User {\n          id\n          name: nameFirst\n          nameFirst\n          nameLast\n          phone\n          status\n          email\n          createdAt\n          fullName\n        }\n      }\n      usersMeta: Account_Users_aggregate {\n        aggregate {\n          count\n        }\n      }\n\n      compliances: Compliances(where: { entity: { _eq: "Account" } }, order_by: { expiryAt: asc }) {\n        id\n        createdAt\n        entity\n        entityId\n        expiryAt\n        regNum\n        insuranceAmount\n        meta\n      }\n      coverage: PostcodeAreas(where: { entity: { _eq: "Account" }, status: { _eq: "active" } }) {\n        id\n        status\n        createdAt\n        area: PostcodeArea {\n          id\n          name\n          area\n        }\n      }\n      services: Services {\n        serviceId\n        createdAt\n      }\n      references: References {\n        id\n        createdAt\n      }\n    }\n  }\n']))),b=(0,f.Ps)(o||(o=(0,g.Z)(["\n  query GetSupplierManage($id: Int!) {\n    supplier: Account_by_pk(id: $id) {\n      id\n      name\n      website\n      companyNumber\n      vatId\n      status\n      meta\n      managerSelected: Manager {\n        id\n        label: fullName\n        value: id\n      }\n      supplierDetails: SupplierDetail {\n        id\n        cisRegistered\n        quotingEmail\n        typeOfOrganisation\n        utrNumber\n      }\n    }\n  }\n"]))),y=(0,f.Ps)(a||(a=(0,g.Z)(["\n  mutation AddSupplier($objects: [Account_insert_input!]!) {\n    insert_Account(objects: $objects) {\n      returning {\n        id\n      }\n    }\n  }\n"])));(0,f.Ps)(s||(s=(0,g.Z)(["\n  mutation AddSupplierDetail($objects: [SupplierDetail_insert_input!]!) {\n    insert_SupplierDetail(objects: $objects) {\n      returning {\n        id\n        accountId\n      }\n    }\n  }\n"]))),(0,f.Ps)(c||(c=(0,g.Z)(["\n  mutation AddSupplierOffer($objects: [SupplierOffer_insert_input!]!) {\n    insert_SupplierOffer(objects: $objects) {\n      returning {\n        id\n      }\n    }\n  }\n"])));var j=(0,f.Ps)(u||(u=(0,g.Z)(["\n  mutation UpdateSupplier(\n    $supplierId: Int!\n    $supplier: Account_set_input\n    $supplierDetails: SupplierDetail_set_input\n  ) {\n    update_SupplierDetail(where: { accountId: { _eq: $supplierId } }, _set: $supplierDetails) {\n      returning {\n        id\n      }\n    }\n\n    update_Account_by_pk(pk_columns: { id: $supplierId }, _set: $supplier) {\n      id\n    }\n  }\n"]))),x=(0,f.Ps)(l||(l=(0,g.Z)(['\n  query GetPostCodeAreas(\n    $limit: Int\n    $offset: Int\n    $q: String\n    $supplierId: Int\n    $status: String = "active"\n  ) {\n    coverage: PostcodeArea_Entity(\n      where: {\n        entity: { _eq: "Account" }\n        entityId: { _eq: $supplierId }\n        status: { _eq: $status }\n        PostcodeArea: { name: { _ilike: $q } }\n      }\n      order_by: { PostcodeArea: { name: asc } }\n      limit: $limit\n      offset: $offset\n    ) {\n      id\n      status\n      createdAt\n      area: PostcodeArea {\n        id\n        name\n        area\n      }\n    }\n    meta: PostcodeArea_Entity_aggregate(\n      where: {\n        entity: { _eq: "Account" }\n        entityId: { _eq: $supplierId }\n        status: { _eq: $status }\n        PostcodeArea: { name: { _ilike: $q } }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n']))),O=(0,f.Ps)(d||(d=(0,g.Z)(["\n  query GetPostCodeAreaForSelect($countryId: Int, $q: String) {\n    items: PostcodeArea(\n      where: { name: { _ilike: $q }, countryId: { _eq: $countryId } }\n      order_by: { name: asc }\n    ) {\n      area\n      label: name\n      value: id\n    }\n  }\n"]))),P=(0,f.Ps)(p||(p=(0,g.Z)(['\n  query GetServicesForSelect($q: String, $limit: Int, $offset: Int) {\n    items: Service(\n      where: { name: { _ilike: $q }, status: { _eq: "active" } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n'])));(0,f.Ps)(m||(m=(0,g.Z)(['\n  query GetFinancialJob(\n    $adminId: Int\n    $customerId: Int\n    $endDate: timestamptz\n    $startDate: timestamptz\n    $limit: Int\n    $status: [String]\n    $managerId: Int\n    $locationId: Int\n    $offset: Int\n    $supplierId: Int\n    $q: String\n    $orderBy: Job_order_by!\n  ) {\n    jobs: Job(\n      limit: $limit\n      offset: $offset\n      where: {\n        type: { _in: ["reactive", "ppm"] }\n        _and: [\n          {\n            _or: [\n              { reference: { _ilike: $q } }\n              { title: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { Invoices: { invoiceNumber: { _ilike: $q } } }\n            ]\n          }\n          {\n            _or: [\n              { _and: [{ timingStart: { _gte: $startDate } }, { timingStart: { _lte: $endDate } }] }\n              { _and: [{ scheduledAt: { _gte: $startDate } }, { scheduledAt: { _lte: $endDate } }] }\n            ]\n          }\n        ]\n        status: { _in: $status }\n        customerId: { _eq: $customerId }\n        supplierId: { _eq: $supplierId }\n        managerId: { _eq: $managerId }\n        adminId: { _eq: $adminId }\n        locationId: { _eq: $locationId }\n      }\n      order_by: [$orderBy]\n    ) {\n      id\n      type\n      number\n      status\n      description\n      reference\n      timingStart\n      scheduledAt\n      createdAt\n\n      customerTotal: customerFinances(path: "amountInfo.total")\n      supplierTotal: supplierFinances(path: "amountInfo.total")\n      customerVatTotal: customerFinances(path: "amountInfo.vatTotal")\n      supplierVatTotal: supplierFinances(path: "amountInfo.vatTotal")\n      customerExpensesTotal: customerFinances(path: "expensesInfo.expensesTotal")\n      supplierExpensesTotal: supplierFinances(path: "expensesInfo.expensesTotal")\n      customerRebateAmount: customerFinances(path: "rebate.amount")\n\n      slaId\n      invoices: Invoices(order_by: { createdAt: desc }) {\n        invoiceNumber\n      }\n      customer: Customer {\n        id\n        name\n      }\n      supplier: Supplier {\n        id\n        name\n      }\n      location: Location {\n        id\n        name\n      }\n      sublocation: Sublocation {\n        id\n        name\n      }\n      sla: SLA {\n        name\n      }\n      manager: Manager {\n        fullName\n        nameLast\n        nameFirst\n        id\n      }\n      service: Service {\n        id\n        name\n      }\n    }\n    meta: Job_aggregate(\n      where: {\n        type: { _in: ["reactive", "ppm"] }\n        _and: [\n          {\n            _or: [\n              { reference: { _ilike: $q } }\n              { title: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { Invoices: { invoiceNumber: { _ilike: $q } } }\n            ]\n          }\n          {\n            _or: [\n              { _and: [{ timingStart: { _gte: $startDate } }, { timingStart: { _lte: $endDate } }] }\n              { _and: [{ scheduledAt: { _gte: $startDate } }, { scheduledAt: { _lte: $endDate } }] }\n            ]\n          }\n        ]\n        status: { _in: $status }\n        customerId: { _eq: $customerId }\n        supplierId: { _eq: $supplierId }\n        managerId: { _eq: $managerId }\n        adminId: { _eq: $adminId }\n        locationId: { _eq: $locationId }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n'])))},32836:function(e,n,t){"use strict";t.d(n,{i:function(){return S}});var r=t(59499),i=t(67294),o=t(11163),a=t(83148),s=t(26447),c=t(15861),u=t(90948),l=t(5616),d=t(41796),p=t(87361),m=t(42096),g=t(87043),f=t(61730),v=t(58886),h=t(70872),b=t(85893);function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function j(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?y(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var x=function(e){var n=e.currentPage,t=e.totalCount,r=e.pageSize,i=e.onPageChange,o=(0,f.Z)("(max-width:400px)"),a=(0,f.Z)("(max-width:500px)");return(0,b.jsx)(O,{mb:2,page:n,count:Math.ceil(t/r),onChange:function(e,n){return i(n)},variant:"outlined",shape:"rounded",size:o?"small":"medium",hidePrevButton:1===n,hideNextButton:n===Math.ceil(t/r),siblingCount:a?0:1,renderItem:function(e){return(0,b.jsx)(v.Z,j({slots:{previous:function(){return"Previous"},next:function(){return"Next"}}},e))}})};x.defaultProps={currentPage:1,totalCount:0,pageSize:50,onPageChange:function(){}};var O=(0,u.ZP)(h.Z)(function(e){var n,t=e.hidePrevButton,i=e.hideNextButton,o=e.theme;return n={},(0,r.Z)(n,"&.MuiPagination-root",{alignSelf:"center",marginTop:"16px"}),(0,r.Z)(n,"& .MuiPaginationItem-root",{fontWeight:600,margin:0,borderRadius:0}),(0,r.Z)(n,"& .MuiPagination-ul > li:last-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"0 5px 5px 0"}),(0,r.Z)(n,"& .MuiPagination-ul > li:first-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"5px 0 0 5px"}),(0,r.Z)(n,"& button.Mui-selected",j(j({color:o.palette.white.main,backgroundColor:o.palette.secondary.main},i?{borderRadius:"0 5px 5px 0"}:{}),t?{borderRadius:"5px 0 0 5px"}:{})),n});function P(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?P(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var S=(0,i.forwardRef)(function(e,n){var t=e.columns,r=e.history,a=e.initialSort,u=e.meta,l=e.refetch,d=e.paginationSize,f=e.containerHeight,v=e.noResultsMessage,h=e.autoHeight,y=(0,o.useRouter)(),j=y.query,O=void 0===j?{}:j,P=(0,i.useState)(parseInt(null==O?void 0:O.page,10)||1),S=P[0],Z=P[1],C=(0,i.useState)(d||g.C1.paginationSize),$=C[0],A=C[1];a||(a={item:"createdAt",order:"desc"});var D=(0,i.useState)({item:a.item,order:a.order}),q=D[0],k=D[1],M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=y.query,t=void 0===n?{}:n;if(e>1?t.page=e:delete t.page,!(Object.keys(t).length>0))return{};var r=Object.keys(t).map(function(n){return"page"===n?"".concat(n,"=").concat(e):"".concat(n,"=").concat(t[n])}).join("&");return"?".concat(r)},N=function(){k({item:a.item,order:a.order}),Z(1);var e=M();y.push(e),A(d||g.C1.paginationSize)};(0,i.useImperativeHandle)(n,function(){return{currentPage:S,pageSize:$,sort:q,resetPagination:function(){N()}}});var F=function(e){var n=M(e);r&&y.push(n),Z(e),!r&&l&&l()},E=function(e){e&&e.field&&e.sort?(k({item:t.find(function(n){return n.field===e.field}).sortName||e.field||e.item||a.item,order:e.sort||e.order||a.order}),l&&l()):(k({item:a.item,order:a.order}),l&&l())};return(0,b.jsxs)(w,{containerHeight:f,children:[(0,b.jsx)(I,_({hideFooter:!0,disableColumnMenu:!0,disableSelectionOnClick:!0,autoHeight:h,sortingMode:"server",onSortModelChange:function(e){return E(e[0])},columns:t,pageSize:$,slots:{columnSortedAscendingIcon:function(){return(0,b.jsx)(p.Z,{})},columnSortedDescendingIcon:function(){return(0,b.jsx)(m.Z,{})},columnUnsortedIcon:function(){return(0,b.jsxs)(s.Z,{alignItems:"center",sx:{width:"33px"},children:[(0,b.jsx)(p.Z,{sx:{marginBottom:"-15px"}}),(0,b.jsx)(m.Z,{})]})},noResultsOverlay:function(){return(0,b.jsx)(s.Z,{height:"100%",alignItems:"center",justifyContent:"center",spacing:1,p:1,children:(0,b.jsx)(c.Z,{children:v})})},noRowsOverlay:function(){return(0,b.jsx)(s.Z,{height:"100%",alignItems:"center",justifyContent:"center",spacing:1,p:1,children:(0,b.jsx)(c.Z,{children:v})})}}},e)),u&&Math.ceil(u.aggregate.totalCount/$)>1&&(0,b.jsx)(x,{currentPage:S,totalCount:u.aggregate.totalCount,pageSize:$,onPageChange:F})]})});S.defaultProps={columns:[],history:!1,loading:!1,rows:[],noResultsMessage:"There are no results.",autoHeight:!0};var w=(0,u.ZP)(l.Z)(function(e){return{height:e.containerHeight,display:"flex",flexDirection:"column"}}),I=(0,u.ZP)(a.s)(function(e){var n,t=e.theme,i=e.hideHeader,o=(e.rows,e.loading,e.rowHeight),a=e.isPdf;return n={"--DataGrid-overlayHeight":"40px"},(0,r.Z)(n,"&.MuiDataGrid-root",_({color:t.palette.black.main,border:"none"},a&&{"@media print":{display:"block"}})),(0,r.Z)(n,"& .MuiDataGrid-main",_({},a&&{"@media print":{overflow:"visible !important"}})),(0,r.Z)(n,"& .MuiDataGrid-columnHeaders",_(_({},i&&{display:"none"}),{},{"& .MuiDataGrid-iconButtonContainer":{visibility:"visible","& .MuiButtonBase-root.MuiIconButton-root":{backgroundColor:"inherit",color:t.palette.black.main,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.1)"}}}})),(0,r.Z)(n,"& .MuiDataGrid-virtualScroller",_(_({},i&&{marginTop:"0 !important"}),a&&{"@media print":{overflow:"visible !important"}})),(0,r.Z)(n,"& .MuiDataGrid-iconSeparator",{opacity:0}),(0,r.Z)(n,"& .MuiDataGrid-columnHeaderTitle",{fontWeight:700}),(0,r.Z)(n,"& .MuiButtonBase-root.MuiDataGrid-columnHeaderTitle",{fontWeight:700}),(0,r.Z)(n,"& .MuiDataGrid-virtualScrollerContent",_({},a&&{height:"initial !important",minHeight:"initial !important"})),(0,r.Z)(n,"& .MuiDataGrid-virtualScrollerRenderZone",_({},a&&{position:"relative"})),(0,r.Z)(n,"& .MuiDataGrid-overlayWrapper",(0,r.Z)({},"& .MuiCircularProgress-root",{color:t.palette.secondary.main})),(0,r.Z)(n,"& .MuiDataGrid-row",_({},a&&{minHeight:"".concat(o,"cm !important"),maxHeight:"".concat(o,"cm !important")})),(0,r.Z)(n,"& .MuiDataGrid-row > .MuiDataGrid-cell",_({},a&&{minHeight:"".concat(o,"cm !important"),maxHeight:"".concat(o,"cm !important")})),(0,r.Z)(n,"& .MuiDataGrid-row.even",{backgroundColor:t.palette.muiLightGray.main,"&:hover, &.Mui-hovered":{backgroundColor:(0,d.Fq)(t.palette.muiLightGray.main,.3),"@media (hover: none)":{backgroundColor:"transparent"}},"&.Mui-selected":{backgroundColor:(0,d.Fq)(t.palette.muiLightGray.main,.3+t.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:(0,d.Fq)(t.palette.muiLightGray.main,.3+t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,d.Fq)(t.palette.muiLightGray.main,.3+t.palette.action.selectedOpacity)}}}}),n})},42846:function(e,n,t){"use strict";t.d(n,{x:function(){return l}});var r=t(59499),i=t(67294),o=t(96486),a=t(87043),s=function(e){try{return JSON.parse(e)}catch(n){return!1}};function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var l=function(e){var n,t,c,l,d,p,m,g,f,v,h,b=e.filters,y=e.newFilters,j=e.initialSort,x=(0,i.useRef)(),O=(0,i.useState)({}),P=O[0],_=O[1],S=(0,i.useState)({}),w=S[0],I=S[1],Z=j||{item:"createdAt",order:"desc"},C=(0,r.Z)({},(null===(n=x.current)||void 0===n?void 0:n.sort.item)||Z.item,Z.inneritem?(0,r.Z)({},Z.inneritem,(null===(t=x.current)||void 0===t?void 0:t.sort.order)||Z.order):(null===(c=x.current)||void 0===c?void 0:c.sort.order)||Z.order);return(0,i.useEffect)(function(){var e=!(0,o.isEqual)(P,b),n=!(0,o.isEqual)(w,y);if(e&&(_(b),null==x||null===(r=x.current)||void 0===r||r.resetPagination()),n&&(I(y),null==x||null===(i=x.current)||void 0===i||i.resetPagination()),null!=x&&null!==(t=x.current)&&void 0!==t&&t.setSort&&!(e||n)){var t,r,i,a,s,c,u,l,d,p,m,g=null!==(a=x.current)&&void 0!==a&&null!==(s=a.sort)&&void 0!==s&&s.item&&null!==(c=x.current)&&void 0!==c&&null!==(u=c.sort)&&void 0!==u&&u.order?{item:null===(l=x.current)||void 0===l?void 0:null===(d=l.sort)||void 0===d?void 0:d.item,order:null===(p=x.current)||void 0===p?void 0:null===(m=p.sort)||void 0===m?void 0:m.order}:C;x.current.setSort(g)}},[b,y]),{initialData:u(u({},b),{},{newFilters:(null==y?void 0:y.length)>0?y:void 0,limit:(null===(l=x.current)||void 0===l?void 0:l.pageSize)==="Infinity"?null:parseInt(null===(d=x.current)||void 0===d?void 0:d.pageSize,10)||a.C1.paginationSize,offset:((null===(p=x.current)||void 0===p?void 0:p.currentPage)-1||0)*((null===(m=x.current)||void 0===m?void 0:m.pageSize)||a.C1.paginationSize),orderBy:s(null===(g=x.current)||void 0===g?void 0:null===(f=g.sort)||void 0===f?void 0:null===(v=f.item)||void 0===v?void 0:v.replace(/ORDER/i,null===(h=x.current)||void 0===h?void 0:h.sort.order))||C}),initialSort:j,ref:x}}},48829:function(e,n,t){"use strict";t.d(n,{S:function(){return r}});var r=function(e,n){var t=document.createElement("a");"string"==typeof t.download?(document.body.appendChild(t),t.download=n,t.href=e,t.click(),document.body.removeChild(t)):location.replace(e)}},3896:function(e,n,t){"use strict";t.d(n,{X:function(){return m}});var r,i,o=t(71383),a=t(16835),s=t(59499),c=t(67294),u=t(6812),l=t(50319),d=t(75063),p=t(55863);function m(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage",r=(0,p.q)().user,i=(0,c.useState)(function(){try{switch(t){case"network":return n;case"sessionStorage":return JSON.parse(window.sessionStorage.getItem(e))||n}}catch(r){return n}}),o=i[0],d=i[1],m=function(n){try{var i=n instanceof Function?n(o):n;switch(d(i),t){case"network":h({variables:{accountUserId:null==r?void 0:r.accountUserId,filters:(0,s.Z)({},e,i)}});break;case"sessionStorage":window.sessionStorage.setItem(e,JSON.stringify(i))}}catch(a){}};(0,u.a)(g,{variables:{accountUserId:null==r?void 0:r.accountUserId},skip:"network"!==t,onCompleted:function(t){var r=t.accountUser;r&&d(r.filters[e]||n)}});var v=(0,l.D)(f),h=(0,a.Z)(v,1)[0];return[o,m]}var g=(0,d.Ps)(r||(r=(0,o.Z)(["\n  query GetAccountUserFilters($accountUserId: Int!) {\n    accountUser: Account_User_by_pk(id: $accountUserId) {\n      filters\n    }\n  }\n"]))),f=(0,d.Ps)(i||(i=(0,o.Z)(["\n  mutation SetAccountUserFilters($accountUserId: Int!, $filters: jsonb) {\n    update_Account_User_by_pk(pk_columns: { id: $accountUserId }, _append: { filters: $filters }) {\n      id\n    }\n  }\n"])))},95782:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return V}});var r=t(11163),i=t.n(r),o=t(38033),a=t(16835),s=t(59499),c=t(67294),u=t(30381),l=t.n(u),d=t(6812),p=t(73359),m=t(7581),g=t(57460),f=t.n(g),v=t(26447),h=t(11057),b=t(98456),y=t(90629),j=t(15861),x=t(35137),O=t(32836),P=t(8602),_=t(9205),S=t(42846),w=t(94568),I=t(48829),Z=t(72936),C=t(26143),$=t(42283),A=t(71534),D=t(61730),q=t(50135),k=t(90948),M=t(11994),N=t(6911),F=t(3896),E=t(85893);function U(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function T(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?U(Object(t),!0).forEach(function(n){(0,s.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):U(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var L=function(e){var n=e.initialFilters,t=e.filters,r=e.setFilters,i=e.open,o=e.onClose,s=(0,D.Z)("(max-width: 400px)"),u=(0,c.useState)(),l=u[0],d=u[1],g=(0,c.useState)(),f=g[0],b=g[1],j=(0,F.X)("form_data_".concat(n.filterType),n),x=(0,a.Z)(j,2),O=x[0],P=x[1],_=(0,$.cI)({defaultValues:O}),S=_.control,w=_.handleSubmit,I=_.register,Z=_.reset,C=_.errors,k=function(){r(n),Z(),o(),P(T(T({},n),{},{filterType:n.filterType}))},M=(0,p.t)(m.j$,{variables:{where:{name:{_ilike:""!==l?"%".concat(l,"%"):null}}}}),U=(0,a.Z)(M,2),L=U[0],R=U[1],H=R.loading,z=R.data,B=(z=void 0===z?{items:[]}:z).items,W=(0,p.t)(m.kx,{variables:{where:{name:{_ilike:""!==f?"%".concat(f,"%"):null}}}}),J=(0,a.Z)(W,2),Y=J[0],Q=J[1],V=Q.loading,X=Q.data,K=(X=void 0===X?{items:[]}:X).items,ee=function(e){var i=T(T(T({},t),e),{},{q:e.q});r(T(T({},i),{},{q:e.q?"%".concat(e.q,"%"):null})),P(T(T({},i),{},{filterType:n.filterType})),Z(),o()};return(0,E.jsx)(G,{open:i,onClose:o,children:(0,E.jsx)(y.Z,{sx:{minWidth:s?"300px":"400px",padding:"20px 40px"},children:(0,E.jsxs)("form",{onSubmit:w(ee),children:[(0,E.jsxs)(v.Z,{spacing:4,children:[(0,E.jsx)(q.Z,{fullWidth:!0,variant:"standard",color:"secondary",label:"Search...",name:"q",inputRef:I}),(0,E.jsx)($.Qr,{name:"coverage",control:S,render:function(e){var n,t=e.value,r=e.onChange;return(0,E.jsx)(N.q,{limitTags:6,color:"secondary",value:t,onChange:function(e,n){return r(n)},loading:H,onOpen:function(){return L()},options:B,setSearch:d,textFieldProps:{label:"Select coverage",variant:"standard",color:"secondary",error:C.coverage,helperText:null===(n=C.coverage)||void 0===n?void 0:n.message}})}}),(0,E.jsx)($.Qr,{name:"service",control:S,render:function(e){var n,t=e.value,r=e.onChange;return(0,E.jsx)(N.q,{limitTags:6,color:"secondary",value:t,onChange:function(e,n){return r(n)},loading:V,onOpen:function(){return Y()},options:K,setSearch:b,textFieldProps:{label:"Select service",variant:"standard",color:"secondary",error:C.service,helperText:null===(n=C.service)||void 0===n?void 0:n.message}})}}),(0,E.jsx)($.Qr,{name:"status",control:S,render:function(e){var n,t=e.value,r=e.onChange;return(0,E.jsx)(N.q,{limitTags:6,color:"secondary",value:t,onChange:function(e,n){return r(n)},options:[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}],textFieldProps:{label:"Select status",variant:"standard",color:"secondary",error:C.status,helperText:null===(n=C.status)||void 0===n?void 0:n.message}})}}),(0,E.jsx)(A.N,T(T({},{control:S,errors:C,register:I}),{},{name:"assignedUser",onChange:function(e){return r(function(n){return T(T({},n),{},{assignedUser:e.target.checked})})}}))]}),(0,E.jsxs)(v.Z,{width:"100%",direction:"row",justifyContent:"flex-end",spacing:2,sx:{margin:"20px 0"},children:[(0,E.jsx)(h.Z,{variant:"contained",color:"danger",onClick:function(){return k()},children:"Cancel"}),(0,E.jsx)(h.Z,{variant:"contained",color:"secondary",type:"submit",children:"Search"})]})]})})})},G=(0,k.ZP)(M.Z)(function(){return{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"}}),R=t(15154),H=t(9164);function z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function B(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?z(Object(t),!0).forEach(function(n){(0,s.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):z(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var W="/dashboard/suppliers/",J=function(e){var n,t,r=e.initialFilters,o=(0,Z.x)().user,s=(0,w.s)(),u=(0,c.useState)(B({},r)),g=u[0],$=u[1],A=(0,S.x)({filters:g}),D=A.initialData,q=A.ref,k=(0,c.useState)(!1),M=k[0],N=k[1],F=(0,c.useState)(!1),U=F[0],T=F[1],G=(0,d.a)(m.ys,{variables:B({where:(0,R.w)(D,o)},D)}),z=G.data,J=(z=void 0===z?{suppliers:[],meta:{aggregate:{totalCount:0}}}:z).suppliers,Y=z.meta,Q=G.loading,V=G.refetch,X=(0,p.t)(m.ys,{fetchPolicy:"no-cache",variables:B(B({where:(0,R.w)(D,o)},D),{},{limit:(null==Y?void 0:null===(n=Y.aggregate)||void 0===n?void 0:n.totalCount)||150}),onCompleted:function(e){try{var n=f().unparse(et(e.suppliers)),t="data:application/octet-stream,"+encodeURIComponent(n);(0,I.S)(t,"suppliers.csv")}finally{T(!1)}}}),K=(0,a.Z)(X,1)[0],ee=function(e){e.stopPropagation(),T(!0),K()},en=function(e){return[{context:"secondary",icon:"edit",onClick:function(n){return ea(n)(e)},tooltip:"Edit"}]},et=function(e){return e.map(function(e){var n,t,r,i,o,a,s,c,u,d,p,m,g;return{name:e.name,companyNumber:e.companyNumber,vatId:e.vatId,website:e.website,status:e.status,createdAt:l()(e.createdAt).format("YYYY-MM-DD"),jobsCount:null===(n=e.jobs)||void 0===n?void 0:null===(t=n.aggregate)||void 0===t?void 0:t.count,email:null!==(r=e.contactUsers)&&void 0!==r&&r.length?null===(i=e.contactUsers[0].user)||void 0===i?void 0:i.email:"",phoneNumber:null!==(o=e.contactUsers)&&void 0!==o&&o.length?null===(a=e.contactUsers[0].user)||void 0===a?void 0:a.phone:"",contactName:null!==(s=e.contactUsers)&&void 0!==s&&s.length?null===(c=e.contactUsers[0].user)||void 0===c?void 0:c.fullName:"",lastJob:null!==(u=e.jobList)&&void 0!==u&&u.length?e.jobList[0].id:"",earnings:null===(d=e.jobs)||void 0===d?void 0:null===(p=d.aggregate)||void 0===p?void 0:null===(m=p.sum)||void 0===m?void 0:m.amount,services:null===(g=e.services)||void 0===g?void 0:g.map(function(e){var n;return null===(n=e.service)||void 0===n?void 0:n.name}).join(", ")}})},er=(0,c.useCallback)(function(){return J.map(function(e){var n,t,r,i,o,a,s,c,u,d,p,m,g=(0,_.WE)(e,"registered"),f=null==g?void 0:null===(n=g.address)||void 0===n?void 0:n.city,v=(null===(t=e.jobs)||void 0===t?void 0:null===(r=t.aggregate)||void 0===r?void 0:null===(i=r.max)||void 0===i?void 0:i.scheduledAt)&&l()(null===(o=e.jobs)||void 0===o?void 0:null===(a=o.aggregate)||void 0===a?void 0:null===(s=a.max)||void 0===s?void 0:s.scheduledAt).format("YYYY-MM-DD");return{id:e.id,managerId:null==e?void 0:null===(c=e.manager)||void 0===c?void 0:c.id,name:e.name,jobsCount:null===(u=e.jobs)||void 0===u?void 0:null===(d=u.aggregate)||void 0===d?void 0:d.count,lastJob:v,contactName:null!==(p=e.contactUsers)&&void 0!==p&&p.length?"".concat(e.contactUsers[0].user.nameFirst," ").concat(e.contactUsers[0].user.nameLast):"Unassigned",contactId:(null===(m=e.contactUsers)||void 0===m?void 0:m.length)&&e.contactUsers[0].user.id,city:f||"",createdAt:l()(e.createdAt).format("YYYY-MM-DD"),status:e.status.charAt(0).toUpperCase()+e.status.slice(1,e.status.length),actions:""}})},[J]),ei=(0,c.useMemo)(function(){var e={};return!er().length&&null!=D&&D.q?{title:"No results",subtitleFirstLine:"The filters you have applied have returned no results",subtitleSecondLine:"Please amend and try again if necessary."}:{title:"No suppliers",subtitleFirstLine:"You currently have no suppliers set up in the system",subtitleSecondLine:"Click\xa0create supplier\xa0to get started building.",buttonText:"Create supplier",onAction:eo}},[null==D?void 0:D.q,er]),eo=function(){i().push("".concat(W,"create"))},ea=function(e){return e.stopPropagation(),function(e){i().push("".concat(W,"edit?id=").concat(e.id))}},es=function(e){i().push("".concat(W,"view?id=").concat(e.id))};return(0,E.jsxs)(E.Fragment,{children:[M&&(0,E.jsx)(L,{initialFilters:r,open:M,filters:g,setFilters:$,onClose:function(){return N(!1)}}),(0,E.jsxs)(v.Z,{width:"100%",spacing:2,sx:{height:"100%"},children:[(0,E.jsxs)(v.Z,{width:"100%",direction:"row",justifyContent:"space-between",children:[(0,E.jsx)(h.Z,{variant:"contained",startIcon:(0,E.jsx)(P.Z,{}),onClick:function(){return N(!0)},children:"Filters"}),(0,E.jsxs)(v.Z,{direction:"row",spacing:2,children:[(0,E.jsx)(h.Z,{variant:"contained",color:"secondary",onClick:eo,children:"Create supplier"}),!s&&(0,E.jsx)(h.Z,{startIcon:!U&&(0,E.jsx)("img",{src:"/static/icons/csv.svg"}),disabled:U,variant:"contained",color:"success",onClick:ee,children:U?(0,E.jsx)(b.Z,{size:20,color:"secondary"}):"Export"})]})]}),(0,E.jsxs)(y.Z,{sx:{padding:"16px 0px",height:"calc(100% - 52px)"},children:[(0,E.jsx)(j.Z,{ml:2,variant:"h5",sx:{fontWeight:600,marginBottom:"15px"},children:"Suppliers"}),null!==(t=er())&&void 0!==t&&t.length?(0,E.jsx)(O.i,{ref:q,loading:Q,columns:[{field:"name",headerName:"Name",minWidth:130,flex:1},{field:"jobsCount",headerName:"Number of jobs",minWidth:130,flex:1,sortName:'{"SupplierJobs_aggregate": {"count": "ORDER"}}'},{field:"lastJob",headerName:"Last job",minWidth:130,flex:1,sortName:'{"SupplierJobs_aggregate": {"max": {"scheduledAt": "ORDER"}}}'},{field:"contactName",headerName:"Contact",minWidth:130,flex:1,sortable:!1,renderCell:function(e){var n=e.row,t=n.contactName,r=n.contactId;return(0,E.jsx)(H.r,{color:"secondary",href:"/dashboard/users/view?id=".concat(r),children:t})}},{field:"city",headerName:"City",minWidth:130,flex:1,sortable:!1},{field:"createdAt",headerName:"Created",minWidth:130,flex:1},{field:"status",headerName:"Status",minWidth:130,flex:1,sortable:!1},{field:"actions",headerName:"Actions",minWidth:130,flex:1,sortable:!1,renderCell:function(e){var n=e.row;return(0,E.jsx)(C.C,{actionsData:en,row:n})}}],rows:er(),columnVisibilityModel:{},meta:Y,refetch:V,autoHeight:!1,containerHeight:"calc(100% - 52px)",onRowClick:es}):!Q&&(0,E.jsx)(x.C,B({imageSrc:"/static/icons/no_locations_found.svg"},ei))]})]})]})},Y={assignedUser:!1,coverageId:null,q:null,status:{label:"Active",value:"active"},serviceId:null,filterType:"suppliers_table"},Q=function(){return(0,Z.x)().user?(0,E.jsx)(o.Z,{children:(0,E.jsx)(J,{initialFilters:Y})}):(i().push("/account/sign-in"),null)};Q.getLayout=function(e){return e};var V=Q},89177:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/suppliers",function(){return t(95782)}])}},function(e){e.O(0,[3662,2283,212,8890,1100,4135,5020,6043,4244,3776,2329,778,1023,4253,3148,6344,2852,8033,9774,2888,179],function(){return e(e.s=89177)}),_N_E=e.O()}]);