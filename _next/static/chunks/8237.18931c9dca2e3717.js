"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8237],{29422:function(e,t,n){n.d(t,{Z:function(){return l}});var o=n(77349),a=n(11640),r=n(19013),s=n(13882),i=n(83946);function l(e,t){if((0,s.Z)(2,arguments),!t||"object"!=typeof t)return new Date(NaN);var n=t.years?(0,i.Z)(t.years):0,l=t.months?(0,i.Z)(t.months):0,c=t.weeks?(0,i.Z)(t.weeks):0,d=t.days?(0,i.Z)(t.days):0,u=t.hours?(0,i.Z)(t.hours):0,h=t.minutes?(0,i.Z)(t.minutes):0,p=t.seconds?(0,i.Z)(t.seconds):0,m=(0,r.Z)(e),v=l||n?(0,a.Z)(m,l+12*n):m,y=d||c?(0,o.Z)(v,d+7*c):v;return new Date(y.getTime()+1e3*(p+60*(h+60*u)))}},38237:function(e,t,n){n.r(t),n.d(t,{default:function(){return eh}});var o,a,r,s,i=n(50029),l=n(16835),c=n(59499),d=n(64687),u=n.n(d),h=n(67294),p=n(66252),m=n(6812),v=n(50319),y=n(71383),b=n(75063),g=(0,b.Ps)(o||(o=(0,y.Z)(["\n  query GetDashboard(\n    $accountId: Int\n    $adminId: Int\n    $timezone: String\n    $asAt: timestamptz\n    $monthStart: timestamptz\n    $dayStart: timestamptz\n    $userId: Int\n    $currentUserId: Int\n    $yearStart: timestamptz\n  ) {\n    dashboardTilesData: getDashboard_HomeTiles(\n      args: {\n        adminId: $adminId\n        asAt: $asAt\n        accountId: $accountId\n        monthStart: $monthStart\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n      }\n    ) {\n      thresholdApprovals\n      quotesNotSubmitted\n      reactiveJobsToday\n      plannedJobsToday\n      complianceJobToday\n      reportUnsent\n      liveP1Jobs\n      offeredJobs\n      quotesToday\n      quotesNotSent\n      quotesOverdue\n      quotesDueThisWeek\n      inprogressJobs\n      numberOfOpenJobs\n      jobsInDispute\n      worksValueMTD\n      worksValueYTD\n      overdueComplianceJobs\n      onHold\n      upliftRequested\n      ppmOverdue\n      reactiveOverdue\n      failedJobs\n      jobsWithTimeNotConfirmed\n      jobsRequiringExpenseAmount\n      imminentJobSlaBreaches\n      jobsWithTimeNotConfirmedNext7days\n      jobsWithTimeNotConfirmedCurrentMonth\n      openRemedialQuotes\n      openQuotes\n      imminentQuoteSlaBreaches\n      quoteSlaBreached\n      jobSlaBreachedOnSite\n      jobSlaBreachedJobReport\n    }\n    chartJobsPerDay: getDashboard_HomeTiles_Jobs_perDay(\n      args: {\n        adminId: $adminId\n        timeZone: $timezone\n        asAt: $asAt\n        accountId: $accountId\n        monthStart: $monthStart\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n      }\n    ) {\n      jobsOnThisMonth\n    }\n    chartRevenuesPerDay: getDashboard_HomeTiles_Revenues_perDay(\n      args: {\n        adminId: $adminId\n        timeZone: $timezone\n        asAt: $asAt\n        accountId: $accountId\n        monthStart: $monthStart\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n      }\n    ) {\n      revenuesOnThisMonth\n    }\n    chartRevenuesPerYear: getDashboard_HomeTiles_Revenues_perYear(\n      args: {\n        adminId: $adminId\n        timeZone: $timezone\n        asAt: $asAt\n        accountId: $accountId\n        monthStart: $monthStart\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n      }\n    ) {\n      revenuesOnThisYear\n    }\n  }\n"]))),f=(0,b.Ps)(r||(r=(0,y.Z)(["\n  query GetSuppliersLocation($where: UserLocation_bool_exp) {\n    suppliersLocation: UserLocation(distinct_on: userId, where: $where) {\n      id\n      geo\n      account: Account {\n        id\n        name\n      }\n      user: User {\n        id\n        fullName\n      }\n    }\n  }\n"]))),w=(0,b.Ps)(s||(s=(0,y.Z)(['\n  query GetJobsLocation($where: Job_bool_exp) {\n    jobsLocation: Job(where: $where, order_by: { createdAt: desc }) {\n      id\n      number\n      type\n      location: Location {\n        id\n        name\n        addresses: Addresses(\n          where: { registered: { _eq: true }, entity: { _eq: "Location" } }\n          order_by: { createdAt: desc }\n        ) {\n          address: Address {\n            addressLine1\n            addressLine2\n            addressLine3\n            postCode\n            name\n            geo\n          }\n        }\n      }\n      supplier: Supplier {\n        id\n        name\n      }\n      service: Service {\n        id\n        name\n      }\n    }\n  }\n']))),I=n(11163),k=n.n(I),j=n(83894),S=n(23855),Z=n(43703),T=n(69119),x=n(38148),D=n(74975),M=n(10367),C=[{pinned:!0,colourConfig:{success:[0,15],danger:[16,30],warning:[30,null]},name:"reactiveJobsToday",greaterIsBetter:!0},{pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},name:"plannedJobsToday",greaterIsBetter:!0},{pinned:!0,colourConfig:{success:[0,5],danger:[6,10],warning:[11,null]},name:"quotesToday",greaterIsBetter:!0},{pinned:!0,colourConfig:{success:[0,5],danger:[6,10],warning:[11,null]},name:"liveP1Jobs",greaterIsBetter:!0},{name:"chartJobMetrics"},{name:"mapChart"},{name:"numberOfNotifications"}],J=n(27812),N=n(7069),O=n(77349),B=n(29383),A=n(96486);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach(function(t){(0,c.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var L="/dashboard",_=function(e){var t,n,o,a,r,s,i,l,c,d,u=e.asAt,h=e.userTiles,p=e.dashboardTilesData,m=e.userId,v=e.accountId,y=p||{},b=y.thresholdApprovals,g=y.quotesNotSubmitted,f=y.complianceJobToday,w=y.inprogressJobs,I=y.liveP1Jobs,k=y.onHold,j=y.overdueComplianceJobs,S=y.plannedJobsToday,Z=y.ppmOverdue,T=y.quotesDueThisWeek,x=y.quotesOverdue,M=y.quotesToday,C=y.reactiveJobsToday,q=y.reportUnsent,_=y.reactiveOverdue,$=y.upliftRequested,z=y.worksValueMTD,R=y.worksValueYTD,E=y.jobsOnThisMonth,W=y.revenuesOnThisMonth,Q=y.revenuesOnThisYear,U=y.suppliersLocation,V=y.jobsLocation,Y=y.failedJobs,H=y.jobsWithTimeNotConfirmed,G=y.jobsRequiringExpenseAmount,F=y.imminentJobSlaBreaches,K=y.jobsWithTimeNotConfirmedCurrentMonth,X=y.jobsWithTimeNotConfirmedNext7days,ee=y.openRemedialQuotes,et=y.openQuotes,en=y.imminentQuoteSlaBreaches,eo=y.quoteSlaBreached,ea=y.jobSlaBreachedOnSite,er=y.jobSlaBreachedJobReport,es=[],ei=[],el=[],ec=[],ed=[],eu=[],eh=[],ep=[],em=[],ev=[];if(E&&E.length>0&&E.forEach(function(e,t){var n=e.date,o=e.ppmJobsOnThisMonth,a=e.reactiveJobsOnThisMonth,r=new Date(u),s=new Date(n);if(s>=(0,N.Z)(r,8)&&s<=(0,O.Z)(r,7)){if(E[t-1])for(var i=E[t-1].date,l=(0,B.Z)(s,new Date(i)),c=1;c<l;c++)es.push({date:(0,N.Z)(s,c),values:[]}),ec.push({date:(0,N.Z)(s,c),values:[]});es.push({date:s,values:o}),ec.push({date:s,values:a})}if(s>=(0,N.Z)(r,15)&&s<=(0,O.Z)(r,14)){if(E[t-1])for(var d=E[t-1].date,h=(0,B.Z)(s,new Date(d)),p=1;p<h;p++)ei.push({date:(0,N.Z)(s,p),values:[]}),ed.push({date:(0,N.Z)(s,p),values:[]});ei.push({date:s,values:o}),ed.push({date:s,values:a})}if(s>=(0,N.Z)(r,31)&&s<=(0,O.Z)(r,30)){if(E[t-1])for(var m=E[t-1].date,v=(0,B.Z)(s,new Date(m)),y=1;y<v;y++)el.push({date:(0,N.Z)(s,y),values:[]}),eu.push({date:(0,N.Z)(s,y),values:[]});el.push({date:s,values:o}),eu.push({date:s,values:a})}}),W&&W.length>0){var ey="dd/MM";W.forEach(function(e,t){var n=e.date,o=e.revenuesOnThisDay,a=new Date(u),r=new Date(n);if(r>=(0,N.Z)(a,8)){if(W[t-1])for(var s=W[t-1].date,i=(0,B.Z)(new Date(s),r),l=1;l<i;l++)eh.push({date:(0,O.Z)(r,l),sum:[]});eh.push({date:r,sum:o,formatDate:ey})}if(r>=(0,N.Z)(a,15)){if(W[t-1])for(var c=W[t-1].date,d=(0,B.Z)(new Date(c),r),h=1;h<d;h++)ep.push({date:(0,O.Z)(r,h),sum:[]});ep.push({date:r,sum:o,formatDate:ey})}if(r>=(0,N.Z)(a,31)){if(W[t-1])for(var p=W[t-1].date,m=(0,B.Z)(new Date(p),r),v=1;v<m;v++)em.push({date:(0,O.Z)(r,v),sum:[]});em.push({date:r,sum:o,formatDate:ey})}})}Q&&Q.length>0&&Q.forEach(function(e){var t=e.date,n=e.revenuesOnThisMonth;ev.push({date:t,sum:n,formatDate:"MM/yyyy"})});var eb=u?(0,D.Z)(u,"yyyy-MM-dd"):"",eg=[{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,15],danger:[16,30],warning:[30,null]},title:"Reactive jobs today",description:"Reactive jobs scheduled to happen today",name:"reactiveJobsToday",to:"".concat(L,"/issues?asAt=").concat(eb,"&tileName=reactiveJobsToday").concat(m?"&userId=".concat(m):"").concat(v?"&accountId=".concat(v):""),values:{today:(null==C?void 0:C.today)||0,week:(null==C?void 0:C.week)||0,month:(null==C?void 0:C.month)||0,threeMonth:(null==C?void 0:C.threeMonth)||0,year:(null==C?void 0:C.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"PPM jobs today",description:"Planned maintenance jobs scheduled to happen today",name:"plannedJobsToday",to:"".concat(L,"/issues?type=ppm&asAt=").concat(eb,"&tileName=plannedJobsToday").concat(m?"&userId=".concat(m):"").concat(v?"&accountId=".concat(v):""),values:{today:(null==S?void 0:S.today)||0,week:(null==S?void 0:S.week)||0,month:(null==S?void 0:S.month)||0,threeMonth:(null==S?void 0:S.threeMonth)||0,year:(null==S?void 0:S.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,5],danger:[6,10],warning:[11,null]},title:"Quotes today",description:"Quotes where due date is today",name:"quotesToday",to:"".concat(L,"/quotes?asAt=").concat(eb,"&tileName=quotesToday").concat(m?"&userId=".concat(m):"").concat(v?"&accountId=".concat(v):""),values:{today:(null==M?void 0:M.today)||0,week:(null==M?void 0:M.week)||0,month:(null==M?void 0:M.month)||0,threeMonth:(null==M?void 0:M.threeMonth)||0,year:(null==M?void 0:M.year)||0},greaterIsBetter:!0},{type:"chart",size:[2,1],title:"Jobs metrics",name:"chartJobMetrics",values:{week:[{groupLabel:"Jobs per day",groupName:"jobsPerUnit",groupDescription:"Number of jobs currently in the system for selected time range",chartData:[{label:"Planned",color:"#1E88E5",data:null!==(t=(0,A.orderBy)(es,"date","asc"))&&void 0!==t?t:[]},{label:"Reactive",color:"#cfd9e0",data:null!==(n=(0,A.orderBy)(ec,"date","asc"))&&void 0!==n?n:[]}]},{groupLabel:"Revenue per day",groupName:"revenuesPerUnit",groupDescription:"Sum of all job totals by day for selected time range",chartData:[{label:"Revenue",color:"#1E88E5",data:null!==(o=(0,A.orderBy)(eh,"date","asc"))&&void 0!==o?o:[]}]}],twoWeeks:[{groupLabel:"Jobs per day",groupName:"jobsPerUnit",groupDescription:"Number of jobs currently in the system for selected time range",chartData:[{label:"Planned",color:"#1E88E5",data:null!==(a=(0,A.orderBy)(ei,"date","asc"))&&void 0!==a?a:[]},{label:"Reactive",color:"#cfd9e0",data:null!==(r=(0,A.orderBy)(ed,"date","asc"))&&void 0!==r?r:[]}]},{groupLabel:"Revenue per day",groupName:"revenuesPerUnit",groupDescription:"Sum of all job totals by day for selected time range",chartData:[{label:"Revenue",color:"#1E88E5",data:null!==(s=(0,A.orderBy)(ep,"date","asc"))&&void 0!==s?s:[]}]}],month:[{groupLabel:"Jobs per day",groupName:"jobsPerUnit",groupDescription:"Number of jobs currently in the system for selected time range",chartData:[{label:"Planned",color:"#1E88E5",data:null!==(i=(0,A.orderBy)(el,"date","asc"))&&void 0!==i?i:[]},{label:"Reactive",color:"#cfd9e0",data:null!==(l=(0,A.orderBy)(eu,"date","asc"))&&void 0!==l?l:[]}]},{groupLabel:"Revenue per day",groupName:"revenuesPerUnit",groupDescription:"Sum of all job totals by day for selected time range",chartData:[{label:"Revenue",color:"#1E88E5",data:null!==(c=(0,A.orderBy)(em,"date","asc"))&&void 0!==c?c:[]}]}],year:[{groupLabel:"Monthly job revenue",groupName:"revenuesPerYear",groupDescription:"Sum of all job totals by day for selected time range",chartData:[{label:"Revenue",color:"#1E88E5",data:null!==(d=(0,A.orderBy)(ev,"date","asc"))&&void 0!==d?d:[]}]}]}},{type:"mapChart",size:[2,1],title:"Geolocation info",name:"mapChart",values:{month:[{groupLabel:"Last supplier location",groupName:"suppliersLocation",groupDescription:"Last supplier location",chartData:[{label:"Last supplier location",markerIcon:"supplier",data:(null==U?void 0:U.month)||[]}]},{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==V?void 0:V.month)||[]}]}],threeMonth:[{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==V?void 0:V.threeMonth)||[]}]}],tomorrow:[{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==V?void 0:V.tomorrow)||[]}]}],today:[{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==V?void 0:V.today)||[]}]}],nextWeek:[{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==V?void 0:V.nextWeek)||[]}]}],nextTwoWeeks:[{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==V?void 0:V.nextTwoWeeks)||[]}]}],nextMonth:[{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==V?void 0:V.nextMonth)||[]}]}],week:[{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==V?void 0:V.week)||[]}]}]}},{type:"tile",size:[1,1],colourConfig:{success:[0,4],danger:[5,5],warning:[6,null]},title:"Live P1 jobs",description:"Jobs with P1 status scheduled for today but not completed",name:"liveP1Jobs",to:"".concat(L,"/issues?asAt=").concat(eb,"&tileName=liveP1Jobs").concat(m?"&userId=".concat(m):""),values:{today:(null==I?void 0:I.today)||0,week:(null==I?void 0:I.week)||0,month:(null==I?void 0:I.month)||0,threeMonth:(null==I?void 0:I.threeMonth)||0,year:(null==I?void 0:I.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,4],danger:[5,5],warning:[6,null]},title:"Overdue reactive jobs",description:"Reactive jobs that have not yet been started or completed 24 hours after scheduled time",name:"reactiveOverdue",to:"".concat(L,"/issues?asAt=").concat(eb,"&tileName=reactiveOverdue").concat(m?"&userId=".concat(m):""),values:{today:(null==_?void 0:_.today)||0,week:(null==_?void 0:_.week)||0,month:(null==_?void 0:_.month)||0,threeMonth:(null==_?void 0:_.threeMonth)||0,year:(null==_?void 0:_.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,4],danger:[5,5],warning:[6,null]},title:"Overdue PPM",description:"Planned maintenance jobs that have not yet been started or completed 24 hours after scheduled time",name:"ppmOverdue",to:"".concat(L,"/issues?type=ppm&asAt=").concat(eb,"&tileName=ppmOverdue").concat(m?"&userId=".concat(m):""),values:{today:(null==Z?void 0:Z.today)||0,week:(null==Z?void 0:Z.week)||0,month:(null==Z?void 0:Z.month)||0,threeMonth:(null==Z?void 0:Z.threeMonth)||0,year:(null==Z?void 0:Z.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,4],danger:[5,5],warning:[6,null]},title:"Quotes overdue",description:"Quotes which are past due date but have not had resolution.",name:"quotesOverdue",to:"".concat(L,"/quotes?asAt=").concat(eb,"&tileName=quotesOverdue").concat(m?"&userId=".concat(m):""),values:{today:(null==x?void 0:x.today)||0,week:(null==x?void 0:x.week)||0,month:(null==x?void 0:x.month)||0,threeMonth:(null==x?void 0:x.threeMonth)||0,year:(null==x?void 0:x.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Compliance jobs today",description:"Compliance work orders that are scheduled to take place today",name:"complianceJobToday",to:"".concat(L,"/issues?asAt=").concat(eb,"&tileName=complianceJobToday").concat(m?"&userId=".concat(m):""),values:{today:(null==f?void 0:f.today)||0,week:(null==f?void 0:f.week)||0,month:(null==f?void 0:f.month)||0,threeMonth:(null==f?void 0:f.threeMonth)||0,year:(null==f?void 0:f.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Overdue compliance jobs",description:"Compliance jobs that have not yet been started or completed 24 hours after scheduled time",name:"overdueComplianceJobs",to:"".concat(L,"/issues?asAt=").concat(eb,"&tileName=overdueComplianceJobs").concat(m?"&userId=".concat(m):""),values:{today:(null==j?void 0:j.today)||0,week:(null==j?void 0:j.week)||0,month:(null==j?void 0:j.month)||0,threeMonth:(null==j?void 0:j.threeMonth)||0,year:(null==j?void 0:j.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,20],danger:[21,40],warning:[41,null]},title:"Jobs in progress",description:"Jobs currently in progress",name:"inprogressJobs",to:"".concat(L,"/issues?asAt=").concat(eb,"&tileName=inprogressJobs").concat(m?"&userId=".concat(m):""),values:{today:(null==w?void 0:w.today)||0,week:(null==w?void 0:w.week)||0,month:(null==w?void 0:w.month)||0,threeMonth:(null==w?void 0:w.threeMonth)||0,year:(null==w?void 0:w.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,5],danger:[6,10],warning:[11,null]},title:"Reports unsent",description:"Jobs that have been completed but where a report has not been sent within 24 hours",name:"reportUnsent",to:"".concat(L,"/issues?asAt=").concat(eb,"&tileName=reportUnsent").concat(m?"&userId=".concat(m):""),values:{today:(null==q?void 0:q.today)||0,week:(null==q?void 0:q.week)||0,month:(null==q?void 0:q.month)||0,threeMonth:(null==q?void 0:q.threeMonth)||0,year:(null==q?void 0:q.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,4],danger:[5,5],warning:[6,null]},title:"Jobs on hold",description:"Jobs currently marked as on hold",name:"onHold",to:"".concat(L,"/issues?asAt=").concat(eb,"&tileName=onHold").concat(m?"&userId=".concat(m):""),values:{today:(null==k?void 0:k.today)||0,week:(null==k?void 0:k.week)||0,month:(null==k?void 0:k.month)||0,threeMonth:(null==k?void 0:k.threeMonth)||0,year:(null==k?void 0:k.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,4],danger:[5,5],warning:[6,null]},title:"Uplift requests",description:"Jobs where an uplift has been requested but not yet approved or rejected",name:"upliftRequested",to:"".concat(L,"/issues?asAt=").concat(eb,"&tileName=upliftRequested").concat(m?"&userId=".concat(m):""),values:{today:(null==$?void 0:$.today)||0,week:(null==$?void 0:$.week)||0,month:(null==$?void 0:$.month)||0,threeMonth:(null==$?void 0:$.threeMonth)||0,year:(null==$?void 0:$.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Quotes due this week",description:"Quotes where due date is within next 7 days",name:"quotesDueThisWeek",to:"".concat(L,"/quotes?asAt=").concat(eb,"&tileName=quotesDueThisWeek").concat(m?"&userId=".concat(m):""),values:{today:(null==T?void 0:T.today)||0,week:(null==T?void 0:T.week)||0,month:(null==T?void 0:T.month)||0,threeMonth:(null==T?void 0:T.threeMonth)||0,year:(null==T?void 0:T.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Quotes not submitted",description:"Quotes that have not yet been submitted",name:"quotesNotSubmitted",to:"".concat(L,"/quotes?asAt=").concat(eb,"&tileName=quotesNotSubmitted").concat(m?"&userId=".concat(m):""),values:{today:(null==g?void 0:g.today)||0,week:(null==g?void 0:g.week)||0,month:(null==g?void 0:g.month)||0,threeMonth:(null==g?void 0:g.threeMonth)||0,year:(null==g?void 0:g.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,9],danger:[10,10],warning:[11,null]},title:"Work order value (MTD)",description:"Value of jobs completed in the month to date",name:"worksValueMTD",to:"".concat(L,"/issues?asAt=").concat(eb,"&tileName=worksValueMTD").concat(m?"&userId=".concat(m):""),values:{today:(null==z?void 0:z.today)||0,week:(null==z?void 0:z.week)||0,month:(null==z?void 0:z.month)||0,threeMonth:(null==z?void 0:z.threeMonth)||0,year:(null==z?void 0:z.year)||0},greaterIsBetter:!0,valueType:"price"},{type:"tile",size:[1,1],colourConfig:{success:[0,9],danger:[10,10],warning:[11,null]},title:"Work order value (YTD)",description:"Value of jobs completed in the year to date",name:"worksValueYTD",to:"".concat(L,"/issues?asAt=").concat(eb,"&tileName=worksValueYTD").concat(m?"&userId=".concat(m):""),values:{today:(null==R?void 0:R.today)||0,week:(null==R?void 0:R.week)||0,month:(null==R?void 0:R.month)||0,threeMonth:(null==R?void 0:R.threeMonth)||0,year:(null==R?void 0:R.year)||0},greaterIsBetter:!0,valueType:"price"},{type:"tile",size:[1,1],colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Threshold approvals outstanding",description:"Work orders and quotes where approval is required based on threshold levels",name:"thresholdApprovals",to:"".concat(L,"/issues?asAt=").concat(eb,"&tileName=thresholdApprovals").concat(m?"&userId=".concat(m):""),values:{today:(null==b?void 0:b.today)||0,week:(null==b?void 0:b.week)||0,month:(null==b?void 0:b.month)||0,threeMonth:(null==b?void 0:b.threeMonth)||0,year:(null==b?void 0:b.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Failed jobs",description:"Jobs where supplier has reported failures and these have not been resolved.",name:"failedJobs",to:"".concat(L,"/issues?asAt=").concat(eb,"&tileName=failedJobs").concat(m?"&userId=".concat(m):""),values:{today:(null==Y?void 0:Y.today)||0,week:(null==Y?void 0:Y.week)||0,month:(null==Y?void 0:Y.month)||0,threeMonth:(null==Y?void 0:Y.threeMonth)||0,year:(null==Y?void 0:Y.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Jobs with time not confirmed",description:"Scheduled jobs where an attendance time has not been specified by supplier.",name:"jobsWithTimeNotConfirmed",to:"".concat(L,"/issues?asAt=").concat(eb,"&tileName=jobsWithTimeNotConfirmed").concat(m?"&userId=".concat(m):""),values:{today:(null==H?void 0:H.today)||0,week:(null==H?void 0:H.week)||0,month:(null==H?void 0:H.month)||0,threeMonth:(null==H?void 0:H.threeMonth)||0,year:(null==H?void 0:H.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Jobs requiring expense amounts",description:"Jobs where expenses have amount expense pending.",name:"jobsRequiringExpenseAmount",to:"".concat(L,"/issues?asAt=").concat(eb,"&tileName=jobsRequiringExpenseAmount").concat(m?"&userId=".concat(m):""),values:{today:(null==G?void 0:G.today)||0,week:(null==G?void 0:G.week)||0,month:(null==G?void 0:G.month)||0,threeMonth:(null==G?void 0:G.threeMonth)||0,year:(null==G?void 0:G.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Imminent job SLA breaches",description:"These are jobs where there is a potential SLA breach in 1 hour or less.",name:"imminentJobSlaBreaches",to:"".concat(L,"/issues?asAt=").concat(eb,"&tileName=imminentJobSlaBreaches").concat(m?"&userId=".concat(m):"").concat(v?"&accountId=".concat(v):""),values:{today:(null==F?void 0:F.today)||0,week:(null==F?void 0:F.week)||0,month:(null==F?void 0:F.month)||0,threeMonth:(null==F?void 0:F.threeMonth)||0,year:(null==F?void 0:F.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Jobs with time not confirmed.",subtitle:"Current month",description:"Scheduled jobs that are due to be completed in the current calendar month but where no attendance time has been specified by the supplier.",name:"jobsWithTimeNotConfirmedCurrentMonth",to:"".concat(L,"/issues?asAt=").concat(eb,"&tileName=jobsWithTimeNotConfirmedCurrentMonth").concat(m?"&userId=".concat(m):"").concat(v?"&accountId=".concat(v):""),values:{today:(null==K?void 0:K.today)||0,week:(null==K?void 0:K.week)||0,month:(null==K?void 0:K.month)||0,threeMonth:(null==K?void 0:K.threeMonth)||0,year:(null==K?void 0:K.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Jobs with time not confirmed",subtitle:"Next 7 days",description:"Scheduled jobs that are due to be completed within the next 7 days but where no attendance time has been specified by the supplier.",name:"jobsWithTimeNotConfirmedNext7days",to:"".concat(L,"/issues?asAt=").concat(eb,"&tileName=jobsWithTimeNotConfirmedNext7days").concat(m?"&userId=".concat(m):"").concat(v?"&accountId=".concat(v):""),values:{today:(null==X?void 0:X.today)||0,week:(null==X?void 0:X.week)||0,month:(null==X?void 0:X.month)||0,threeMonth:(null==X?void 0:X.threeMonth)||0,year:(null==X?void 0:X.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,5],danger:[6,10],warning:[11,null]},title:"Open remedial quotes",description:"These are remedial quotes that have not yet been resolved -\n        for example, accepted or rejected by the customer or closed.",name:"openRemedialQuotes",to:"".concat(L,"/quotes?asAt=").concat(eb,"&tileName=openRemedialQuotes").concat(m?"&userId=".concat(m):"").concat(v?"&accountId=".concat(v):""),values:{today:(null==ee?void 0:ee.today)||0,week:(null==ee?void 0:ee.week)||0,month:(null==ee?void 0:ee.month)||0,threeMonth:(null==ee?void 0:ee.threeMonth)||0,year:(null==ee?void 0:ee.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,5],danger:[6,10],warning:[11,null]},title:"Open quotes",description:"These are quotes that have not yet been resolved -\n      for example, accepted or rejected by the customer or closed.",name:"openQuotes",to:"".concat(L,"/quotes?asAt=").concat(eb,"&tileName=openQuotes").concat(m?"&userId=".concat(m):"").concat(v?"&accountId=".concat(v):""),values:{today:(null==et?void 0:et.today)||0,week:(null==et?void 0:et.week)||0,month:(null==et?void 0:et.month)||0,threeMonth:(null==et?void 0:et.threeMonth)||0,year:(null==et?void 0:et.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Imminent quote SLA breaches",description:"These are quotes where there is a potential SLA breach in 1 day or less.",name:"imminentQuoteSlaBreaches",to:"".concat(L,"/quotes?asAt=").concat(eb,"&tileName=imminentQuoteSlaBreaches").concat(m?"&userId=".concat(m):"").concat(v?"&accountId=".concat(v):""),values:{today:(null==en?void 0:en.today)||0,week:(null==en?void 0:en.week)||0,month:(null==en?void 0:en.month)||0,threeMonth:(null==en?void 0:en.threeMonth)||0,year:(null==en?void 0:en.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"SLA breaches",subtitle:"Quotes - Quote return time",description:"These are quotes where the SLA was not returned within the relevant timeframe.",name:"quoteSlaBreached",to:"".concat(L,"/quotes?asAt=").concat(eb,"&tileName=quoteSlaBreached").concat(m?"&userId=".concat(m):"").concat(v?"&accountId=".concat(v):""),values:{today:(null==eo?void 0:eo.today)||0,week:(null==eo?void 0:eo.week)||0,month:(null==eo?void 0:eo.month)||0,threeMonth:(null==eo?void 0:eo.threeMonth)||0,year:(null==eo?void 0:eo.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"SLA breaches",subtitle:"Work orders - On site time",description:"These are jobs where the time taken for the engineer /\n       operative to arrive on site was beyond the relevant SLA. ",name:"jobSlaBreachedOnSite",to:"".concat(L,"/issues?asAt=").concat(eb,"&tileName=jobSlaBreachedOnSite").concat(m?"&userId=".concat(m):"").concat(v?"&accountId=".concat(v):""),values:{today:(null==ea?void 0:ea.today)||0,week:(null==ea?void 0:ea.week)||0,month:(null==ea?void 0:ea.month)||0,threeMonth:(null==ea?void 0:ea.threeMonth)||0,year:(null==ea?void 0:ea.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"SLA breaches",subtitle:"Work orders - Report submission time",description:"These are jobs where the time taken to submit the report\n        to the customer was more than the relevant SL.A.",name:"jobSlaBreachedJobReport",to:"".concat(L,"/issues?asAt=").concat(eb,"&tileName=jobSlaBreachedJobReport").concat(m?"&userId=".concat(m):"").concat(v?"&accountId=".concat(v):""),values:{today:(null==er?void 0:er.today)||0,week:(null==er?void 0:er.week)||0,month:(null==er?void 0:er.month)||0,threeMonth:(null==er?void 0:er.threeMonth)||0,year:(null==er?void 0:er.year)||0},greaterIsBetter:!0}],ef=eg.map(function(e){return e.name}),ew={success:[0,10],danger:[11,20],warning:[21,null]},eI=h.reduce(function(e,t){var n,o=t.colourConfig,a=t.pinned,r=t.greaterIsBetter,s=t.name,i=eg.find(function(e){return e.name===s});return i?[].concat((0,J.Z)(e),[P(P({},i),{},{pinned:null!==(n=null!=a?a:i.pinned)&&void 0!==n&&n,colourConfig:void 0===o?ew:o,greaterIsBetter:void 0===r||r})]):e},[]).sort(function(e,t){return ef.indexOf(e)-ef.indexOf(t)});return{fullTilesList:eg,userTilesList:eI}},$=n(86886),z=n(5616),R=n(98456),E=n(63871),W=n(57778),Q=n(57616),U=n(35441),V=n(97534),Y=n(69496),H=n(29422),G=n(30734);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach(function(t){(0,c.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var X=function(e){var t=e.groupName,n=e.time,o=e.asAt,a=null,r={};switch(t){case"jobsLocation":a=w;break;case"suppliersLocation":a=f}if("jobsLocation"===t)switch(r.Location={Addresses:{registered:{_eq:!0},entity:{_eq:"Location"},Address:{geo:{_is_null:!1}}}},n){case"today":r._and=[{timingStart:{_lte:o}},{timingStart:{_gte:(0,T.Z)(o)}}];break;case"tomorrow":r._and=[{timingStart:{_lte:(0,H.Z)(o,{days:1})}},{timingStart:{_gte:(0,H.Z)((0,T.Z)(o),{days:1})}}];break;case"nextWeek":r._and=[{timingStart:{_lte:(0,H.Z)(o,{weeks:1})}},{timingStart:{_gte:(0,H.Z)((0,T.Z)(o),{days:1})}}];break;case"nextTwoWeeks":r._and=[{timingStart:{_lte:(0,H.Z)(o,{weeks:2})}},{timingStart:{_gte:(0,H.Z)((0,T.Z)(o),{days:1})}}];break;case"nextMonth":r._and=[{timingStart:{_lte:(0,H.Z)(o,{months:1})}},{timingStart:{_gte:(0,H.Z)((0,T.Z)(o),{days:1})}}];break;case"week":r._and=[{timingStart:{_lte:o}},{timingStart:{_gte:(0,G.Z)(o,{weeks:1})}}];break;case"month":r._and=[{timingStart:{_lte:o}},{timingStart:{_gte:(0,G.Z)(o,{months:1})}}];break;case"threeMonth":r._and=[{timingStart:{_lte:o}},{timingStart:{_gte:(0,G.Z)(o,{months:3})}}]}else r.geo={_is_null:!1},"month"===n&&(r._and=[{createdAt:{_lte:o}},{createdAt:{_gte:(0,G.Z)(o,{months:1})}}]);return{query:a,variables:{where:r}}},ee=function(e){var t=e.state,n=e.data,o=e.groupName,a=e.time,r={};if("suppliersLocation"===o)r=K(K({},t[o]||{}),{},(0,c.Z)({},a,n[o].map(function(e){var t,n,o,a=e.id,r=e.geo;return{id:a,account:e.account,user:e.user,position:{lat:null===(t=r.coordinates)||void 0===t?void 0:t[1],lng:null===(n=r.coordinates)||void 0===n?void 0:n[0]}}})));else{var s=n[o].map(function(e){var t,n,o,a,r,s=e.id,i=e.number,l=e.type,c=e.location;return{id:s,number:i,type:l,location:c,supplier:e.supplier,service:e.service,position:{lat:null===(t=c.addresses[0].address.geo)||void 0===t?void 0:null===(n=t.coordinates)||void 0===n?void 0:n[1],lng:null===(o=c.addresses[0].address.geo)||void 0===o?void 0:null===(a=o.coordinates)||void 0===a?void 0:a[0]}}});r=K(K({},t[o]||{}),{},(0,c.Z)({},a,s))}return r},et=function(e){var t=e.prevData,n=e.data,o=e.type;return Object.keys(n).reduce(function(e,a){return K(K({},e),{},(0,c.Z)({},a,K(K({},(null==t?void 0:t[a])||{}),{},(0,c.Z)({},o,n[a]))))},{})},en=function(e){var t,n=e.name,o=e.asAt,r=e.userId,s=e.adminId,i=e.accountId,l=e.time,c=(0,b.Ps)(a||(a=(0,y.Z)(["\n  query GetDashboard(\n    $accountId: Int\n    $adminId: Int\n    $asAt: timestamptz\n    $monthStart: timestamptz\n    $dayStart: timestamptz\n    $userId: Int\n    $yearStart: timestamptz\n  ) {\n    ",": getDashboard_HomeTiles_","(\n      args: {\n        adminId: $adminId\n        asAt: $asAt\n        accountId: $accountId\n        monthStart: $monthStart\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n      }\n    ) {\n      sum\n    }\n  }\n"])),n,n),d=null;switch(l){case"week":d=(0,G.Z)(o,{weeks:1});break;case"month":d=(0,G.Z)(o,{months:1});break;case"threeMonth":d=(0,G.Z)(o,{months:3});break;case"year":d=(0,G.Z)(o,{years:1})}return{query:c,variables:{adminId:s,accountId:i,asAt:d,dayStart:(0,T.Z)(d),monthStart:(0,Z.Z)(d),userId:r,yearStart:(0,x.Z)(d)}}},eo=n(85893);function ea(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ea(Object(n),!0).forEach(function(t){(0,c.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ea(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var es=(0,j.Z)(new Date),ei=function(e){var t,n,o=e.user;e.theme;var a=(0,I.useRouter)(),r=(0,p.x)(),s=(0,h.useState)(!1),d=s[0],y=s[1],b=(0,h.useState)({}),f=b[0],w=b[1],M=(0,h.useState)(C),J=M[0],N=M[1],O=(0,h.useState)([]),B=O[0],A=O[1],q=(0,h.useState)([]),P=q[0],L=q[1],H=(0,h.useState)(a.query.asAt?(0,j.Z)((0,S.Z)(a.query.asAt)):es)[0],G=(0,h.useState)({monthStart:(0,Z.Z)(H),todayEnd:(0,j.Z)(H),todayStart:(0,T.Z)(H),yearStart:(0,x.Z)(H)})[0],F=(0,h.useState)(a.query.userId?a.query.userId:o.id)[0];(0,h.useEffect)(function(){"/dashboard"===k().pathname&&k().push({pathname:"/dashboard",query:er(er({},a.query),{},{asAt:(0,D.Z)(H,"yyyy-MM-dd"),userId:F})})},[H,F]);var K=(0,m.a)(Y.iM,{variables:{userId:o.id,accountId:o.accountId}}),ea=K.data,ei=K.refetch,eh=(null==ea?void 0:null===(t=ea.accountUser)||void 0===t?void 0:null===(n=t[0])||void 0===n?void 0:n.meta)||{},ep=(0,v.D)(Y.fA),em=(0,l.Z)(ep,1)[0];(0,h.useEffect)(function(){null!=eh&&eh.dashboard&&N(eh.dashboard)},[eh]),(0,h.useEffect)(function(){var e=_({asAt:H,dashboardTilesData:er({},f),userTiles:J,accountId:o.accountId,userId:F}),t=e.userTilesList,n=e.fullTilesList;L(t),A(n)},[f]);var ev,ey,eb,eg=(0,m.a)(g,{variables:{accountId:o.accountId,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,adminId:o.adminId,asAt:H,currentUserId:o.id,dayStart:G.todayStart,monthStart:G.monthStart,userId:F,yearStart:G.yearStart},onCompleted:function(e){w(function(t){return er(er(er(er({},t),et({prevData:t,data:e.dashboardTilesData[0],type:"today"})),{},{jobsOnThisMonth:e.chartJobsPerDay.jobsOnThisMonth},e.chartRevenuesPerDay[0]),e.chartRevenuesPerYear[0])}),eI()}}),ef=eg.loading,ew=eg.refetch,eI=(ev=(0,i.Z)(u().mark(function e(){var t,n;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(J.map(function(){var e=(0,i.Z)(u().mark(function e(t){var n,a,s,i,d,h,p,m,v;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!("tile"!==t.type)){e.next=3;break}return e.abrupt("return",{});case 3:return i=(s=en({name:n,asAt:H,adminId:o.adminId,accountId:o.accountId,userId:F,time:"week"})).query,d=s.variables,e.next=6,r.query({query:i,variables:d});case 6:return p=void 0===(p=e.sent.data)?(0,c.Z)({},n,[{sum:0}]):p,v=(0,l.Z)(p[n],1)[0].sum,e.abrupt("return",(0,c.Z)({},n,v||0));case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:n=(0,e.sent).reduce(function(e,t){return er(er({},e),t)},{}),w(function(e){return er(er({},e),et({prevData:e,data:n,type:"week"}))});case 5:case"end":return e.stop()}},e)})),function(){return ev.apply(this,arguments)}),ek=function(e){var t=e.tiles,n=e.skipRefetch,a=e.skipRefetchMeta;em({variables:{userId:o.id,accountId:o.accountId,changes:{meta:er(er({},eh),{},{dashboard:t})}}}).then(function(){n||ew(),a||ei()})},ej=function(e){ek({tiles:J.filter(function(t){return t.name!==e})})},eS=function(e,t){var n=J.map(function(n){return n.name===e?er(er({},n),{},{colourConfig:t}):n});ek({tiles:n,skipRefetch:!0})},eZ=(ey=(0,i.Z)(u().mark(function e(t,n){var a,s,i,d,h,p,m;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=(a=en({name:t,asAt:H,adminId:o.adminId,accountId:o.accountId,userId:F,time:n})).query,i=a.variables,e.next=3,r.query({query:s,variables:i});case 3:h=void 0===(h=e.sent.data)?(0,c.Z)({},t,[{sum:0}]):h,m=(0,l.Z)(h[t],1)[0].sum,w(function(e){return er(er({},e),{},(0,c.Z)({},t,er(er({},e[t]||{}),{},(0,c.Z)({},n,m||0))))});case 8:case"end":return e.stop()}},e)})),function(e,t){return ey.apply(this,arguments)}),eT=(eb=(0,i.Z)(u().mark(function e(t,n){var o,a,s,i,l;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=(o=X({groupName:t,time:n,asAt:H})).query,s=o.variables,e.next=3,r.query({query:a,variables:s});case 3:l=e.sent.data,w(function(e){return er(er({},e),{},(0,c.Z)({},t,ee({state:e,data:l,groupName:t,time:n})))});case 6:case"end":return e.stop()}},e)})),function(e,t){return eb.apply(this,arguments)}),ex=(0,h.useCallback)(function(){var e=[],t=[],n=[],o=[];if(P.forEach(function(e){"tile"===e.type&&e.pinned?t.push(e):"mapChart"===e.type||"chart"===e.type?n.push(e):o.push(e)}),t.length){var a=(0,eo.jsx)(ed,{container:!0,spacing:3,className:"firstBlock",children:t.map(function(e,t){var n=e.title,o=e.subtitle,a=e.name,r=e.description,s=e.colourConfig,i=e.values,l=e.valueType,c=e.size,d=e.to,u=e.greaterIsBetter;return(0,eo.jsx)(W.Z,{name:a,asAt:H,className:"firstBlockItem",xs:12,sm3:6,colourConfig:s,title:n,subtitle:o,description:r,to:d,values:i,valueType:l,size:c,greaterIsBetter:u,editable:!0,onEdit:function(){return y(!0)},onVersusChange:eZ,onConfigChange:eS})})});e.push(a)}if(n.length){var r=n.map(function(e){var t=e.type,n=e.title,o=e.description,a=e.name,r=e.values,s=e.size;return"chart"===t?(0,eo.jsx)($.ZP,{item:!0,className:"bigTile",children:(0,eo.jsx)(Q.Z,{asAt:H,title:n,description:o,showLegend:!0,name:a,data:r,size:s})}):"mapChart"===t?(0,eo.jsx)($.ZP,{item:!0,className:"bigTile",children:(0,eo.jsx)(U.Z,{asAt:H,title:n,description:o,showLegend:!0,name:a,data:r,size:s,onChangeChartGroup:eT})}):null});e.push(r)}if(n.length%2==0){var s=o.splice(0,4),i=(0,eo.jsx)(ed,{container:!0,spacing:3,className:"secondBlock",children:s.slice(0,4).map(function(e,t){var n=e.title,o=e.subtitle,a=e.name,r=e.description,i=e.colourConfig,l=e.values,c=e.valueType,d=e.size,u=e.to,h=e.greaterIsBetter;return(0,eo.jsx)(W.Z,{name:a,asAt:H,className:"secondBlockItem",sm:12,lg:6,xl:t===s.length-4?12:4,colourConfig:i,title:n,subtitle:o,description:r,to:u,values:l,valueType:c,size:d,greaterIsBetter:h,onVersusChange:eZ,onConfigChange:eS})})});e.push(i)}var l=o.map(function(e){var t=e.name,n=e.title,o=e.subtitle,a=e.description,r=e.colourConfig,s=e.values,i=e.valueType,l=e.size,c=e.to,d=e.greaterIsBetter;return(0,eo.jsx)(W.Z,{asAt:H,xs:12,sm3:6,xl:3,className:"restTilesBoxItem",colourConfig:r,name:t,title:n,subtitle:o,description:a,to:c,values:s,valueType:i,size:l,greaterIsBetter:d,editable:!0,onEdit:function(){return y(!0)},deletable:!0,onDelete:ej,onVersusChange:eZ,onConfigChange:eS})});B.length>P.length&&l.push((0,eo.jsx)(E.Z,{width:"100%",xs:12,sm3:6,xl:3,onAddCard:function(){return y(!0)}}));var c=(0,eo.jsx)(eu,{container:!0,spacing:3,m:0,sx:{justifyContent:"flex-start"},children:l});return e.push(c),(0,eo.jsx)(ec,{container:!0,spacing:3,children:e})},[P]);return(0,eo.jsxs)(z.Z,{sx:{width:"100%",height:"100%"},children:[(0,eo.jsx)(el,{children:ef?(0,eo.jsx)(z.Z,{sx:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,eo.jsx)(R.Z,{})}):ex()}),(0,eo.jsx)(V.Z,{open:d,fullTilesList:B,selectedTiles:J,onSaveTilesList:function(e){return ek({tiles:e})},onClose:function(){return y(!1)}})]})},el=(0,M.ZP)(z.Z).withConfig({displayName:"dashboard__DashboardBox",componentId:"sc-1tcfnml-0"})(["width:100%;height:100%;.firstBlock{margin:0;flex-basis:50% !important;max-width:50% !important;min-width:auto;}.firstBlockItem{padding-left:24px;padding-top:24px;}.bigTile{flex-basis:50% !important;max-width:50%;}.secondBlock{margin:0;flex-basis:50% !important;min-width:auto;}.secondBlockItem{flex-basis:50% !important;max-width:50% !important;padding-left:24px;padding-top:24px;}@media (max-width:1550px){.firstBlock{margin:0;flex-basis:100% !important;max-width:100% !important;}.bigTile{flex-basis:100% !important;max-width:100%;}.secondBlock{flex-basis:100% !important;}.restTilesBoxItem{flex-basis:100% !important;}}@media (max-width:800px){.secondBlock{flex-basis:100% !important;}.secondBlockItem{flex-basis:100% !important;max-width:100% !important;}"]),ec=(0,M.ZP)($.ZP).withConfig({displayName:"dashboard__SecondRowBox",componentId:"sc-1tcfnml-1"})(["align-content:flex-start;height:auto;min-height:400px;justify-content:space-between;"]),ed=(0,M.ZP)($.ZP).withConfig({displayName:"dashboard__FirstBox",componentId:"sc-1tcfnml-2"})(["display:flex;flex-wrap:wrap;min-width:824px;justify-content:space-between;align-content:space-between;"]),eu=(0,M.ZP)($.ZP).withConfig({displayName:"dashboard__RestTilesBox",componentId:"sc-1tcfnml-3"})(["justify-content:space-between;"]),eh=(0,M.Zz)(ei)}}]);